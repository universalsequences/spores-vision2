{"version":3,"sources":["discogs/Discogs.js","components/SampledSound.js","components/SoundTagger.js","decentralized/chords/NoteSequencePublisher.js","components/discover/YoutubeSampler.js","components/discover/constants.js","search/SoundsTags.js","components/discover/Discover.js"],"names":["apiToken","axios","require","Discogs","Object","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","titleToLabels","nameToLabelInfo","nameToLabel","idToReleases","title","_this","Promise","resolve","reject","undefined","searchYoutubeTitle","then","result","data","label","map","getLabelInfo","ret","labelData","id","name","images","uri","push","length","catch","err","discogsId","url","get","results","recordName","console","log","split","join","labelName","callback","_this2","query","searchLabel","labelId","page","_this3","youtubeTitle","searchObject","string","partsCallback","artist","credits","escapeRegExp","str","replace","baddies","forEach","token","trim","toUpperCase","toLowerCase","parts","i","indexOf","splice","baddy","RegExp","creditMap","credit","keys","parseTitleString","earliestResult","year","includes","audioCtx","window","AudioContext","webkitAudioContext","SampledSound","props","_super","call","state","soundId","audioUnit","AudioUnit","loadBuffer","bind","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_2__","handleLoadBuffer","nextProps","sample","Sample","encryptedIpfs","videoId","getId","fetchAudio","setBuffer","audioBuffer","buffer","setState","self","react__WEBPACK_IMPORTED_MODULE_6___default","a","createElement","className","isSelected","components_Waveform_js__WEBPACK_IMPORTED_MODULE_8__","selections","store","onClickSelection","height","width","onSelection","start","end","waveformId","components_Youtube_js__WEBPACK_IMPORTED_MODULE_11__","onClickThumbnail","coverArt","isMuted","onNewSound","onClick","onDelete","tags","tag","reactstrap__WEBPACK_IMPORTED_MODULE_12__","onDeleteTag","color","Component","SoundTagger","_tag","addListener","addEventListener","input","document","activeElement","focus","onUpdateTags","value","e","key","addTag","react__WEBPACK_IMPORTED_MODULE_7___default","soundUploadMode","onClickBack","reactstrap__WEBPACK_IMPORTED_MODULE_8__","type","ref","autoFocus","onKeyPress","onChange","event","onInputType","target","placeholder","addonType","NoteSequencesContract","YoutubeSampler","classCallCheck","sampling","dropdownOpen","recordingSetup","startTime","endTime","stream","assertThisInitialized","soundUploader","SoundUploader","ipfsHash","onSoundUploaded","setupRecording","playOutputRecording","connect","audioContext","destination","disconnect","startUserMedia","createMediaStreamSource","channelCount","recorder","Recorder","numChannels","bufferLen","navigator","getUserMedia","webkitGetUserMedia","URL","webkitURL","Tone","Master","context","StartAudioContext","youtubePlayer","getCurrentTime","record","stop","currentTime","setTimeout","getBuffer","blob","saveBuffer","_callee","thumbnailUrl","regenerator_default","wrap","_context","prev","next","uploadBufferToIpfs","sent","selectedRecord","thumb","responseType","ipfs","addBlob","coverHash","onCoverDownloaded","clear","dispatchEvent","Event","preventDefault","seekTo","qualities","getAvailableQualityLevels","setPlaybackQuality","_this4","styles","country","yeaer","sampleSource","style","react_default","ConditionedComponent","condition","index_esm","opts","playerVars","autoplay","onStateChange","checkQuality","onReady","_onReady","src","cover_image","onClickSampleButton","rewind","fastForward","onClickTag","reactstrap_es","show","isOpen","toggle","toggleDropdown","getRelatedVideos","size","caret","getRecordLabels","onClickRandomVideo","React","discover","SoundsTags","post","YOUTUBE","Discover","_this$state","ethereumCache","EthereumCache","ethereum","accounts","setStore","setEthereum","checkLogin","guilds","initGuilds","soundIds","selectedSoundIds","soundIdToHash","hashToSoundId","tagMode","soundIdToTags","hashToStyles","defineProperty","onVideoIdChanged","discogs","soundsTags","crypto","contentKey","ContentKey","EncryptedIpfs","encryption","sampleHash","hashToCoverArt","objectSpread","deviceId","returnValue","syncedToEthereum","hashToVideoTitle","hashToCountry","hashToYear","hashToDiscogsId","hashToVideoId","getYoutubeTitle","loadDiscogsResults","minYear","Math","min","apply","x","filter","index","history","videos","randomVideo","floor","random","dimension","loadVideo","_callee2","promises","samples","hash","_i","hashToSave","sound","guildId","_hash","_context2","t0","t1","done","slice","selectedGuild","getSound","addSound","GUILD","newEncryptedSamples","newSamplesWithMetadata","all","PasswordModal","LoginModal","showLogin","UniversalNavigator","view","GuildsMenu","syncToEthereum","TransactionsView","SampleSource","onChooseAudio","onSampleSourceChange","discover_YoutubeSampler","onCoverArtDownloaded","startTagging","deleteSound","selectSound","deleteTag","tagSound","backToSearch","InternetNavigatorPane","onClickResult","sequencer"],"mappings":"8GAAIA,EAAW,2CACXC,EAAQC,EAAQ,KAEdC,aAEF,SAAAA,IAAeC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GACXG,KAAKC,cAAgB,GACrBD,KAAKE,gBAAkB,GACvBF,KAAKG,YAAc,GACnBH,KAAKI,aAAe,gDAGxB,SAAUC,GAAO,IAAAC,EAAAN,KACb,OAAO,IAAIO,QAAQ,SAACC,EAASC,QACSC,IAA9BJ,EAAKL,cAAcI,GAKvBC,EAAKK,mBAAmBN,GACnBO,KAAK,SAACC,GAEP,IAAIC,EAAO,GACI,OAAXD,QAAoCH,IAAjBG,EAAOE,OAC1BP,EAAQM,GAEZD,EAAOE,MAAMC,IAAI,SAACD,GAAD,OAAWT,EAAKW,aAAaF,EAAO,SAACG,GAClD,GAAY,OAARA,EAAJ,CAIA,IAAIC,EAAY,CACZC,GAAIF,EAAIE,GACRC,KAAMH,EAAIG,MACV,WAAYH,IACZC,EAAS,UAAgBD,EAAII,OAAO,GAAGC,KAE3CT,EAAKU,KAAKL,GAEVb,EAAKL,cAAcI,GAASS,EACxBA,EAAKW,QAAUZ,EAAOE,MAAMU,QAC5BjB,EAAQM,QAbRN,EAAQM,SAkBfY,MAAM,SAAAC,GACHlB,EAAOkB,KAhCXnB,EAAQF,EAAKL,cAAcI,oCAqCvC,SAAeuB,GACX,OAAO,IAAIrB,QAAQ,SAACC,EAASC,GACzB,IAAIoB,EAAM,oCAAsCD,EACpDjC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAiBR,IAAbQ,EAAIJ,KAAoB,CACxB,IAAIiB,EAAUb,EAAIJ,KAClBN,EAAQuB,QAERvB,OAAQE,oCAMxB,SAAcsB,GACV,OAAO,IAAIzB,QAAQ,SAACC,EAASC,GACzBwB,QAAQC,IAAI,mBAAoBF,GAChC,IACIH,EAAM,6CADEG,EAAWG,MAAM,OAAOC,KAAK,KACwB,uBAAyB1C,EAC9FC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAyBR,IAArBQ,EAAIJ,KAAKiB,QAAuB,CAChC,IAAIA,EAAUb,EAAIJ,KAAKiB,QACvBvB,EAAQuB,QAERvB,EAAQ,mCAMxB,SAAY6B,EAAWC,GAAU,IAAAC,EAAAvC,KAC7B,QAAoCU,IAAhCV,KAAKG,YAAYkC,GACjB,OAAOC,EAAStC,KAAKG,YAAYkC,IAErC,IAAIG,EAAQH,EAERR,EAAM,8CADVW,EAAQA,EAAML,MAAM,OAAOC,KAAK,MACiC,qBAAuB1C,EACxFC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAyBR,IAArBQ,EAAIJ,KAAKiB,QAAuB,CAChC,IAAIlB,EAASK,EAAIJ,KAAKiB,QAAQ,GAC9BQ,EAAKpC,YAAYkC,GAAaxB,EAC9ByB,EAASzB,kCAMzB,SAAawB,EAAWC,GACpBtC,KAAKyC,YAAYJ,EAAW,SAAUxB,GAClC,IACIgB,EAAM,kCADIhB,EAAOO,GACmC,UAAY1B,EACpEC,EAAMmC,IAAID,GACLjB,KAAK,SAAUM,GACZoB,EAASpB,EAAIJ,QAEhBY,MAAM,SAAUC,GACbW,EAAS,0CAMzB,SAAiBI,EAASC,GAAM,IAAAC,EAAA5C,KAC5B,OAAO,IAAIO,QAAQ,SAACC,EAASC,GACzB,QAAgDC,IAA5CkC,EAAKxC,aAAasC,EAAU,IAAMC,GAAtC,CAIA,IAAId,EAAM,kCAAoCa,EAC9C,mBAAqBhD,EAAW,SAAWiD,EAAO,cAClDhD,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH0B,EAAKxC,aAAasC,EAAU,IAAMC,GAAQzB,EAAIJ,KAC9CN,EAAQU,EAAIJ,QAEfY,MAAM,SAAUC,GACblB,EAAOkB,UAXXnB,EAAQoC,EAAKxC,aAAasC,EAAU,IAAMC,wCAgBtD,SAAmBE,GACf,OAAO,IAAItC,QAAQ,SAACC,EAASC,GACzB,IAAIqC,EAqChB,SAA0BC,EAAQC,GAChC,IAAIC,EAAQ5C,EAAO6C,EAAU,GACzBH,EAASA,GAAU,GAEvB,SAASI,EAAaC,GACpB,OAAOA,EAAIC,QAAQ,sCAAuC,QAI1D,IAAIC,EAAU,CAAC,aAAc,aAAc,KAAM,YAAa,eAAgB,YAAa,QAAS,gBACpG,eAAgB,UAAW,mBAAoB,mBAC/C,yBAA0B,WAC1B,qBAAsB,yBAA0B,kBAChD,YAAa,YAAa,gBAAiB,8BAC3C,gBAAiB,gBAAiB,OAAQ,OAAQ,OAAQ,OAC1D,iBAAkB,iBAAkB,WAAY,SAAU,SAC1D,uBAAwB,uBAAwB,eAChD,qBAAsB,sBAAuB,gBAC7C,mBAAoB,6BACtBA,EAAQC,QAAQ,SAASC,GAOvBT,GADAA,GADAA,GAFAA,GADAA,GADAA,EAASA,EAAOM,QAAQG,EAAQ,MAAO,IAAIC,QAC3BJ,QAAQG,EAAME,cAAgB,MAAO,IAAID,QACzCJ,QAAQG,EAAMG,cAAgB,MAAO,IAAIF,QAEzCJ,QAAQG,EAAO,IAAIC,QACnBJ,QAAQG,EAAME,cAAe,IAAID,QACjCJ,QAAQG,EAAMG,cAAe,IAAIF,SASnD,IAFA,IAAIG,GAHFb,GADAA,EAASA,EAAOM,QAAQ,iBAAkB,IAAII,QAC9BJ,QAAQ,iBAAkB,IAAII,QAG7BtB,MAAO,OAEjB0B,EAAI,EAAGA,EAAID,EAAMnC,OAAQoC,IAC3BP,EAAQQ,QAASF,EAAMC,GAAGF,gBAAmB,GAChDC,EAAMG,OAAQF,EAAI,GAIF,GAAhBD,EAAMnC,QACRwB,EAASW,EAAM,GACfvD,EAAQuD,EAAM,IACLA,EAAMnC,OAAS,GAExBwB,EAASW,EAAM,GACfvD,EAAQuD,EAAM,KAEdX,EAASW,EAAM,GACfvD,EAAQuD,EAAM,IAKhBN,EAAQC,QAAQ,SAASS,GACvB3D,EAASA,EAAMgD,QAAS,IAAIY,OAAQd,EAAaa,GAAS,KAAO,IAAIP,OACrER,EAASA,EAAOI,QAAS,IAAIY,OAAQd,EAAaa,GAAS,KAAO,IAAIP,SAIxEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,sBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,uBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,yBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,2BAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,uBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,yBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,2BAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,gBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,gBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,eAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,eAA6B,MAAMI,QAEhE,IAAIS,EAAY,GAad,OAZFhB,EAAQK,QAAQ,SAASY,GACnBA,IAAW9D,IACb6D,EAAWC,GAAWA,KAIb,CACTlB,OAAQA,EACR5C,MAAOA,EACP6C,QAASpD,OAAOsE,KAAKF,IAtIIG,CAAiBxB,GAChCL,EAAQM,EAAaG,OAAS,MAAQH,EAAazC,MAEnDwB,EAAM,8CADVW,EAAQA,EAAML,MAAM,OAAOC,KAAK,MACiC,UAAY1C,EAC7EC,EAAMmC,IAAID,GACLjB,KAAK,SAAUM,GACZ,IAAIa,EAAUb,EAAIJ,KAAKiB,QACnBuC,EAAiB,KACrB,IAAK,IAAIT,KAAK9B,GACa,MAAlBuC,GACCvC,EAAQ8B,GAAGU,KAAOD,EAAeC,OACnCxC,EAAQ8B,GAAGxD,MAAMmE,SAAS1B,EAAazC,SAEvCiE,EAAiBvC,EAAQ8B,IAGjC,GAAsB,MAAlBS,EAEA,IAAK,IAAIT,KAAK9B,EACV,OAAOvB,EAAQuB,EAAQ8B,IAG/BrD,EAAQ8D,KAEX5C,MAAM,SAAUC,GACblB,EAAOkB,gBAmHZ9B,0mBC3Pf,IACI4E,EAAW,IADIC,OAAOC,cAAgBD,OAAOE,oBAG3CC,0CACF,SAAAA,EAAYC,GAAO,IAAAxE,EAAA,OAAAR,OAAAC,EAAA,EAAAD,CAAAE,KAAA6E,IACfvE,EAAAyE,EAAAC,KAAAhF,KAAM8E,IACDG,MAAQ,CACTC,QAASJ,EAAMI,SAEnB5E,EAAK6E,UAAY,IAAIC,IAAUX,GAC/BnE,EAAK+E,WAAWC,KAAhBxF,OAAAyF,EAAA,EAAAzF,CAAAQ,IACAA,EAAKkF,iBAAiBF,KAAtBxF,OAAAyF,EAAA,EAAAzF,CAAAQ,IACAA,EAAK+E,aARU/E,2DAWnB,SAAsBmF,GAMlB,OALIA,EAAUP,UAAYlF,KAAKiF,MAAMC,UACjClF,KAAKiF,MAAMC,QAAUO,EAAUP,QAC/BlF,KAAKqF,eAGF,4BAGX,WAAa,IAAA9C,EAAAvC,KAETiC,QAAQC,IAAI,4BAA6BlC,KAAK8E,MAAMI,SACpDlF,KAAK0F,OAAS,IAAIC,IAAO3F,KAAK8E,MAAMI,QAASlF,KAAK8E,MAAMc,eACxD5F,KAAK0F,OAAOrE,KAAOrB,KAAK8E,MAAMzE,MAC9BL,KAAK0F,OAAOG,QAAU7F,KAAK8E,MAAMe,QACjC7F,KAAKiF,MAAM5D,KAAOrB,KAAK8E,MAAMzE,MAC7BL,KAAKiF,MAAMY,QAAU7F,KAAK8E,MAAMe,QAChC5D,QAAQC,IAAI,8BAAgClC,KAAK0F,OAAOI,SACxD9F,KAAK0F,OAAOK,aACPnF,KAAK,SAAC8E,GACHnD,EAAK4C,UAAUa,UAAUN,EAAOO,aAChC1D,EAAK0C,MAAMiB,OAASR,EAAOO,YAC3B1D,EAAK4D,SAAS5D,EAAK0C,yCAI/B,SAAiBmB,EAAMF,GACnB,IAAIjB,EAAQmB,EAAKnB,MACjBA,EAAK,OAAaiB,EAClBE,EAAKD,SAASlB,yBAGlB,WAAS,IAAArC,EAAA5C,KAEL,YAAyBU,GAArBV,KAAKiF,MAAMiB,OAEPG,EAAAC,EAAAC,cAAA,OAAKC,UAAWxG,KAAK8E,MAAM2B,WAAa,qBAAuB,aAC3DJ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAACG,EAAA,EAAD,CAAUC,WAAY,GACZjB,OAAQ1F,KAAK0F,OACbkB,MAAO5G,KAAK8E,MAAM8B,MAClBV,OAAQlG,KAAKmF,UAAUe,OACvBW,iBAAkB,SAACzF,EAAI8E,GAAL,MAAgB,IAC1CY,OAAQ,GACRC,MAAO,IACPC,YAAa,SAACC,EAAOC,GAAR,MAAgB,IAC7B/B,UAAWnF,KAAKmF,UAChBgC,WAAY,IACdd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACTH,EAAAC,EAAAC,cAACa,EAAA,EAAD,CAAaC,iBAAkB,kBAAMzE,EAAKkC,MAAMuC,iBAAiBzE,EAAKqC,MAAMC,UAC1EoC,SAAUtH,KAAK8E,MAAMwC,SACjB5B,OAAQ1F,KAAK0F,OACbrE,KAAMrB,KAAK8E,MAAMzE,MACjBkH,SAAS,EACTrC,QAASlF,KAAKiF,MAAMC,QACpBsC,WAAYxH,KAAK8E,MAAM0C,WACvB3B,QAAS7F,KAAKiF,MAAMY,WAGhCQ,EAAAC,EAAAC,cAAA,OACEkB,QAASzH,KAAK8E,MAAM4C,SACpBlB,UAAU,iBAFZ,MAIkB,MAAnBxG,KAAK8E,MAAM6C,KAAe3H,KAAK8E,MAAM6C,KAAK3G,IAAI,SAAC4G,GAAD,OAC7CvB,EAAAC,EAAAC,cAACsB,EAAA,EAAD,CACEJ,QAAS,kBAAM7E,EAAKkC,MAAMgD,YAAYF,IACtCG,MAAM,SAASH,KAAgB,IAInCvB,EAAAC,EAAAC,cAAA,mBAlFOyB,aAuFZnD,ikBChHToD,0CACF,SAAAA,EAAYnD,GAAO,IAAAxE,EAAA,OAAAR,OAAAC,EAAA,EAAAD,CAAAE,KAAAiI,IACf3H,EAAAyE,EAAAC,KAAAhF,KAAM8E,IACDG,MAAQ,CACT0C,KAAM,IAEVrH,EAAK4H,KAAO,GAEZ5H,EAAK6H,cAPU7H,iDAUnB,WAAc,IAAAiC,EAAAvC,KACV0E,OAAO0D,iBAAiB,iBAAkB,WAClC7F,EAAK8F,OACD9F,EAAK8F,QAAUC,SAASC,eACxBhG,EAAK8F,MAAMG,gCAM3B,WACIxI,KAAKiF,MAAM0C,KAAKnG,KAAKxB,KAAKkI,MACflI,KACN8E,MAAM2D,aAAazI,KAAKkI,MAC7BlI,KAAKkI,KAAO,GACZlI,KAAKmG,SAASnG,KAAKiF,kCAGvB,SAAYyD,GACR1I,KAAKkI,KAAOQ,EACZ1I,KAAKmG,SAASnG,KAAKiF,iCAGvB,SAAW0D,GACO,UAAVA,EAAEC,KACF5I,KAAK6I,+BAIb,WAAS,IAAAjG,EAAA5C,KACL,OAAQ8I,EAAAxC,EAAAC,cAAA,OAAKC,UAAU,cACdxG,KAAK8E,MAAMiE,gBAAkB,GAAKD,EAAAxC,EAAAC,cAAA,OAAKkB,QAASzH,KAAK8E,MAAMkE,YAAaxC,UAAU,mCAAhD,kBACnCsC,EAAAxC,EAAAC,cAAA,OAAKC,UAAU,QACZsC,EAAAxC,EAAAC,cAAC0C,EAAA,EAAD,KACHH,EAAAxC,EAAAC,cAAA,WACAuC,EAAAxC,EAAAC,cAAA,SACA2C,KAAK,OACLC,IAAK,SAACd,GAAD,OAAWzF,EAAKyF,MAAQA,GAC7Be,WAAS,EAACC,WAAY,SAACV,GAAD,OAAO/F,EAAKyG,WAAWV,IAAID,MAAO1I,KAAKkI,KAAM9G,GAAG,eAAekI,SAAU,SAACC,GAAD,OAAW3G,EAAK4G,YAAYD,EAAME,OAAOf,QAAQgB,YAAY,iBAAiBlD,UAAU,wBAE/KsC,EAAAxC,EAAAC,cAAC0C,EAAA,EAAD,CAAiBU,UAAU,UAC3Bb,EAAAxC,EAAAC,cAAC0C,EAAA,EAAD,CAAQxB,QAAS,kBAAM7E,EAAKiG,UAAUd,MAAM,aAA5C,kBApDEC,aA6DXC,qWC9DA,YAAI2B,kkBCcbC,0CACF,SAAAA,EAAY/E,GAAO,IAAAxE,EAAAR,OAAAgK,EAAA,EAAAhK,CAAAE,KAAA6J,IACfvJ,EAAAyE,EAAAC,KAAAhF,KAAM8E,IACDG,MAAQ,CACT8E,UAAW,EACXC,cAAc,EACdC,gBAAiB,EACjBpE,QAASf,EAAMe,QACfqE,UAAW,KACXC,QAAS,KACTC,YAAQ1J,GAEJZ,OAAAuK,EAAA,EAAAvK,CAAAQ,GAXO,OAYfA,EAAKgK,cAAgB,IAAIC,IACrB,EAAG,SAACrF,EAASsF,GAAV,OAAuBlK,EAAKwE,MAAM2F,gBAAgBD,EAAUA,KACnElK,EAAKoK,iBAdUpK,oDAiBnB,WACIN,KAAKmG,SAAS,CAAC6D,cAAehK,KAAKiF,MAAM+E,oDAG7C,SAAsBvE,GAclB,OAbIzF,KAAK8E,MAAM6F,qBAAuBlF,EAAUkF,sBACxClF,EAAUkF,oBACV3K,KAAKqI,MAAMuC,QAAQ5K,KAAK6K,aAAaC,aAErC9K,KAAKqI,MAAM0C,WAAW/K,KAAK6K,aAAaC,cAI5CrF,EAAU2E,SAAWpK,KAAKiF,MAAMmF,SAChCpK,KAAKiF,MAAMmF,OAAS3E,EAAU2E,OAC9BpK,KAAKgL,eAAehL,KAAKiF,MAAMmF,UAG5B,gCAIX,SAAeA,GACXnI,QAAQC,IAAI,uBACZD,QAAQC,IAAIkI,GACZpK,KAAKqI,MAAQrI,KAAK6K,aAAaI,wBAAwBb,GACvDpK,KAAKqI,MAAM6C,aAAe,EAG1BlL,KAAKmL,SAAW,IAAIzG,OAAO0G,SAASpL,KAAKqI,MAAO,CAACgD,YAAa,EAAGC,UAAU,OACvEtL,KAAK8E,MAAM6F,qBACX3K,KAAKqI,MAAMuC,QAAQ5K,KAAK6K,aAAaC,aAEzC9K,KAAKiF,MAAMgF,gBAAiB,EAC5BjK,KAAKmG,SAASnG,KAAKiF,qCAGvB,WACI,IAEIP,OAAOC,aAAeD,OAAOC,cAAgBD,OAAOE,mBACpD2G,UAAUC,aAAeD,UAAUC,cAAgBD,UAAUE,mBAC7D/G,OAAOgH,IAAMhH,OAAOgH,KAAOhH,OAAOiH,UAElC3L,KAAK6K,aAAee,IAAKC,OAAOC,QAEhCC,IAAkB/L,KAAK6K,aAAc,eACvC,MAAOlC,GACL1G,QAAQC,IAAI,6EAIpB,WAAsB,IAAAK,EAAAvC,KAClBA,KAAKiF,MAAM8E,UAAY/J,KAAKiF,MAAM8E,SAC9B/J,KAAKiF,MAAM8E,UACX/J,KAAKiF,MAAMiF,UAAYlK,KAAKgM,cAAcC,iBAC1ChK,QAAQC,IAAI,qBACZlC,KAAKmL,SAASe,WAEdlM,KAAKmL,SAASgB,KAAKP,IAAKC,OAAOC,QAAQM,YAAc,KACrDC,WAAW,WACP9J,EAAK0C,MAAMkF,QAAU5H,EAAKyJ,cAAcC,iBACxC1J,EAAK4I,SAASmB,UAAU,SAACC,GAAD,OAAUhK,EAAKiK,WAAWD,MACnD,CAAC,OAERvM,KAAKmG,SAASnG,KAAKiF,uEAGvB,SAAAwH,EAAiBF,GAAjB,IAAA/B,EAAAkC,EAAA9J,EAAA5C,KAAA,OAAA2M,EAAArG,EAAAsG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACI9K,QAAQC,IAAI,6BAA8BqK,GAD9CM,EAAAE,KAAA,EAEyB/M,KAAKsK,cAAc0C,mBACpCT,GAAM,GAHd,OAEQ/B,EAFRqC,EAAAI,KAMQjN,KAAK8E,MAAMoI,iBACPR,EAAe1M,KAAK8E,MAAMoI,eAAeC,MAE7CxN,IAAMmC,IAAI,uCAAyC4K,EACzC,CACIU,aAAc,SAEvBxM,KAAK,SAAAC,GACF,IAAI0L,EAAO1L,EAAOC,KAClBuM,IAAKC,QAAQf,GAAM3L,KAAK,SAAA2M,GAAS,OAC7B3K,EAAKkC,MAAM0I,kBAAkBhD,EAAU+C,QAIvDvN,KAAKmL,SAASsC,QApBlB,wBAAAZ,EAAAV,SAAAM,EAAAzM,8FAuBA,WACIiC,QAAQC,IAAI,uCACZwC,OAAOgJ,cAAc,IAAIC,MAAM,sDAGnC,WACIjJ,OAAOgJ,cAAc,IAAIC,MAAM,iDAGnC,SAAYhF,GACRA,EAAEiF,iBACF5N,KAAKgM,cAAc6B,OAAO7N,KAAKgM,cAAcC,iBAAmB,yBAGpE,SAAOtD,GACHA,EAAEiF,iBACF5N,KAAKgM,cAAc6B,OAAO7N,KAAKgM,cAAcC,iBAAmB,+BAGpE,WACI,IAAI6B,EAAY9N,KAAKgM,cAAc+B,4BACnC/N,KAAKgM,cAAcgC,mBAAmBF,EAAU,0BAGpD,WAAS,IAAAG,EAAAjO,KACLiC,QAAQC,IAAI,sBACZD,QAAQC,IAAIlC,KAAK8E,MAAMoI,gBACvB,IAQIgB,EAASlO,KAAK8E,MAAMoJ,OACpBC,EAAUnO,KAAK8E,MAAMqJ,QACrB5J,EAAOvE,KAAK8E,MAAMsJ,MAQtB,MC3Ka,UDoKTpO,KAAK8E,MAAMuJ,cACXrO,KAAK8E,MAAMoI,iBACXgB,EAASlO,KAAK8E,MAAMoI,eAAeoB,MACnCH,EAAUnO,KAAK8E,MAAMoI,eAAeiB,QACpC5J,EAAOvE,KAAK8E,MAAMoI,eAAe3I,MAIjCgK,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,mBACb+H,EAAAjI,EAAAC,cAAA,QAAMC,UAAU,gBAChB+H,EAAAjI,EAAAC,cAACiI,EAAA,EAAD,CAAsBC,UC/Kb,YD+KwBzO,KAAK8E,MAAMuJ,cAC1CE,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,4BACb+H,EAAAjI,EAAAC,cAACmI,EAAA,EAAD,CACE7I,QAAS7F,KAAK8E,MAAMe,QACpB8I,KAzBC,CACT7H,OAAQ,MACRC,MAAO,MACP6H,WAAY,CACRC,SAAU,IAsBNC,cAAe,SAACnG,GAAD,OAAOsF,EAAKc,gBAC3BC,QAAS,SAACrG,GAAD,OAAOsF,EAAKgB,SAAStG,QAIpC4F,EAAAjI,EAAAC,cAACiI,EAAA,EAAD,CAAsBC,UCxLf,UDwL0BzO,KAAK8E,MAAMuJ,cAC1CE,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,YAAY0I,IAAKlP,KAAK8E,MAAMoI,eAAiBlN,KAAK8E,MAAMoI,eAAeiC,YAAc,MAErGZ,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,yBAEhB+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,2BACb+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,kBACdxG,KAAKiF,MAAMgF,eACRsE,EAAAjI,EAAAC,cAAA,QAAMkB,QAAS,kBAAMwG,EAAKmB,uBACpB5I,UAAWxG,KAAKiF,MAAM8E,SAAW,0BAA4B,iBAChE/J,KAAKiF,MAAM8E,SAAW,YAAc,UAEzC,mBAEFwE,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,kBACb+H,EAAAjI,EAAAC,cAAA,QAAMkB,QAAS,SAACkB,GAAD,OAAOsF,EAAKoB,OAAO1G,IAAInC,UAAU,4BAAhD,SAEF+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,kBACb+H,EAAAjI,EAAAC,cAAA,QAAMkB,QAAS,SAACkB,GAAD,OAAOsF,EAAKqB,YAAY3G,IAAInC,UAAU,4BAArD,SAEF+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,kBACb+H,EAAAjI,EAAAC,cAAA,QAAMkB,QAASzH,KAAK8E,MAAMyK,WAAY/I,UAAU,iCAAhD,QAEF+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,eACb+H,EAAAjI,EAAAC,cAACiI,EAAA,EAAD,CAAsBC,UCjNjB,YDiN4BzO,KAAK8E,MAAMuJ,cAC9CE,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CACeC,KAAMzP,KAAKiF,MAAM+E,aACjB0F,OAAQ1P,KAAKiF,MAAM+E,aACnB2F,OAAQ,kBAAM1B,EAAK2B,mBACfrB,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CACM/H,QAAS,kBAAMwG,EAAK4B,oBACpBzO,GAAG,QAAQ2G,MAAM,aAAYwG,EAAAjI,EAAAC,cAAA,QAAMC,UAAU,IAAhB,YACvC+H,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CAAgBM,KAAK,KAAKC,OAAK,EAAChI,MAAM,cAEtCwG,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,KACEjB,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CAAc/H,QAAS,kBAAMwG,EAAK4B,oBAAoBC,KAAK,MAA3D,kBACAvB,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CAAc/H,QAAS,kBAAMwG,EAAK+B,mBAAmBF,KAAK,MAA1D,iBACAvB,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CAAc/H,QAAS,kBAAMwG,EAAKnJ,MAAMmL,sBAAsBH,KAAK,MAAnE,qBAMnBvB,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,qBAAf,YACY0H,EAAOlN,IAAI,SAACsN,GAAD,OAAWC,EAAAjI,EAAAC,cAACiJ,EAAA,EAAD,CAAOzH,MAAM,SAASuG,KADxD,SACmF5N,IAAT6D,EAAqB,SAAWA,EAAO,QAClG7D,IAAZyN,EAAwB,aAAeA,EAAS,6BAM7D,SAAS5E,GACLvJ,KAAKgM,cAAgBzC,EAAME,OAC3BzJ,KAAKmG,SAASnG,KAAKiF,cA5NEiL,IAAMlI,WA8PpB4C,kBA9BS,SAAA3F,GACpB,MAAO,CACHiI,eAAgBjI,EAAMkL,SAASjD,iBA4BC,KAAzBtC,CAA+Bf,gCEjQ/BuG,qFAZX,SAAIlL,EAAS0C,GACT,OAAO,IAAIrH,QAAQ,SAACC,EAASC,GACzBd,IAAM0Q,KAAK,iBAAmBnL,EAAU,IAAM0C,GACzChH,KAAK,SAACM,GAAD,OAASV,MACdkB,MAAM,SAAAC,GAAG,OAAIlB,EAAOkB,8BAIjC,SAAQuD,qeCqBZ,IAGMoL,EAAU,UAEVC,0CACF,SAAAA,EAAYzL,GAAO,IAAA0L,EAAAlQ,EAAA,OAAAR,OAAAgK,EAAA,EAAAhK,CAAAE,KAAAuQ,IACfjQ,EAAAyE,EAAAC,KAAAhF,KAAM8E,IAED2L,cAAgB,IAAIC,IACzBC,IAAS/J,MAAQtG,EAAKwE,MAAM8B,MAC5BgK,IAASC,SAASvQ,EAAKwE,MAAM8B,OAC7BgK,IAASE,YAAYH,KACrBC,IAASG,aACTJ,IAASK,OAAOC,aAChB3Q,EAAK2E,OAALuL,EAAA,CACI3K,QAAS,cACTqL,SAAU,GACV7C,aAAciC,EACda,iBAAkB,GAClBC,cAAe,GACfC,cAAe,GACfC,SAAS,EACTC,cAAe,GACfC,aAAc,IATlB1R,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,gBAUmB,IAVnB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,aAWgB,IAXhB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,gBAYmB,IAZnB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,gBAamB,IAbnB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,mBAcsB,IAdtB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,kBAeqB,IAfrB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,SAgBY,IAhBZ1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,iBAiBoB,IAjBpB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,YAkBU9P,GAlBVZ,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,eAmBa9P,GAnBbZ,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,oBAoBsB,GApBtB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,4BAqB8B,GArB9B1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,0BAsB6B,GAtB7B1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,cAuBY9P,GAvBZZ,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,sBAwBwB,GAxBxB1Q,OAAA2R,EAAA,EAAA3R,CAAA0Q,EAAA,oBAyBkB9P,GAzBlB8P,GA4BAlQ,EAAKoR,iBAAiBpR,EAAK2E,MAAMY,SAEjCvF,EAAKqR,QAAU,IAAI9R,IACnBS,EAAKsR,WAAa,IAAIxB,EAEtBO,IAASkB,OAAOjL,MAAQtG,EAAKwE,MAAM8B,MACnCtG,EAAKwR,WAAa,IAAIC,IACtBzR,EAAKsF,cAAgB,IAAIoM,IACrB1R,EAAKwE,MAAM8B,MACX+J,IAASK,OACTL,IAASsB,WACTtB,IAASkB,QAhDEvR,0DAmDnB,SAAqB4R,EAAY3E,GAC7BtL,QAAQC,IAAI,wBACZD,QAAQC,IAAIlC,KAAK8E,MAAMoI,gBACvB,IAAIiF,EAAcrS,OAAAsS,EAAA,EAAAtS,CAAA,GAASE,KAAKiF,MAAMkN,gBACtCA,EAAeD,GAAc3E,EAC7BvN,KAAKmG,SAAS,CACVgM,eAAgBA,iCAIxB,SAAc/H,EAAQiI,GAClBpQ,QAAQC,IAAI,qBAAuBmQ,GACnCrS,KAAKmG,SAAS,CAACiE,OAAQA,EAAQiI,8CAGnC,WACG3N,OAAO0D,iBAAiB,eAAgB,SAAUmB,GAC7CA,EAAM+I,YAAc,kFAI5B,SAAA7F,EAAsBvH,EAASsF,GAA/B,OAAAmC,EAAArG,EAAAsG,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACI/M,KAAKiF,MAAMsN,kBAAmB,EAC9BvS,KAAKiF,MAAMmM,cAAclM,GAAWsF,EACpCxK,KAAKiF,MAAMoM,cAAc7G,GAAYtF,EACrClF,KAAKiF,MAAMiM,SAAS1P,KAAK0D,GACzBlF,KAAKiF,MAAMsM,cAAcrM,GAAW,GAjF9B,UAqFFlF,KAAKiF,MAAMoJ,aATnB,CAAAxB,EAAAE,KAAA,SAWQ/M,KAAKiF,MAAMuN,iBAAiBhI,GAAYxK,KAAK8E,MAAMoI,eAAe7M,MAClEL,KAAKiF,MAAMwN,cAAcjI,GAAYxK,KAAK8E,MAAMoI,eAAeiB,QAC/DnO,KAAKiF,MAAMuM,aAAahH,GAAYxK,KAAK8E,MAAMoI,eAAeoB,MAC9DtO,KAAKiF,MAAMyN,WAAWlI,GAAYxK,KAAK8E,MAAMoI,eAAe3I,KAC5DvE,KAAKiF,MAAM0N,gBAAgBnI,GAAYxK,KAAK8E,MAAMoI,eAAe9L,GACjEpB,KAAK4R,WAAWhK,IAAI1C,EAAS,SAhBrC2H,EAAAE,KAAA,wBAkBQ/M,KAAKiF,MAAM2N,cAAcpI,GAAYxK,KAAKiF,MAAMY,QAlBxDgH,EAAAE,KAAA,GAmBsD/M,KAAK6S,kBAnB3D,QAmBQ7S,KAAKiF,MAAMuN,iBAAiBhI,GAnBpCqC,EAAAI,KAoBQjN,KAAKiF,MAAMuM,aAAahH,GAAYxK,KAAKiF,MAAMiJ,OAC/ClO,KAAKiF,MAAMyN,WAAWlI,QAAgC9J,IAApBV,KAAKiF,MAAMV,KAAqB,KAAOvE,KAAKiF,MAAMV,KACpFvE,KAAKiF,MAAMwN,cAAcjI,QAAmC9J,IAAvBV,KAAKiF,MAAMkJ,QAAwB,KAAOnO,KAAKiF,MAAMkJ,QAtBlG,QAwBInO,KAAKmG,SAASnG,KAAKiF,OAxBvB,yBAAA4H,EAAAV,SAAAM,EAAAzM,gGA2BA,SAAiB6F,GAAS,IAAAtD,EAAAvC,KACtBiC,QAAQC,IAAI,sBACZlC,KAAKiF,MAAMY,QAAUA,EACrB7F,KAAK6S,kBACAjS,KAAK,SAAAP,GAEIkC,EAAKoP,QAAQhR,mBAAmBN,GAC3BO,KAAK,SAACmB,GAAD,OAAYQ,EAAKuQ,mBAAmB/Q,OAE5D/B,KAAKmG,SAASnG,KAAKiF,yCAGvB,SAAmBlD,GACf,GAAe,MAAXA,QAA+BrB,IAAZqB,EAAvB,CAMA,IAAIlB,EAASkB,EACb,QAAuBrB,IAAnBqB,EAAQN,OAAuB,CAC/B,IAAIsR,EAAUC,KAAKC,IAAIC,MAAMF,KAAMjR,EAAQf,IAAI,SAAAmS,GAAC,OAAIA,EAAE5O,QACtD1D,EAASkB,EAAQqR,OAAO,SAAAD,GAAC,OAAIA,EAAE5O,OAASwO,IAAS,GAErD/S,KAAKmG,SAAS,CAAC+H,YAAyBxN,IAAjBG,EAAOyN,MAAsBzN,EAAOyN,MAAQ,GACpDH,QAAStN,EAAOsN,QAChB5J,KAAM1D,EAAO0D,YAZxBvE,KAAKmG,SAAS,CAAC+H,OAAQ,GAAIC,aAASzN,EAAW6D,UAAM7D,mCAe7D,WACI,OAAOmS,YAAgB7S,KAAKiF,MAAMY,6CAGtC,SAAqBqD,GACjBlJ,KAAKiF,MAAMoJ,aAAwB,YAATnF,EACtBoH,EA1IE,QA2INtQ,KAAKmG,SAASnG,KAAKiF,gCAGvB,SAAUpE,GACNb,KAAK0R,iBAAiB7Q,EAAOgF,oCAIlC,SAAYX,GACR,IAAImO,EAAQrT,KAAKiF,MAAMkM,iBAAiBrN,QAAQoB,GAC5CmO,GAAS,EACTrT,KAAKiF,MAAMkM,iBAAiBpN,OAAOsP,EAAO,GAE1CrT,KAAKiF,MAAMkM,iBAAiB3P,KAAK0D,GAIM,IAAvClF,KAAKiF,MAAMkM,iBAAiB1P,QAAgB4R,EAAQ,GACpD3O,OAAOgJ,cAAc,IAAIC,MAAM,mBAGnC3N,KAAKmG,SAAS,CACVgL,iBAAkBnR,KAAKiF,MAAMkM,iBAC7BG,SAAS,gCAIhB,WACItR,KAAKiF,MAAMqM,SAAU,EACrBtR,KAAKmG,SAASnG,KAAKiF,mCAGvB,WACIjF,KAAKiF,MAAMqM,SAAU,EACrBtR,KAAKmG,SAASnG,KAAKiF,sCAGvB,SAAgBqO,GACZ,IAAIpC,EAAWlR,KAAKiF,MAAMkM,iBAAiB/O,KAAK,KAChDpC,KAAK8E,MAAMwO,QAAQ9R,KAAK,oBAAsB0P,qCAGlD,WACI,IACIqC,EAASvT,KAAKyQ,cAAc4C,MAAM/C,QAAQA,QAC1CkD,EAAcD,EAAOP,KAAKS,MAAMF,EAAO9R,OAASuR,KAAKU,WAAWC,UAEpE3T,KAAK4T,UAAU,CAAC/N,QAAS2N,wEAG7B,SAAAK,IAAA,IAAAC,EAAA5C,EAAA6C,EAAAC,EAAArM,EAAAuG,EAAArK,EAAAoQ,EAAAC,EAAAC,EAAAC,EAAAhT,EAAAiT,EAAAzR,EAAA5C,KAAA,OAAA2M,EAAArG,EAAAsG,KAAA,SAAA0H,GAAA,cAAAA,EAAAxH,KAAAwH,EAAAvH,MAAA,OACQ+G,EAA2B,GAC3B5C,EAAW,GACX6C,EAAU,GAHlBO,EAAAC,GAAA5H,EAAArG,EAAAlC,KAIqBpE,KAAKiF,MAAMoM,eAJhC,WAAAiD,EAAAE,GAAAF,EAAAC,MAAAE,KAAA,CAAAH,EAAAvH,KAAA,SAWQ,IAPKiH,EAJbM,EAAAE,GAAA9L,MAKQwI,EAAS1P,KAAKxB,KAAKiF,MAAMoM,cAAc2C,IACnCrM,EAAO3H,KAAKiF,MAAMsM,cAAcvR,KAAKiF,MAAMoM,cAAc2C,KACzD9F,EAASlO,KAAKiF,MAAMuM,aAAawC,IAC1BvS,OAAS,IAChByM,EAASA,EAAOwG,MAAM,EAAG,IAEpB7Q,EAAEqK,EAAOzM,OAAQoC,EAAI,EAAGA,IAC7BqK,EAAO1M,KAAK,IAMhB,IAHImG,EAAKlG,OAAS,IACdkG,EAAOA,EAAK+M,MAAM,EAAG,IAEhB7Q,EAAE8D,EAAKlG,OAAQoC,EAAI,EAAGA,IAC3B8D,EAAKnG,KAAK,IAnBtB,GAsBY0S,EAAaF,GACbhU,KAAK8E,MAAM6P,cAvBvB,CAAAL,EAAAvH,KAAA,gBAAAuH,EAAAvH,KAAA,GAwB8BM,IAAKuH,SAASZ,GAxB5C,eAwBgBG,EAxBhBG,EAAArH,KAAAqH,EAAAvH,KAAA,GA0B+B/M,KAAK4F,cAAciP,SAClCV,EAAOW,IAAO9U,KAAK8E,MAAM6P,cAAcP,QAASpU,KAAK8R,YA3BrE,QA0BYoC,EA1BZI,EAAArH,KA4BYhL,QAAQC,IAAI,mBACZD,QAAQC,IAAIgS,GA7BxB,QAgCQH,EAAQvS,KAAK,CACTgJ,SAAU0J,EACV7T,MAAOL,KAAKiF,MAAMuN,iBAAiBwB,GACnCnO,QAAS7F,KAAKiF,MAAM2N,cAAcoB,GAClCrM,KAAMA,EACNuG,OAAQA,EACRC,QAASnO,KAAKiF,MAAMwN,cAAcuB,GAClCzP,KAAMvE,KAAKiF,MAAMyN,WAAWsB,GAC5B1M,SAAUtH,KAAKiF,MAAMkN,eAAe6B,GACpCpS,UAAW5B,KAAKiF,MAAM0N,gBAAgBqB,KAzClDM,EAAAvH,KAAA,uBA6CoB,KADZqH,EAAUpU,KAAK8E,MAAM6P,cAAgB3U,KAAK8E,MAAM6P,cAAcP,QAAU,GAExEzD,IAASoE,oBACLhB,EAASK,EAASpU,KAAK8R,YAE3BnB,IAASqE,uBACLjB,EAAS,GAlDrBO,EAAAvH,KAAA,GAqDyBxM,QAAQ0U,IAAInB,GArDrC,QAuDI,IAAS1S,KAvDbkT,EAAArH,KAuDmBjN,KAAKiF,MAAMmM,cAClB4C,EAAOhU,KAAKiF,MAAMmM,cAAchQ,UAC7BpB,KAAKiF,MAAMuN,iBAAiBwB,UAC5BhU,KAAKiF,MAAM2N,cAAcoB,UACzBhU,KAAKiF,MAAM2N,cAAcoB,UACzBhU,KAAKiF,MAAMuM,aAAawC,UACxBhU,KAAKiF,MAAMyN,WAAWsB,UACtBhU,KAAKiF,MAAMwN,cAAcuB,UACzBhU,KAAKiF,MAAMoM,cAAc2C,GAGpC9C,EAAS3N,QAAQ,SAAAnC,GAAE,cAAWwB,EAAKqC,MAAMmM,cAAchQ,KAEvDpB,KAAKmG,SAAS,CACV+K,SAAU,GACVqB,kBAAkB,IAtE1B,yBAAA+B,EAAAnI,SAAA0H,EAAA7T,mFAyEA,SAAO4H,GACH,IAAK,IAAI/D,KAAK7D,KAAKiF,MAAMkM,iBAAkB,CACvC,IAAI/P,EAAKpB,KAAKiF,MAAMkM,iBAAiBtN,GACjCzC,KAAMpB,KAAKiF,MAAMsM,cACjBvR,KAAKiF,MAAMsM,cAAcnQ,GAAII,KAAKoG,GAElC5H,KAAKiF,MAAMsM,cAAcnQ,GAAM,CAACwG,GAIxC5H,KAAKmG,SAASnG,KAAKiF,kCAGvB,SAAY7D,GACR,IAAI4S,EAAOhU,KAAKiF,MAAMmM,cAAchQ,UAC7BpB,KAAKiF,MAAMuN,iBAAiBwB,UAC5BhU,KAAKiF,MAAM2N,cAAcoB,UACzBhU,KAAKiF,MAAM2N,cAAcoB,UACzBhU,KAAKiF,MAAMuM,aAAawC,UACxBhU,KAAKiF,MAAMyN,WAAWsB,UACtBhU,KAAKiF,MAAMwN,cAAcuB,UACzBhU,KAAKiF,MAAMoM,cAAc2C,UACzBhU,KAAKiF,MAAMmM,cAAchQ,GAChC,IAAIiS,EAAQrT,KAAKiF,MAAMiM,SAASpN,QAAQ1C,GACxCpB,KAAKiF,MAAMiM,SAASnN,OAAOsP,EAAO,GAClCrT,KAAKmG,SAASnG,KAAKiF,gCAGvB,SAAUC,EAAS0C,GACf,IAAIyL,EAAQrT,KAAKiF,MAAMsM,cAAcrM,GAASpB,QAAQ8D,GACtD5H,KAAKiF,MAAMsM,cAAcrM,GAASnB,OAAOsP,EAAO,GAChDrT,KAAKmG,SAAS,CAACoL,cAAevR,KAAKiF,MAAMsM,sCAG7C,WAAS,IAAAtD,EAAAjO,KACL,OACIuO,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,sBACb+H,EAAAjI,EAAAC,cAAC2O,EAAA,EAAD,CAAerD,OAAQlB,IAASkB,OAAQpC,MAAM,IAC9ClB,EAAAjI,EAAAC,cAAC4O,EAAA,EAAD,CAAY1F,KAAMzP,KAAK8E,MAAMsQ,YAC7B7G,EAAAjI,EAAAC,cAAC8O,EAAA,EAAD,CAAoBC,KAAK,WAAW1O,MAAO5G,KAAK8E,MAAM8B,QACvD2H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,iBAEd+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,cAEf+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,cACf+H,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,oBACb+H,EAAAjI,EAAAC,cAACgP,EAAA,EAAD,CAAY3O,MAAO5G,KAAK8E,MAAM8B,QAC9B2H,EAAAjI,EAAAC,cAACiI,EAAA,EAAD,CAAsBC,WAAYzO,KAAKiF,MAAMsN,kBAAoBvS,KAAKiF,MAAMiM,SAASzP,OAAS,GAC5F8M,EAAAjI,EAAAC,cAAA,OACEkB,QAAS,kBAAMwG,EAAKuH,kBACpBhP,UAAU,6BAFZ,QAGQxG,KAAKiF,MAAMiM,SAASzP,OAH5B,YAMF8M,EAAAjI,EAAAC,cAACkP,EAAA,EAAD,MACAlH,EAAAjI,EAAAC,cAACmP,EAAA,EAAD,CACErD,SAAUrS,KAAKiF,MAAMoN,SACrBsD,cAAe,SAACxC,EAAGd,GAAJ,OAAiBpE,EAAK0H,cAAcxC,EAAGd,IACtDuD,qBAAsB,SAAC1M,GAAD,OAAU+E,EAAK2H,qBAAqB1M,OAE9DqF,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,gBACb+H,EAAAjI,EAAAC,cAACsP,EAAD,CACErI,kBAAmB,SAAC0E,EAAY3E,GAAb,OAA2BU,EAAK6H,qBAAqB5D,EAAY3E,IACpFnD,OAAQpK,KAAKiF,MAAMmF,OACnB8D,OAAQlO,KAAKiF,MAAMiJ,OACnB3J,KAAMvE,KAAKiF,MAAMV,KACjB4J,QAASnO,KAAKiF,MAAMkJ,QACpBtI,QAAS7F,KAAKiF,MAAMY,QACpB0J,WAAY,kBAAMtB,EAAK8H,gBACvBtL,gBAAiB,SAACrJ,EAAI4S,GAAL,OAAc/F,EAAKxD,gBAAgBrJ,EAAI4S,IACxD3F,aAAcrO,KAAKiF,MAAMoJ,aACzB4B,mBAAoB,kBAAMhC,EAAKgC,sBAC/BtF,oBA9UJ,UA8UyB3K,KAAKiF,MAAMoJ,eAElCE,EAAAjI,EAAAC,cAACiI,EAAA,EAAD,CAAsBC,UAAWzO,KAAKiF,MAAMiM,SAASzP,OAAS,GAC5D8M,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,4BACZxG,KAAKiF,MAAMiM,SAASlQ,IAAI,SAACkE,GAAD,OACvBqJ,EAAAjI,EAAAC,cAAC1B,EAAA,EAAD,CACEe,cAAeqI,EAAKrI,cACpBgD,IAAK1D,EACLwC,SAAU,kBAAMuG,EAAK+H,YAAY9Q,IACjCyC,KAAMsG,EAAKhJ,MAAMsM,cAAcrM,GAC/BuB,WAAYwH,EAAKhJ,MAAMkM,iBAAiBrN,QAAQoB,IAAY,EAC5DmC,iBAAkB,kBAAM4G,EAAKgI,YAAY/Q,IACzC4C,YAAa,SAACF,GAAD,OAASqG,EAAKiI,UAAUhR,EAAS0C,IAC9C2H,WAAY,kBAAMtB,EAAKkI,SAASjR,IAChCoC,SAAU2G,EAAKhJ,MAAMkN,eAAejN,GACpCW,QAASoI,EAAKhJ,MAAM2N,cAAc3E,EAAKhJ,MAAMmM,cAAclM,IAC3D0B,MAAOqH,EAAKnJ,MAAM8B,MAClBvG,MAAO4N,EAAKhJ,MAAMuN,iBAAiBvE,EAAKhJ,MAAMmM,cAAclM,IAC5DA,QAAS+I,EAAKhJ,MAAMmM,cAAclM,WAM5CqJ,EAAAjI,EAAAC,cAAA,OAAKC,UAAU,oBACZxG,KAAKiF,MAAMqM,QACX/C,EAAAjI,EAAAC,cAAC0B,EAAA,EAAD,CAAamJ,cAAepR,KAAKiF,MAAMmM,cAAepI,YAAa,kBAAMiF,EAAKmI,gBAAgB3N,aAAc,SAACb,GAAD,OAASqG,EAAKpF,OAAOjB,IAAMuJ,iBAAkBnR,KAAKiF,MAAMkM,mBACpK5C,EAAAjI,EAAAC,cAAC8P,EAAA,EAAD,CAAuBzP,MAAO5G,KAAK8E,MAAM8B,MAAOf,QAAS7F,KAAKiF,MAAMY,QAASyQ,cAAe,SAACzV,GAAD,OAAYoN,EAAK2F,UAAU/S,gBAtWjHmH,aAuXR4C,sBARS,SAAA3F,GACpB,MAAO,CACHiI,eAAgBjI,EAAMkL,SAASjD,eAC/ByH,cAAe1P,EAAM+L,OAAO2D,cAC5BS,UAAWnQ,EAAMsR,UAAUnB,YAIK,KAAzBxK,CAA+B2F","file":"static/js/13.155fd534.chunk.js","sourcesContent":["var apiToken = 'CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo';\nvar axios = require('axios');\n\nclass Discogs {\n\n    constructor() {\n        this.titleToLabels = {};\n        this.nameToLabelInfo = {};\n        this.nameToLabel = {};\n        this.idToReleases = {};\n    }\n\n    getLabels(title) {\n        return new Promise((resolve, reject) => {\n            if (this.titleToLabels[title] !== undefined) {\n                resolve(this.titleToLabels[title]);\n                return;\n            }\n\n            this.searchYoutubeTitle(title)\n                .then((result) => {\n                // get all the labels\n                var data = [];\n                if (result === null || result.label === undefined) {\n                    resolve(data);\n                }\n                result.label.map((label) => this.getLabelInfo(label, (ret) => {\n                    if (ret === null) {\n                        resolve(data);\n                        return;\n                    }\n                    var labelData = {\n                        id: ret.id,\n                        name: ret.name};\n                    if ('images' in ret) {\n                        labelData['thumbnail'] = ret.images[0].uri;\n                    }\n                    data.push(labelData);\n\n                    this.titleToLabels[title] = data;\n                    if (data.length == result.label.length) {\n                        resolve(data);\n                    } else {\n                    }\n                }));\n                })\n                .catch(err => {\n                    reject(err);\n                });\n        });\n    }\n\n    getReleaseInfo(discogsId) {\n        return new Promise((resolve, reject) => {\n            var url = 'https://api.discogs.com/releases/' + discogsId;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data !== undefined) {\n                    var results = ret.data;\n                    resolve(results);\n                } else {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n\n    searchRecords(recordName) {\n        return new Promise((resolve, reject) => {\n            console.log(\"searchinng name=\", recordName);\n            let query = recordName.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&type=release&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var results = ret.data.results;\n                    resolve(results);\n                } else {\n                    resolve([]);\n                }\n            });\n        });\n    }\n\n    searchLabel(labelName, callback) {\n        if (this.nameToLabel[labelName] !== undefined) {\n            return callback(this.nameToLabel[labelName]);\n        }\n        var query = labelName;\n        query = query.split(/\\s/g).join('+');\n        var url = 'https://api.discogs.com/database/search?q=' + query + '&type=label&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var result = ret.data.results[0];\n                    this.nameToLabel[labelName] = result;\n                    callback(result);\n                }\n            });\n\n    }\n\n    getLabelInfo(labelName, callback) {\n        this.searchLabel(labelName, function (result) {\n            var labelId = result.id\n            var url = 'https://api.discogs.com/labels/' + labelId + '?token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    callback(ret.data);\n                })\n                .catch(function (err) {\n                    callback(null);\n                });\n        });\n            \n    }\n\n    getLabelReleases(labelId, page) {\n        return new Promise((resolve, reject) => {\n            if (this.idToReleases[labelId + '_' + page] !== undefined) {\n                resolve(this.idToReleases[labelId + '_' + page]);\n                return;\n            }\n            var url = 'https://api.discogs.com/labels/' + labelId +\n            '/releases?token=' + apiToken + '&page=' + page + '&per_page=8';\n            axios.get(url)\n                .then((ret) => {\n                    this.idToReleases[labelId + '_' + page] = ret.data;\n                    resolve(ret.data);\n                })\n                .catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n    searchYoutubeTitle(youtubeTitle) {\n        return new Promise((resolve, reject) => {\n            var searchObject = parseTitleString(youtubeTitle);\n            var query = searchObject.artist + ' - ' + searchObject.title;\n            query = query.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    var results = ret.data.results;\n                    var earliestResult = null;\n                    for (var i in results) {\n                        if ((earliestResult == null ||\n                             (results[i].year < earliestResult.year)) && \n                            results[i].title.includes(searchObject.title))\n                        {\n                            earliestResult = results[i];\n                        }\n                    }\n                    if (earliestResult == null) {\n                        // get the first result\n                        for (var i in results) {\n                            return resolve(results[i]);\n                        }\n                    }\n                    resolve(earliestResult);\n                })\n                .catch(function (err) {\n                    reject(err);\n                });;\n        });\n    }\n}\n\n// TODO: provide an array of potential separators\n// var SEPARATORS = [' - ', ' – ', ' -- ']\n// note that these can have spaces, but sometimes do not\n// TODO: output a testing dataset for changes to this function.\n\nvar TRACK_SEPARATOR = ' - ';\nfunction parseTitleString(string, partsCallback) {\n  var artist, title, credits = [];\n  var string = string || '';\n\n  function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  // TODO: load from datafile\n    var baddies = ['Full Album', 'Full vinyl', 'LP', '[dubstep]', '(full album)', '[electro]', '[edm]', '[house music]',\n    '[glitch hop]', '[video]', '[official video]', '(official video)',\n    '(official music video)', '(lyrics)',\n    '[ official video ]', '[official music video]', '[free download]',\n    '[free dl]', '( 1080p )', '(with lyrics)', '(high res / official video)',\n    '(music video)', '[music video]', '[hd]', '(hd)', '[hq]', '(hq)',\n    '(original mix)', '[original mix]', '[lyrics]', '[free]', '[trap]',\n    '[monstercat release]', '[monstercat freebie]', '[monstercat]',\n    '[edm.com premeire]', '[edm.com exclusive]', '[enm release]',\n    '[free download!]', '[monstercat free release]'];\n  baddies.forEach(function(token) {\n    string = string.replace(token + ' - ', '').trim();\n    string = string.replace(token.toUpperCase() + ' - ', '').trim();\n    string = string.replace(token.toLowerCase() + ' - ', '').trim();\n\n    string = string.replace(token, '').trim();\n    string = string.replace(token.toUpperCase(), '').trim();\n    string = string.replace(token.toLowerCase(), '').trim();\n  });\n\n    string = string.replace(/ *\\([^)]*\\) */g, '').trim();\n    string = string.replace(/ *\\[[^)]*\\] */g, '').trim();\n\n\n  var parts = string.split( ' - ' );\n\n  for (var i = 0; i < parts.length; i++) {\n    if ( baddies.indexOf( parts[i].toLowerCase() ) >= 0 ) {\n      parts.splice( i , 1 );\n    }\n  }\n\n  if (parts.length == 2) {\n    artist = parts[0];\n    title = parts[1];\n  } else if (parts.length > 2) {\n    // uh...\n    artist = parts[0];\n    title = parts[1];\n  } else {\n    artist = parts[0];\n    title = parts[0];\n  }\n\n\n  // one last pass\n  baddies.forEach(function(baddy) {\n    title  = title.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n    artist = artist.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n  });\n\n  // look for certain patterns in the string\n  credits.push(  title.replace(/(.*)\\((.*) remix\\)/i,       '$2').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push(  title.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push( artist.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$1').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$2').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$1').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$2').trim() );\n\n  var creditMap = {};\n  credits.forEach(function(credit) {\n    if (credit !== title) { // temp., until we find out why title is in credits\n      creditMap[ credit ] = credit;\n    }\n  });\n\n  var output = {\n      artist: artist\n    , title: title\n    , credits: Object.keys(creditMap)\n  };\n\n    return output;\n}\n\nexport default Discogs;\n","/*\n    This file is part of Universal Sequencer.\n    Universal Sequencer is free software: you can redistribute it and/or modif\n    it under the terms of the GNU General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    Universal Sequencer is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU General Public License for more details.\n\n    You should have received a copy of the GNU General Public License\n    along with this program.  If not, see <http://www.gnu.org/licenses/>.\n*/\n\nimport React, { Component } from 'react';\nimport Sample from 'repos/Sample.js';\nimport Waveform from 'components/Waveform.js';\nimport { withRouter } from 'react-router';\nimport Tone from 'tone';\nimport axios from 'axios';\nimport YoutubeInfo from 'components/Youtube.js';\nimport { Badge, Card, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport AudioUnit from 'engine/audio.js';\nimport createHistory from \"history/createBrowserHistory\"\n\nvar AudioContext = window.AudioContext || window.webkitAudioContext;\nvar audioCtx = new AudioContext();\n\nclass SampledSound extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            soundId: props.soundId,\n        };\n        this.audioUnit = new AudioUnit(audioCtx);\n        this.loadBuffer.bind(this);\n        this.handleLoadBuffer.bind(this);\n        this.loadBuffer();\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (nextProps.soundId !== this.state.soundId) {\n            this.state.soundId = nextProps.soundId;\n            this.loadBuffer();\n        }\n\n        return true;\n    }\n    \n    loadBuffer() {\n        var self = this;\n        console.log('loading buffer soundId = '+ this.props.soundId);\n        this.sample = new Sample(this.props.soundId, this.props.encryptedIpfs);\n        this.sample.name = this.props.title;\n        this.sample.videoId = this.props.videoId;\n        this.state.name = this.props.title;\n        this.state.videoId = this.props.videoId;\n        console.log('gonna fetch audio for id = ' + this.sample.getId());\n        this.sample.fetchAudio()\n            .then((sample) => {\n                this.audioUnit.setBuffer(sample.audioBuffer);\n                this.state.buffer = sample.audioBuffer;\n                this.setState(this.state);\n            });\n   }\n\n    handleLoadBuffer(self, buffer) {\n        var state = self.state;\n        state['buffer'] = buffer;\n        self.setState(state);\n    }\n    \n    render() {\n        var self = this;\n        if (this.state.buffer != undefined) {\n            return (\n                <div className={this.props.isSelected ? 'selected sound-row' : \"sound-row\"}>\n                    <div className=\"playlist-row\">\n                      <Waveform selections={[]}\n                                sample={this.sample}\n                                store={this.props.store}\n                                buffer={this.audioUnit.buffer}\n                                onClickSelection={(id, buffer) => []}\n                        height={70}\n                        width={350}\n                        onSelection={(start, end) => []}\n                        audioUnit={this.audioUnit}\n                        waveformId={0}></Waveform>\n                      <div className=\"youtube-info\">\n                            <YoutubeInfo onClickThumbnail={() => this.props.onClickThumbnail(this.state.soundId)}\n                              coverArt={this.props.coverArt}\n                                  sample={this.sample}\n                                  name={this.props.title}\n                                  isMuted={false}\n                                  soundId={this.state.soundId} \n                                  onNewSound={this.props.onNewSound} \n                                  videoId={this.state.videoId}>\n                        </YoutubeInfo>\n                      </div>\n                      <div\n                        onClick={this.props.onDelete}\n                        className=\"delete-button\">x</div>\n                    </div>\n                    {this.props.tags != null ? this.props.tags.map((tag) =>\n                      <Badge\n                        onClick={() => this.props.onDeleteTag(tag)}\n                        color=\"light\">{tag}</Badge>) : ''}\n                </div>\n                    );\n        } else {\n            return (<div></div>);\n        }\n    }\n}\n\nexport default SampledSound;\n","import axios from 'axios';\nimport ethereum from 'decentralized/ethereum.js';\nimport React, { Component } from 'react';\nimport { Badge, Label, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\n\nclass SoundTagger extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            tags: []\n        };\n        this._tag = '';\n\n        this.addListener();\n    }\n\n    addListener() {\n        window.addEventListener('sound_selected', () => {\n            if (this.input) {\n                if (this.input !== document.activeElement) { \n                    this.input.focus();\n                }\n            }\n        });\n    }\n\n    addTag() {\n        this.state.tags.push(this._tag);\n        var self = this;\n        self.props.onUpdateTags(this._tag);\n        this._tag = '';\n        this.setState(this.state);\n    }\n\n    onInputType(value) {\n        this._tag = value;\n        this.setState(this.state);\n    }\n\n    onKeyPress(e) {\n        if (e.key === 'Enter') {\n            this.addTag();\n        }\n    }\n\n    render() {\n        return (<div className=\"tag-editor\">\n                {this.props.soundUploadMode ? '' : <div onClick={this.props.onClickBack} className=\"light-blue-button common-button\">Back to search</div>}\n                <div className=\"tags\">\n                   <InputGroup>\n                <div>\n                <input\n                type=\"text\"\n                ref={(input) => this.input = input}\n                autoFocus onKeyPress={(e) => this.onKeyPress(e)} value={this._tag} id=\"search-input\" onChange={(event) => this.onInputType(event.target.value)} placeholder=\"Enter tag name\" className=\"tag-discover-input\"/>\n                </div>\n                        <InputGroupAddon addonType=\"append\">\n                        <Button onClick={() => this.addTag()} color=\"secondary\">Tag</Button>\n                        </InputGroupAddon>\n                        </InputGroup>\n                </div>\n                </div>);\n    \n    }\n}\n\nexport default SoundTagger;\n","import Web3 from 'web3';\nimport {web3} from '../web3.js';\nimport NoteSequencesContract from '../contracts/NoteSequencesContract.js';\n\nvar contract = new NoteSequencesContract();\n\nclass NoteSequencePublisher {\n    constructor() {\n        this.contract = new web3.eth.Contract(contract.abi, contract.contractAddress);\n        this.ethAddress = this.contract.options.address;\n    }\n\n    publish(args) {\n        return new Promise(async (resolve, reject) => {\n            const accounts = await web3.eth.getAccounts();\n            this.contract.methods.newNoteSequenceLarge(args[0], args[1], args[2], args[3], args[4])\n                .send({\n                    from: accounts[0] \n                }, (error, transactionHash) => {\n                if (error) {\n                    reject(error);\n                } else {\n                    resolve();\n                }\n                });\n        });\n    }\n}\n\nexport default NoteSequencePublisher;\n","import React from 'react'; import YouTube from 'react-youtube';\nimport { connect } from \"react-redux\";\nimport Tone from 'tone';\nimport domToImage from 'dom-to-image';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport recorder from '../../recorder.js';\nimport axios from 'axios';\nimport StartAudioContext from 'startaudiocontext';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {YOUTUBE, VINYL} from './constants.js';\nimport { Label, Button, Input, ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport SoundUploader from 'api/SoundUploader.js';\nimport SampledSound from 'components/SampledSound.js';\nimport { Badge } from 'reactstrap';\n\nimport '../../Discover.scss';\nimport '../../App.css';\n\nclass YoutubeSampler extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            sampling : false,\n            dropdownOpen: false,\n            recordingSetup : false,\n            videoId: props.videoId,\n            startTime: null,\n            endTime: null,\n            stream: undefined\n        };\n        var self = this;\n        this.soundUploader = new SoundUploader(\n            2, (soundId, ipfsHash) => this.props.onSoundUploaded(ipfsHash, ipfsHash));\n        this.setupRecording();\n    }\n\n    toggleDropdown() {\n        this.setState({dropdownOpen: !this.state.dropdownOpen});\n    }\n    \n    shouldComponentUpdate(nextProps) {\n        if (this.props.playOutputRecording != nextProps.playOutputRecording) {\n            if (nextProps.playOutputRecording) {\n                this.input.connect(this.audioContext.destination);\n            } else {\n                this.input.disconnect(this.audioContext.destination);\n            }\n        }\n\n        if (nextProps.stream !== this.state.stream) {\n            this.state.stream = nextProps.stream;\n            this.startUserMedia(this.state.stream);\n        }\n\n        return true;\n    }\n\n\n    startUserMedia(stream) {\n        console.log('starting user media');\n        console.log(stream);\n        this.input = this.audioContext.createMediaStreamSource(stream);\n        this.input.channelCount = 2;\n\n\n        this.recorder = new window.Recorder(this.input, {numChannels: 2, bufferLen:2048});\n        if (this.props.playOutputRecording) {\n            this.input.connect(this.audioContext.destination);\n        }\n        this.state.recordingSetup = true;\n        this.setState(this.state);\n    }\n\n    setupRecording() {\n        try {\n            // webkit shim\n            window.AudioContext = window.AudioContext || window.webkitAudioContext;\n            navigator.getUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia;\n            window.URL = window.URL || window.webkitURL;\n            \n            this.audioContext = Tone.Master.context;\n\n            StartAudioContext(this.audioContext, \"#playButton\")\n        } catch (e) {\n            console.log('No web audio support in this browser!');\n        }\n    }\n\n    onClickSampleButton() {\n        this.state.sampling = !this.state.sampling;\n        if (this.state.sampling) {\n            this.state.startTime = this.youtubePlayer.getCurrentTime();\n            console.log(\"recording started\");\n            this.recorder.record();\n        } else {\n            this.recorder.stop(Tone.Master.context.currentTime + 0.01);\n            setTimeout(() => {\n                this.state.endTime = this.youtubePlayer.getCurrentTime();\n                this.recorder.getBuffer((blob) => this.saveBuffer(blob));\n            }, [100]);\n        }\n        this.setState(this.state);\n    }\n\n    async saveBuffer(blob) {\n        console.log(\"save buffer called w blob=\", blob);\n        let ipfsHash = await this.soundUploader.uploadBufferToIpfs(\n            blob, true);\n\n        // get the cover art of selected record\n        if (this.props.selectedRecord) {\n            let thumbnailUrl = this.props.selectedRecord.thumb;\n \n            axios.get('https://cors-anywhere.herokuapp.com/' + thumbnailUrl,\n                      {\n                          responseType: 'blob'\n                      })\n                .then(result => {\n                    let blob = result.data;\n                    ipfs.addBlob(blob).then(coverHash =>\n                        this.props.onCoverDownloaded(ipfsHash, coverHash));\n                });\n        }\n        \n        this.recorder.clear();\n    }\n\n    getRelatedVideos() {\n        console.log('get related videos event dispatched');\n        window.dispatchEvent(new Event('get_related_videos'));\n    }\n\n    getRecordLabels() {\n        window.dispatchEvent(new Event('get_record_labels'));\n    }\n\n    fastForward(e) {\n        e.preventDefault();\n        this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() + 5);\n    }\n\n    rewind(e) {\n        e.preventDefault();\n        this.youtubePlayer.seekTo(this.youtubePlayer.getCurrentTime() - 5);\n    }\n\n    checkQuality() {\n        let qualities = this.youtubePlayer.getAvailableQualityLevels();\n        this.youtubePlayer.setPlaybackQuality(qualities[0]);\n    }\n\n    render() {\n        console.log('selected record = ');\n        console.log(this.props.selectedRecord);\n        const opts = {\n            height: '125',\n            width: '400',\n            playerVars: { // https://developers.google.com/youtube/player_parameters\n                autoplay: 1\n            }\n        };\n\n        let styles = this.props.styles;\n        let country = this.props.country;\n        let year = this.props.yeaer;\n        if (this.props.sampleSource === VINYL &&\n            this.props.selectedRecord) {\n            styles = this.props.selectedRecord.style;\n            country = this.props.selectedRecord.country;\n            year = this.props.selectedRecord.year;\n        }\n\n        return (\n            <div className=\"youtube-sampler\">\n              <span className=\"#playButton\"></span>\n              <ConditionedComponent condition={this.props.sampleSource === YOUTUBE}>\n                <div className=\"youtube-widget-container\">\n                  <YouTube\n                    videoId={this.props.videoId}\n                    opts={opts}\n                    onStateChange={(e) => this.checkQuality()}\n                    onReady={(e) => this._onReady(e)}\n                    />\n                </div>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.sampleSource === VINYL}>\n                <img className=\"cover-art\" src={this.props.selectedRecord ? this.props.selectedRecord.cover_image : ''}/>\n              </ConditionedComponent>\n               <div className=\"video-info-container\">\n              </div>\n              <div className=\"video-buttons-container\">\n                <div className=\"action-buttons\">\n                {this.state.recordingSetup ? \n                    <span onClick={() => this.onClickSampleButton()}\n                          className={this.state.sampling ? 'record-button recording' : \"record-button\"}>\n                      {this.state.sampling ? 'RECORDING' : 'RECORD'}\n                    </span>\n                : '... initalizing'}\n                  </div>\n                <div className=\"action-buttons\">\n                  <span onClick={(e) => this.rewind(e)} className='big-button player-button'>RRWD</span>\n                </div>\n                <div className=\"action-buttons\">\n                  <span onClick={(e) => this.fastForward(e)} className='big-button player-button'>FFWD</span>\n                </div>\n                <div className=\"action-buttons\">\n                  <span onClick={this.props.onClickTag} className='big-button tag-samples-button'>TAG</span>\n                </div>\n                <div className=\"float-right\">\n                  <ConditionedComponent condition={this.props.sampleSource === YOUTUBE}>\n                <ButtonDropdown\n                               show={this.state.dropdownOpen}\n                               isOpen={this.state.dropdownOpen}\n                               toggle={() => this.toggleDropdown()}>\n                                   <Button\n                                         onClick={() => this.getRelatedVideos()}\n                                         id=\"caret\" color=\"secondary\"><span className=\"\">Related</span></Button>\n                               <DropdownToggle size=\"sm\" caret color=\"secondary\">\n                               </DropdownToggle>\n                               <DropdownMenu>\n                                 <DropdownItem onClick={() => this.getRelatedVideos()} size=\"sm\">Related Videos</DropdownItem>\n                                 <DropdownItem onClick={() => this.getRecordLabels()} size=\"sm\">Record Labels</DropdownItem>\n                                 <DropdownItem onClick={() => this.props.onClickRandomVideo()} size=\"sm\">Random Video</DropdownItem>\n                               </DropdownMenu>\n                             </ButtonDropdown>\n                  </ConditionedComponent>\n              </div>\n              </div>\n              <div className=\"discogs-container\">\n                Styles:  {styles.map((style) => <Badge color=\"light\">{style}</Badge>)} {year !== undefined ? \"Year: \" + year : ''}\n                {country !== undefined ? \" Country: \" + country: ''}\n              </div>\n              </div>\n        );\n    }\n\n    _onReady(event) {\n        this.youtubePlayer = event.target;\n        this.setState(this.state);\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        selectedRecord: state.discover.selectedRecord,\n    };\n};\n\nfunction loadXHR(url) {\n\n    return new Promise(function(resolve, reject) {\n        console.log('loading image');\n        let node = document.getElementById(\"selected-record\");\n        var options = {\n        quality: 0.95 \n        };\n\n        domToImage.toJpeg(node, options).then(function (dataUrl) {\n            console.log('got the image');\n            console.log(dataUrl);\n            // Do something with the dataURL (data:image/jpeg;base64,i........)\n        });\n    });\n}\nfunction str2ab(str) {\n  var buf = new ArrayBuffer(str.length*2); // 2 bytes for each char\n  var bufView = new Uint16Array(buf);\n  for (var i=0, strLen=str.length; i < strLen; i++) {\n    bufView[i] = str.charCodeAt(i);\n  }\n  return buf;\n}\nexport default connect(mapStateToProps, null)(YoutubeSampler);\n\n","export const YOUTUBE = 'YOUTUBE';\nexport const VINYL = 'VINYL';\n","import axios from 'axios';\n\nclass SoundsTags {\n    tag(soundId, tag) {\n        return new Promise((resolve, reject) => {\n            axios.post('/tagSoundEasy/' + soundId + '/' + tag)\n                .then((ret) => resolve())\n                .catch(err => reject(err));\n        });\n    }\n\n    getTags(soundId) {\n    }\n}\n\nexport default SoundsTags;\n","import React, { Component } from 'react';\nimport PasswordModal from 'components/modals/PasswordModal.js';\nimport TransactionsView from 'components/toolbar/TransactionsView.js';\nimport LoginModal from 'components/modals/LoginModal.js';\nimport {GUILD, USER, NONE} from 'constants/encryption-levels.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport accounts from 'accounts/Accounts.js';\nimport ContentKey from 'crypto/ContentKey.js';\nimport GuildsMenu from 'components/guilds/GuildsMenu.js';\nimport SampleSource from './SampleSource.js';\nimport UniversalNavigator from 'components/UniversalNavigator.js';\nimport { connect } from \"react-redux\";\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport axios from 'axios';\nimport {getYoutubeTitle} from './getYoutubeTitle.js';\nimport AudioInputChooser from 'components/AudioInputChooser.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport Discogs from 'discogs/Discogs.js';\nimport InternetNavigatorPane from './InternetNavigatorPane.js';\nimport NoteSequencePublisher from 'decentralized/chords/NoteSequencePublisher.js';\nimport { withRouter } from 'react-router-dom'\nimport {getEthereumNoteSequence} from 'tensorflow/Midifier.js';\nimport YoutubeSampler from './YoutubeSampler.js';\nimport YoutubeSearcher from './YoutubeSearcher.js';\nimport SampledSound from 'components/SampledSound.js';\nimport { Badge, Label, Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport SoundTagger from 'components/SoundTagger.js';\nimport EncryptedIpfs from 'decentralized/guilds/EncryptedIpfs.js';\nimport SoundsTags from 'search/SoundsTags.js';\nimport '../../Common.css';\nimport EthereumCache from 'decentralized/cache/EthereumCache.js';\n\nconst apiKey = \"AIzaSyBrWhZMYJjBRGh9K3BDqj2bKT8sQ7K7JGc\";\n\nconst VINYL = 'VINYL';\nconst YOUTUBE = 'YOUTUBE';\n\nclass Discover extends Component {\n    constructor(props) {\n        super(props);\n\n        this.ethereumCache = new EthereumCache();\n        ethereum.store = this.props.store;\n        accounts.setStore(this.props.store);\n        accounts.setEthereum(ethereum);\n        accounts.checkLogin();\n        ethereum.guilds.initGuilds();\n        this.state = {\n            videoId: 'j5L70BkuKlo',\n            soundIds: [],\n            sampleSource: YOUTUBE,\n            selectedSoundIds: [],\n            soundIdToHash: {},\n            hashToSoundId: {},\n            tagMode: false,\n            soundIdToTags: {},\n            hashToStyles: {},\n            hashToSoundId: {},\n            hashToYear: {},\n            hashToCountry: {},\n            hashToVideoId: {},\n            hashToVideoTitle: {},\n            hashToDiscogsId: {},\n            styles: [],\n            hashToCoverArt: {},\n            year: undefined,\n            country: undefined,\n            syncedToEthereum: false,\n            calculatingNoteSequences: false,\n            noteSequencesCalculated: 0,\n            stream: undefined,\n            taggingSingleSound: false,\n            soundIdToTag: undefined\n        };\n\n        this.onVideoIdChanged(this.state.videoId);\n\n        this.discogs = new Discogs();\n        this.soundsTags = new SoundsTags();\n\n        ethereum.crypto.store = this.props.store;\n        this.contentKey = new ContentKey();\n        this.encryptedIpfs = new EncryptedIpfs(\n            this.props.store,\n            ethereum.guilds,\n            ethereum.encryption,\n            ethereum.crypto);\n    }\n\n    onCoverArtDownloaded(sampleHash, coverHash) {\n        console.log('onCoverARtDownloaded');\n        console.log(this.props.selectedRecord);\n        let hashToCoverArt = { ... this.state.hashToCoverArt };\n        hashToCoverArt[sampleHash] = coverHash;\n        this.setState({\n            hashToCoverArt: hashToCoverArt\n        });\n    }\n\n    onChooseAudio(stream, deviceId) {\n        console.log('deviceId chosen = ' + deviceId);\n        this.setState({stream: stream, deviceId});\n    }\n\n    componentDidMount() {\n       window.addEventListener(\"beforeunload\", function (event) {\n            event.returnValue = \"Hellooww\"\n        })\n    }\n\n    async onSoundUploaded(soundId, ipfsHash) {\n        this.state.syncedToEthereum = false;\n        this.state.soundIdToHash[soundId] = ipfsHash;\n        this.state.hashToSoundId[ipfsHash] = soundId;\n        this.state.soundIds.push(soundId);\n        this.state.soundIdToTags[soundId] = [];\n\n        // keep track of discogs data for ipfs hash (to later save to ethereum)\n\n        if (this.state.sampleSource === VINYL) {\n            // it's vinyl so tag it as vinyl\n            this.state.hashToVideoTitle[ipfsHash] = this.props.selectedRecord.title;\n            this.state.hashToCountry[ipfsHash] = this.props.selectedRecord.country;\n            this.state.hashToStyles[ipfsHash] = this.props.selectedRecord.style;\n            this.state.hashToYear[ipfsHash] = this.props.selectedRecord.year;\n            this.state.hashToDiscogsId[ipfsHash] = this.props.selectedRecord.id;\n            this.soundsTags.tag(soundId, 'vinyl');\n        } else {\n            this.state.hashToVideoId[ipfsHash] = this.state.videoId;\n            this.state.hashToVideoTitle[ipfsHash] = await this.getYoutubeTitle();\n            this.state.hashToStyles[ipfsHash] = this.state.styles;\n            this.state.hashToYear[ipfsHash] = this.state.year === undefined ? null : this.state.year;\n            this.state.hashToCountry[ipfsHash] = this.state.country === undefined ? null : this.state.country;\n        }\n        this.setState(this.state);\n    }\n\n    onVideoIdChanged(videoId) {\n        console.log(\"on videddd changed\");\n        this.state.videoId = videoId;\n        this.getYoutubeTitle()\n            .then(title =>\n                  {\n                      this.discogs.searchYoutubeTitle(title)\n                          .then((results) =>this.loadDiscogsResults(results));\n                  });\n        this.setState(this.state);\n    }\n\n    loadDiscogsResults(results) {\n        if (results == null || results === undefined) {\n            this.setState({styles: [], country: undefined, year: undefined});\n            return;\n        }\n\n        // get result with earliest year\n        let result = results;\n        if (results.length !== undefined ) {\n            let minYear = Math.min.apply(Math, results.map(x => x.year));\n            result = results.filter(x => x.year === minYear)[0];\n        }\n        this.setState({styles: result.style !== undefined ? result.style : [],\n                       country: result.country,\n                       year: result.year});\n    }\n\n    getYoutubeTitle() {\n        return getYoutubeTitle(this.state.videoId);\n    }\n\n    onSampleSourceChange(type) {\n        this.state.sampleSource = type === 'youtube' ?\n            YOUTUBE : VINYL;\n        this.setState(this.state);\n    }\n\n    loadVideo(result) {\n        this.onVideoIdChanged(result.videoId);\n\n    }\n\n   selectSound(soundId) {                           \n       var index = this.state.selectedSoundIds.indexOf(soundId);\n       if (index > -1) {\n           this.state.selectedSoundIds.splice(index, 1);\n       } else {\n           this.state.selectedSoundIds.push(soundId);\n       }\n       \n       \n       if (this.state.selectedSoundIds.length === 1 && index < 0) {\n           window.dispatchEvent(new Event('sound_selected'));\n       }\n       \n       this.setState({\n           selectedSoundIds: this.state.selectedSoundIds,\n           tagMode: true\n       });\n    }\n\n    startTagging() {\n        this.state.tagMode = true;\n        this.setState(this.state);\n    }\n\n    backToSearch() {\n        this.state.tagMode = false;\n        this.setState(this.state);\n    }\n\n    onClickSequence(history) {\n        var soundIds = this.state.selectedSoundIds.join(',');\n        this.props.history.push('/sequencerSounds/' + soundIds);\n    }\n\n    onClickRandomVideo() {\n        var self = this;\n        let videos = this.ethereumCache.index.YOUTUBE.YOUTUBE;\n        let randomVideo = videos[Math.floor(videos.length * Math.random())].dimension;\n\n        this.loadVideo({videoId: randomVideo});\n    }\n\n    async syncToEthereum() {\n        let promises:Promise<void>[] = [];\n        let soundIds = [];\n        let samples = [];\n        for (let hash in this.state.hashToSoundId) {\n            soundIds.push(this.state.hashToSoundId[hash]);\n            let tags = this.state.soundIdToTags[this.state.hashToSoundId[hash]];\n            let styles = this.state.hashToStyles[hash];\n            if (styles.length > 4) {\n                styles = styles.slice(0, 4);\n            } \n            for (let i=styles.length; i < 4; i++) {\n                styles.push('');\n            }\n\n            if (tags.length > 4) {\n                tags = tags.slice(0, 4);\n            } \n            for (let i=tags.length; i < 4; i++) {\n                tags.push('');\n            }\n\n            let hashToSave = hash;\n            if (this.props.selectedGuild) {\n                let sound = await ipfs.getSound(hash) \n                // use the same content key to encrypt every sound uploaded here\n                hashToSave = await this.encryptedIpfs.addSound(\n                    sound, GUILD, this.props.selectedGuild.guildId, this.contentKey);\n                console.log('hash to save = ');\n                console.log(hashToSave);\n            }\n\n            samples.push({\n                ipfsHash: hashToSave,\n                title: this.state.hashToVideoTitle[hash],\n                videoId: this.state.hashToVideoId[hash],\n                tags: tags,\n                styles: styles,\n                country: this.state.hashToCountry[hash],\n                year: this.state.hashToYear[hash],\n                coverArt: this.state.hashToCoverArt[hash],\n                discogsId: this.state.hashToDiscogsId[hash],\n            });\n        }\n        let guildId = this.props.selectedGuild ? this.props.selectedGuild.guildId : 0;\n        if (guildId !== 0) {\n            ethereum.newEncryptedSamples(\n                samples, guildId, this.contentKey);\n        }  else {\n            ethereum.newSamplesWithMetadata(\n                samples, 0);\n        }\n\n        let finished = await Promise.all(promises);\n\n        for (let id in this.state.soundIdToHash) {\n            let hash = this.state.soundIdToHash[id];\n            delete this.state.hashToVideoTitle[hash];\n            delete this.state.hashToVideoId[hash];\n            delete this.state.hashToVideoId[hash];\n            delete this.state.hashToStyles[hash];\n            delete this.state.hashToYear[hash];\n            delete this.state.hashToCountry[hash];\n            delete this.state.hashToSoundId[hash];\n        }\n\n        soundIds.forEach(id => delete this.state.soundIdToHash[id]);\n\n        this.setState({\n            soundIds: [],\n            syncedToEthereum: true});\n    }\n\n    addTag(tag) {\n        for (let i in this.state.selectedSoundIds) {\n            let id = this.state.selectedSoundIds[i];\n            if (id in this.state.soundIdToTags) {\n                this.state.soundIdToTags[id].push(tag);\n            } else {\n                this.state.soundIdToTags[id] = [tag];\n            }\n        }\n        \n        this.setState(this.state);\n    }\n \n    deleteSound(id) {\n        let hash = this.state.soundIdToHash[id];\n        delete this.state.hashToVideoTitle[hash];\n        delete this.state.hashToVideoId[hash];\n        delete this.state.hashToVideoId[hash];\n        delete this.state.hashToStyles[hash];\n        delete this.state.hashToYear[hash];\n        delete this.state.hashToCountry[hash];\n        delete this.state.hashToSoundId[hash];\n        delete this.state.soundIdToHash[id];\n        let index = this.state.soundIds.indexOf(id);\n        this.state.soundIds.splice(index, 1);\n        this.setState(this.state);\n    }\n\n    deleteTag(soundId, tag) {\n        let index = this.state.soundIdToTags[soundId].indexOf(tag);\n        this.state.soundIdToTags[soundId].splice(index, 1);\n        this.setState({soundIdToTags: this.state.soundIdToTags});\n    }\n   \n    render() {\n        return (\n            <div className=\"discover-full-view\">\n              <PasswordModal crypto={ethereum.crypto} show={true}/>\n              <LoginModal show={this.props.showLogin}/>\n              <UniversalNavigator view=\"DISCOVER\" store={this.props.store}/>\n             <div className=\"discover-view\">\n             \n              <div className=\"clear-fix\"/>\n             \n              <div className=\"float-left\">\n              <div className=\"discover-toolbar\">\n                <GuildsMenu store={this.props.store}/>\n                <ConditionedComponent condition={!this.state.syncedToEthereum && this.state.soundIds.length > 0}>\n                  <div\n                    onClick={() => this.syncToEthereum()}\n                    className=\"pink-button common-button\">\n                    SAVE {this.state.soundIds.length} SOUNDS\n                  </div>\n                </ConditionedComponent>\n                <TransactionsView/>\n                <SampleSource\n                  deviceId={this.state.deviceId}\n                  onChooseAudio={(x, deviceId) => this.onChooseAudio(x, deviceId)}\n                  onSampleSourceChange={(type) => this.onSampleSourceChange(type)}/>\n              </div>\n              <div className=\"youtube-pane\">\n                <YoutubeSampler\n                  onCoverDownloaded={(sampleHash, coverHash) => this.onCoverArtDownloaded(sampleHash, coverHash)}\n                  stream={this.state.stream}\n                  styles={this.state.styles}\n                  year={this.state.year}\n                  country={this.state.country}\n                  videoId={this.state.videoId}\n                  onClickTag={() => this.startTagging()}\n                  onSoundUploaded={(id, hash) => this.onSoundUploaded(id, hash)}\n                  sampleSource={this.state.sampleSource}\n                  onClickRandomVideo={() => this.onClickRandomVideo()}\n                  playOutputRecording={this.state.sampleSource === VINYL}\n                  />\n                <ConditionedComponent condition={this.state.soundIds.length > 0}>\n                  <div className=\"sampled-sounds-container\">\n                    {this.state.soundIds.map((soundId) =>\n                      <SampledSound \n                        encryptedIpfs={this.encryptedIpfs}\n                        key={soundId}\n                        onDelete={() => this.deleteSound(soundId)}\n                        tags={this.state.soundIdToTags[soundId]}\n                        isSelected={this.state.selectedSoundIds.indexOf(soundId) > -1}\n                        onClickThumbnail={() => this.selectSound(soundId)}\n                        onDeleteTag={(tag) => this.deleteTag(soundId, tag)}\n                        onClickTag={() => this.tagSound(soundId)}\n                        coverArt={this.state.hashToCoverArt[soundId]}\n                        videoId={this.state.hashToVideoId[this.state.soundIdToHash[soundId]]}\n                        store={this.props.store}\n                        title={this.state.hashToVideoTitle[this.state.soundIdToHash[soundId]]}\n                        soundId={this.state.soundIdToHash[soundId]}/>\n                        )}\n                  </div>\n                </ConditionedComponent>\n              </div>\n                </div>\n              <div className=\"description-pane\">\n                {this.state.tagMode ?\n                 <SoundTagger soundIdToHash={this.state.soundIdToHash} onClickBack={() => this.backToSearch()} onUpdateTags={(tag) => this.addTag(tag)} selectedSoundIds={this.state.selectedSoundIds}/> :\n                 <InternetNavigatorPane store={this.props.store} videoId={this.state.videoId} onClickResult={(result) => this.loadVideo(result)}/>}\n              </div>\n                </div>\n                </div>\n        );\n    }\n}\n\n                  \nconst mapStateToProps = state => {\n    return {\n        selectedRecord: state.discover.selectedRecord,\n        selectedGuild: state.guilds.selectedGuild,\n        showLogin: state.sequencer.showLogin,\n    };\n};\n\nexport default connect(mapStateToProps, null)(Discover);\n"],"sourceRoot":""}