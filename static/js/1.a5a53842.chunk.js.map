{"version":3,"sources":["discogs/Discogs.js","components/selector2/getSoundResults.js","utils/downloadImage.js","components/lfo/LFOTrackComponent.js","components/track/SendComponent.js","components/track/SendsTrackComponent.js","components/upload/Tags.js","components/track/SendEffect.js","components/mix/mix2/MidiEffects.js","components/system5/ModuleOption.js","components/system5/AutomationPaths.js","components/system5/ModuleLoader.js","components/system5/constants.js","components/system5/HigherOrderHeader.js","components/system5/ModuleRouter.js","components/system5/RoutingMatrix.js","components/system5/ModuleScripter.js","components/system5/OrientationRouting.js","components/system5/useOrientation.js","components/system5/Choice.js","components/system5/Triangle.js","components/system5/AlgorithmChooser.js","components/system5/ParameterResult.js","components/system5/ParameterSearcher.js","components/system5/HigherOrderParameters.js","components/system5/Sidebar.js","components/system5/Playhead.js","components/system5/HigherOrderStepComponent.js","components/system5/useMouse.js","components/system5/HigherColumn.js","components/system5/HigherOrderComponent.js","components/system5/useKeys.js","components/mix/GridsContainer.js","components/mix/mix2/MixBottomPaneOptions.js","components/mix/mix2/AudioEffects.js","components/mix/mix2/MixEffects.js","components/mix/mix2/constants.js","components/mix/MixTab.js","components/mix/TrackVisualizer.js","components/mix/TracksVisualizer.js","components/mix/filterTags.js","components/mix/TrackToggleButton.js","components/mix/TrackMuteButton.js","components/mix/GroupMuteButton.js","components/mix/GroupThumbnailPart.js","components/mix/GroupThumbnail.js","components/mix/Group.js","components/mix/NewGroup.js","components/mix/GroupsComponent.js","components/mix/MultiParameterSlider.js","components/mix/MixesComponent.js","components/mix/MixParametersComponent.js","components/mix/EffectsPaneSidebar.js","components/mix/MixTrackParametersView.js","components/mix/MixEffectsPane.js","components/mix/SendMuteButton.js","components/mix/SendThumbnail.js","components/mix/SendComponent.js","components/mix/Mix.js","components/groups/getPath.js","components/groups/DraggingEdge.js","components/groups/MarkovEdge.js","components/groups/GroupEdges.js","components/upload/RecordInfo.js","components/mix/OutputChannelChooser.js","utils/truncate.js","components/installation/SamplePackFlow.js","constants/release-types.js","components/installation/ReleaseType.js","components/installation/DiscogsFlow.js","components/installation/SaveNewSample.js","components/installation/Rating.js","components/installation/PresetsBreadcrumb.js","components/installation/CreatedBy.js","utils/date.js","components/installation/SynthBrowser.js","components/installation/SamplesBreadcrumb.js","components/installation/GoToSource.js","components/installation/getThumbnails.js","components/installation/SampleTooltip.js","components/installation/SampleInfo.js","components/installation/SampleExplorer.js","components/installation/SamplerBrowser.js","components/installation/SimpleSequencerBottomToolbar.js","components/subpatch/ZObjectWindow.js","components/subpatch/SubPatchSidebar.js","components/subpatch/ObjectTree.js","components/subpatch/SubPatchObjectSidebar.js","components/subpatch/getParents.js","components/subpatch/SubPatchBreadcrumb.js","components/subpatch/SubPatchMenu.js","components/subpatch/SubPatchColors.js","components/subpatch/SubPatch.js","components/subpatch/useSubPatchScroll.js","components/subpatch/SubPatches.js","components/sidebar/EffectPresets.js","components/sidebar/EffectChoice.js","components/sidebar/EffectChoices.js","components/sidebar/SidebarOptions.js","components/audition/SampleSearcher.js","components/sidebar/QuickSampleChooser.js","components/xanadu/SourceSamples.js","components/xanadu/VisualLink.js","components/xanadu/SourceExploring.js","components/xanadu/YearExploring.js","components/xanadu/Xanadu.js","components/installation/StepActions.js","components/installation/Modes.js","components/installation/AutomationToolbar.js","components/sidebar/StepsButton.js","components/sidebar/TrackQuickView.js","utils/getProjectsUsed.js","components/automation/AutomationParameterDropdowns.js","parameters/getParametersWithAutomation.js","components/sidebar/StepGroupEditor.js","components/selector2/Day.js","components/sidebar/ZNumberInspector.js","components/user/CommentsComponent.js","components/user/getNotes.js","components/folders/FoldersComponent.js","components/v3/sidebar/SynthThumbnail.js","components/v3/sidebar/Navigator.js","components/modals/ArrangementSearcher.js","components/arrangement/PatternComponent.js","components/arrangement/useXVisible.js","components/arrangement/RollComponent.js","components/arrangement/ArrangementBottom.js","components/arrangement/ArrangementBottomResizer.js","components/folders/XanaduFolders.js","components/arrangement/SideBrowserContainer.js","components/arrangement/keyDown.js","components/arrangement/quantizeStep.js","components/arrangement/SelectionComponent.js","components/arrangement/selectors.js","components/arrangement/MouseHelper.js","components/arrangement/useSticky.js","components/arrangement/onScale.js","components/arrangement/getHeight.js","components/arrangement/TimeRowComponent.js","components/arrangement/TimeBackgroundComponent.js","components/arrangement/ClockTickComponent.js","components/arrangement/RowSelection.js","components/arrangement/useRowSelection.js","components/arrangement/tracks/TrackPattern.js","components/arrangement/tracks/TrackPatterns.js","components/arrangement/tracks/TrackTimeLine.js","components/arrangement/tracks/useYVisible.js","components/arrangement/tracks/SubSequenceTracks.js","components/arrangement/getScrollLeft.js","components/arrangement/PatternRoll.js","components/arrangement/MiniPianoRoll.js","components/arrangement/automation/positionUtils.js","components/arrangement/automation/VolumeAutomationPoint.js","components/arrangement/automation/VolumeGuidePoint.js","components/arrangement/automation/VolumeChangeAutomation.js","components/arrangement/tracks/TrackSidePanel.js","components/arrangement/tracks/TracksSidePanel.js","components/arrangement/tracks/TracksShowButton.js","components/arrangement/AutomationTypeDropdown.js","components/arrangement/SubSequenceSidePanel.js","components/arrangement/cursor.js","components/arrangement/SubArrangementComponent.js","components/arrangement/SidePanelToolbar.js","components/arrangement/SidePanelContainer.js","components/arrangement/SelectionBox.js","components/arrangement/RollsArrangementComponent.js","components/arrangement/ArrangementContainer.js","components/arrangement/ArrangementView.js","components/v3/sidebar/recent/RecentlyAddedSounds.js","components/v3/sidebar/plugins/PluginOption.js","components/v3/sidebar/plugins/PluginsList.js","components/v3/sidebar/plugins/PluginsViewer.js","components/v3/sidebar/track/ParamValue.js","components/v3/sidebar/track/TrackParameters.js","components/v3/sidebar/track/TrackInformation.js","components/v3/sidebar/track/InstrumentViewer.js","components/v3/sidebar/zobject/ZObjectInformation.js","components/v3/sidebar/zobject/ZMessageInformation.js","components/v3/sidebar/pad/PadInformation.js","components/v3/sidebar/effects/EffectInformation.js","components/v3/sidebar/ObjectInformation.js","components/v3/sidebar/Sends.js","components/v3/sidebar/zobject/OperationDocs.js","components/v3/sidebar/zobject/SubPatchTools.js","components/v3/sidebar/zobject/ZObjectActions.js","components/v3/sidebar/zobject/AttributesInspector.js","components/v3/sidebar/zobject/ObjectConnector.js","components/v3/sidebar/zobject/ZObjectTools.js","components/v3/sidebar/pad/PadQuickEffects.js","components/v3/sidebar/pad/PadToolsSidebar.js","components/v3/sidebar/track/TrackQuickSends.js","components/v3/sidebar/track/TrackQuickEnvelopes.js","components/v3/sidebar/track/WarpKnob.js","components/hooks/useWindowSlider.js","components/v3/sidebar/track/TrackQuickInstrument.js","components/v3/sidebar/track/TrackQuickEffects.js","components/v3/sidebar/track/TrackQuickAux.js","components/v3/sidebar/track/TrackFreezes.js","components/v3/sidebar/track/TrackToolsSidebar.js","components/v3/sidebar/zobject/ZMessageTools.js","components/v3/sidebar/effects/PlaneTools.js","components/v3/sidebar/effects/EffectTools.js","components/v3/sidebar/ToolsSidebar.js","components/v3/sidebar/RightSidebar.js","components/sounds/OptionTabs.js","components/presets/PresetModal.js","components/instruments/InstrumentsView.js","components/sidebar/ZObjectSidebar.js","components/notes/NotesComponent.js","components/packs/PackSearch.js","components/packs/PackDetails.js","components/packs/PackOption.js","components/packs/PacksSelector.js","components/packs/PacksComponent.js","components/packs/NewPackFlow.js","components/sidebar/SidebarComponent.js","components/mix/mix2/moveTrackToGroup.js","components/mix/mix2/useEffects.js","track/freeze/freezeGroupByPatterns.js","components/mix/mix2/GroupActions.js","components/mix/mix2/VolumeSlider.js","components/mix/mix2/GroupVolumeControl.js","components/mix/mix2/PanKnob.js","components/mix/mix2/TrackControls.js","components/mix/mix2/Track.js","components/mix/mix2/Group.js","components/mix/mix2/NewGroupsComponent.js","components/selector2/SourceFinder.js","components/selector2/Rating.js","components/selector2/SampleOption.js","components/selector2/SourceResults.js","components/selector2/SourceEditor.js","components/selector2/DayResults.js","components/selector2/ListResults.js","components/selector2/SoundGrid.js","components/selector2/SourceToSearch.js","components/selector2/PackToSearch.js","components/selector2/Selector.js","components/selector2/presets/PresetOption.js","components/selector2/presets/SourceResults.js","components/selector2/presets/DayResults.js","components/selector2/presets/ContentGrid.js","components/selector2/presets/getPresets.js","components/selector2/presets/Presets.js","components/windows/adjustEdgeSize.js","components/spatial/StyleSetter.js","components/spatial/ModuleSpatialView.js","components/spatial/useModuleDrop.js","components/zobject/ZObjectContextMenu.js","components/v3/sidebar/ObjectOption.js","components/v3/sidebar/NestedZObject.js","decentralized/artists/constants.js","components/installation/UnsourcedFlow.js","utils/loadSampleFromProject.js","components/installation/SampleUsed.js","components/sidebar/TrackOverview.js","components/sidebar/TracksOverview.js","components/folders/ItemComponent.js","components/folders/FolderComponent.js"],"names":["apiToken","axios","require","Discogs","Object","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","titleToLabels","nameToLabelInfo","nameToLabel","idToReleases","title","_this","Promise","resolve","reject","undefined","searchYoutubeTitle","then","result","data","label","map","getLabelInfo","ret","labelData","id","name","images","uri","push","length","catch","err","discogsId","url","get","results","recordName","console","log","split","join","labelName","callback","_this2","query","searchLabel","labelId","page","_this3","youtubeTitle","searchObject","string","partsCallback","artist","credits","escapeRegExp","str","replace","baddies","forEach","token","trim","toUpperCase","toLowerCase","parts","i","indexOf","splice","baddy","RegExp","creditMap","credit","keys","parseTitleString","earliestResult","year","includes","GuildSamplesContract","contractAddress","getSoundResultsServer","pageSize","arguments","searchTerms","guildId","groupBy","start","filterFavorites","sourceToSearch","tag","packToSearch","isNumber","_year","parseInt","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","_ref2","releaseId","videoId","guildIds","pack","userId","body","wrap","_context","prev","next","t0","ethereum","getGuildsWithAccess","sent","packHash","accounts","getAccount","JSON","stringify","size","Math","floor","searchTerm","user","fetch","method","headers","Accept","Content-Type","resp","json","sort","b","blockNumber","stop","_x","_x2","apply","getByDay","_step6","blocks","_iterator6","_createForOfIteratorHelper","s","n","done","value","lastBlock","lastBlockNumber","abs","e","f","partitionBySource","byDay","_step7","_iterator7","_step8","dayResult","discogs","instrumentTypes","youtube","unsourced","_iterator8","coverArtHash","tags","some","find","instrumentType","fetchDaysForBlocks","_ref8","_callee7","byDayAndSource","_context7","abrupt","_x10","__webpack_require__","d","__webpack_exports__","downloadImage","axios__WEBPACK_IMPORTED_MODULE_0__","axios__WEBPACK_IMPORTED_MODULE_0___default","decentralized_Ipfs_js__WEBPACK_IMPORTED_MODULE_1__","thumb","responseType","blob","ipfs","addBlob","hash","LFOTrackComponent","props","showLFOs","lfoPatternLocked","showEnvelopes","envelopePatternLocked","setShowEnvelopes","setShowLFOs","lfosTrack","togglePatternLocked","envelopesTrack","className","isMixView","lfoThumbnailClassName","envelopeThumbnailClassName","react__WEBPACK_IMPORTED_MODULE_5___default","createElement","key","onClick","onMouseOver","setContextualHelp","LFOS_BUTTON","onMouseLeave","onClickLFOThumbnail","ENVELOPES_BUTTON","onClickEnvelopeThumbnail","components_ConditionedComponent_js__WEBPACK_IMPORTED_MODULE_6__","condition","lfos","lfo","_SingleLFOComponent_js__WEBPACK_IMPORTED_MODULE_7__","number","sequencerEngine","envelopes","envelope","components_envelope_SystemEnvelopeComponent_js__WEBPACK_IMPORTED_MODULE_8__","scrollContainer","envelopeTrack","onClickLock","src","patternLocked","Component","connect","state","tracks","envelopePatternLocks","subSequence","currentPattern","lfoPatternLocks","sequencer","dispatch","element","masterChannel","effects","effectsChain","send","_useState","useState","_useState2","slicedToArray","setValue","channel","handleChooseEffect","useCallback","effect","initializeEffect","enable","wetParameter","set","addEffect","useEffect","moveEffectTo","from","to","react_default","dist_default","options","effectOptions","onChange","placeholder","SendEffect","effectNumber","selectedEffect","selectedSendEffect","setSelectedSendEffect","sends","setSends","ref","useRef","onDelete","x","channelMixer","EffectComponent","noSelect","isDraggable","onDeleteEffect","createNewSend","toConsumableArray","track_SendComponent","setTags","_ref$placeholder","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","deleteTag","t","filter","onKeyDown","concat","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_2___default","type","target","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","components_mix_mix2_ParameterVisual_js__WEBPACK_IMPORTED_MODULE_1__","react_redux__WEBPACK_IMPORTED_MODULE_2__","actions_index_js__WEBPACK_IMPORTED_MODULE_3__","effectDragging","isSelected","dragEffect","onDragStart","onDrop","stopPropagation","selectEffect","parameters","getParameters","slice","onDragOver","preventDefault","draggable","parameter","Colors","selectedTrack","track","selectedGroup","mix","subId","currentSubSequence","engineId","effectsLength","midiEffects","selectedTrackMidiEffects","setSelectedEffect","sub","trackNumber","groupNumber","setSelectedMixEffect","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_0__","moveMidiEffectTo","fxComponent","react__WEBPACK_IMPORTED_MODULE_1___default","components_effects_MidiEffectComponent_js__WEBPACK_IMPORTED_MODULE_4__","compact","initializeMidiEffect","style","_EffectOption_js__WEBPACK_IMPORTED_MODULE_2__","effectType","react_dropdown__WEBPACK_IMPORTED_MODULE_3___default","midiEffectOptions","NAMES","project","setData","_useState3","_useState4","modules","setModules","_useState5","_useState6","module","getJson","newSequence","onClickModule","loadSequence","subSequences","clicked","setClicked","projects","setProjects","useScroll","getProjects","p","system5_ModuleOption","newSubSequence","automationPaths","_path","fill","path","y","strokeWidth","stroke","show","higherOrder","setShowHigherOrderSequencer","num","higherOrderSequencer","inputModules","outputModules","mod","toggleInput","scriptEffect","system5_ModuleRouter","UserScriptComponent","doc","orientationRoutings","modulesLen","setHigherOrderStepsSelected","orientation","routings","isConnected","toggle","disconnectModules","connectModules","toggleFreeform","isFreeform","disconnectFromFreeform","connectToFreeform","toModule","_useOrientation","dragging","setDragging","selectedEdge","setSelectedEdge","window","addEventListener","removeEventListener","getModule","getMouseXY","rect","current","getBoundingClientRect","clientX","left","clientY","top","onMouseUp","onMouseMove","_getMouseXY","objectSpread","x2","y2","onMouseDown","_getMouseXY2","x1","y1","useOrientation","routing","getXY","getModNumber","getRectXY","onFreeformUp","routeKeys","rectXY","rectX","rectY","height","width","markerWidth","markerHeight","refX","refY","orient","points","freeformModules","fromPos","toPos","markerEnd","cx","cy","r","_getXY","SIZE","algorithmTypes","chosen","setChosen","borderLeft","borderTop","borderRight","borderBottom","system5_Triangle","system5_RoutingMatrix","system5_Choice","PLAY_MODULE","RESTART_MODULE","ROLL_MODULE","PLAY_SPEED_MODULE","colors","mouseDown","selectedParameters","setSelectedParameters","setParameters","context","instrument","subDevice","midiEffect","setParameter","_parameters","isMetronome","formant","enabled","metaKey","backgroundColor","color","getColorForTrack","getName","getColorForHash","setResults","index","search","audioParam","audioParams","createMacro","params","Array","Set","macro","macroParameter","hasMacro","system5_ParameterResult","setIsMacroMapping","isMapping","setAccumulatorParameterSelected","param","ParametersMapper","parametersList","EffectParameterSlider","min","max","step","automationDepthParameter","system5_ParameterSearcher","selected","system5_HigherOrderHeader","system5_AlgorithmChooser","system5_HigherOrderParameters","trackStep","playing","isDragging","setSelected","stepData","setSelection","objectWithoutProperties","acted","setColor","_useContextMenu","useContextMenu","onContextMenu","dropdownPos","setDropdownPos","_useMouse","matrix","useMouse","HigherColumn","selection","justPressed","getSelection","dist","setStepSize","getStepClass","obj","selectedSteps","moving","setMoving","tagName","deleteSteps","pt","moveStepTo","useKeys","svgClass","system5_Playhead","col","system5_HigherColumn","steps","system5_HigherOrderStepComponent","system5_AutomationPaths","system5_Sidebar","modulesCollapsed","pads","scale","setScale","onMouseWheel","deltaX","deltaY","wheelDeltaY","wheelDeltaX","ctrlKey","_scale","transform","ModuleSpatialView","showEffects","system5_HigherOrderComponent","selectedTrackEffects","selectedGroupEffects","trackOrGroup","groups","_track","_group","group","presetName","EffectOption","groupTracks","option","setOption","mix2_MixBottomPaneOptions","EnvelopeOptions","MidiEffects","mix2_AudioEffects","ContextualHelpComponent","MixTab","setMixViewMode","switchToSubSequence","MixTabOption","SUBSEQUENCE","isCurrent","mixViewMode","getSubSequenceName","React","COLORS","triggerColor","getColor","DRUM_TAGS","muted","lastTrigger","setLastTrigger","lastRelease","setLastRelease","thumbnailStyle","setThumbnailStyle","_useState7","_useState8","additionalStyle","setAdditionalStyle","onClickMute","mute","onTrigger","setTimeout","Date","getTime","duration","brightness","sliceStartTime","sliceDuration","brighten","onRelease","time","currentSubSequenceId","removeEventListeners","TRIGGER_SAMPLE","RELEASE_SAMPLE","sample","thumbnail","getThumbnail","stringToConvert","getId","innerText","has","getInstrumentType","MULTI_SYNTH","SAMPLED_INSTRUMENT","samples","getSamples","innerComponent","getTrackType","MULTI_FREEZE","MultiFreezeThumbnails","ConditionedComponent","mix_TrackVisualizer","_intersect","set1","set2","z","TrackToggleButton","classCallCheck","_super","call","isEnabled","toggleEnabled","setState","onToggleClicked","isToggled","TrackMuteButton","onMuteClicked","trackMutes","GroupMuteButton","mix_TrackToggleButton","onTrackMuteClicked","onGroupMuteClicked","mix_TrackMuteButton","groupMutes","TAGS","GroupThumbnailPart","nextProps","nextState","renders","timer","setInterval","trackMeter","getLevel","clearInterval","onDraggingTrack","trackDragging","addToGroup","onGroupsChanged","truncate","thumbnailPartStyle","unselected","isSelectedGroup","opacity","isTrackSelected","coloredThumbnailStyle","nameStyle","getNameToShow","numParts","onClickTrack","onError","GroupThumbnail","onSelectTrack","partWidth","THUMBNAIL_WIDTH","mix_GroupMuteButton","mix_GroupThumbnailPart","Group","volume","getVolume","pattern","getSelectedTrackInGroup","cursor","selectTrack","setSelectedTrack","setSelectedGroup","setVolume","tagsToRemove","j","otherTag","delete","filterTags","react_bootstrap_slider_default","handle","change","onChangeVolume","reversed","stereoConnected","OutputChannelChooser","mix_GroupThumbnail","getTags","reactstrap_es","selectedTrackInGroup","groupVolumes","trackVolumes","NewGroup","newGroup","MultiParameterSlider","minSelected","maxSelected","isMouseDown","setParametersToRecord","IS_TRACK","IS_GROUP","IS_SEND","parameterLocks","val","selectedParameter","normalizeOriginal","setMultiParameterSliderValue","getParameterLocks","parameterLock","normalizedSet","getEffectsTrackIf","sendNumber","addParameterLock","deleteParameterLock","onClickMin","formatNumber","onClickMax","onAdd","flashing","MultiParameterSlider_ParameterElement","onDeleteParameterLock","onClickParameterLock","ParameterElement","effectName","selectedParameterFlashing","multiParameterSliderValues","MixesComponent","MixParametersComponent","LFOS","onClickOption","bind","assertThisInitialized","EffectsPaneSidebar","setEffectsPaneOption","HIDE","EFFECTS","TRACK","effectsPaneOption","MixTrackParametersView","trackData","durationParameter","transposeParameter","chopParameter","velocityParameter","attackParameter","releaseParameter","pitchAttackParameter","pitchDecayParameter","pitchSustainParameter","pitchReleaseParameter","MixTrackParametersView_ParametersBox","ParametersBox","Parameter","ConnectedParameter","setSelectedParameter","setSelectedParameterFlashing","_this4","originalMax","originalMin","isParameter","lfoEnabled","onParameterChanged","effectParameters","MixEffectsPane","getEffectsTrack","updateEffects","mix_EffectsPaneSidebar","mix_MixTrackParametersView","hide","EffectsComponent","EffectsView","store","onEffectsChange","panning","onChangePanning","SendMuteButton","setSendMuted","onSendMuteClicked","sendMutes","SendThumbnail","mix_SendMuteButton","SendComponent","mix_SendThumbnail","Mix","createRef","play","MIXES","setHideMixer","hideMixer","showingPiano","SimpleSequencerBottomToolbar","SubPatches","containerRef","mix_MixTab","mix_MixParametersComponent","mix_GridsContainer","NewGroupsComponent","SubMixComponent","SendsTrackComponent","toggleHide","bottomMode","arrangement","showPianoRoll","PIANO_ROLL","getPath","sqrt","xd","xDistance","pow","transformationEdgeDragging","container","pos","setPos","transformation","fromId","fromEl","document","getElementById","fromRect","bounds","scrollLeft","scrollTop","offsetLeft","Arrow","tension","pointerLength","pointerWidth","trackSteps","toId","whenValue","toEl","toRect","stepsGroupMode","setTransformationEdgeDragging","pageX","pageY","markovTransformations","getAllGroups","g","transformations","whenType","MARKOV","reduce","scrollHeight","groups_DraggingEdge","groups_MarkovEdge","records","_ref$showTags","showTags","record","setRecord","_records","styles","genre","country","releaseName","getReleaseInfo","artistName","artists","react_dropdown__WEBPACK_IMPORTED_MODULE_5___default","o","_Tags_js__WEBPACK_IMPORTED_MODULE_4__","getOption","switchChannelOutput","outputNode","right","outputs","react_dropdown__WEBPACK_IMPORTED_MODULE_2___default","controlClassName","arrowClassName","getOptions","channelCount","truncateLength","substring","guilds","selectedGuild","setUploadingFile","setArtistName","setName","coverArtUrl","setCoverArtUrl","samplePack","setSamplePack","_useState9","_useState10","editedCoverArt","setEditedCoverArt","_useState11","_useState12","copiedAll","setCopiedAll","getSamplePack","copyToAll","_step","_iterator","_sample","sessionStorage","setItem","releaseType","saveWithCoverArt","saveSample","saveAll","_callee2","_iterator2","_step2","_context2","finish","ImageHandler","imageHash","setImageHash","setReleaseType","Result","_ref3","stripExtension","extensionIndex","isLoggedIn","userToken","setShowLogin","selectedId","setSelectedId","onClickResult","lstorage","searchRecords","getItem","parsed","parse","onClickSave","DiscogsFlow_Result","installation_ReleaseType","installation_DiscogsFlow","installation_SamplePackFlow","Star","rating","content","setRating","xanadu","rateSound","getSoundRating","Rating_Star","presets","trackBrowsedPresets","setBrowsedPresets","setTrackBrowsedPresets","preset","_ref$presets","auditionPreset","loadMods","loadEffects","onClickPrev","contentHash","onClickNext","getClassName","nextClass","prevClass","contentName","setContentName","userName","setUserName","createdDate","setCreatedDate","isCreated","users","getUserName","sampledByUser","getBlockDate","date","getFullYear","month","getMonth","toString","day","getDate","getFormattedDate","ipfsHash","saveContent","save","creationWord","getContentType","SAMPLE","creation","PRESET","hasEdits","createdBy","subTrack","setTagSelected","synth","tagSelected","_ref$type","installation_PresetsBreadcrumb","CreatedBy","TagsInfo","installation_Rating","PRESET_RATED","PresetsExplorer","trackBrowsedSamples","setBrowsedSamples","setTrackBrowsedSamples","_ref$samples","auditionSound","goToSource","open","contract","cache","getThumbnails","videoIds","coverArts","thumbnails","_r","BackendQuery","SampleYoutube","select","whereIn","executeQuery","NewDiscogsSample","getThumbnails_createForOfIteratorHelper","sampleHash","getHashUrl","sampleInfo","audition","sampleTooltip","SampleInfo","sampleId","annotations","position","onClickSample","hovered","setHovered","setSampleInfo","setSampleTooltip","c","Sample","load","borderColor","saturate","backgroundImage","counter","pendingTransactions","transactions","setSampleDragging","audioUnit","setStart","showSamples","setShowSamples","setSamples","setThumbnails","setAnnotations","playSound","stopSound","_ref4","_callee3","_counter","s2","_context3","_x3","scrollTo","getSoundsWithTag","sounds","getSoundsWithVideo","getSoundsWithDiscogs","getSoundsWithUserBlockNumber","onScroll","getAnnotations","SAMPLE_ANNOTATION","el","offsetHeight","samplesToShow","installation_SampleInfo","installation_SampleTooltip","selectedInstrument","loaded","frozenColumns","selectedRackSubTrack","trackIsLoading","isFrozen","AudioUnit","dispose","WAVEFORM","SAMPLER","DetailsView","showParameters","hideKeyboard","alreadyLoaded","onGoBack","keyboardEngine","midiEngine","midi","resolution","parentView","SEQUENCER_VIEW","bpm","sampler","samplers","selectedSampler","defaultSampler","INSTRUMENT_RACK","installation_SynthBrowser","audioBuffer","setBuffer","TrackThumbnail","onClickThumbnail","Waveform","buffer","installation_SamplesBreadcrumb","needsSave","installation_GoToSource","SOUND_RATED","UnsourcedFlow","SampleUsed","installation_SaveNewSample","installation_SampleExplorer","sidebarCollapsed","viewMode","numTracks","bottomHeight","selectedRows","setArrangementBottomResizing","resizing","toolbar","AutomationToolbar","PianoRollComponent","parentClassName","isLooping","installation","hideToolbar","windowPosition","windows","windowPositions","zobject","setViewableZObjects","setSize","sizeRef","ordering","setOrdering","elements","_useWindowManager","useWindowManager","basicContainerRef","windowScale","setWindowScale","_style","startResizing","closeWindow","viewableZObjects","ZObjectComponent","isStatic","customMode","subpatch","selectedZObject","opened","setOpened","RightSidebar","seauencerEngine","zobjects","zObjects","zmessages","zMessages","objectDragging","setSelectedZObject","setObjectDragging","onClickZObject","maxHeight","dataTransfer","NUMBER","storedMessage","NestedZObject","subpatch_ObjectTree","getParents","parents","zObject","setViewableSubPatches","setWindowPosition","goTo","_subpatch","subpatches","viewableSubPatches","_parents","reverse","toAdd","args","presentationMode","spatial","setFullScreenZObject","setEditLayout","editLayout","setCustomMode","toggled","setToggled","toggleCustom","isCustom","isOpen","caret","hex","fillColor","setFill","showing","setShowing","react_color_es","setModuleSize","subPatches","contentRef","arrangeWindows","useArrangeWindows","dropdownPosRef","scrollRef","styleSize","setStyleSize","onWheel","passive","lastScrollTime","_ref$current","innerWidth","innerHeight","_size","useSubPatchScroll","onDoubleClickHeader","onHeaderClick","useDoubleClick","orderingRef","hideSubPatch","_subPatches","deencapsulate","createInlet","_dropdownPosRef$curre","createZMessage","_dropdownPosRef$curre2","newInlet","createInstanceInlet","_dropdownPosRef$curre3","newInstanceInlet","createOutlet","_dropdownPosRef$curre4","newOutlet","includeInPresentation","pulledElements","selectedElements","_i","_ids","node","findNodeById","setAttribute","zIndex","segment","segmentAllCables","encapsulate","encapsulateObjects","_elements","NW","NE","SW","SE","subpatch_SubPatchBreadcrumb","ContextMenu","MenuItem","ZObjectToolbar","subpatch_SubPatchMenu","subpatch_SubPatchObjectSidebar","SubPatchContent","subpatch_SubPatchSidebar","fullScreenZObject","_useWindows","useWindows","toHide","SubPatches_createForOfIteratorHelper","subpatch_ZObjectWindow","subpatch_SubPatch","matchedPresets","setPresets","getEffectPresets","loadPreset","fx","effectHash","fromJson","loadLostParameters","isCollapsed","setIsCollapsed","sidebar_EffectPresets","sidebar_EffectChoice","searchText","auditionTrack","samplesStream","setStream","searching","setSearching","searchForSounds","UnknownProgressBar","text","SamplesStreamExplorer","Tag","isRainbow","isDark","openSelector","scrollTags","setSampleTagDragging","loading","setLoading","trackRef","offset","useClientBounds","fields","ethereumCache","getAllForField","random","isArray","warp","Documented","QUICK_ADD_BUTTON","arg","selector","quickAddSearchText","getSelectedTrack","explorerMaximized","setSearchText","setQuickAddSearchText","setShowPianoRoll","setArrangementBottomMode","setSidebarSearchInput","setSelectorMode","m","setSidebarViewMode","setSelectedSteps","setSelectedPianoRollSteps","setShowPlugins","selectedTag","setSelectedTag","DEFAULT_TAGS","setEffects","rainbow","_useSearcher","useSearcher","clear","showBottom","INFO","addAudioTrack","addSynth","addMultiSynthTrack","addInstrumentRackTrack","addSampledInstrumentTrack","sampleClassName","instClassName","selectedPianoRollSteps","getBrightness","quickClassName","tagsToShow","sidebar_SidebarOptions","SIDEBAR_SEARCH","spellcheck","audition_SampleSearcher","QuickSampleChooser_Tag","QUICK_ADD_INSTRUMENT_BUTTON","loadingSample","ids","flatMap","getBulkSampleInfo","onClickTag","_tags","_x4","_samples","localeCompare","SampleStreamOption","topOffset","getParentScroll","parent","parentElement","setCoords","_ref$coords","coords","setTarget","HEIGHT","scroll","calculatePts","pRect","stopColor","sourceExploring","setSourceExploring","setYearExploring","setStyles","guildSamples","getStylesForSound","xanadu_SourceSamples","xanadu_VisualLink","yearExploring","getElementsByClassName","offsetTop","SampleYear","where","xanadu_SourceExploring","xanadu_YearExploring","quantized","setQuantized","addSteps","doubleTrackLength","removeSteps","halfTrackLength","toggleQuantize","quantizedStyle","ResolutionDropdown","Mode","selectedOption","setBottomMode","borderBottomWidth","borderBottomStyle","borderBottomColor","showQuickTracks","setShowQuickTracks","hasSampler","hasPiano","hasInfo","INSTRUMENT","TracksOverview","showName","mode","Modes_Mode","DOUBLE_CLICK_TIME","MIN_HEIGHT","numEffects","selectedDevice","automation","trackDevice","trackSubDevice","trackParameter","showAutomation","selectedRackDevice","trackRackDevice","setTrackAutomationParameter","setTrackAutomationDevice","device","setTrackAutomationRackDevice","setTrackAutomationSubDevice","setArrangementBottomHeight","setShowAutomation","setBottomOffset","bottomOffset","setBottomToolbarOffset","parametersWithAutomation","getParametersWithAutomation","hideAutomation","onParameterClicked","lastClick","setLastClick","now","getState","MODE_TO_HEIGHT","automationIcon","installation_Modes","toggleContent","AutomationParameterDropdowns","getParameterName","installation_StepActions","groupMode","setGroupMode","setStepsGroupMode","onClickGroupSteps","groupSteps","onClickUngroup","ungroupSteps","onClickRollSteps","rollSteps","onClickLegatoSteps","legato","ConditionedCheckmark","TrackQuickView","getTrackData","gangMode","parametersToUpdate","operationManager","updateStepParameter","updateSteps","auditionNext","auditionPrevious","getMin","getMax","favoriteButton","FavoriteButton","PulseLoader_default","sizeUnit","BROWSE_SOUNDS","previousSample","nextSample","ParameterOption","chooseParameter","isCirklonSelected","cirklonParameterSelected","ParameterValue","getValue","parseFloat","onUpdateParameter","sidebar_StepsButton","StepGroupEditor","keyboard","stepGroups","TokenizedSequencesContract","getProjectsUsed","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","hashes","SampleInSequence","sequenceHash","TokenizedSequenceEdited","getDeviceOption","isRack","instrumentRack","getParameterOption","prettyName","getParametersForDevice","isMix","mixAutomation","automations","automatable","uxAutomatable","isMapped","addMacroDeviceOptions","deviceOptions","macrosEffect","liveEffects","MACROS_EFFECT","macroOptions","macros","subMacros","getDeviceOptionsForTrack","rackOptions","subDeviceOptions","onChangeRackDevice","getSubDevices","parameterOptions","deviceToChoose","dev","parameterWithName","onChangeDevice","onChangeSubDevice","getSubDeviceOption","opt","dropdownClassName","getAllParameters","setTransformations","onClickNew","newTransformation","components_sidebar_TransformationEditor_js__WEBPACK_IMPORTED_MODULE_5__","tran2","tran","Source","setSourceToSearch","onClickSource","setSamplesDragging","bookLeftStyle","display","_color","INSTRUMENT_TYPE_TO_NAME","counts","_tag","maxTag","person","cleanTitle","transparent","components_help_Documented_js__WEBPACK_IMPORTED_MODULE_8__","FILTER_BY_DAY_TAG","charCodeAt","setCurrentTagInList","onClickDay","dayResults","setDayResults","totalResults","setDate","formatDate","ratio","useScrollTo","expanded","FILTER_BY_DAY","Checkbox","checked","znumber","setMin","setMax","round","setRound","setter","field","handleRoundChange","CommentsComponent","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","commentText","commentSent","notes","messageSent","getNotes","watchForNotes","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","sequence","messaging","watchForNewMessages","note","onNewNote","messageHash","referenceHash","messageContent","messageType","SEQUENCE","sendMessage","react__WEBPACK_IMPORTED_MODULE_8___default","components_ConditionedComponent_js__WEBPACK_IMPORTED_MODULE_11__","reactstrap__WEBPACK_IMPORTED_MODULE_13__","event","addonType","sendComment","react_spinners_PulseLoader__WEBPACK_IMPORTED_MODULE_15___default","Note","odd","onHide","_super2","messageText","fromUser","isFavorite","getMessage","_callee4","message","_args4","_context4","toLocaleString","isPrevious","focus","_this5","onClickUser","onClickText","_getNotes","checkSequences","nextSequences","previousSequences","favorites","fullNotes","_args","getMessages","tokenizedSequences","getNextSequences","sequenceMetadata","getFavorites","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_1__","FoldersComponent","_Users_alecresende_code_visual_sampler_sequencer_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","loadFolders","folders","isLoaded","selectedFolder","subFolders","root","react__WEBPACK_IMPORTED_MODULE_7___default","folder","_FolderComponent_js__WEBPACK_IMPORTED_MODULE_10__","onFoldersUpdated","onChooseItem","onChooseFolder","onTestItem","showItems","react_redux__WEBPACK_IMPORTED_MODULE_1__","actions_index_js__WEBPACK_IMPORTED_MODULE_2__","setTrackDragging","constants_contextual_help_js__WEBPACK_IMPORTED_MODULE_1__","components_help_Documented_js__WEBPACK_IMPORTED_MODULE_2__","react_redux__WEBPACK_IMPORTED_MODULE_4__","constants_object_types_js__WEBPACK_IMPORTED_MODULE_5__","components_v2_trackRightClickActions_js__WEBPACK_IMPORTED_MODULE_6__","streamSize","_ref$showSave","showSave","auditionName","getObjectType","GO_BACK_HOME","_option","savePreset","showSearcher","setShow","setShowArrangementSearcher","Modal","dialogClassName","QuickSampleChooser","SidebarPresets","PatternComponent","memo","showVisuals","horizontalScroll","scrollRight","offsetWidth","mid","useXVisible","arrangementContainer","onRightMouseDown","SEQUENCE_ROLL","onLeftMouseDown","onSelect","PATTERN_SWITCH","getAdditionalStyling","hasEdges","topStyle","isRoll","eventKey","isNaN","backgroundSize","fullStyle","getBarWidth","xScale","isLast","restStyle","maxWidth","smallPattern","getVisualization","selectedEvents","subEventsLength","subEvents","getSubEvents","arrangement_PatternComponent","NO_SUB_SEQUENCE","isFirst","onRightMouseUp","onLeftMouseUp","mixSession","patternSelected","showTracks","setPatternSelected","setArrangementPatternSelected","getEffectsComponent","patterns","patternNumber","XanaduFolders","setSubFolders","item","fromData","loadSampleFromSequence","subFoldersToShow","FolderComponent","COLLAPSED_WIDTH","PRESETS","SEQUENCES","browserMode","collapsed","setCollapsed","toggleCollapse","loadPresetAsSubSequence","linkFolder","rolling","getRowsSelected","isRollsRowSelected","selectedRollEvents","getSelectedEvents","editResolution","NUMBER_TO_RESOLUTION","selectedPatternSwitchEvents","editPattern","setSelectedArrangementEvents","onNumberDown","subSequenceId","engine","quantizeStep","RIGHT","LEFT","getSelectionStyle","marginLeft","selectionStart","selectionEnd","end","loopSelected","DEFAULT_RESOLUTION","setArrangementRowSelections","selections","setArrangementSelection","setArrangementLoopSelected","setIsDragging","dragOffset","setDragOffset","directionResizing","setDirectionResizing","didDrag","setDidDrag","getStepFromPosition","getMouseX","onMiddleMouseUp","unselectAll","selectAll","newStart","newEnd","quantizedStart","quantizedEnd","rowSelections","onEdgeDown","direction","getIsSelected","createSelector","mouseX","cursorStep","seekToTrackStep","useSticky","isBottom","stickyContainer","sticky","setSticky","scrollBottom","onScale","setArrangementXScale","getHeight","getSubSequence","Bars","getEvents","numBars","totalLength","arr","visibleView","events","eventsLength","bars","barWidth","minWidth","preWidth","TimeRowComponent_BarComponent","constantHeight","BarComponent","beat","beatStyle","firstStyle","beatClass","PureComponent","numSubSequences","setArrangementMouseX","setArrangementCursorStep","yScrollContainer","dragStartY","dragY","dragX","timeout","diff","_xScale","arrangement_MouseHelper","children","TimeBackgroundComponent","numberOfBars","bar","TimeBackgroundComponent_BarComponent","ClockTickComponent","unlockedScroll","unlockScroll","isPlaying","prevProps","getX","equals","getSequenceId","mouseDownX","isRecordingMix","useRowSelection","resizingSelection","onRowSelectionDown","onRowSelectionUp","onRowSelectionMove","TrackPattern","onClickHeader","onHeaderMouseDown","setCursorStep","mixEvents","patternSwitchEvents","patternDragging","automationTypeToShow","wrapperRef","_ref$events","tracks_TrackPattern","isSelectedTrack","setAutomationPointsSelected","setSelectedEvents","getEvent","_useRowSelection","verticalScroll","bottom","useYVisible","rowSelection","getSelectedAutomations","arrangement_RowSelection","tracks_TrackPatterns","ParameterAutomation","tracks_TrackTimeLine","getScrollLeft","trackPatternSteps","ARRANGEMENT_TRACK_PATTERN","patternStartStep","patternStartSteps","startStep","setArrangementMode","setPatternDragging","setArrangementPatternDragging","setPatternResizing","setArrangementPatternResizing","stepNumber","on","startDragging","INFO_COLUMN_WIDTH","switchToPattern","onEdgeMouseDown","Step","trackColor","numPatterns","_props$sequencerEngin","offsetX","movePianoRollPattern","arrangement_PatternRoll","INNER_HEIGHT","getXPositionFromStep","getYPositionFromVolume","getValueFromYPosition","VolumeAutomationPoint","highlightPoint","unhighlightPoint","isHighlighted","VolumeGuidePoint","guidePoint","ReactKonva","eventType","fade","subSequenceFades","isPlayingMix","clearSelection","setGuidePoint","pointBeingDragged","setPointBeingDragged","highlightedPoint","setHighlightedPoint","pointHasDragged","setPointHasDragged","onClickLine","SubSequenceVolumeChangeEvent","insertEvent","_getXY2","volumeAutomationMix","updateRedux","showGuidePoint","_getXY3","onHighlightPoint","clearState","deleteIfNecessary","deleteEvent","pts","last","getLinePoints","alpha","closed","automation_VolumeAutomationPoint","solod","getSolo","onClickSolo","solo","onClickEnable","setIsEnabled","borderRightColor","InstallationVolume","tracks_TrackSidePanel","setShowArrangementTracks","OPTIONS","SUB_SEQUENCE_VOLUME_CHANGE","setAutomationToShow","MAX_NAME_LENGTH","trackIsEnabled","subSequenceMuted","setSelectedRows","setArrangementSelectedRows","clearSelectedArrangementEvents","nameClass","isTrack","tracks_TracksShowButton","tracks_TracksSidePanel","DEFAULT_PATTERN_DURATION","getCursorStep","dragPattern","patternEventDragging","draggingDiff","lastClickTime","onDragPatternEvent","patternEvent","_direction","resizedStep","nextEvent","getNextEvent","nextStepAfter","updateAllTypeRedux","previousEvent","getPreviousEvent","nextStep","selectRow","patternResizing","_patternResizing","resizePianoRollPattern","patternSwitch","PatternSwitchEvent","eventComponents","arrangement_MiniPianoRoll","_patternSwitchEvents","eventsToShow","_selectedEvents","automation_VolumeChangeAutomation","currentTime","displayResolution","setTotalArrangementLength","getTotalLength","insertPatternEventAtCursor","tracks_SubSequenceTracks","dropdownOpen","setDropdownOpen","deleteAutomations","isRollSelected","rollClassName","arrangement_SidePanelToolbar","arrangement_SubSequenceSidePanel","sequenceRollEvents","numEvents","widthExtension","resizingSubEvent","rollDragging","rollDragOffset","currentClickTime","eventOn","SequenceRollEvent","dur","insertRollEvent","initialSubEvent","insertRollEventAtCursor","getStepFromMouseEvent","originalStep","quantizedStep","moveRollEvent","difference","isRightEventInBounds","isRightSubEventInBounds","resizeSequenceRoll","isLeftEventInBounds","isLeftSubEventInBounds","stepToResize","subEvent","getPreviousSubEvent","getNextSubEvent","_React$createElement","arrangement_RollComponent","defineProperty","ArrangementContainer","lastCursor","_cursorStep","arrangement_ClockTickComponent","arrangement_TimeRowComponent","arrangement_SelectionComponent","SelectionBox","arrangement_SubArrangementComponent","arrangement_RollsArrangementComponent","ArrangementView","idToEvent","savedArrangementContainer","copyRing","updateTrackSteps","copy","paste","duplicate","splitPattern","setMouseDownX","selecting","updateSelectedPatterns","getQuantizedStepFromPosition","getType","resizeEvent","fromStep","getSelectionStart","toStep","getSelectionEnd","overlapsStep","splitPianoRollPattern","onGlobalMouseUp","onMouseMoveResize","modals_ArrangementSearcher","arrangement_SidePanelContainer","arrangement_ArrangementContainer","arrangement_ArrangementBottom","playMix","setIsPlayingMix","setArrangementMouseDownX","recentlyAddedSounds","Tone","Master","setPluginsLoaded","plugin","description","setDescription","setThumbnail","creator","setCreator","versions","pluginMetadataURI","image","loadPlugin","pluginContentHash","createZObject","loadPresetJson","pluginsLoaded","plugins","setPlugins","getPlugins","plugins_PluginOption","plugins_PluginsList","isRecording","lastPlayedStepData","setStepParameterSelected","_ref$rounded","rounded","hover","setHover","getParameterValue","editing","setEditing","distY","_number","PARAMS","stepParameterSelected","cirklon","isAudioTrack","TrackFrozenComponent","isTrackFrozen","FreezeHistory","track_ParamValue","AUDIO","AUDITION_PREVIOUS","SynthThumbnail","hasInner","AUDITION_NEXT","getInstrumentComponent","div","small","presentationWindowPositions","zmessage","BANG","_locked","locked","getEffectTrack","setLocked","toggleLock","lock","getEffectType","AUDIO_FX","MIDI_FX","object","pluginViewerFor","track_TrackInformation","PAD","pad_PadInformation","pad","ZOBJECT","zobject_ZObjectInformation","ZMESSAGE","zobject_ZMessageInformation","EFFECT","effects_EffectInformation","_doc","operationDocs","operationNames","paramName","replaceAll","actions","executeAction","Styler","setShowingColor","showingColor","setFocus","skey","setStyle","onChangeKey","onChangeValue","isNum","inner","ZNumber","hideNumber","attributes","readOnly","onFocus","startsWith","setObjectStyling","styling","","buttonRef","isLoading","AttributesInspector_Styler","connects","connectObject","inlet","outlet","found","createPad","fromObject","outlets","inlets","connectInlet","_outlet","connections","destNode","isPad","inputText","zobjectInputText","op","onClickOperation","bang","operation","operations","zobject_SubPatchTools","zobject_ObjectConnector","zobject_AttributesInspector","zobject_OperationDocs","TrackEffects","hasMidi","needsLabel","showEffect","PadVisualizer","names","sendNodeVolumeParameters","ParameterKnob","warpLength","warpFactor","resolvedTempo","warpLengthParameter","down","warpFactorParameter","up","_useWindowSlider","useWindowSlider","getWarp","trackPatternLocks","planar","showTrackInstrument","isWarped","trackWarps","setPulledEffects","setShowTrackInstrument","clearSelectedEffect","flip","pulledEffects","LockButton","togglePatternLock","unfreeze","freezePatterns","WarpButton","track_WarpKnob","ChokesAndMatches","CheckboxParameter","skipMidiMasterParameter","makeInstrumentRack","getSamplers","detuneParameter","track_TrackParameters","track_TrackQuickInstrument","track_TrackQuickEnvelopes","track_TrackQuickSends","track_TrackQuickAux","tools","ZNumberInspector","plane","filteredParameters","macroToShow","isRegionMode","regionMode","setIsRegionMode","setPlanarRegionMode","setMacroToShow","setPlanarMacroToShow","setSelectedPlanarParameters","setFilteredParameters","setFilteredPlanarParameters","_ref$selected","PlaneSidebar","setSelectedColor","isBoundsMode","effects_PlaneTools","documentation","track_TrackToolsSidebar","pad_PadToolsSidebar","zobject_ZMessageTools","zobject_ZObjectTools","effects_EffectTools","sidebarsShowing","secondaryZObject","rightSidebarOption","showPlugins","setRightSidebarOption","onKey","shiftKey","plugins_PluginsViewer","track_InstrumentViewer","Navigator","sidebar_ObjectInformation","sidebar_ToolsSidebar","AuditionSidebar","recent_RecentlyAddedSounds","sidebar_Sends","OptionTabs","SOUNDS","sidebarViewMode","getSelectedOption","OptionTabs_OptionTab","ADD_SOUNDS_BUTTON","onClear","hideUnderline","showSelectorMode","ADD_INSTRUMENTS_BUTTON","INSTRUMENTS","ADD_SEQUENCES_BUTTON","PACKS","OptionTab","PresetModal","sharingMode","usersInGuilds","usersToShare","shareToAll","sharePresetWithAllGuilds","presetId","sharePreset","onClose","Header","closeButton","Title","Body","getUserOptions","onSelectUser","onShareToAllCheckbox","Footer","variant","executeShare","onClickNo","onClickYes","onClickShare","InstrumentsView","addInstrumentTrack","addMetalSynthTrack","addFMSynthTrack","addZ4Track","addMidiTrack","setInstrumentTypeDragging","InstrumentsView_InstrumentOption","ADD_FM_SYNTH_BUTTON","onClickMultiSampler","ADD_MULTI_SYNTH_BUTTON","onClickMultiSynth","ADD_EXTERNAL_INSTRUMENT_BUTTON","onClickExternalInstrument","onClickInstrumentRack","InstrumentOption","help","setTrackPresetSaving","numInlets","numOutlets","function","PadPacks","initialSize","NotesComponent","getUserId","getUser","t1","t2","_onChange","_text","packs","packSelected","isEditing","packToEdit","currentPreset","currentSoundInList","setPackToEdit","setPackSelected","setCurrentSoundInList","loadAsPads","loadPackAsPads","onClickEdit","promises","matchingContent","all","_presets","getPresetsData","currentPresetHash","PackContent","setIsCurrent","setJson","packs_PackDetails","setSearchTerm","setPacks","filteredPacks","setFilteredPacks","searchPacks","getPacks","_packs","packs_PackSearch","packs_PackOption","setNewPack","setCreatingNewPack","packs_PacksSelector","SidebarComponent","showPresetModal","onClosePresetModal","loadWithLFOs","loadWithoutLFOs","padMappings","midiEffectDragging","setMidiEffectDragging","setEffectDragging","setPresetDragging","layerMode","chordSample","chord","addSound","setSampleAuditioning","EXTERNAL","setSidebarCollapsed","presetToLoad","folderToLoad","getAllItems","hideSequencer","MIX_VIEW","soundsSelectorComponent","Selector","ethereumSearcher","onAudition","onAddSound","packs_PacksComponent","instrumentsComponent","instruments_InstrumentsView","sequencesComponent","Sequences","presetsComponent","Presets","notesComponent","NOTES","notes_NotesComponent","ceil","isShowingSoundsPane","hidePresets","zIndexHack","sidebarClassName","disableStickiness","defaultView","sounds_OptionTabs","sidebar_ZObjectSidebar","presets_PresetModal","soundPane","showingContextMenu","isTrackFocused","trackFocused","showPresets","isShowingEffects","showTrackEffects","isMacroMapping","addSamplePack","moveTrackToGroup","destinationGroup","useEffects","getPatternLengths","patternLengths","freezeGroupByPatterns","bounces","_getGroupData","frozenGroup","frozenTracks","setLoadingText","sleep","bounceGroupPatterns","chopByPatterns","getGroupData","deleteGroup","addMultiFreezeTrack","newPattern","freeze","changeLength","getTrackJson","freezeGroup","getVolumeRatio","setParameterSliderDown","volumeParameter","smoothen","vol","fullRatio","getVolumeFromRatio","TrackMeter","meter","groupCollapsed","setGroupCollapsed","_useEffects","v","infoStyle","borderStyle","mix2_VolumeSlider","mix2_GroupActions","trackPannings","activeElement","blur","setPanning","rc_knob","angleOffset","angleRange","initialValue","arcWidth","background","radius","elem","mix2_PanKnob","marginTop","TrackOutputType","truncateName","selectedMidiEffect","setMixTrackDragging","isAlone","trackStyle","boxShadow","thumbnailClass","toggleMute","getTrackShortName","MidiEffectComponent","TriggerMeter","mix2_TrackControls","groupClassName","mix2_GroupVolumeControl","mix2_Track","mix2_Group","setIsSourcing","setRecords","RecordInfo","loadedRating","len","setExpandedProject","isNext","setPackToSearch","source","_ref$autoLoad","autoLoad","playOnLoad","added","loadedAudio","setLoadedAudio","stopped","disposed","isSourcing","setIsLoading","setSample","_useState13","_useState14","showSample","setShowSample","_useState15","_useState16","projectsUsed","setProjectsUsed","_useState17","_useState18","selectedSlice","setSelectedSlice","_useState19","_useState20","isTagging","setIsTagging","_useFavorites","useFavorites","toggleFavorite","isFavorited","_useState21","_useState22","guildName","setGuildName","getGuildName","isResample","loadSample","useNewSound","addSample","force","fetchAudio","_audioUnit","onHover","ContentDropdown","isUnsourced","margin","lineHeight","edits","FILTER_BY_TAG","SELECTOR_WAVEFORM","onChooseSlice","selector2_SourceFinder","setShowingSoundList","_ref$resultsCounter","resultsCounter","alone","resultsSize","isPack","loadEverything","setAutoLoad","thumbClassName","selector2_SampleOption","selector2_SourceResults","unsourcedResults","resultsCount","list","_results","currentTagInList","displayOption","resultsElement","lastQuery","_useScroll","scrollPosition","listResults","LIST","selector2_ListResults","Day","TAG","_ref$defaultGroupBy","defaultGroupBy","setDay","GRID","setDisplayOption","setGroupBy","setSource","setFilterFavorites","sourceToEdit","setSourceToEdit","goBack","backButton","hasBack","selector2_SourceEditor","selector2_SourceToSearch","selector2_PackToSearch","selector2_DayResults","selector2_SoundGrid","SampleSearch","dotStyle","presets_PresetOption","presets_SourceResults","getContent","_id","GuildPresetsContract","getPresets","taggedResults","combined","NewPreset2","decryptResults","getTagPresets","getInstrumentTypePresets","combineAll","filterBySearchTerms","PresetTag","PresetInstrumentType","_step3","_iterator3","_step4","_iterator4","setLoadEffects","setLoadMods","presets_DayResults","presets_ContentGrid","useEdgeAdjuster","_getMinLeftAndTop","getMinLeftAndTop","minTop","minLeft","_getMaxLeftAndTop","getMaxLeftAndTop","maxTop","maxLeft","_sequencerEngine$stat","edgesSize","edgesPadding","newSize","setEdgesSize","setEdgesPadding","adjust","scr","moduleSizes","mainScrollRef","showingSubpatch","editorPadding","showPadSequencer","uxLocked","setEditorPadding","editorRef","isExplore","edgesRef","lastZoom","startZoomPosition","startZoomScroll","mouseRef","paddingTop","paddingLeft","minHeight","killScrolling","handleScale","_mainScrollRef$curren","sx","sy","_width","_height","_y","_mainScrollRef$curren2","_mainScrollRef$curren3","doneLoading","innerRef","setSelectedPulledElements","useContainerCoords","_onDoubleClick","useSelection","onDoubleClick","_subSequence$tracks","createZNumber","createButton","createToggle","createSequencer","zobjectTypeDragging","tokens","subType","setZObjectTypeDragging","useModuleDrop","PulledEffects","playhead","noWrapper","ZObjectTooltip","ZObjectContextMenus","ZMessageComponent","TrackMidiEffects","effectRack","PadEffects","sequencers","PulledSequencer","GridTab","spatial_StyleSetter","ModuleSys5","completelyDoneLoading","pulledSequencers","mintToHic","useMintToHic","mintToZora","useMintToZora","fullScreen","openAsWindow","deleteZObject","SubMenu","hidden","hiddenObjects","lockedObjects","setUXLockObject","setUXHideObject","useTop","onDragLeave","effectAllowed","zobject_ZObjectContextMenu","dropActive","getAllNodesInSub","moveObjectInto","_className","onDragEnter","sidebar_ObjectOption","LINK_TYPES","_ref$show","alreadyMatched","setAlreadyMatched","artistInfo","setArtistInfo","showFlow","setShowFlow","linkType","setLinkType","artistValue","setArtistValue","websiteValue","setWebsiteValue","getArtistForSample","getArtistInfo","info","saveArtistInfo","newSampleByArtist","newArtistInfo","link","onChangeArtistName","href","loadSampleFromProject","_getTrackNumber","getTrackNumber","loadPattern","tracksData","_loop","_ret","_pattern","jsonStepBucket","stepBucket","stepBuckets","StepData","simpleLoad","loadStepBuckets","_trackData","slices","startTime","endTime","newSlice","_midiEffects","tracksMidiEffects","_ref$initialShow","initialShow","selectedProject","setSelectedProject","setNumPatterns","selectedPattern","setSelectedPattern","onClickProject","setShowEffects","setShowTrackEffects","setShowParams","setCirklonParameterSelected","toggleWaveform","useToggledWaveform","showPresetName","TRACK_RECORD_ARM_BUTTON","sidebar_TrackOverview","ItemComponent","lastDate","setSelectedPreset","depth","selectedPreset","nameValue","hovering","isDynamic","onClickName","onClickCollapsed","folderDragging","presetDragging","setFolderDragging","addFolder","deleteItem","addItem","setHasChangesToFolders","setSelectedFolder","folderNameClass","getArrow","onInputType","input","items","getNameComponent","subFolder","assign","folders_ItemComponent"],"mappings":"6GAAIA,EAAW,2CACXC,EAAQC,EAAQ,KAEdC,aAEF,SAAAA,IAAeC,OAAAC,EAAA,EAAAD,CAAAE,KAAAH,GACXG,KAAKC,cAAgB,GACrBD,KAAKE,gBAAkB,GACvBF,KAAKG,YAAc,GACnBH,KAAKI,aAAe,gDAGxB,SAAUC,GAAO,IAAAC,EAAAN,KACb,OAAO,IAAIO,QAAQ,SAACC,EAASC,QACSC,IAA9BJ,EAAKL,cAAcI,GAKvBC,EAAKK,mBAAmBN,GACnBO,KAAK,SAACC,GAEP,IAAIC,EAAO,GACI,OAAXD,QAAoCH,IAAjBG,EAAOE,OAC1BP,EAAQM,GAEZD,EAAOE,MAAMC,IAAI,SAACD,GAAD,OAAWT,EAAKW,aAAaF,EAAO,SAACG,GAClD,GAAY,OAARA,EAAJ,CAIA,IAAIC,EAAY,CACZC,GAAIF,EAAIE,GACRC,KAAMH,EAAIG,MACV,WAAYH,IACZC,EAAS,UAAgBD,EAAII,OAAO,GAAGC,KAE3CT,EAAKU,KAAKL,GAEVb,EAAKL,cAAcI,GAASS,EACxBA,EAAKW,QAAUZ,EAAOE,MAAMU,QAC5BjB,EAAQM,QAbRN,EAAQM,SAkBfY,MAAM,SAAAC,GACHlB,EAAOkB,KAhCXnB,EAAQF,EAAKL,cAAcI,oCAqCvC,SAAeuB,GACX,OAAO,IAAIrB,QAAQ,SAACC,EAASC,GACzB,IAAIoB,EAAM,oCAAsCD,EACpDjC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAiBR,IAAbQ,EAAIJ,KAAoB,CACxB,IAAIiB,EAAUb,EAAIJ,KAClBN,EAAQuB,QAERvB,OAAQE,oCAMxB,SAAcsB,GACV,OAAO,IAAIzB,QAAQ,SAACC,EAASC,GACzBwB,QAAQC,IAAI,mBAAoBF,GAChC,IACIH,EAAM,6CADEG,EAAWG,MAAM,OAAOC,KAAK,KACwB,uBAAyB1C,EAC9FC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAyBR,IAArBQ,EAAIJ,KAAKiB,QAAuB,CAChC,IAAIA,EAAUb,EAAIJ,KAAKiB,QACvBvB,EAAQuB,QAERvB,EAAQ,mCAMxB,SAAY6B,EAAWC,GAAU,IAAAC,EAAAvC,KAC7B,QAAoCU,IAAhCV,KAAKG,YAAYkC,GACjB,OAAOC,EAAStC,KAAKG,YAAYkC,IAErC,IAAIG,EAAQH,EAERR,EAAM,8CADVW,EAAQA,EAAML,MAAM,OAAOC,KAAK,MACiC,qBAAuB1C,EACxFC,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH,QAAyBR,IAArBQ,EAAIJ,KAAKiB,QAAuB,CAChC,IAAIlB,EAASK,EAAIJ,KAAKiB,QAAQ,GAC9BQ,EAAKpC,YAAYkC,GAAaxB,EAC9ByB,EAASzB,kCAMzB,SAAawB,EAAWC,GACpBtC,KAAKyC,YAAYJ,EAAW,SAAUxB,GAClC,IACIgB,EAAM,kCADIhB,EAAOO,GACmC,UAAY1B,EACpEC,EAAMmC,IAAID,GACLjB,KAAK,SAAUM,GACZoB,EAASpB,EAAIJ,QAEhBY,MAAM,SAAUC,GACbW,EAAS,0CAMzB,SAAiBI,EAASC,GAAM,IAAAC,EAAA5C,KAC5B,OAAO,IAAIO,QAAQ,SAACC,EAASC,GACzB,QAAgDC,IAA5CkC,EAAKxC,aAAasC,EAAU,IAAMC,GAAtC,CAIA,IAAId,EAAM,kCAAoCa,EAC9C,mBAAqBhD,EAAW,SAAWiD,EAAO,cAClDhD,EAAMmC,IAAID,GACLjB,KAAK,SAACM,GACH0B,EAAKxC,aAAasC,EAAU,IAAMC,GAAQzB,EAAIJ,KAC9CN,EAAQU,EAAIJ,QAEfY,MAAM,SAAUC,GACblB,EAAOkB,UAXXnB,EAAQoC,EAAKxC,aAAasC,EAAU,IAAMC,wCAgBtD,SAAmBE,GACf,OAAO,IAAItC,QAAQ,SAACC,EAASC,GACzB,IAAIqC,EAqChB,SAA0BC,EAAQC,GAChC,IAAIC,EAAQ5C,EAAO6C,EAAU,GACzBH,EAASA,GAAU,GAEvB,SAASI,EAAaC,GACpB,OAAOA,EAAIC,QAAQ,sCAAuC,QAI1D,IAAIC,EAAU,CAAC,aAAc,aAAc,KAAM,YAAa,eAAgB,YAAa,QAAS,gBACpG,eAAgB,UAAW,mBAAoB,mBAC/C,yBAA0B,WAC1B,qBAAsB,yBAA0B,kBAChD,YAAa,YAAa,gBAAiB,8BAC3C,gBAAiB,gBAAiB,OAAQ,OAAQ,OAAQ,OAC1D,iBAAkB,iBAAkB,WAAY,SAAU,SAC1D,uBAAwB,uBAAwB,eAChD,qBAAsB,sBAAuB,gBAC7C,mBAAoB,6BACtBA,EAAQC,QAAQ,SAASC,GAOvBT,GADAA,GADAA,GAFAA,GADAA,GADAA,EAASA,EAAOM,QAAQG,EAAQ,MAAO,IAAIC,QAC3BJ,QAAQG,EAAME,cAAgB,MAAO,IAAID,QACzCJ,QAAQG,EAAMG,cAAgB,MAAO,IAAIF,QAEzCJ,QAAQG,EAAO,IAAIC,QACnBJ,QAAQG,EAAME,cAAe,IAAID,QACjCJ,QAAQG,EAAMG,cAAe,IAAIF,SASnD,IAFA,IAAIG,GAHFb,GADAA,EAASA,EAAOM,QAAQ,iBAAkB,IAAII,QAC9BJ,QAAQ,iBAAkB,IAAII,QAG7BtB,MAAO,OAEjB0B,EAAI,EAAGA,EAAID,EAAMnC,OAAQoC,IAC3BP,EAAQQ,QAASF,EAAMC,GAAGF,gBAAmB,GAChDC,EAAMG,OAAQF,EAAI,GAIF,GAAhBD,EAAMnC,QACRwB,EAASW,EAAM,GACfvD,EAAQuD,EAAM,IACLA,EAAMnC,OAAS,GAExBwB,EAASW,EAAM,GACfvD,EAAQuD,EAAM,KAEdX,EAASW,EAAM,GACfvD,EAAQuD,EAAM,IAKhBN,EAAQC,QAAQ,SAASS,GACvB3D,EAASA,EAAMgD,QAAS,IAAIY,OAAQd,EAAaa,GAAS,KAAO,IAAIP,OACrER,EAASA,EAAOI,QAAS,IAAIY,OAAQd,EAAaa,GAAS,KAAO,IAAIP,SAIxEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,sBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,uBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,yBAA6B,MAAMI,QAChEP,EAAQ1B,KAAOnB,EAAMgD,QAAQ,2BAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,qBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,uBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,oBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,yBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,2BAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,gBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,gBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,mBAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,eAA6B,MAAMI,QAChEP,EAAQ1B,KAAMyB,EAAOI,QAAQ,eAA6B,MAAMI,QAEhE,IAAIS,EAAY,GAad,OAZFhB,EAAQK,QAAQ,SAASY,GACnBA,IAAW9D,IACb6D,EAAWC,GAAWA,KAIb,CACTlB,OAAQA,EACR5C,MAAOA,EACP6C,QAASpD,OAAOsE,KAAKF,IAtIIG,CAAiBxB,GAChCL,EAAQM,EAAaG,OAAS,MAAQH,EAAazC,MAEnDwB,EAAM,8CADVW,EAAQA,EAAML,MAAM,OAAOC,KAAK,MACiC,UAAY1C,EAC7EC,EAAMmC,IAAID,GACLjB,KAAK,SAAUM,GACZ,IAAIa,EAAUb,EAAIJ,KAAKiB,QACnBuC,EAAiB,KACrB,IAAK,IAAIT,KAAK9B,GACa,MAAlBuC,GACCvC,EAAQ8B,GAAGU,KAAOD,EAAeC,OACnCxC,EAAQ8B,GAAGxD,MAAMmE,SAAS1B,EAAazC,SAEvCiE,EAAiBvC,EAAQ8B,IAGjC,GAAsB,MAAlBS,EAEA,IAAK,IAAIT,KAAK9B,EACV,OAAOvB,EAAQuB,EAAQ8B,IAG/BrD,EAAQ8D,KAEX5C,MAAM,SAAUC,GACblB,EAAOkB,gBAmHZ9B,iyCCvQO,IAAI4E,KAAuBC,gBAAjD,IAcaC,EAAwB,WAA6G,IAA5GC,EAA4GC,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAnG,GAAIC,EAA+FD,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAAlFqE,EAAkFF,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAA1E,EAAGG,EAAuEH,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAA9DuE,EAA8DJ,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAAvDwE,EAAuDL,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAAtCyE,EAAsCN,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAAtB0E,EAAsBP,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAAjB2E,EAAiBR,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAC1I6D,OAAO7D,EACX,GAAI4E,YAASR,GAAc,CACvB,IAAIS,EAAQC,SAASjB,GACjBgB,EAAQ,MAAQA,EAAQ,OACxBhB,EAAOgB,GAGf,OAAO,IAAIhF,QAAJ,eAAAkF,EAAA3F,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAY,SAAAC,EAAOtF,EAASC,GAAhB,IAAAsF,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAV,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACVT,GADUD,EACYZ,GAAkB,IAAxCa,UAAWC,EADDF,EACCE,QACW,IAAZlB,EAFA,CAAAwB,EAAAE,KAAA,QAAAF,EAAAG,GAEgB,CAAC3B,GAFjBwB,EAAAE,KAAA,sBAAAF,EAAAE,KAAA,EAEkCE,IAASC,sBAF3C,OAAAL,EAAAG,GAAAH,EAAAM,KAAA,cAEXX,EAFWK,EAAAG,GAGXP,EAAOd,EAAeA,EAAayB,cAAWpG,EAHnC6F,EAAAE,KAAA,GAIIM,IAASC,aAJb,QAIXZ,EAJWG,EAAAM,KAKXR,EAAOY,KAAKC,UAAU,CACtBC,KAAMC,KAAKC,MAAMzC,GACjBuB,OACAmB,WAAYxC,EACZoB,SAAUA,EACVlB,UACAT,OACAU,MAAOmC,KAAKC,MAAMpC,GAClBC,kBACAc,YACAC,UACAb,MACAmC,KAAMnB,IAEVoB,MAAM,gBAAkB,CAChBC,OAAQ,OACZpB,OACAqB,QAAS,CACLC,OAAU,mBACVC,eAAgB,sBAGnBhH,KAAK,SAAAiH,GAAI,OAAIA,EAAKC,SAClBlH,KAAK,SAAAiH,GACFA,EAAKE,KAAK,SAACnC,EAAEoC,GAAH,OAASA,EAAEC,YAAcrC,EAAEqC,cACrCzH,EAAQqH,KA9BD,yBAAAtB,EAAA2B,SAAApC,MAAZ,gBAAAqC,EAAAC,GAAA,OAAA3C,EAAA4C,MAAArI,KAAA6E,YAAA,KAsLEyD,EAAW,SAACvG,GAErB,IAFiCwG,EAE7BC,EAAS,GAFoBC,EAAAC,EAGd3G,GAHc,IAGjC,IAAA0G,EAAAE,MAAAJ,EAAAE,EAAAG,KAAAC,MAA4B,KAAnBhI,EAAmB0H,EAAAO,MACnBb,EAAepH,EAAfoH,YACDc,EAAYP,EAAOA,EAAO/G,OAAS,GACvC,QAAkBf,IAAdqI,EACAP,EAAOhH,KAAK,CACRyG,cACAlG,QAAS,CAAClB,SAEX,CACH,IAAImI,EAAkBD,EAAUd,YAC5Bb,KAAK6B,IAAID,EAAkBf,IAxNtB,KAyNLc,EAAUhH,QAAQP,KAAKX,GAEvB2H,EAAOhH,KAAK,CACRyG,cACAlG,QAAS,CAAClB,OAlBO,MAAAc,GAAA8G,EAAAS,EAAAvH,GAAA,QAAA8G,EAAAU,IAuBjC,OAAOX,GAGEY,EAAoB,SAACC,EAAO/B,GAAe,IAAAgC,EAAAC,EAAAb,EAC9BW,GAD8B,IACpD,IAAAE,EAAAZ,MAAAW,EAAAC,EAAAX,KAAAC,MAA6B,KAAAW,EAApBC,EAAoBH,EAAAR,MACpB/G,EAAW0H,EAAX1H,QACD2H,EAAU,GACVC,EAAkB,GAClBC,EAAU,GACVC,EAAY,GALSC,EAAApB,EAMN3G,GANM,IAMzB,IAAA+H,EAAAnB,MAAAa,EAAAM,EAAAlB,KAAAC,MAA4B,KAAnBhI,EAAmB2I,EAAAV,MACxB,GAAIjI,EAAOe,eAC8BlB,IAAjCgJ,EAAQ7I,EAAOkJ,gBACfL,EAAQ7I,EAAOkJ,cAAgB,IAGnCL,EAAQ7I,EAAOkJ,cAAcvI,KAAKX,QAC/B,GAAIA,EAAOoF,aACkBvF,IAA5BkJ,EAAQ/I,EAAOoF,WACf2D,EAAQ/I,EAAOoF,SAAW,IAE9B2D,EAAQ/I,EAAOoF,SAASzE,KAAKX,OAC1B,CACH,IAAIuE,EAAMvE,EAAOmJ,KAAK,IAAM,GACT,KAAf1C,GAAqBzG,EAAOmJ,KAAKC,KAAK,SAAA7E,GAAG,OAAKA,EAAIzB,cAAca,SAAS8C,EAAW3D,uBAGxEjD,KAFZ0E,EAAMvE,EAAOmJ,KAAKE,KAAK,SAAA9E,GAAG,OAAKA,EAAIzB,cAAca,SAAS8C,EAAW3D,gBACvC,cAARyB,OAElBA,EAAMvE,EAAOmJ,KAAK,SAGHtJ,IAAnBmJ,EAAUzE,KACVyE,EAAUzE,GAAO,IAErByE,EAAUzE,GAAK5D,KAAKX,GAEhBA,EAAOsJ,sBACwCzJ,IAA3CiJ,EAAgB9I,EAAOsJ,kBACvBR,EAAgB9I,EAAOsJ,gBAAkB,IAE7CR,EAAgB9I,EAAOsJ,gBAAgB3I,KAAKX,MApC/B,MAAAc,GAAAmI,EAAAZ,EAAAvH,GAAA,QAAAmI,EAAAX,IAwCzBM,EAAUC,QAAUA,EACpBD,EAAUG,QAAUA,EACpBH,EAAUI,UAAYA,EACtBJ,EAAUE,gBAAkBA,GA5CoB,MAAAhI,GAAA4H,EAAAL,EAAAvH,GAAA,QAAA4H,EAAAJ,IA8CpD,OAAOE,GAGEe,EAAkB,eAAAC,EAAAvK,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAyE,EAAOC,GAAP,IAAA1G,EAAA,OAAA8B,EAAAC,EAAAU,KAAA,SAAAkE,GAAA,cAAAA,EAAAhE,KAAAgE,EAAA/D,MAAA,OAC9B,IAAS5C,KAAK0G,EACGA,EAAe1G,GAFF,OAAA2G,EAAAC,OAAA,SAQvBF,GARuB,wBAAAC,EAAAtC,SAAAoC,MAAH,gBAAAI,GAAA,OAAAL,EAAAhC,MAAArI,KAAA6E,YAAA,sCCtS/B8F,EAAAC,EAAAC,EAAA,sBAAAC,IAAA,IAAAC,EAAAJ,EAAA,KAAAK,EAAAL,EAAA/B,EAAAmC,GAAAE,EAAAN,EAAA,IAGaG,EAAgB,SAACI,GAC1B,OAAO,IAAI3K,QAAQ,SAACC,EAASC,GACzBd,IAAMmC,IAAI,uBAAyBoJ,EACzB,CACIC,aAAc,SAEvBvK,KAAK,SAAAC,GACF,IAAIuK,EAAOvK,EAAOC,KAClBuK,IAAKC,QAAQF,GAAMxK,KAAK,SAAC2K,GACrBtJ,QAAQC,IAAI,sBAAuBqJ,GACnC/K,EAAQ+K,+lBCFtBC,yJAEF,WACI,OAAIxL,KAAKyL,MAAMC,SACJ1L,KAAKyL,MAAME,mBACX3L,KAAKyL,MAAMG,eACX5L,KAAKyL,MAAMI,yDAK1B,WACI7L,KAAKyL,MAAMK,kBAAiB,GAC5B9L,KAAKyL,MAAMM,aAAa/L,KAAKyL,MAAMC,kDAGvC,WACI1L,KAAKyL,MAAMM,aAAY,GACvB/L,KAAKyL,MAAMK,kBAAkB9L,KAAKyL,MAAMG,0CAG5C,WACQ5L,KAAKyL,MAAMC,SACX1L,KAAKyL,MAAMO,UAAUC,sBACdjM,KAAKyL,MAAMG,eAClB5L,KAAKyL,MAAMS,eAAeD,4CAIlC,WAAS,IAAA3L,EAAAN,KACDmM,EAAYnM,KAAKyL,MAAMW,UAAY,iCAAmC,wBACtEC,EAAwBrM,KAAKyL,MAAMC,SACnC,yBAA2B,gBAC3BY,EAA6BtM,KAAKyL,MAAMG,cACxC,yBAA2B,gBAC/B,OACIW,EAAA3G,EAAA4G,cAAA,OACEC,IAAK,aACLC,QAAS,iBAAM,IAAIP,UAAWA,GAC9BI,EAAA3G,EAAA4G,cAAA,KAAGnL,KAAK,SACRkL,EAAA3G,EAAA4G,cAAA,KAAGnL,KAAK,cACRkL,EAAA3G,EAAA4G,cAAA,OAAKL,UAAU,gCACbI,EAAA3G,EAAA4G,cAAA,OAAKL,UAAU,iCACbI,EAAA3G,EAAA4G,cAAA,OACEG,YAAa,kBAAMrM,EAAKmL,MAAMmB,kBAAkBC,MAChDC,aAAc,kBAAMxM,EAAKmL,MAAMmB,uBAAkBlM,IACjDgM,QAAS,kBAAMpM,EAAKyM,uBACpBZ,UAAWE,GAJb,OAOAE,EAAA3G,EAAA4G,cAAA,OACEG,YAAa,kBAAMrM,EAAKmL,MAAMmB,kBAAkBI,MAChDF,aAAc,kBAAMxM,EAAKmL,MAAMmB,uBAAkBlM,IACjDgM,QAAS,kBAAMpM,EAAK2M,4BACpBd,UAAWG,GAJb,SASJC,EAAA3G,EAAA4G,cAACU,EAAA,EAAD,CAAsBC,UAAWnN,KAAKyL,MAAMC,UAC1Ca,EAAA3G,EAAA4G,cAAA,OAAKL,UAAU,oBACZnM,KAAKyL,MAAMO,UAAUoB,KAAKpM,IACvB,SAAAqM,GAAG,OACCd,EAAA3G,EAAA4G,cAACc,EAAA,EAAD,CAAoBb,IAAKY,EAAIE,OAAQC,gBAAiBlN,EAAKmL,MAAM+B,gBAAiBH,IAAKA,QAGnGd,EAAA3G,EAAA4G,cAACU,EAAA,EAAD,CAAsBC,UAAWnN,KAAKyL,MAAMG,eAC1CW,EAAA3G,EAAA4G,cAAA,OAAKL,UAAU,oBACZnM,KAAKyL,MAAMS,eAAeuB,UAAUzM,IACjC,SAAA0M,GAAQ,OACVnB,EAAA3G,EAAA4G,cAACmB,EAAA,EAAD,CACElB,IAAKiB,EAASH,OACdK,gBAAiBtN,EAAKmL,MAAMmC,gBAC5BJ,gBAAiBlN,EAAKmL,MAAM+B,gBAC5BK,cAAeH,QAGvBnB,EAAA3G,EAAA4G,cAACU,EAAA,EAAD,CAAsBC,UAAWnN,KAAKyL,MAAMC,UAAY1L,KAAKyL,MAAMG,eACjEW,EAAA3G,EAAA4G,cAAA,OAAKL,UAAU,yBACbI,EAAA3G,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAKwN,eACpB3B,UAAU,cACV4B,IAAK/N,KAAKgO,cAAgB,sBAAwB,kCAlFtCC,aAgHjBC,gBAdS,SAACC,EAAO1C,GAC5B,IACII,GAD2BsC,EAAMC,OAAOC,qBAAqB5C,EAAMS,eAAeoC,YAAYlN,KAAO,IACpDqK,EAAM+B,gBAAgBe,gBAEvE5C,GADsBwC,EAAMC,OAAOI,gBAAgB/C,EAAMO,UAAUsC,YAAYlN,KAAO,IAC/CqK,EAAM+B,gBAAgBe,gBACjE,MAAO,CACH7C,SAAUyC,EAAMM,UAAU/C,SAC1BE,cAAeuC,EAAMM,UAAU7C,cAC/BD,iBAAkBA,EAClBE,sBAAuBA,IAjBJ,SAAA6C,GACvB,MAAO,CACH5C,iBAAkB,SAAAnD,GAAC,OAAI+F,EAAS5C,aAAiBnD,KACjDoD,YAAa,SAAApD,GAAC,OAAI+F,EAAS3C,aAAYpD,KACvCiE,kBAAmB,SAAC+B,GAAD,OAAaD,EAAS9B,aAAkB+B,OAkBpDT,CAA6C1C,8HCxD7C0C,uBAZS,SAACC,EAAO1C,GAC5B,OAAIA,EAAMmD,cACC,CACHC,QAASpD,EAAMmD,cAAcE,aAAaD,SAGvC,CACHA,QAASpD,EAAMsD,KAAKF,UAKQ,KAAzBX,CA5DO,SAACzC,GAAU,IAAAuD,EACLC,wBAASvO,GADJwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxBlG,EADwBoG,EAAA,GACjBE,EADiBF,EAAA,GAEzBG,EAAU5D,EAAMmD,eAAiBnD,EAAMsD,KACvCF,EAAUpD,EAAMmD,cAChBnD,EAAMmD,cAAcE,aAAaD,QAAUpD,EAAMsD,KAAKF,QAEpDS,EAAqBC,sBAAY,SAACrG,GACpC,IAAIsG,EAASC,YAAiBvG,EAAEJ,MAAO2C,EAAM+B,iBAO7C,OANAgC,EAAOE,QAAO,GACVF,EAAOG,cACPH,EAAOG,aAAaC,IAAI,GAE5BP,EAAQQ,UAAUL,GAClBJ,EAASlG,EAAEJ,QACJ,GACR,CAACsG,EAAU3D,EAAM+B,gBAAiB6B,IAErCS,oBAAU,WACFhH,GACAsG,OAAS1O,IAEd,CAACoI,EAAOsG,IAEX,IAAMW,EAAeR,sBAAY,SAACS,EAAMC,GACpCZ,EAAQU,aAAaC,EAAMC,GAC3Bb,EAAS,CAACY,OAAMC,QACjB,CAACb,EAAUC,IAEd,OACIa,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACZV,EAAMpK,MAAQoK,EAAMsD,KAAK1N,MAE5B6O,EAAAtK,EAAA4G,cAAC2D,EAAAvK,EAAD,CACEuG,UAAU,wBACViE,QAASC,IACTvH,MAAOA,EACPwH,SAAUhB,EACViB,YAAY,QAEf1B,EAAQ7N,IACL,SAACwO,EAAQ3L,GAAT,OACIqM,EAAAtK,EAAA4G,cAACgE,EAAA,EAAD,CAAY/D,IAAK+C,EAAOpO,GAAI2O,aAAcA,EAAcU,aAAc5M,EAAG2L,OAAQA,iBCiCpFtB,gBAZS,SAACC,EAAO1C,GAC5B,MAAO,CACHiF,eAAgBvC,EAAMU,QAAQ8B,qBAIX,SAACjC,EAAUjD,GAClC,MAAO,CACHmF,sBAAuB,SAAC1H,GAAD,OAAOwF,EAASkC,aAAsB1H,OAItDgF,CA1Ef,SAA6BzC,GAAO,IAAAuD,EACNC,mBAASxD,EAAM+B,gBAAgBqD,MAAMA,OAD/B3B,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACzB6B,EADyB3B,EAAA,GAClB4B,EADkB5B,EAAA,GAE5B6B,EAAMC,sBAAOtQ,GAEXuQ,EAAW1B,sBAAY,WACzB9D,EAAMmF,2BAAsBlQ,IAC7B,IAGHoP,oBAAU,WACN,OAAO,kBAAMrE,EAAMmF,2BAAsBlQ,KAC1C,IACH,IAAIgQ,EAAiB,GACrB,GAAIjF,EAAMiF,eAAgB,CACtB,IAAI3B,EAAO8B,EAAM3G,KAAK,SAAAgH,GAAC,OAAIA,EAAErC,QAAQ/K,QAAQ2H,EAAMiF,iBAAmB,IACtE,IAAK3B,EAAM,CACP,IAAIH,EAAgBnD,EAAM+B,gBAAgB2D,aAAavC,cACnDA,EAAcE,aAAaD,QAAQrK,SAASiH,EAAMiF,kBAClD3B,EAAOH,GAGXG,IACA2B,EACIR,EAAAtK,EAAA4G,cAAC4E,EAAA,EAAD,CACE5D,gBAAiB/B,EAAM+B,gBACrB6D,UAAU,EACZzD,gBAAiB,CAACnC,EAAMmC,gBAAiBmD,GACzCO,aAAa,EACbC,eAAgB,kBAAMN,KACtBzB,OAAQ/D,EAAMiF,eACd3B,KAAMA,KAIpB,IAAMyC,EAAgBjC,sBAAY,WAC9B9D,EAAM+B,gBAAgBqD,MAAMW,gBAC5BV,EAAShR,OAAA2R,EAAA,EAAA3R,CAAK2L,EAAM+B,gBAAgBqD,MAAMA,SAC3C,CAACC,IAEJ,OACIZ,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAU,eACvB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAf,YAIF+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACZ0E,EAEC7P,IAAI,SAAC+N,EAAMlL,GAAP,OAAaqM,EAAAtK,EAAA4G,cAACkF,EAAD,CAAejF,IAAK5I,EAAG2J,gBAAiB/B,EAAM+B,gBAAiBuB,KAAMA,MACxFmB,EAAAtK,EAAA4G,cAACkF,EAAD,CAAerQ,KAAK,MAAMmM,gBAAiB/B,EAAM+B,gBAClCoB,cAAenD,EAAM+B,gBAAgB2D,aAAavC,gBAChE8B,EACDR,EAAAtK,EAAA4G,cAAA,OACEE,QAAS8E,EACTrF,UAAU,mBAFZ,gGC7BG+B,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA/BF,SAAAzI,GAA8C,IAA5CkM,EAA4ClM,EAA5CkM,QAAS3H,EAAmCvE,EAAnCuE,KAAmC4H,EAAAnM,EAA7B8K,mBAA6B,IAAAqB,EAAjB,YAAiBA,EAAA5C,EAC/BC,mBAAS,IADsBC,EAAApP,OAAA+R,EAAA,EAAA/R,CAAAkP,EAAA,GAClDlG,EADkDoG,EAAA,GAC3CE,EAD2CF,EAAA,GAEjD4C,EAAYvC,sBAAY,SAAAwC,GAC1BJ,EACI3H,EAAKgI,OAAO,SAAAd,GAAC,OAAIA,IAAMa,MAC5B,CAAC/H,EAAM2H,IAEJM,EAAY1C,sBAAY,SAACrG,GACb,UAAVA,EAAEuD,MACFkF,EAAO,GAAAO,OAAApS,OAAAqS,EAAA,EAAArS,CAAMkK,GAAN,CAAYlB,KACnBsG,EAAS,MAEd,CAACuC,EAAS3H,EAAMlB,IAEnB,OACIsJ,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,QACZnC,EAAKhJ,IAAI,SAAAoE,GAAG,OAAIgN,EAAAxM,EAAA4G,cAAA,OAAKE,QAAS,kBAAMoF,EAAU1M,IAAM+G,UAAU,cAAc/G,KAC7EgN,EAAAxM,EAAA4G,cAAA,SAAO+D,YAAaA,EAAapE,UAAU,mBAAmB8F,UAAWA,EAAWnJ,MAAOA,EAAOuJ,KAAK,OAAO/B,SAAU,SAAApH,GAAC,OAAIkG,EAASlG,EAAEoJ,OAAOxJ,gDCpBzJ,IAAAyJ,EAAA5H,EAAA,GAAA6H,EAAA7H,EAAA/B,EAAA2J,GAAAE,EAAA9H,EAAA,MAAA+H,EAAA/H,EAAA,IAAAgI,EAAAhI,EAAA,GAAAA,EAAA,MAyEeuD,gBAdS,SAACC,EAAO1C,GAC5B,MAAO,CACHmH,eAAgBzE,EAAMM,UAAUmE,eAChCC,WAAY1E,EAAMU,QAAQ8B,qBAAuBlF,EAAM+D,SAIpC,SAACd,EAAUjD,GAClC,MAAO,CACHqH,WAAY,SAAC5J,GAAD,OAAOwF,EAASoE,YAAW5J,KACvC0H,sBAAuB,SAAC1H,GAAD,OAAOwF,EAASkC,aAAsB1H,OAItDgF,CAhEf,SAAoBzC,GAChB,IAIMsH,EAAcxD,sBAAY,SAACrG,GAC7BuC,EAAMqH,WAAW,CAACrC,aAAchF,EAAMgF,gBACvC,CAAChF,EAAMgF,eAEJuC,EAASzD,sBAAY,SAACrG,GAExB,GADAA,EAAE+J,uBAC2BvS,IAAzB+K,EAAMmH,eAAV,CAF8B,IAKzBnC,EAAgBhF,EAAMmH,eAAtBnC,aACLhF,EAAMsE,aAAaU,EAAchF,EAAMgF,gBACxC,CAAChF,EAAMgF,aAAchF,EAAMmH,iBAExBM,EAAe3D,sBAAY,SAACrG,GAC9BjH,QAAQC,IAAI,gCACRuJ,EAAMoH,gBAAanS,EAAY+K,EAAM+D,QACzC/D,EAAMmF,sBACFnF,EAAMoH,gBAAanS,EAAY+K,EAAM+D,SAC1C,CAAC/D,EAAMoH,WAAYpH,EAAM+D,SAExBrD,EAAY,cACZV,EAAMoH,aACN1G,GAAa,aAGjB,IAAIgH,EAAa1H,EAAM+D,OAAO4D,gBAI9B,OAHID,EAAW1R,OAAS,KACpB0R,EAAaA,EAAWE,MAAM,EAAG,KAGjCb,EAAA5M,EAAA4G,cAAA,OACEE,QAASwG,EACTI,WApCa,SAACpK,GAChBA,EAAEqK,kBAoCAP,OAAQA,EACRD,YAAaA,EACbS,WAAS,EACTrH,UAAWA,GACXqG,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,eACZV,EAAM+D,OAAOnO,MAEf8R,EAAWnS,IAAI,SAAAyS,GAAS,OAAIjB,EAAA5M,EAAA4G,cAACiG,EAAA,EAAD,CAAiBhG,IAAKgH,EAAUrS,GAAIqS,UAAWA,qJC1CvE,IAAIC,IAiGJxF,gBAvBS,SAACC,EAAO1C,GAC5B,IAAIkI,EAAgBlI,EAAMmI,MAAMxS,GAC5ByS,EAAgB1F,EAAM2F,IAAID,cAC1BE,EAAQ5F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,UAErE,MAAO,CACHN,gBACAE,gBACAK,cAJQzI,EAAMmI,MAIOO,YAAYtF,QAAQpN,OACzCiP,oBAAkChQ,IAAlBiT,EAA8BxF,EAAM2F,IAAIM,yBAAyBL,IAC7E5F,EAAM2F,IAAIM,yBAAyBL,GAAOJ,QAC1CjT,EACJsT,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,YAI1D,SAACvF,EAAUjD,GAClC,MAAO,CACH4I,kBAAmB,SAACC,EAAKC,EAAaC,EAAahF,GAAhC,OAA2Cd,EAC1D+F,aAAqBH,EAAKC,EAAaC,EAAa,UAAWhF,OAI5DtB,CA/FM,SAAAzI,GAKM,IAJvBuO,EAIuBvO,EAJvBuO,mBACAJ,EAGuBnO,EAHvBmO,MACApG,EAEuB/H,EAFvB+H,gBACAkD,EACuBjL,EADvBiL,eACA2D,EAAuB5O,EAAvB4O,kBAAuBrF,EACKC,wBAASvO,GADdwO,EAAApP,OAAA4U,EAAA,EAAA5U,CAAAkP,EAAA,GACPI,GADOF,EAAA,GAAAA,EAAA,IAEfL,EAAU+E,EAAQA,EAAMO,YAAYtF,QAAU,GAE5CkB,EAAeR,sBAAY,SAACS,EAAMC,GACpC2D,EAAMe,iBAAiB3E,EAAMC,GAC7Bb,EAAS,CAACY,OAAMC,QACjB,CAAC2D,EAAOxE,IAEL6B,EAAW1B,sBAAY,WACzB8E,EAAkBL,EAAoBJ,EAAMxS,QAAIV,OAAWA,IAC5D,CAACsT,EAAoBJ,IAEpBgB,EAAc,GACdlE,GAAkB7B,EAAQ5E,KAAK,SAAAf,GAAC,OAAIA,EAAE9H,KAAOsP,EAAetP,OAC5DwT,EACIC,EAAAjP,EAAA4G,cAACsI,EAAA,EAAD,CACEtH,gBAAiBA,EACjB8D,aAAa,EACbsC,MAAOA,EACPmB,SAAS,EACTxD,eAAgB,kBAAMN,KACtBzB,OAAQkB,EACR3B,UAAMrO,KAGhB,IAAM4O,EAAqBC,sBAAY,SAACrG,GACpC,IAAIsG,EAASwF,YAAqB9L,EAAEJ,MAAO8K,GAG3C,OAFAA,EAAMO,YAAYtE,UAAUL,GAC5B6E,EAAkBL,EAAoBJ,EAAMxS,QAAIV,EAAW8O,IACpD,GACR,CAACJ,EAAU5B,EAAiBoG,IAM/B,OADA3R,QAAQC,IAAI,oBAAsBwO,GAE9BmE,EAAAjP,EAAA4G,cAAA,OAAKL,UAAU,iBACb0I,EAAAjP,EAAA4G,cAAA,OACEyI,MANI,GAOJ9I,UAAU,yBACX0I,EAAAjP,EAAA4G,cAAA,OAAKL,UAAU,gBACX0C,EAAQ7N,IACL,SAACwO,EAAQ3L,GAAT,OACIgR,EAAAjP,EAAA4G,cAAC0I,EAAA,EAAD,CACEzI,IAAK+C,EAAOpO,GACZwS,MAAOA,EACPI,mBAAoBJ,EACpBuB,WAAY,UACZpF,aAAcA,EACdU,aAAc5M,EACd2L,OAAQA,OAEpBqF,EAAAjP,EAAA4G,cAAC4I,EAAAxP,EAAD,CACEuG,UAAU,wBACViE,QAASiF,IACT/E,SAAUhB,EACViB,YAAY,aAGhBsE,EAAAjP,EAAA4G,cAAA,OAAKL,UAAU,gBACZyI,oMC7EXU,EAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KA+C9BpH,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA7CM,SAAAzI,GAAgC,IAA9B8P,EAA8B9P,EAA9B8P,QAAS/H,EAAqB/H,EAArB+H,gBAAqBwB,EAC5BC,wBAASvO,GADmBwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC5ClO,EAD4CoO,EAAA,GACtCsG,EADsCtG,EAAA,GAAAuG,EAErBxG,mBAAS,IAFYyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAE5CE,EAF4CD,EAAA,GAEnCE,EAFmCF,EAAA,GAAAG,EAGvB5G,wBAASvO,GAHcoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG5CE,EAH4CD,EAAA,GAAAA,EAAA,GAIjDhG,oBAAU,WACNzE,IAAK2K,QAAQT,EAAQU,aAAarV,KAAK4U,IACxC,CAACA,IAEJ,IAAMU,EAAgB3G,sBAAY,SAAC1L,GAC/B2J,EAAgB2I,aAAaZ,EAAQU,YAAapS,IACnD,CAAC0R,IAOJ,OALAzF,oBAAU,WACFhP,GACA8U,EAAW9U,EAAKsV,eAErB,CAACtV,EAAM8U,IAEN1F,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBoJ,EAAQlV,OACvC6P,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZwJ,EAAQ3U,IAAI,SAACkQ,EAAGrN,GAAJ,OAAUqM,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMwJ,EAAcrS,IAC7BsI,UAAU,eAAemJ,EAAMzR,aAGhDnD,IAAXqV,GACA7F,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,6CCVX+B,GCsCAA,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAxDM,SAACzC,GAAU,IAAAuD,EACAC,oBAAS,GADTC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvBqH,EADuBnH,EAAA,GACdoH,EADcpH,EAAA,GAAAuG,EAEJxG,mBAAS,IAFLyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEvB3M,EAFuB4M,EAAA,GAEhBtG,EAFgBsG,EAAA,GAAAG,EAGE5G,mBAAS,IAHX6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGvBU,EAHuBT,EAAA,GAGbU,EAHaV,EAAA,GAItB/E,EAAMC,sBAAOtQ,GACdyG,EAAQsP,YAAU1F,EAAK,IAAI,EAAMjI,GAAjC3B,KASL,OAPA2I,oBAAU,WACFuG,GACAK,YAAY5N,GAAOlI,KACf4V,IAET,CAACH,EAASG,EAAa1N,IAErBuN,EAoBDnG,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,SAAO6F,KAAK,OAAO9B,YAAY,qBAAqBzH,MAAOA,EAAOwH,SAAU,SAAApH,GAAC,OAAIkG,EAASlG,EAAEoJ,OAAOxJ,UACnGoH,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAU,eACtBoK,EAASvE,OAAO,SAAA2E,GAAC,OAAkB,IAAdA,EAAE5R,UAAesO,MAAM,EAAGlM,GAAMnG,IAClD,SAAA2V,GAAC,OAAIzG,EAAAtK,EAAA4G,cAACoK,EAAD,CACEnK,IAAKkK,EAAEV,YACPzI,gBAAiB/B,EAAM+B,gBAAiB+H,QAASoB,QAzBxDzG,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMjB,EAAM+B,gBAAgBqJ,kBACrC1K,UAAU,wCACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAf,eAIF+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM4J,GAAW,IAC1BnK,UAAU,6BACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAf,6BDRL+B,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CArBS,SAAAzI,GAAuB,IAArBqR,EAAqBrR,EAArBqR,gBAMtB,OAAOA,EAAgB9V,IACnB,SAAA+V,GAAK,OACD7G,EAAAtK,EAAA4G,cAAA,QAAMwK,KAAK,cAAcpM,GAPhBqM,EAO2BF,EANjC,KENK,GFMOE,EAAK,GAAG/F,EAAI,IENnB,GFM6B+F,EAAK,GAAGC,EAAI,MACjDD,EAAK5D,MAAM,GAAGrS,IAAI,SAAA+E,GAAA,OEPV,GFOUA,EAAEmL,EAAiB,IEP7B,GFOUnL,EAAImR,IAA4B9U,KAAK,MAKX+U,YAAa,EAAGC,OAAO,QAP3D,IAACH,cG8BN/I,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH4L,KAAMlJ,EAAMmJ,YAAYD,OAIH,SAAC3I,GAC1B,MAAO,CACH6I,4BAA6B,SAACrG,GAAD,OAAOxC,EAAS6I,aAA4BrG,OAIhEhD,CA7BW,SAAAzI,GAAyC,IAAvC8R,EAAuC9R,EAAvC8R,4BAA6BF,EAAU5R,EAAV4R,KACrD,OACInH,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,0BACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QAAf,iBAGA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM6K,GAA6BF,IAAOlL,UAAWkL,EAAO,aAAe,4BCsBxFnJ,cAdS,SAACC,EAAO1C,GAE5B,MAAO,CACH+L,IAFU/L,EAAMgM,qBAAqBjK,gBAAgB4I,aAExC3U,OACbiW,aAAcvJ,EAAMmJ,YAAYI,aAChCC,cAAexJ,EAAMmJ,YAAYK,gBAId,SAACjJ,GAC1B,MAAO,IAIMR,CAlCM,SAAAzI,GAAyD,IAAvDiS,EAAuDjS,EAAvDiS,aAA6BD,GAA0BhS,EAAzCkS,cAAyClS,EAA1BgS,sBAC5C9B,EAAU8B,EAAqBjK,gBAAgB4I,aACnD,OACIlG,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACdwJ,EAAQ3U,IACL,SAAA4W,GAAG,OACC1H,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACZyL,EAAIvW,MAEP6O,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM+K,EAAqBI,YAAYD,IAChD7J,IAAM2J,EAAalT,SAASoT,GAEpB,kBADA,oCC2Eb1J,GCjEAA,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CApBQ,SAAAzI,GAA4B,IAA1BgS,EAA0BhS,EAA1BgS,qBAChBK,EAAgBL,EAAhBK,aACL,OACI5H,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAACuL,EAAD,CAAcN,qBAAsBA,IACpCvH,EAAAtK,EAAA4G,cAACwL,EAAA,EAAD,CAAqBC,IAAKA,IAAKzI,OAAQsI,ODgFlC5J,YAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHyM,oBAAqB/J,EAAMmJ,YAAYY,oBACvCC,WAAY1M,EAAMgM,qBAAqB9B,QAAQlU,SAI1B,SAACiN,GAC1B,MAAO,CACH0J,4BAA6B,SAAAlH,GAAC,OAAExC,EAAS0J,aAA4BlH,OAI5DhD,CAvFO,SAAAzI,GAAsE,IAApE4S,EAAoE5S,EAApE4S,YAAaZ,EAAuDhS,EAAvDgS,qBAC7Ba,GADoF7S,EAAjC2S,4BACxCX,EAAqBa,SAASD,IACzC1C,EAAU8B,EAAqB9B,QAE7B4C,EAAchJ,sBAAY,SAACS,EAAMC,GACnC,OAAOqI,EAAStI,EAAK5O,KAAOkX,EAAStI,EAAK5O,IAAIoD,SAASyL,IACxD,CAACqI,IAEEE,EAASjJ,sBAAY,SAACS,EAAMC,GAC1BsI,EAAYvI,EAAMC,GAClBwH,EAAqBgB,kBAAkBJ,EAAarI,EAAMC,GAE1DwH,EAAqBiB,eAAeL,EAAarI,EAAMC,IAE5D,CAACqI,IAEEK,EAAiBpJ,sBAAY,SAACwG,GAC5B0B,EAAqBmB,WAAW7C,GAChC0B,EAAqBoB,uBAAuB9C,GAE5C0B,EAAqBqB,kBAAkB/C,IAE5C,IAEH,OACI7F,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAf,UAGA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZwJ,EAAQ3U,IACL,SAAA+U,GAAM,OACF7F,EAAAtK,EAAA4G,cAAA,OAAKC,IAAKsJ,EAAO3U,IACf8O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UAAU4J,EAAO1U,MAChC6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAGzB+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UAAf,QACA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAGnB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAf,SAGA+D,EAAAtK,EAAA4G,cAAA,WACCmJ,EAAQ3U,IACL,SAAA+U,GAAM,OACF7F,EAAAtK,EAAA4G,cAAA,OACEC,IAAKsJ,EAAO3U,GACZ+K,UAAU,aACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACZ4J,EAAO1U,MAEV6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YACdwJ,EAAQ3U,IACL,SAAA+X,GAAQ,OACJ7I,EAAAtK,EAAA4G,cAAA,OACEC,IAAKsM,EAAS3X,GACdsL,QAAS,kBAAM8L,EAAOzC,EAAQgD,IAC9B5M,UACGoM,EAAYxC,EAAQgD,GACpB,qBAAuB,eACpC7I,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMiM,EAAe5C,IAC9B5J,UAAWsL,EAAqBmB,WAAW7C,GAChC,qBAAuB,gCEqH3C7H,YAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHyM,oBAAqB/J,EAAMmJ,YAAYY,oBACvCC,WAAY1M,EAAMgM,qBAAqB9B,QAAQlU,SAI1B,SAACiN,GAC1B,MAAO,CACH0J,4BAA6B,SAAAlH,GAAC,OAAExC,EAAS0J,aAA4BlH,OAI5DhD,CAjLY,SAAAzI,GAAsE,IAApE4S,EAAoE5S,EAApE4S,YAAaZ,EAAuDhS,EAAvDgS,qBAAsBW,EAAiC3S,EAAjC2S,4BACxDrH,EAAMC,sBAAOtQ,GAD4EsY,ECVnE,SAAAvT,GAA8C,IAA5CsL,EAA4CtL,EAA5CsL,IAAK0G,EAAuChS,EAAvCgS,qBAAsBY,EAAiB5S,EAAjB4S,YAAiBrJ,EAC1CC,wBAASvO,GADiCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACnEiK,EADmE/J,EAAA,GACzDgK,EADyDhK,EAAA,GAAAuG,EAElCxG,wBAASvO,GAFyBgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEnE0D,EAFmEzD,EAAA,GAErD0D,EAFqD1D,EAAA,GAIxE5F,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWrH,GAC5B,kBAAMoH,OAAOE,oBAAoB,UAAWtH,KACpD,CAACkH,EAAcC,IAElB,IAAMnH,EAAY1C,sBAAY,SAACrG,GAC3B,GAAKiQ,GAGS,cAAVjQ,EAAEuD,IAAqB,KAClBuD,EAAYmJ,EAAZnJ,KAAMC,EAAMkJ,EAANlJ,GACXD,EAAOyH,EAAqB+B,UAAUxJ,IAC1B,IAARC,EACAwH,EAAqBoB,uBAAuB7I,IAE5CC,EAAKwH,EAAqB+B,UAAUvJ,GACpCwH,EAAqBgB,kBAAkBJ,EAAarI,EAAMC,IAE9DmJ,OAAgB1Y,KAErB,CAACyY,EAAcC,IAEZK,EAAa,SAACvQ,GAChB,IAAIwQ,EAAO3I,EAAI4I,QAAQC,wBAGvB,MAAO,CAAC1I,EAFAhI,EAAE2Q,QAAUH,EAAKI,KAEf5C,EADFhO,EAAE6Q,QAAUL,EAAKM,MAIvBC,EAAY1K,sBAAY,SAACqI,GACvBuB,GACAC,OAAgB1Y,GAEfuY,GAILxB,EAAqBiB,eAAeL,EAAaY,EAASlD,OAAQ6B,IACnE,CAACqB,EAAUE,EAAcC,IAyB5B,MAAO,CAACc,YAvBY3K,sBAAY,SAACrG,GAC7B,GAAK+P,EAAL,CADmC,IAAAkB,EAIvBV,EAAWvQ,GAAlBgI,EAJ8BiJ,EAI9BjJ,EAAEgG,EAJ4BiD,EAI5BjD,EACPgC,EAAYpZ,OAAAsa,EAAA,EAAAta,CAAA,GACJmZ,EADG,CAEPoB,GAAInJ,EACJoJ,GAAIpD,OAET,CAAC+B,EAAUC,IAaOe,YAAWM,YAXZhL,sBAAY,SAACrG,EAAG6M,GAAW,IAAAyE,EAC/Bf,EAAWvQ,GAAlBgI,EADsCsJ,EACtCtJ,EAAEgG,EADoCsD,EACpCtD,EACPgC,EAAY,CACRnD,SACA0E,GAAIvJ,EACJwJ,GAAIxD,EACJmD,GAAInJ,EACJoJ,GAAIpD,KAET,CAACgC,IAEyCA,cAAaD,WAAUE,eAAcC,mBDrD9EuB,CAAe,CAAC5J,MAAKsH,cAAaZ,yBADjC0B,EAHwFH,EAGxFG,aAAcC,EAH0EJ,EAG1EI,gBAAiBc,EAHyDlB,EAGzDkB,YAAaD,EAH4CjB,EAG5CiB,UAAWM,EAHiCvB,EAGjCuB,YAAarB,EAHoBF,EAGpBE,YAAaD,EAHOD,EAGPC,SAItFnJ,oBAAU,WACFqJ,GACAf,OAA4B1X,IAEjC,CAACyY,IACJ,IAAIyB,EAAUnD,EAAqBa,SAASD,GACxC1C,EAAU8B,EAAqB9B,QAE/BkF,EAAQ,WAGR,MAAO,CAAC3J,EAFQ,KADMrM,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAT,GArBV,GAGE,GAqBKqS,EAxBP,GAuBU,IAFSrS,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,KAMpBoa,EAAe,SAAClD,GAElB,IADA,IAAIjC,EAAU8B,EAAqB9B,QAC1B9R,EAAE,EAAGA,EAAI8R,EAAQlU,OAAQoC,IAC9B,GAAI8R,EAAQ9R,GAAGzC,KAAOwW,EAClB,OAAO/T,EAGf,OAAQ,GAGNkX,EAAYxL,sBAAY,WAI1B,MAAO,CACH2B,EAHQ,GAIRgG,EALS2D,EAAM,EAAGpD,EAAqB9B,QAAQlU,QAEhCyV,IAKpB,IAEG8D,EAAezL,sBAAY,WACxB0J,GAGLxB,EAAqBqB,kBAAkBG,EAASlD,SACjD,CAACkD,IASAgC,EAAYnb,OAAOsE,KAAKwW,GACxBM,EAASH,IACTI,EAAQD,EAAOhK,EACfkK,EAAQF,EAAOhE,EACnB,OACIhH,EAAAtK,EAAA4G,cAAA,OACE6O,OAAQD,EAAM,GACdE,MAAO,IACPvK,IAAKA,EACLkJ,UAAW,kBAAMf,OAAYxY,IAC7BoM,aAAc,kBAAMoM,OAAYxY,IAChCwZ,YAAaA,EACb/N,UAAU,uBACV+D,EAAAtK,EAAA4G,cAAA,UAAQpL,GAAG,cAAcma,YAAY,KAAKC,aAAa,IACtDC,KAAK,IAAIC,KAAK,IAAIC,OAAO,QACxBzL,EAAAtK,EAAA4G,cAAA,WAASoP,OAAO,gBAAgB5E,KAAK,WAEtCiC,GAAY/I,EAAAtK,EAAA4G,cAAA,QACE4K,OAAO,QAAQqD,GAAIxB,EAASwB,GAAIJ,GAAIpB,EAASoB,GAAIK,GAAIzB,EAASyB,GAAIJ,GAAIrB,EAASqB,KAC7F7C,EAAqBoE,gBAAgB7a,IAClC,SAAA+U,GACI,IAAI+F,EAAUjB,EAAM,EAAGC,EAAa/E,EAAO3U,KACvC2a,EAAQhB,IACRN,EAAKqB,EAAQ5K,EACbwJ,EAAKoB,EAAQ5E,EACbmD,EAAK0B,EAAM7K,EAAI,GACfoJ,EAAKyB,EAAM7E,EACXtM,EAAC,KAAAsH,OAAQuI,EAAR,KAAAvI,OAAcwI,EAAd,OAAAxI,OAAsBuI,EAAG,GAAzB,MAAAvI,OAAgCwI,EAAhC,KAAAxI,OAAsCuI,EAAG,GAAzC,MAAAvI,OAAgDwI,EAAG,EAAnD,KAAAxI,OAAwDmI,EAAxD,MAAAnI,OAA+DoI,GAChEnO,EAAW,cAKf,OAJIgN,IAAqC,IAArBA,EAAalJ,IAC7BkJ,EAAanJ,OAAS+F,EAAO3U,KAC7B+K,GAAa,aAET+D,EAAAtK,EAAA4G,cAAA,QACEyN,UAAW,SAAC/Q,GACRA,EAAE+J,kBACFmG,EAAgB,CACZpJ,KAAM+F,EAAO3U,GACb6O,IAAK,KAGb9D,UAAWA,EACX6P,UAAU,oBACV5E,OAAO,QACPxM,EAAGA,MAGpBqQ,EAAUja,IACP,SAAAgP,GAAI,OACA4K,EAAQ5K,GAAMhP,IACV,SAAAiP,GACI,IA1DLwK,EAAIC,EAAIL,EAAIC,EA0DHwB,EAAUjB,EAAM,EAAGC,EAAa9K,IAChC+L,EAAQlB,EAAM,EAAGC,EAAa7K,EAAG7O,KACjCwJ,GA5DT6P,EA4DqBqB,EAAQ5K,EA5DzBwJ,EA4D4BoB,EAAQ5E,EA5DhCmD,EA4DmC0B,EAAM7K,EA5DrCoJ,EA4DwCyB,EAAM7E,EA3DhE,KAAMuD,EAAK,KAAOC,EAAK,OACzBD,EAAGJ,GAAI,EAAG,KAAOK,EAAK,KACtBD,EAAGJ,GAAI,EAAG,KAAOC,EAAK,KACtBD,EAAG,IAAK,KAAOC,GAyDEnO,EAAY,cAQhB,OAPIgN,GACIA,EAAanJ,OAASA,GACtBmJ,EAAalJ,KAAOA,EAAG7O,KACvB+K,GAAa,aAKjB+D,EAAAtK,EAAA4G,cAAA,QACEyN,UAAW,SAAC/Q,GACRA,EAAE+J,kBACFmG,EAAgB,CACZpJ,KAAMA,EACNC,GAAIA,EAAG7O,MAGfwJ,EAAGA,EACHoR,UAAU,oBACV5E,OAAO,QACPjL,UAAWA,QAIhCwJ,EAAQ3U,IACL,SAAC4W,EAAK/T,GAAN,OACIqM,EAAAtK,EAAA4G,cAAA,SACE0D,EAAAtK,EAAA4G,cAAA,UACE+N,YAAa,SAACrR,GAAD,OAAOqR,EAAYrR,EAAG0O,IACnCZ,KAAK,QAAQiF,GAAIpB,EAAM,EAAGhX,GAAGqN,EAAGgL,GAAIrB,EAAM,EAAGhX,GAAGqT,EAAGiF,EAhJ9D,KAiJSjM,EAAAtK,EAAA4G,cAAA,QAAM0E,EAAG,EAAYgG,EAAG,EAAS2D,EAAM,EAAEhX,GAAGqT,EAAGF,KAAK,SACjDY,EAAIvW,SAGhBsU,EAAQ3U,IACL,SAAC4W,EAAK/T,GAAK,IAAAuY,EACGvB,EAAM,EAAGhX,GAAhBqN,EADIkL,EACJlL,EAAEgG,EADEkF,EACFlF,EACL,OACIhH,EAAAtK,EAAA4G,cAAA,SACE0D,EAAAtK,EAAA4G,cAAA,UACEyN,UAAW,kBAAMA,EAAUrC,IAC3BZ,KAAK,QAAQiF,GAAI/K,EAAGgL,GAAIhF,EAAGiF,EA5J1C,KA6JajM,EAAAtK,EAAA4G,cAAA,QAAM0E,EAAG,EAAEA,EAAEmL,EAAUnF,EAAG,EAASA,EAAGF,KAAK,SACxCY,EAAIvW,SAIrB6O,EAAAtK,EAAA4G,cAAA,QACEyN,UAAWe,EACXhE,KAAK,QAAQ9F,EAAGiK,EAAOjE,EAAGkE,EAAOE,MAAO,GAAID,OAAQ,KACtDnL,EAAAtK,EAAA4G,cAAA,QAAMwK,KAAK,QAAQ9F,EAAG,EAAEiK,EAAOjE,EAAGkE,EAAM,IAAxC,kBEtIKlN,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAjCA,SAAAzI,GAA0C,IAAxCgJ,EAAwChJ,EAAxCgJ,UAAW4J,EAA6B5S,EAA7B4S,YAAahG,EAAgB5M,EAAhB4M,KAAMhR,EAAUoE,EAAVpE,KAAU2N,EAC3BC,mBAASR,EAAU6N,eAAejE,GAAa7T,SAAS6N,IAD7BnD,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAChDuN,EADgDrN,EAAA,GACxCsN,EADwCtN,EAAA,GAG/CsJ,EAASjJ,sBAAY,WAEnBd,EAAU6N,eAAejE,GADzBkE,EAEI9N,EAAU6N,eAAejE,GAAarG,OAClC,SAAApJ,GAAC,OAAIA,IAAMyJ,IAEnB,GAAAH,OAAApS,OAAA2R,EAAA,EAAA3R,CACS2O,EAAU6N,eAAejE,IADlC,CAEKhG,IAETmK,GAAWD,IACZ,CAAC9N,EAAW8N,EAAQC,IAEnBrQ,EAAY,mBAIhB,OAHIoQ,IACApQ,GAAa,WAET+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS8L,EAAQrM,UAAWA,GAAY9K,KCK1C6M,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzBE,SAAAzI,GAAmB,IAC5BwP,EAAQ,GASZ,OAPoB,IAHYxP,EAAjB4S,aAIXpD,EAAMwH,WAAa,mBACnBxH,EAAMyH,UAAY,2BAElBzH,EAAM0H,YAAc,mBACpB1H,EAAM2H,aAAe,0BAGrB1M,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgB8I,MAAOA,eCoB/B/G,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1BU,SAAAzI,GAAyC,IAAvC4S,EAAuC5S,EAAvC4S,YAAaZ,EAA0BhS,EAA1BgS,qBACpC,OACIvH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAACqQ,EAAD,CAAUxE,YAAaA,IACvBnI,EAAAtK,EAAA4G,cAACsQ,EAAD,CAAezE,YAAaA,EAAaZ,qBAAsBA,IAE/DvH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAACuQ,EAAD,CAAQ1E,YAAaA,EAAa5J,UAAWgJ,EAAsBpF,KAAM2K,IAAa3b,KAAK,SAC3F6O,EAAAtK,EAAA4G,cAACuQ,EAAD,CAAQ1E,YAAaA,EAAa5J,UAAWgJ,EAAsBpF,KAAM4K,IAAgB5b,KAAK,YAC9F6O,EAAAtK,EAAA4G,cAACuQ,EAAD,CAAQ1E,YAAaA,EAAa5J,UAAWgJ,EAAsBpF,KAAM6K,IAAa7b,KAAK,SAC3F6O,EAAAtK,EAAA4G,cAACuQ,EAAD,CAAQ1E,YAAaA,EAAa5J,UAAWgJ,EAAsBpF,KAAM8K,IAAmB9b,KAAK,8BCdvG+b,EAAS,IAAI1J,IA2EJxF,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzES,SAAAzI,GAQlB,IAPF5B,EAOE4B,EAPF5B,EACAwZ,EAME5X,EANF4X,UACAC,EAKE7X,EALF6X,mBACAC,EAIE9X,EAJF8X,sBACA9F,EAGEhS,EAHFgS,qBACAhE,EAEEhO,EAFFgO,UACA+J,EACE/X,EADF+X,cAEKC,EAAWhK,EAAXgK,QACAzR,EAA+DyR,EAA/DzR,UAAW4H,EAAoD6J,EAApD7J,MAAmBpE,GAAiCiO,EAA7CC,WAA6CD,EAAjCjO,QAAoBmO,GAAaF,EAAzBG,WAAyBH,EAAbE,WACnDrP,EAAcsF,GAASA,EAAMtF,YAC7BtC,IACAsC,EAActC,EAAUsC,aAG5B,IAAM5B,EAAU6C,sBAAY,WACxBkI,EAAqBoG,aAAapK,GAClC+J,EAAc1d,OAAA2R,EAAA,EAAA3R,CAAK2X,EAAqBqG,eACzC,CAACrK,IAEE9G,EAAc4C,sBAAY,SAACrG,GACzBoU,GAAsBD,EAAU1D,SAChC4D,EAAqB,GAAArL,OAAApS,OAAA2R,EAAA,EAAA3R,CAAMwd,GAAN,CAA0BzZ,MAEpD,CAACA,EAAGyZ,EAAoBC,IAE3B,GAAI3J,GAASA,EAAMmK,YACf,MAAO,GAEX,GAAIN,EAAQO,UAAYP,EAAQO,QAAQC,QACpC,MAAO,GAGX,IACI9R,EAAY,mBAMhB,OAPamR,GAAsBxd,OAAA2R,EAAA,EAAA3R,CAAIwd,GAAoBvV,QAGnDuV,EAAmB9Y,SAASX,KAC5BsI,GAAa,aAIjB+D,EAAAtK,EAAA4G,cAAA,OACEG,YAAaA,EACb4N,YAAa,SAACrR,GAAD,OAAOA,EAAEgV,SAAWZ,EAAqBC,EAAqB,GAAArL,OAAApS,OAAA2R,EAAA,EAAA3R,CAAMwd,GAAN,CAA0BzZ,KAAM0Z,EAAsB,CAAC1Z,KAClI6I,QAASA,EAASP,UAAWA,GAC5BmC,GACA4B,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACkJ,gBAAiB7P,EAAY8P,OACrCjS,UAAU,kBAAkBmC,EAAYjN,MAC3C6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACZsH,EAAUpS,MAEZuS,GACA1D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO,CAACkJ,gBAAiBf,EAAOiB,iBAAiBzK,IACjDzH,UAAU,WAAWyH,EAAMW,YAAc,EAD9C,KACmDX,EAAM0K,WACzDX,GAAazN,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACkJ,gBAAiBf,EAAOmB,gBAAgB3K,EAAQA,EAAM0K,UAAYX,EAAUtc,KAAOsc,EAAUtc,OACrG8K,UAAU,gBAAgBwR,EAAUtc,MACnDmO,GAAUU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAYqD,EAAOnO,kBCgBxC6M,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA5EW,SAAAzI,GAA2C,IAAzCgS,EAAyChS,EAAzCgS,qBAAsB+F,EAAmB/X,EAAnB+X,cAAmBxO,EACvCC,mBAAS,IAD8BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC1DlG,EAD0DoG,EAAA,GACnDE,EADmDF,EAAA,GAAAuG,EAEnCxG,mBAAS,IAF0ByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAE1D1T,EAF0D2T,EAAA,GAEjD8I,EAFiD9I,EAAA,GAAAG,EAGb5G,wBAASvO,GAHIoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG1DyH,EAH0DxH,EAAA,GAGtCyH,EAHsCzH,EAAA,GAI3DuH,EAAYrM,kBAAO,GAEzBlB,oBAAU,WAEF0O,EADU,KAAV1V,EAEI2V,IAAMC,OAAO5V,GACRkJ,OACG,SAAA2E,GAAC,OAAIA,EAAEgI,YAAchI,EAAEiI,cAExB,KAEhB,CAAC9V,EAAO0V,IAEX1O,oBAAU,WACNyN,OAAsB7c,IACvB,CAACqB,EAASwb,IAEb,IAAMsB,EAActP,sBAAY,WAC5B,IAAIuP,EAASC,MAAM/O,KAAK,IAAIgP,IAAI1B,EAAmBtc,IAC/C,SAAAkQ,GAAC,OAAInP,EAAQmP,OACb+N,EAAQxH,EAAqBoH,YAAYC,GAC7CvB,OAAsB7c,GACtB8c,EAAc,CAACyB,EAAMC,kBACtB,CAAC5B,EAAoBvb,EAASwb,IAE3BjN,EAAWf,sBAAY,SAACrG,GAC1BkG,EAASlG,EAAEoJ,OAAOxJ,QACnB,CAACsG,IAEJ,OACIc,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,kBAAM8C,EAAU1D,SAAQ,GACrCM,UAAW,kBAAMoD,EAAU1D,SAAQ,GACnC7M,aAAc,kBAAMuQ,EAAU1D,SAAQ,GACtCxN,UAAU,sBACV+D,EAAAtK,EAAA4G,cAAA,SAAO+D,YAAY,wBAAwBpE,UAAU,qBAAqBrD,MAAOA,EAAOuJ,KAAK,OAAO/B,SAAUA,IAC9GJ,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM0C,EAAS,KAAKjD,UAAU,cAA5C,KAGA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACZpK,EACCiQ,OACG,SAAA2E,GAAC,OACIc,EAAqBqG,YAAYtZ,SAASmS,KAClD3E,OAAO,SAAA2E,GAAC,OAAKA,EAAEwI,WACfne,IACE,SAACmb,EAAGtY,GAAJ,OAAUqM,EAAAtK,EAAA4G,cAAC4S,EAAD,CACE/B,UAAWA,EACXC,mBAAoBA,EACpBC,sBAAuBA,EACvB1Z,EAAGA,EACH2Z,cAAeA,EACf/F,qBAAsBA,EACtBhL,IAAK0P,EAAE/a,GAAK,IAAMyC,EAAG4P,UAAW0I,OAEjDmB,GAAsBpN,EAAAtK,EAAA4G,cAAA,OACEE,QAASmS,EACT1S,UAAU,oBAFZ,iBAE8CmR,EAAmB7b,OAFjE,iBCvBlByM,cAdS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACH2Q,kBAAmB,SAACC,GAAD,OAAe5Q,EAC5B2Q,aAAkBC,KACxBC,gCAAiC,SAACC,GAAD,OAAW9Q,EACxC6Q,YAAgCC,OAI3BtR,CAhCe,SAAAzI,GAA4B,IAA1BgS,EAA0BhS,EAA1BgS,qBAA0BzI,EACpBC,mBAAS,IADWC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACjDmE,EADiDjE,EAAA,GACrCsO,EADqCtO,EAAA,GAEtD,OACIgB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BACb+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAACiT,EAAA,EAAD,CAAkBC,eAAgBvM,EAAY3D,OAAQiI,IACtDvH,EAAAtK,EAAA4G,cAACmT,EAAA,EAAD,CACEte,KAAK,QACLmM,gBAAiBiK,EAAqBjK,gBACtCoS,IAAK,EACLC,IAAK,EACLC,KAAM,KACNrM,UAAWgE,EAAqBsI,4BAEpC7P,EAAAtK,EAAA4G,cAACwT,EAAD,CAAmBN,eAAgBvM,EAAYqK,cAAeA,EAAe/F,qBAAsBA,OCY9FvJ,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA5BC,SAAAzI,GAAsC,IAApCgS,EAAoChS,EAApCgS,qBAAoChS,EAAdwa,SACpC,OACI/P,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAC0T,EAAD,MACAhQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAC2T,EAAD,CAAkB1I,qBAAsBA,EAAsBY,YAAa,IAC3EnI,EAAAtK,EAAA4G,cAAC2T,EAAD,CAAkB1I,qBAAsBA,EAAsBY,YAAa,KAE7EnI,EAAAtK,EAAA4G,cAAC4T,EAAD,CAAuB3I,qBAAsBA,QCa1CvJ,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH4U,UAAW5U,EAAM+B,gBAAgB6S,UACjCC,QAAS7U,EAAM+B,gBAAgB8S,UAIV,SAAC5R,GAC1B,MAAO,IAIMR,CAzBE,SAAAzI,GAA0B,IAAxB6a,EAAwB7a,EAAxB6a,QACXrL,EAAQ,CACR6E,KAFmCrU,EAAf4a,UAED,GAAM,IAE7B,OAAKC,EAIDpQ,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,oBAHtB,sBC6HA+B,6BAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA9HkB,SAAAzI,GAc3B,IAbFyT,EAaEzT,EAbFyT,YACAD,EAYExT,EAZFwT,SACAsH,EAWE9a,EAXF8a,WACAC,EAUE/a,EAVF+a,YACAnI,EASE5S,EATF4S,YACAoI,EAQEhb,EARFgb,SACAtZ,EAOE1B,EAPF0B,KACAsQ,EAMEhS,EANFgS,qBACA5E,EAKEpN,EALFoN,WACA6N,EAIEjb,EAJFib,aACAxP,EAGEzL,EAHFyL,EACAgG,EAEEzR,EAFFyR,EACIzL,EACF3L,OAAA6gB,EAAA,EAAA7gB,CAAA2F,EAAA,kJACEsL,EAAMC,sBAAOtQ,GACbkgB,EAAQ5P,kBAAO,GAFjBhC,EAGsBC,mBAASwR,EAAS1K,QAAU0K,EAAS1K,OAAOqI,OAHlElP,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGU6R,GAHV3R,EAAA,GAAAA,EAAA,IAIE/C,EAAU,oBACVoU,IACApU,GAAa,aANf,IAAA2U,EAQiDC,YAAe,CAAChQ,QAA9DiQ,EARHF,EAQGE,cAAeC,EARlBH,EAQkBG,YARlBH,EAQ+BI,eAEjCpR,oBAAU,WACN+Q,EAASpV,EAAM2S,QAChB,CAAC3S,EAAM2S,MAAOyC,IAEjB1U,GAAa,MACbA,GAAa,gBAAkBkM,EAf7B,IAAA8I,ECrBkB,SAAA1b,GAAqF,IAAnFib,EAAmFjb,EAAnFib,aAAcE,EAAqEnb,EAArEmb,MAAOJ,EAA8D/a,EAA9D+a,YAAa/I,EAAiDhS,EAAjDgS,qBAAsBwB,EAA2BxT,EAA3BwT,SAAUC,EAAiBzT,EAAjByT,YAClFe,EAAY1K,sBAAY,SAAC2B,EAAGgG,GAC1B0J,EAAMjH,SAAWV,GAAYA,EAAS/H,IAAIA,GAAK+H,EAAS/B,GAAGA,GAC3DO,EAAqBe,OAAOtH,EAAEgG,GAElCgC,OAAYxY,IACb,CAACwY,EAAaD,IAajB,MAAO,CAACsB,YAXYhL,sBAAY,SAAC2B,EAAGgG,EAAGhO,GAC/BA,EAAEgV,QACFwC,EAAa,CAACjG,GAAIvJ,EAAGwJ,GAAIxD,EAAGmD,GAAInJ,EAAGoJ,GAAIpD,KAI3CgC,EAAY,CAAChI,IAAEgG,MACfsJ,EAAY,CAAC/I,EAAqB2J,OAAOlQ,GAAGgG,KAC5C0J,EAAMjH,SAAU,IACjB,CAACT,EAAawH,IAEIzG,aDmBYoH,CAAS,CACtCX,eACAE,QACAJ,cACA/I,uBACAwB,WACAC,gBANGqB,EAjBL4G,EAiBK5G,YAAaN,EAjBlBkH,EAiBkBlH,UAQhB2B,EAAO,CAxCJ,GAwCK1K,EAxCL,GAwCYgG,GAEf0E,EAAM,GAAA1J,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQ8b,GADE,IAAhBvD,EACM,CA1CH,GA0CmBnH,EA1CnB,IA0C4BgG,EAAE/P,GA1C9B,IA0C2C+J,EAAE/J,GA1C7C,IA0C0D+P,EAAE/P,IAEzD,CA5CH,IA4CoB+J,EAAE/J,GA5CtB,GA4CmC+P,EA5CnC,IA4C6ChG,EAAE/J,GA5C/C,IA4C4D+P,EAAE/P,KAGhDoI,sBAAY,SAACwG,GACzB0K,IAGLA,EAAS1K,OAASA,EACdA,GACA8K,EAAS9K,EAAOqI,SAErB,CAAClN,EAAEgG,EAAG2J,EAAUJ,IAEfQ,IACA9U,GAAa,YAEb0G,IACA1G,GAAa,aAEIsL,EAAqBjK,gBAArC4I,aACL,OACIlG,EAAAtK,EAAA4G,cAAA,WACEoP,OAAQA,EACR7K,IAAKA,EACLiQ,cAAe,SAAC9X,GACRuX,IACAO,EAAc9X,GACdgQ,OAAYxY,KAGpB6Z,YAAa,SAACrR,GACVA,EAAE+J,kBACFsH,EAAYrJ,EAAEgG,EAAEhO,IAEpB+Q,UAAW,SAAC/Q,GACRA,EAAE+J,kBACGgO,GACDhH,EAAU/I,EAAEgG,IAGpBjC,MA5DM,GA4DQ9I,UAAWA,OEYpBmV,EAnGM,SAAA7b,GASf,IARFyL,EAQEzL,EARFyL,EACAuG,EAOEhS,EAPFgS,qBACAwB,EAMExT,EANFwT,SACAC,EAKEzT,EALFyT,YACA+G,EAIExa,EAJFwa,SACAO,EAGE/a,EAHF+a,YACAe,EAEE9b,EAFF8b,UACAb,EACEjb,EADFib,aAEMc,EAAcxQ,kBAAO,GACrBiJ,EAAY1K,sBAAY,SAAC2H,EAAGhO,GAC9B,GAAIqY,EAEA,OADAf,EAAY/I,EAAqBgK,aAAaF,IACvCb,OAAahgB,GAGpBuY,GAAYA,EAAS/H,IAAIA,GAAK+H,EAAS/B,GAAGA,IACrCsK,EAAY7H,SAAYzQ,EAAEgV,SAC3BzG,EAAqBe,OAAOtH,EAAEgG,IAGtCgC,OAAYxY,GACZ8gB,EAAY7H,SAAU,GACvB,CAACzI,EAAGsP,EAAatH,EAAaD,EAAUsI,EAAWb,IAEhD/T,EAAe4C,sBAAY,SAAC2H,GAC9B,GAAIqK,EACAb,EAAa5gB,OAAAsa,EAAA,EAAAta,CAAA,GAAKyhB,EAAN,CAAiBlH,GAAInJ,EAAGoJ,GAAIpD,UAI5C,GAAK+B,EAAL,CAEcA,EAAS/H,EACT+H,EAAS/B,EADvB,IAEIwK,EAAOta,KAAKyY,IAAI3O,EAAI+H,EAAS/H,EAAGgG,EAAI+B,EAAS/B,GAC7CwK,GAAQ,GACRjK,EAAqBkK,YACjB1I,EAAS/H,EACT+H,EAAS/B,EACTwK,EAAK,KAEd,CAACzI,EAAUC,EAAaqI,EAAWb,IAEhCnG,EAAchL,sBAAY,SAAC2H,EAAGhO,GAC5BA,EAAEgV,QACFwC,EAAa,CAACjG,GAAIvJ,EAAGwJ,GAAIxD,EAAGmD,GAAInJ,EAAGoJ,GAAIpD,KAItCO,EAAqB2J,OAAOlQ,GAAGgG,KAChCsK,EAAY7H,SAAQ,EACpBlC,EAAqBe,OAAOtH,EAAEgG,IAElCgC,EAAY,CAAChI,IAAEgG,MACfsJ,EAAY,CAAC/I,EAAqB2J,OAAOlQ,GAAGgG,OAC7C,CAACwJ,EAAca,EAAWrI,IAEvB0I,EAAerS,sBAAY,SAACkR,EAAUvJ,GACxC,IAAI/K,EAAY,cAOhB,GANI+K,EAAE,IAAM,IACR/K,GAAa,SAEb8T,GAAYA,EAASzb,SAASic,KAC9BtU,GAAa,aAEboV,EAAW,KACN9G,EAAkB8G,EAAlB9G,GAAIC,EAAc6G,EAAd7G,GAAIL,EAAUkH,EAAVlH,GAAIC,EAAMiH,EAANjH,GACbG,GAAMvJ,GAAKA,GAAKmJ,GAChBK,GAAMxD,GAAKA,GAAKoD,IAChBnO,GAAa,cAGrB,OAAOA,GACR,CAAC8T,EAAUsB,IASf,OACKrR,EAAAtK,EAAA4G,cAAA,OAAKL,UAAW+E,EAAE,GAAG,EAAI,kBAAmB,cACzCuG,EAAqB2J,OAAOlQ,GAAGlQ,IAC5B,SAAC6gB,EAAK3K,GAAN,OACIhH,EAAAtK,EAAA4G,cAAA,OACEM,aAAc,kBAAM0U,EAAY7H,SAAQ,GACxChN,YAAa,kBAAMA,EAAYuK,IAC/BqD,YAAa,SAACrR,GAAD,OAAOqR,EAAYrD,EAAEhO,IAClC+Q,UAAW,SAAC/Q,GAAD,OAAO+Q,EAAU/C,EAAEhO,IAC9BiD,UAAWyV,EAAaC,EAAK3K,SCWlChJ,uBAfS,SAACC,EAAO1C,GAC9B,MAAO,CACH2V,OAAQjT,EAAMmJ,YAAY8J,OAC1BnB,SAAU9R,EAAMmJ,YAAYwK,cAC5BzK,KAAMlJ,EAAMmJ,YAAYD,OAIH,SAAC3I,GAC1B,MAAO,CACH6I,4BAA6B,SAACrG,GAAD,OAAOxC,EAAS6I,aAA4BrG,KACzEsP,YAAa,SAACtP,GAAD,OAAOxC,EAAS0J,aAA4BlH,OAIhDhD,CA9Fc,SAAAzI,GAAiFA,EAA/E8R,4BAA+E,IAAlD/J,EAAkD/H,EAAlD+H,gBAAiByS,EAAiCxa,EAAjCwa,SAAUO,EAAuB/a,EAAvB+a,YAAanJ,EAAU5R,EAAV4R,KAC3FI,EAAwBjK,EAAxBiK,qBACA2J,EAAU3J,EAAV2J,OAFqGpS,EAG5EC,wBAASvO,GAHmEwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGrGiK,EAHqG/J,EAAA,GAG3FgK,EAH2FhK,EAAA,GAAAuG,EAI1ExG,wBAASvO,GAJiEgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAIrG8L,EAJqG7L,EAAA,GAI1FgL,EAJ0FhL,EAAA,GAAAG,EAKhF5G,wBAASvO,GALuEoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAKrGkM,EALqGjM,EAAA,GAK7FkM,EAL6FlM,EAAA,GAO1GhG,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWW,GAC5B,WACHZ,OAAOE,oBAAoB,UAAWU,KAE3C,CAACf,IAEJpJ,oBAAU,WACN,OAAO,kBAAM0Q,OAAY9f,KAC1B,IC7BgB,SAAA+E,GAAmD,IAAjDwa,EAAiDxa,EAAjDwa,SAAUO,EAAuC/a,EAAvC+a,YAAa/I,EAA0BhS,EAA1BgS,qBAC5C3H,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWrH,GAC5B,WACHoH,OAAOE,oBAAoB,UAAWtH,KAE3C,EAAGgO,EAAUO,IAEhB,IAAMvO,EAAY1C,sBAAY,SAACrG,GAC3B,GAAyB,UAArBA,EAAEoJ,OAAO2P,SACY,aAArB/Y,EAAEoJ,OAAO2P,QAIb,GAAc,cAAV/Y,EAAEuD,IACFvD,EAAEqK,iBACE0M,GAAYA,EAASxe,OAAS,IAC9BgW,EAAqByK,YAAYjC,GACjCO,OAAY9f,QAEb,CACH,IAAKuf,EACD,OAEJ,IAAI/O,EAAE,EACFgG,EAAE,EACN,GAAc,UAAVhO,EAAEuD,IAKF,OAJAvD,EAAEqK,sBACF0M,EAAS1c,QACL,SAAAwC,GAAA,IAAEmL,EAAFnL,EAAEmL,EAAEgG,EAAJnR,EAAImR,EAAJ,OACIO,EAAqBe,OAAOtH,EAAEgG,KAG5B,cAAVhO,EAAEuD,KACFvD,EAAEqK,iBACFrC,KACiB,YAAVhI,EAAEuD,KACTvD,EAAEqK,iBACF2D,KACiB,eAAVhO,EAAEuD,KACTvD,EAAEqK,iBACFrC,KACiB,cAAVhI,EAAEuD,MACTvD,EAAEqK,iBACF2D,KAEJ+I,EAAS1c,QACL,SAAA4e,GAAE,OAAI1K,EAAqB2K,WACvBD,EAAGjR,EAAGiR,EAAGjL,EAAGiL,EAAGjR,EAAEA,EAAGiR,EAAGjL,EAAEA,OAEtC,CAAC+I,EAAUO,IDnBd6B,CAAQ,CAAC5K,uBAAsB+I,cAAaP,aAE5C,IAAMhG,EAAY1K,sBAAY,WAC1B2J,OAAYxY,GACZshB,GAAU,IACX,CAAC9I,IAEEgB,EAAc3K,sBAAY,WACxB0J,GACA+I,GAAU,IAEf,CAAC/I,EAAU+I,IAEd,IAAK3K,EACD,OAAQnH,EAAAtK,EAAA4G,cAAC0T,EAAD,MAEZ,IAAIoC,EAAYf,EAAY,4BAA8B,kBAI1D,OAHIQ,IACAO,GAAY,WAGZpS,EAAAtK,EAAA4G,cAAA,OACE0N,YAAaA,EACb/N,UAAU,0BACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAC+V,EAAD,CAAU/U,gBAAiBA,IAC1B4T,EAAOpgB,IACJ,SAACwhB,EAAKtR,GAAN,OACIhB,EAAAtK,EAAA4G,cAACiW,EAAD,CACE/B,aAAcA,EACda,UAAWA,EACXf,YAAaA,EACbP,SAAUA,EACV/G,YAAaA,EACbD,SAAUA,EAAU/H,EAAGA,EAAGuG,qBAAsBA,MAE1DvH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWmW,GACb7K,EAAqBiL,MAAM1hB,IACxB,SAAAyf,GAAQ,OACJvQ,EAAAtK,EAAA4G,cAACmW,EAAD,CACEnC,YAAaA,EACbE,aAAcA,EACd7N,WAAYoN,GAAYA,EAASzb,SAASic,GAC1CxH,SAAUA,EACV/H,EAAGuP,EAASvP,EAAGgG,EAAGuJ,EAASvJ,EAC3BmB,YAAaoI,EAASpI,YACtBkI,WAAYtH,GAAYA,EAAS/H,IAAMuP,EAASvP,GAAK+H,EAAS/B,IAAMuJ,EAASvJ,EAC7E/P,KAAMsZ,EAAStZ,KACf+R,YAAaA,EACbkF,MAAOqC,EAAS1K,QAAU0K,EAAS1K,OAAOqI,MAC1CqC,SAAUA,EACVhJ,qBAAsBA,MAC/BA,EAAqBX,iBACrB5G,EAAAtK,EAAA4G,cAACoW,EAAD,CAAiB9L,gBAAiBW,EAAqBX,oBAG5D5G,EAAAtK,EAAA4G,cAACqW,EAAD,CAASpL,qBAAsBA,EAAsBwI,SAAUA,QEnB1D/R,uBAZS,SAACC,EAAO1C,GAE5B,MAAO,CACHqX,iBAFqB3U,EAAM4U,KAA1BD,mBAMkB,SAACpU,GAC1B,MAAO,IAIMR,CA7DQ,SAAAzI,GAAwC,IAAtCud,EAAsCvd,EAAtCud,MAAOC,EAA+Bxd,EAA/Bwd,SAAUzV,EAAqB/H,EAArB+H,gBAChCuD,EAAMC,iBAAOD,GAEnBjB,oBAAU,WAEN,OADAiB,EAAI4I,QAAQL,iBAAiB,aAAc4J,GACpC,kBAAMnS,EAAI4I,QAAQJ,oBAAoB,aAAc2J,KAC5D,CAACD,EAAUD,IAEd,IAAME,EAAe3T,sBAAY,SAACrG,GAAM,IAChCia,EAA4Cja,EAA5Cia,OAAQC,EAAoCla,EAApCka,OAAqBC,GAAena,EAA5Boa,YAA4Bpa,EAAfma,aACjC,GAAKna,EAAEqa,UACHnc,KAAK6B,IAAIoa,GAAe,IACvBjc,KAAK6B,IAAIoa,GAAe,IAAMjc,KAAK6B,IAAIka,GAAU,IAAM/b,KAAK6B,IAAIma,GAAU,IAAK,CAChFla,EAAEqK,iBACF,IAAIiQ,EAAO,EAEPA,EADAH,EAAc,EACJL,EAAQK,EAAc,IAEvBjc,KAAK6B,IAAI+Z,GAASK,EAAc,MAE7ChK,OAAOmK,OAASpc,KAAKyY,IArBf,GAqB8BzY,KAAKwY,IAAI,EAAG4D,IAChDP,EAAS7b,KAAKyY,IAtBR,GAsBuBzY,KAAKwY,IAAI,EAAG4D,OAE9C,CAACP,EAAUD,IAEV/N,EAAQ,GAOZ,OAJc,IAAV+N,IACA/N,EAAMwO,UAAY,SAAWT,EAAQ,KAIrC9S,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAU,aACvB+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,mBAC1BqB,EAAgB4I,aAAapV,IAC1B,SAAAsN,GAAW,OACP4B,EAAAtK,EAAA4G,cAACkX,EAAA,EAAD,CACEjX,IAAK6B,EAAYlN,GACjB4hB,MAAOA,EACPW,aAAa,EACbrV,YAAaA,EACbd,gBAAiBA,OAE7B0C,EAAAtK,EAAA4G,cAACoX,EAAD,CAAsBpW,gBAAiBA,4BCjClCU,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhBc,SAACzC,GAC1B,OACIyE,EAAAtK,EAAA4G,cAAA,yGCOF4Q,GAAS,IAAI1J,IAsHJxF,eAvBS,SAACC,EAAO1C,GAC5B,IAAIkI,OAA4CjT,IAA5ByN,EAAM2F,IAAID,cACtB1F,EAAM2F,IAAIH,mBAAgBjT,EAC9BmT,EAAgB1F,EAAM2F,IAAID,cAC1BE,EAAQ5F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,UACrE,MAAO,CACHN,gBACAE,gBACAnD,oBAAkChQ,IAAlBiT,EAA8BxF,EAAM2F,IAAI+P,qBAAqB9P,IACzE5F,EAAM2F,IAAI+P,qBAAqB9P,GAAOJ,GACtCxF,EAAM2F,IAAIgQ,qBAAqB/P,IAC/B5F,EAAM2F,IAAIgQ,qBAAqB/P,GAAOF,GAC1CG,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,YAI1D,SAACvF,EAAUjD,GAClC,MAAO,CACH4I,kBAAmB,SAACC,EAAKC,EAAaC,EAAahF,GAAhC,OAA2Cd,EAC1D+F,aAAqBH,EAAKC,EAAaC,EAAa,WAAYhF,OAI7DtB,CApHM,SAAAzI,GAMM,IALvBuO,EAKuBvO,EALvBuO,mBACAL,EAIuBlO,EAJvBkO,cACAE,EAGuBpO,EAHvBoO,cACArG,EAEuB/H,EAFvB+H,gBACAkD,EACuBjL,EADvBiL,eACA2D,EAAuB5O,EAAvB4O,kBAAuBrF,EACKC,wBAASvO,GADdwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACPI,GADOF,EAAA,GAAAA,EAAA,IAEf6U,OAAerjB,OACGA,IAAlBiT,EACAoQ,EAAevW,EAAgBY,OAAOuF,QACbjT,IAAlBmT,IACPkQ,EAAevW,EAAgBwW,OAAOA,OAAOnQ,IAGjD,IAAIoQ,EAASzW,EAAgBY,OAAOuF,GAChCuQ,EAAS1W,EAAgBwW,OAAOA,OAAOnQ,GAEvChF,EAAUkV,EAAeA,EAAalV,QAAU,GAE9CkB,EAAeR,sBAAY,SAACS,EAAMC,GACpC8T,EAAahU,aAAaC,EAAMC,GAChCb,EAAS,CAACY,OAAMC,QACjB,CAAC8T,EAAc3U,IAEZ6B,EAAW1B,sBAAY,WACzB8E,EAAkBL,EAAoBL,EAAeE,OAAenT,IACrE,CAACsT,EAAoBL,EAAeE,IAEnCe,EAAc,GACdlE,GAAkB7B,EAAQ5E,KAAK,SAAAf,GAAC,OAAIA,EAAE9H,KAAOsP,EAAetP,OAC5DwT,EACI1E,EAAAtK,EAAA4G,cAAC4E,GAAA,EAAD,CACE5D,gBAAiBA,EACjBoG,MAAOpG,EAAgBY,OAAOuF,GAC9BwQ,MAAO3W,EAAgBwW,OAAOA,OAAOnQ,GACrCkB,SAAS,EACTxD,eAAgB,kBAAMN,KACtBzB,OAAQkB,EACR3B,UAAMrO,KAGhB,IAAM4O,EAAqBC,sBAAY,SAACrG,GACpC,IAAIsG,EAASC,aAAiBvG,EAAEJ,MAAO0E,GAOvC,OANAgC,EAAOE,QAAO,GACVF,EAAOG,cACPH,EAAOG,aAAaC,IAAI,GAE5BmU,EAAajV,aAAae,UAAUL,GACpCJ,EAASlG,EAAEJ,QACJ,GACR,CAACsG,EAAU5B,EAAiBuW,IAG5BE,EACQA,EAAOG,YAAcH,EAAO3F,UAC5B4F,GACYA,EAAO1P,YAG9B,IAAIS,EAAQ,CACRkJ,gBAAiB8F,EAAS7G,GAAOiB,iBAAiB4F,GAC9CC,EACA9G,GAAOiB,iBAAiB6F,EAAO9V,OAAO,IAAM,SAEpD,OACI8B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,yBACV+D,EAAAtK,EAAA4G,cAAC2D,GAAAvK,EAAD,CACEuG,UAAU,wBACViE,QAASC,KACTC,SAAUhB,EACViB,YAAY,aACdL,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZ0C,EAAQ7N,IACL,SAACwO,EAAQ3L,GAAT,OACIqM,EAAAtK,EAAA4G,cAAC6X,GAAA,EAAD,CACE5X,IAAK+C,EAAOpO,GACZwS,MAAOD,EACPwQ,MAAOtQ,EACPG,mBAAoBA,EACpBmB,WAAY,WACZpF,aAAcA,EACdU,aAAc5M,EACd2L,OAAQA,QAGrBoF,gBCrFTwI,GAAS,IAAI1J,QAyEJxF,YAfS,SAACC,EAAO1C,GAC5B,IAAIkI,OAA4CjT,IAA5ByN,EAAM2F,IAAID,cACtB1F,EAAM2F,IAAIH,mBAAgBjT,EAClC,OAAOZ,OAAAsa,EAAA,EAAAta,CAAA,CACH+T,cAAe1F,EAAM2F,IAAID,cACzBF,iBACIxF,EAAMC,OAAOkW,cAIE,SAAC5V,GACxB,MAAO,IAIIR,CAvEI,SAAAzI,GAIb,IAHF+H,EAGE/H,EAHF+H,gBACAqG,EAEEpO,EAFFoO,cACAF,EACElO,EADFkO,cACE3E,EAC0BC,mBCzBT,GDwBjBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACKuV,EADLrV,EAAA,GACasV,EADbtV,EAAA,GAGF,KADgB1B,EAAgBY,OAAO3M,OAAS,GAE5C,OACIyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBAIvB,IAAI8X,EAASzW,EAAgBY,OAAOuF,GAChCuQ,EAAS1W,EAAgBwW,OAAOA,OAAO9Z,KACvC,SAAAgH,GAAC,OAAIA,EAAEsD,cAAgBX,IAOvBoB,EAAQ,CACRkJ,gBALQ8F,EAAS7G,GAAOiB,iBAAiB4F,GACrCC,EACJ9G,GAAOiB,iBAAiB6F,EAAO9V,OAAO,IAAM,SAM5C/M,EAAO,GACP4iB,EACA5iB,EAAO4iB,EAAOG,YAAcH,EAAO3F,UAC5B4F,IACP7iB,EAAO,UAAY6iB,EAAO1P,YAAc,IAO5C,OACItE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,sBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZ9K,GAEH6O,EAAAtK,EAAA4G,cAACiY,EAAD,CAAsBD,UAAWA,EAAWD,OAAQA,IACnDN,EAAS/T,EAAAtK,EAAA4G,cAACkY,GAAA,EAAD,CAAiB9Q,MAAOqQ,IAAY,IAEhD/T,EAAAtK,EAAA4G,cAAA,OAAKyI,MAfM,GAea9I,UAAU,0BACbzL,IAAlBmT,EAA8B,GAAK3D,EAAAtK,EAAA4G,cAACmY,GAAA,EAAD,CAAanX,gBAAiBA,IAClE0C,EAAAtK,EAAA4G,cAACoY,GAAD,CAAcpX,gBAAiBA,IAC/B0C,EAAAtK,EAAA4G,cAACqY,GAAA,EAAD,CAAyBrX,gBAAiBA,0dElEhDsX,uJACF,SAAQzS,EAAM/D,GACVtO,KAAKyL,MAAMsZ,eAAe1S,QAEN3R,IAAhB4N,GACAtO,KAAKyL,MAAM+B,gBAAgBwX,oBAAoB1W,yBAIvD,WAAS,IAAAhO,EAAAN,KACDoW,EAAepW,KAAKyL,MAAM+B,gBAAgB4I,aAAapV,IAAI,SAAAkQ,GAAC,OAAIA,EAAE9P,KACtE,OACI8O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,WACZiK,EAAapV,IACV,SAAAI,GAAE,OACE8O,EAAAtK,EAAA4G,cAACyY,GAAD,CACExY,IAAKrL,EACLsL,QAAS,kBAAMpM,EAAKoM,QAAQwY,KAAa9jB,IACzC+jB,UAAW7kB,EAAKmL,MAAMuI,qBAAuB5S,EAC7C6e,SAAU3f,EAAKmL,MAAM2Z,cAAgBF,MAAe5kB,EAAKmL,MAAMuI,qBAAuB5S,EACtFC,KAAMf,EAAKmL,MAAM+B,gBAAgB6X,mBAAmBjkB,eApBvDkkB,IAAMrX,WA6B3B,SAASgX,GAAaxZ,GAClB,IAAIU,EAAY,iBAOhB,OANIV,EAAMwU,WACN9T,GAAa,aAEbV,EAAM0Z,YACNhZ,GAAa,YAGb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASjB,EAAMiB,QAASP,UAAWA,GAAYV,EAAMpK,MAIlE,IAae6M,eAbS,SAACC,EAAO1C,GAC5B,MAAO,CACHuI,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,UAC7EmR,YAAajX,EAAM2F,IAAIsR,cAIJ,SAAA1W,GACvB,MAAO,CACHqW,eAAgB,SAAAK,GAAW,OAAI1W,EAASqW,aAAeK,OAIhDlX,CAA6C4W,4DCnDtDS,GAAS,IAAI7R,IACb8R,GAAeD,GAAOE,SAAS,GAC/BC,GAAY,IAAI1G,IAAI,CAAC,OAAQ,MAAO,OAAQ,QAAS,OAAQ,QAAS,OAAQ,SAAU,MAAO,aAAc,SAAU,MAAO,OAAQ,QAAS,WAkHrJ,IAMe9Q,eANS,SAACC,EAAO1C,GAC5B,MAAO,CACHka,MAAOla,EAAMmI,MAAM+R,QAIa,KAAzBzX,CAtHf,SAAyBzC,GAAO,IAAAuD,EACQC,mBAAS,GADjBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvB4W,EADuB1W,EAAA,GACV2W,EADU3W,EAAA,GAAAuG,EAEQxG,mBAAS,GAFjByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEvBqQ,EAFuBpQ,EAAA,GAEVqQ,EAFUrQ,EAAA,GAAAG,EAGc5G,mBAAS,IAHvB6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGvBmQ,EAHuBlQ,EAAA,GAGPmQ,EAHOnQ,EAAA,GAAAoQ,EAIgBjX,mBAAS,IAJzBkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAIvBE,EAJuBD,EAAA,GAINE,EAJMF,EAAA,GAMtBG,EAAc/W,sBAAY,WAC5B9D,EAAMmI,MAAM2S,MAAM9a,EAAMmI,MAAM+R,QAC/B,CAACla,EAAMmI,QAEJ4S,EAAYjX,sBAAY,SAACrG,GACvBA,EAAEqL,cAAgB9I,EAAMmI,MAAMW,aAC9BkS,WAAW,WACPZ,GAAe,IAAIa,MAAOC,UAAYzd,EAAE0d,SAAW,IACnD,IAAIC,EAAa,EAAI3d,EAAE4d,eAAe5d,EAAE6d,cACpC9R,EAAKnV,OAAAsa,EAAA,EAAAta,CAAA,GAAQsmB,GACjBnR,EAAK,kBAAwBsQ,GAAOyB,SAASxB,GAAcqB,GAC3DR,EAAmBpR,GACnBwR,WAAWQ,EAAwB,IAAb/d,EAAE0d,WACzB1d,EAAEge,OAEV,CAACzb,EAAMmI,MAAOnI,EAAM0b,qBAAsBf,IAEvCa,EAAY1X,sBAAY,SAACrG,QACjBxI,IAANwI,GACAA,EAAEqL,cAAgB9I,EAAMmI,MAAMW,aAC9BwR,GAAe,IAAIW,MAAOC,YAE/B,CAAClb,EAAMmI,QAOJwT,EAAuB,WACzB/N,OAAOE,oBAAoB8N,KAAgBb,GAC3CnN,OAAOE,oBAAoB+N,KAAgBL,IAG/CnX,oBAAU,WAEN,OAXAuJ,OAAOC,iBAAiB+N,KAAgBb,GACxCnN,OAAOC,iBAAiBgO,KAAgBL,GAUjCG,GACR,IAEH,IAAIG,EAAa9b,EAAMmI,MAAM2T,OACzBC,OAAuB9mB,IAAX6mB,OAAuB7mB,EAAY6mB,EAAOE,eAE1D3X,oBAAU,WACN,IAAImF,EAAQ,GACRmJ,OAAQ1d,EAEZ,QAAmBA,IAAd8mB,GAAyC,KAAdA,EAAkB,CAC9C,IAAIE,EAAkBH,QAA6B7mB,IAAnB6mB,EAAOI,QACnCJ,EAAOI,QACPlc,EAAMmI,MAAM0K,UAChBF,EAAQmH,GAAOhH,gBAAgBmJ,GAC/BzS,EAAMkJ,gBAAkBC,EAGxB3S,EAAMka,MACN1Q,EAAK,QAAc,GAEnBA,EAAK,QAAc,EAGvBgR,EAAkBhR,IACnB,CAACxJ,EAAMmI,MAAOnI,EAAMka,QAEvB,IAAIxZ,EAAY,mBAEZyZ,EAAcE,IACd3Z,GAAa,eAGjB,IAAIyH,EAAQnI,EAAMmI,MACdgU,OAAYlnB,EAUhB,GATI6mB,GAAUA,EAAOvd,QACjB4d,EAAYL,EAAOvd,KAAKE,KAAK,SAAA9E,GAAG,OAAIsgB,GAAUmC,IAAIziB,QAE9CwiB,EAAYL,EAAOvd,KAAK,KAG5B4J,GAASA,EAAMkU,qBAAuBC,OACtCH,EAAY,SAEZhU,GAASA,EAAMkU,sBAAwBE,KAAoB,CAC3D,IAAIC,EAAUrU,EAAM8J,WAAWwK,aAC3BD,EAAQ,KACRL,EAAYK,EAAQ,GAAGje,KAAKE,KAAK,SAAA9E,GAAG,OAAIsgB,GAAUmC,IAAIziB,MAI9D,IAAI+iB,EAAiB,GAMrB,OALIvU,GAASA,EAAMwU,iBAAmBC,OAClCF,EAAkBjY,EAAAtK,EAAA4G,cAAC8b,GAAA,EAAD,CAAuB1U,MAAOA,IAChDzH,GAAa,cAIb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM4Z,KACfrR,MAAKnV,OAAAsa,EAAA,EAAAta,CAAA,GAAOkmB,EAAoBI,GAAkBja,UAAWA,GAC7D+D,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CAAsBpb,eAAyBzM,IAAd8mB,GAC/BtX,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAKyZ,MAEVA,GAAaI,EAAY1X,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,cAAcyb,GAAoB,GAC5EO,KClGIja,YANS,SAACC,EAAO1C,GAC5B,MAAO,CACHuI,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,YAI7C,KAAzB/F,CAlBf,SAA0BzC,GACtB,IAAI2C,EAAS3C,EAAM+B,gBAAgBY,OAEnC,OACI8B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACZiC,EAAOpN,IAAI,SAAA4S,GAAK,OAAI1D,EAAAtK,EAAA4G,cAACgc,GAAD,CACErB,qBAAsB1b,EAAMuI,mBAC5BJ,MAAOA,iBCXxC,SAAS6U,GAAWC,EAAMC,GACtB,IAAIC,EAAI7J,MAAM/O,KAAK0Y,GAAM1W,OAAO,SAAAd,GAAC,OAAIyX,EAAKd,IAAI3W,KAC9C,OAAO,IAAI8N,IAAI4J,6cC0BJC,4CAxBX,SAAAA,EAAYpd,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA6oB,IACfvoB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,GAFE7N,+CAKnB,WACI,OAAON,KAAKyL,MAAMmI,MAAMqV,yCAG5B,WACIjpB,KAAKyL,MAAMmI,MAAMsV,gBACjBlpB,KAAKmpB,SAASnpB,KAAKmO,6BAGvB,WAAS,IAAA5L,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAK6mB,mBACpBjd,UAAWnM,KAAKqpB,YAAc,8BAAgC,+BApB5Cpb,udCE1Bqb,4CAEF,SAAAA,EAAY7d,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAspB,IACfhpB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,GAFE7N,mDAKnB,WACIN,KAAKyL,MAAMmI,MAAM2S,MAAMvmB,KAAKyL,MAAMka,OAClC3lB,KAAKmpB,SAASnpB,KAAKmO,6BAGvB,WAAS,IAAA5L,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAKgnB,iBACpBpd,UAAWnM,KAAKyL,MAAMka,MAAQ,0BAA4B,6BAhB1C1X,aA6BfC,eAPS,SAACC,EAAO1C,GAC5B,MAAO,CACHka,MAAOxX,EAAMC,OAAOob,WAAW/d,EAAMmI,MAAMW,eAKX,KAAzBrG,CAA+Bob,8cC5BxCG,4CACF,SAAAA,EAAYhe,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAypB,IACfnpB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,GAHE7N,kDAMnB,WACI,OAAON,KAAKyL,MAAM0Y,MAAMwB,wCAG5B,WACI3lB,KAAKyL,MAAM0Y,MAAMoC,MAAMvmB,KAAKyL,MAAM0Y,MAAMwB,OACxC3lB,KAAKmpB,SAASnpB,KAAKmO,yCAGvB,WACI,IAAIyF,EAAQ5T,KAAKyL,MAAM0Y,MAAM/V,OAAO,GACpCwF,EAAM2S,MAAM3S,EAAM+R,OAClB3lB,KAAKmpB,SAASnpB,KAAKmO,mCAGvB,WAEI,OADYnO,KAAKyL,MAAM0Y,MAAM/V,OAAO,GACvBuX,4BAGjB,WAAS,IAAApjB,EAAAvC,KACL,OAAsC,GAAlCA,KAAKyL,MAAM0Y,MAAM/V,OAAO3M,OAEpByO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BACb+D,EAAAtK,EAAA4G,cAACkd,GAAD,CAAmB9V,MAAO5T,KAAKyL,MAAM0Y,MAAM/V,OAAO,MAEpD8B,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAKonB,sBACpBxd,UAAWnM,KAAKyL,MAAMka,MAAQ,0BAA4B,uBAMlEzV,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAA,OACIE,QAAS,kBAAMnK,EAAKqnB,sBACpBzd,UAAWnM,KAAKyL,MAAMka,MAAQ,gCAAkC,4BAEpEzV,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BACZnM,KAAKyL,MAAM0Y,MAAM/V,OAAOpN,IACzB,SAAA4S,GAAK,OAAI1D,EAAAtK,EAAA4G,cAACkd,GAAD,CAAmB9V,MAAOA,OAEtC1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gCACXnM,KAAKyL,MAAM0Y,MAAM/V,OAAOpN,IACzB,SAAA4S,GAAK,OAAI1D,EAAAtK,EAAA4G,cAACqd,GAAD,CAAiBjW,MAAOA,eArDnB3F,aAuEfC,eAVS,SAACC,EAAO1C,GAC5B,IAAIka,EAAQxX,EAAMC,OAAO0b,WAAWre,EAAM0Y,MAAM3P,aAIhD,OAHiC,GAA7B/I,EAAM0Y,MAAM/V,OAAO3M,SACnBkkB,EAAQxX,EAAMC,OAAOob,WAAW/d,EAAM0Y,MAAM/V,OAAO,GAAGmG,cAEnD,CACHoR,MAAOA,IAIyB,KAAzBzX,CAA+Bub,qdCzE9C,IAAIrM,GAAS,EACPmI,GAAS,IAAI7R,IAGbqW,GAAO,IAAI/K,IAAI,CAAC,SAAU,OAAQ,QAAS,OAAQ,QAAS,OAAQ,SAAU,QA4JrEgL,gDAzJX,SAAAA,EAAYve,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAgqB,IACf1pB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,CACTkN,OAAQ,GAHG/a,6CAOnB,WACI,IAAIinB,EAASvnB,KAAKyL,MAAMmI,MAAM2T,OAC9B,QAAe7mB,IAAX6mB,EAGJ,OAAOA,EAAOE,oDAGlB,SAAsBwC,EAAWC,GAC7B,OAAIlqB,KAAKmO,MAAMkN,SAAW6O,EAAU7O,SAIhCrb,KAAKyL,MAAMkI,gBAAkBsW,EAAUtW,gBAIvC3T,KAAKyL,MAAM0e,UAAYF,EAAUE,SAIjCnqB,KAAKyL,MAAMmI,QAAUqW,EAAUrW,yCAOvC,WAAoB,IAAArR,EAAAvC,KAChBA,KAAKoqB,MAAQC,YAAY,WACrB9nB,EAAK4mB,SAAS,CACV9N,OAAQjU,KAAKwY,IAAI,GAAKrd,EAAKkJ,MAAMmI,MAAM0W,WAAWC,WAAY,QA3C1D,yCA+ChB,WACIC,cAAcxqB,KAAKoqB,iCAGvB,SAAWlhB,GACPA,EAAEqK,4CAGN,SAAYrK,GACRlJ,KAAKyL,MAAMgf,gBAAgBzqB,KAAKyL,MAAMmI,6BAG1C,SAAO1K,EAAGc,QAC2BtJ,IAA7BV,KAAKyL,MAAMif,eACZ1qB,KAAKyL,MAAMif,cAAcvG,QAAUnkB,KAAKyL,MAAM0Y,QAC7CnkB,KAAKyL,MAAMuY,OAAO2G,WAAW3qB,KAAKyL,MAAMif,cAAe1qB,KAAKyL,MAAM0Y,OAClEnkB,KAAKyL,MAAMmf,gDAInB,WACI,QAAgClqB,IAA5BV,KAAKyL,MAAMmI,MAAM2T,OAAsB,CACvC,IAAIniB,EAAMpF,KAAKyL,MAAMmI,MAAM2T,OAAOvd,KAAKgI,OAAO,SAAAd,GAAC,OAAI6Y,GAAKlC,IAAI3W,KAAI,GAChE,GAAI9L,EACA,OAAOA,EAIf,OAAOylB,aAAS7qB,KAAKyL,MAAMmI,MAAM0K,iCAGrC,WAAS,IAAA1b,EAAA5C,KACDiV,EAAQ,CAERoG,OAAQrb,KAAKmO,MAAMkN,QAQnByP,EAAqB,GACrB1M,OAAQ1d,EACZ,QAAwBA,IAAnBV,KAAKwnB,WAA8C,KAAnBxnB,KAAKwnB,UAAkB,CACxD,IAAIE,EAAkB1nB,KAAKyL,MAAMmI,MAAM2T,aAA8C7mB,IAApCV,KAAKyL,MAAMmI,MAAM2T,OAAOI,QACrE3nB,KAAKyL,MAAMmI,MAAM2T,OAAOI,QACxB3nB,KAAKyL,MAAMmI,MAAM0K,UACrBF,EAAQmH,GAAOhH,gBAAgBmJ,GAC/BoD,EAAmB3M,gBAAkBC,EAGzC,IAAI2M,OAC6BrqB,IAA7BV,KAAKyL,MAAMkI,eACX3T,KAAKyL,MAAMkI,gBAAkB3T,KAAKyL,MAAMmI,MAAMW,YAE9CwW,GAAc/qB,KAAKyL,MAAMuf,kBACzBF,EAAmBG,QAAU,IAGjC,IAAIC,EACAlrB,KAAKyL,MAAMkI,gBAAkB3T,KAAKyL,MAAMmI,MAAMW,YAE9C4W,EAAwBlW,EAC5BkW,EAAsB,oBA4CnB,OADC,KA3CgD/N,IAAQ,GA2ClD,IACM,aA1ChB,IAAIgO,EAAY,GAEZhN,IACAgN,EAAS,gBAAsB7F,GAAOyB,SAAS5I,EAAO,MAG1D,IAAI/c,EAAOrB,KAAKqrB,gBAOhB,OAN4B,IAAxBrrB,KAAKyL,MAAM6f,SACXjqB,EAAOA,EAAKgS,MAAM,EAAG,GACdrT,KAAKyL,MAAM6f,SAAW,IAC7BjqB,EAAOA,EAAKgS,MAAM,EAAG,IAIrBnD,EAAAtK,EAAA4G,cAAA,OACEuG,YAAa,SAAC7J,GAAD,OAAOtG,EAAKmQ,YAAY7J,IACrCoK,WAAY,SAACpK,GAAD,OAAOtG,EAAK0Q,WAAWpK,IACnC8J,OAAQ,SAAC9J,GAAKtG,EAAKoQ,OAAO9J,IAC1BsK,WAAS,EACTyB,MAAO6V,EACR3e,UAAW+e,EAAkB,0CAA4CH,EAAa,2BAA6B,oCAClHre,QAAS,kBAAM9J,EAAK6I,MAAM8f,aAAa3oB,EAAK6I,MAAMmI,SAEpD1D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOkW,EACPhf,UAAW4e,EAAa,4CAA8C,uCAClDrqB,IAAnBV,KAAKwnB,UACJtX,EAAAtK,EAAA4G,cAAA,OACMgf,QAAS,kBAAM5oB,EAAKumB,SAAS,CAAC3B,eAAW9mB,KAC7CqN,IAAK/N,KAAKwnB,UACVrb,UAAW4e,EAAa,gDAAkD,uCACxE,SAEYrqB,IAAnBV,KAAKwnB,UACFtX,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOmW,EAAWjf,UAAU,mBAAmB9K,GACtD,WAhJmB4M,udCiDlBwd,4CAnDX,SAAAA,EAAYhgB,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAyrB,GAAA1C,EAAAC,KAAAhpB,KACVyL,mDAGV,SAAamI,GACL5T,KAAKyL,MAAMkI,gBAAkBC,EAAMW,aACpCvU,KAAKyL,MAAM0Y,MAAM/V,OAAO3M,OAAS,EAChCzB,KAAKyL,MAAMigB,mBAAchrB,GAEzBV,KAAKyL,MAAMigB,cAAc9X,yBAIjC,WAAS,IAAAtT,EAAAN,KACDmkB,EAAQnkB,KAAKyL,MAAM0Y,MAInBhd,EAAOgd,EAAM/V,OAAO3M,OAGpBkqB,EAAYC,KAAkBzkB,EAElC,OACI+I,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAACqf,GAAD,CAAiBF,UAAWA,EAAWxH,MAAOA,IAC9CjU,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,mBACTgY,EAAM/V,OAAOpN,IACZ,SAAA4S,GAAK,OACD1D,EAAAtK,EAAA4G,cAACsf,GAAD,CACErf,IAAK,yBAA2BmH,EAAMW,YACtCkW,gBAAiBnqB,EAAKmL,MAAMgf,gBAC5BC,cAAepqB,EAAKmL,MAAMif,cAC1BE,gBAAiBtqB,EAAKmL,MAAMmf,gBAC5BT,QAAS7pB,EAAKmL,MAAM0e,QACpBnG,OAAQ1jB,EAAKmL,MAAMuY,OACnBuH,aAAc,SAAC3X,GAAD,OAAWtT,EAAKirB,aAAa3X,IAC3C0X,SAAUnH,EAAM/V,OAAO3M,OACvBupB,gBAAiB1qB,EAAKmL,MAAMuf,gBAC5BrX,cAAerT,EAAKmL,MAAMkI,cAC1BC,MAAOA,EACP+X,UAAWA,EACXxH,MAAOA,eA7CFlW,+fCKvB8d,4CAEF,SAAAA,EAAYtgB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA+rB,IACfzrB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,CACT6V,OAAQvY,EAAMuY,QAElB1jB,EAAK6N,MAAQ,CAAC6d,OAAQ1rB,EAAK2rB,YAAaC,QAASzgB,EAAMygB,SALxC5rB,iDAQnB,WACI,OAAON,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,8CAGxD,WACI,OAAO3T,KAAKyL,MAAM0Y,MAAM/V,OAAOtK,QAAQ9D,KAAK2T,gBAAkB,GAC1D3T,KAAKyL,MAAM0Y,QAAUnkB,KAAKyL,MAAMoI,qDAOxC,WACI,OAAsC,GAAlC7T,KAAKyL,MAAM0Y,MAAM/V,OAAO3M,OACjBzB,KAAKyL,MAAM0Y,MAAM/V,OAAO,GACxBpO,KAAKyL,MAAM0Y,MAAM/V,OAAOtK,QAAQ9D,KAAK2T,gBAAkB,EACvD3T,KAAK2T,mBAEZ,uCAIR,SAAsBsW,EAAWC,GAC7B,OAAIlqB,KAAKmO,MAAM+d,SAAWjC,EAAUiC,SAChClsB,KAAKmO,MAAM+d,QAAUjC,EAAUiC,SACxB,GAGPlsB,KAAKyL,MAAMoH,aAAeoX,EAAUpX,YACpC7S,KAAKyL,MAAM0Y,QAAU8F,EAAU9F,OAC/BnkB,KAAKyL,MAAM0e,UAAYF,EAAUE,SACjCnqB,KAAKyL,MAAMif,gBAAkBT,EAAUS,eACvC1qB,KAAKyL,MAAMkI,gBAAkBsW,EAAUtW,eACvC3T,KAAKmO,MAAM0F,gBAAkBoW,EAAUpW,eACvCoW,EAAU+B,QAAUhsB,KAAKisB,qCAMjC,WACI,IAAItY,EAAgB3T,KAAKmsB,0BACzB,OAAsC,GAAlCnsB,KAAKyL,MAAM0Y,MAAM/V,OAAO3M,OACjBzB,KAAKyL,MAAM0Y,MAAM/V,OAAO,GAAG6d,YAAc,QACvBvrB,IAAlBiT,EACA3T,KAAKyL,MAAM0Y,MAAM6H,OAEjBrY,EAAcsY,YAAc,gCAI3C,SAAcrY,QACIlT,IAAVkT,GACA5T,KAAKyL,MAAM2gB,OAAOxY,MAAQA,EAAMW,YAChCvU,KAAKyL,MAAM+B,gBAAgB6e,YAAYzY,EAAMW,cAE7CvU,KAAKyL,MAAM6gB,sBAAiB5rB,GAEhCV,KAAKyL,MAAM8gB,iBAAiBvsB,KAAKyL,MAAM0Y,qCAG3C,SAAe6H,GACX,IAAIrY,EAAgB3T,KAAKmsB,0BACa,GAAlCnsB,KAAKyL,MAAM0Y,MAAM/V,OAAO3M,aACNf,IAAlBiT,GAEA3T,KAAK0rB,mBAAchrB,GACnBV,KAAKyL,MAAM8gB,iBAAiBvsB,KAAKyL,MAAM0Y,OACvCnkB,KAAKyL,MAAM0Y,MAAMqI,UAAUR,KAE3BrY,EAAc6Y,UAAUR,GACxBhsB,KAAK0rB,cAAc/X,IAEvB3T,KAAKmpB,SAAS,CAAC6C,OAAQA,2BAG3B,WACI,IAAIhiB,EAAO,GACP2J,EAAgB3T,KAAKmsB,0BAgBzB,OAZIniB,OAHkBtJ,IAAlBiT,EAGO,QACyBjT,IAAzBiT,EAAc4T,ONnG1B,SAAoBvd,GACvB,IAAIyiB,EAAe,GACnB,IAAK,IAAI5oB,KAAKmG,EAAM,CAChB,IAAI5E,EAAM4E,EAAKnG,GACf,IAAK,IAAI6oB,KAAK1iB,EAAM,CAChB,IAAI2iB,EAAW3iB,EAAK0iB,GACpB,GAAIC,IAAavnB,GAKDqjB,GAFD,IAAIzJ,IAAI5Z,EAAIjD,MAAM,MACb,IAAI6c,IAAI2N,EAASxqB,MAAM,OAE7BgF,KAAO,EAAG,CACpBslB,EAAajrB,KAAK4D,GAClB,QAMZ,IAAK,IAAIvB,KADTmG,EAAO,IAAIgV,IAAIhV,GACDyiB,EACVziB,EAAK4iB,OAAOH,EAAa5oB,IAG7B,OAAOkb,MAAM/O,KAAKhG,GM6EH6iB,CAAWlZ,EAAc4T,OAAOvd,MAGhC,CAAC2J,EAAc2K,YAGjB7c,OAAS,GACduI,EAAKjG,OAAO,EAAG,GAEZiG,wBAGX,WAAS,IAAAzH,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEL,UAAWnM,KAAKgrB,kBAAoB,6BAA+B,qBACnE9a,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BACb+D,EAAAtK,EAAA4G,cAACsgB,GAAAlnB,EAAD,CACEmnB,OAAO,SACPjkB,MAAO9I,KAAKyL,MAAMugB,OAClBgB,OAAQ,SAAC9jB,GAAD,OAAO3G,EAAK0qB,eAAe/jB,EAAEoJ,OAAOxJ,QAC5CgX,KAAM,GACND,IAAK,EACLD,KAAM,GACNvH,YAAY,WACZ6U,UAAU,KAGVltB,KAAKyL,MAAM0F,aAAagc,gBAEtB,GADFjd,EAAAtK,EAAA4G,cAAC4gB,GAAA,EAAD,CAAsB/d,QAASrP,KAAKyL,MAAM0Y,QAE9CjU,EAAAtK,EAAA4G,cAAC6gB,GAAD,CACE5C,gBAAiBzqB,KAAKyL,MAAMgf,gBAC5BC,cAAe1qB,KAAKyL,MAAMif,cAC1BP,QAASnqB,KAAKyL,MAAM0e,QACpBnG,OAAQhkB,KAAKyL,MAAMuY,OACnB4G,gBAAiB5qB,KAAKyL,MAAMmf,gBAC5BI,gBAAiBhrB,KAAKgrB,kBACtBrX,cAAe3T,KAAKyL,MAAMkI,cAC1B+X,cAAe,SAAC9X,GAAD,OAAWrR,EAAKmpB,cAAc9X,IAC7CuQ,MAAOnkB,KAAKyL,MAAM0Y,QACpBjU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZnM,KAAKstB,UAAUtsB,IAAI,SAACoE,GAAD,OAAS8K,EAAAtK,EAAA4G,cAAC+gB,GAAA,EAAD,CAAOpmB,KAAK,KAAKiX,MAAM,QAAQhZ,cA1IxD6I,aA+KLC,eAvBS,SAACC,EAAO1C,GAC5B,IAAI+hB,OAAuB9sB,EACvBiT,EAAgBlI,EAAM+B,gBAAgBY,OAAOD,EAAM2F,IAAIH,eAC1B,GAA7BlI,EAAM0Y,MAAM/V,OAAO3M,OACnB+rB,EAAuB/hB,EAAM0Y,MAAM/V,OAAO,GAAGmG,YACtC9I,EAAM0Y,MAAM/V,OAAOtK,QAAQ6P,IAAkB,IACpD6Z,EAAuBrf,EAAM2F,IAAIH,eAWrC,MAAO,CACHqY,OAT6B,GAA7BvgB,EAAM0Y,MAAM/V,OAAO3M,OACVgK,EAAM0Y,MAAM/V,OAAO,GAAG6d,iBACCvrB,IAAzB8sB,EACErf,EAAMC,OAAOqf,aAAahiB,EAAM0Y,MAAM3P,aAEtCrG,EAAMC,OAAOsf,aAAaF,GAKnC3Z,cAAe1F,EAAM2F,IAAID,cACzBF,cAAexF,EAAM2F,IAAIH,gBA3BN,SAAAjF,GACvB,MAAO,CACH4d,iBAAkB,SAAA1Y,GAAK,OAAIlF,EAAS4d,aAAiB1Y,KACrD2Y,iBAAkB,SAAApI,GAAK,OAAIzV,EAAS6d,aAAiBpI,OA2B9CjW,CAA6C6d,8cC3J7C4B,0JA3BX,SAAWzkB,GACPA,EAAEqK,uCAGN,SAAOrK,QAC8BxI,IAA7BV,KAAKyL,MAAMif,eACZ1qB,KAAKyL,MAAMif,cAAcvG,QAAUnkB,KAAKyL,MAAM0Y,QAC7CnkB,KAAKyL,MAAMuY,OAAO4J,SAAS5tB,KAAKyL,MAAMif,eACtC1qB,KAAKyL,MAAMmf,yCAInB,WAAS,IAAAtqB,EAAAN,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACb+D,EAAAtK,EAAA4G,cAAA,OACE8G,WAAY,SAACpK,GAAD,OAAO5I,EAAKgT,WAAWpK,IACnC8J,OAAQ,SAAC9J,GAAK5I,EAAK0S,OAAO9J,IAC1BsK,WAAS,EACTrH,UAAU,iBAJZ,qBAhBS8B,mdCEOA,sdCOxB4f,4CACF,SAAAA,EAAYpiB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA6tB,IACfvtB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CAET2f,aAAa,EACbC,aAAa,EACbC,aAAa,GAPF1tB,iDAWnB,qCAGA,WACIN,KAAKyL,MAAMwiB,sBAAsB,qCAGrC,SAAkB5b,GACd,IAAIxB,EAAQ7Q,KAAKyL,MAAM+B,gBAAgBqD,MAAMA,MAC7C,OAAIwB,IAAS6b,KACFluB,KAAKyL,MAAMkI,cAElBtB,GAAQ8b,OACwC,GAA5Ctd,EAAM/M,QAAQ9D,KAAKyL,MAAMoI,eACtB7T,KAAKyL,MAAMoI,cACVxB,GAAQ+b,MACRvd,EAAM/M,QAAQ9D,KAAKyL,MAAMoI,gBAAkB,EAC5C7T,KAAKyL,MAAMoI,mBAFd,mCAOZ,WACI,YAAiEnT,IAA7DV,KAAKyL,MAAM+B,gBAAgB6gB,eAAeruB,KAAKyL,MAAMrK,IAC9C,GAEJpB,KAAKyL,MAAM+B,gBAAgB6gB,eAAeruB,KAAKyL,MAAMrK,IAAIitB,uCAGpE,SAASC,GACL,GAAItuB,KAAKmO,MAAM2f,iBAC0BptB,IAAjCV,KAAKmO,MAAMogB,oBACXvuB,KAAKmO,MAAMogB,kBAAkB3O,IAAM5f,KAAKmO,MAAMogB,kBAAkBC,kBAAkBF,GAClFtuB,KAAKmO,MAAMogB,kBAAkB3e,IAAI5P,KAAKmO,MAAMogB,kBAAkB3O,KAC9D5f,KAAKyL,MAAMgjB,6BAA6BzuB,KAAKyL,MAAMrK,GAAIktB,SAExD,GAAItuB,KAAKmO,MAAM4f,iBACmBrtB,IAAjCV,KAAKmO,MAAMogB,oBACXvuB,KAAKmO,MAAMogB,kBAAkB1O,IAAO7f,KAAKmO,MAAMogB,kBAAkBC,kBAAkBF,GACnFtuB,KAAKmO,MAAMogB,kBAAkB3e,IAAI5P,KAAKmO,MAAMogB,kBAAkB1O,KAC9D7f,KAAKyL,MAAMgjB,6BAA6BzuB,KAAKyL,MAAMrK,GAAIktB,QAExD,CAEH,IAAInb,EAAanT,KAAK0uB,oBAAoB1tB,IAAI,SAAA2tB,GAAa,OAAIA,EAAclb,YAC7EN,EAAW5P,QAAQ,SAAAic,GAAK,OAAIA,EAAMoP,cAAcN,KAChDtuB,KAAKyL,MAAMgjB,6BAA6BzuB,KAAKyL,MAAMrK,GAAIktB,GACvDtuB,KAAKyL,MAAMwiB,sBAAsB9a,yBAIzC,WACI,QAAqCzS,IAAjCV,KAAKyL,MAAM8iB,kBAAiC,CAE5C,IAAI/Z,OAAmD9T,IAArCV,KAAK6uB,kBAAkBV,MACrCnuB,KAAK6uB,kBAAkBV,MAAU3Z,iBAAc9T,EAC/C6T,OAAmD7T,IAArCV,KAAK6uB,kBAAkBX,MACrCluB,KAAK6uB,kBAAkBX,MAAU3Z,iBAAe7T,EAChDouB,OAAiDpuB,IAApCV,KAAK6uB,kBAAkBT,MACpCpuB,KAAK6uB,kBAAkBT,MAASU,gBAAapuB,EAC7C+P,EAAezQ,KAAKyL,MAAMiF,eAC9B1Q,KAAKyL,MAAM+B,gBAAgB6gB,eAAeruB,KAAKyL,MAAMrK,IAAI2tB,iBACrDxa,EACAC,EACAsa,EACAre,EACAzQ,KAAKyL,MAAM8iB,mBACfvuB,KAAKmpB,SAASnpB,KAAKmO,6CAI3B,SAAsBwgB,GAClB3uB,KAAKyL,MAAM+B,gBAAgB6gB,eAAeruB,KAAKyL,MAAMrK,IAAI4tB,oBACrDL,uCAGR,SAAqBA,GACjB,GAAI3uB,KAAKmO,MAAMogB,oBAAsBI,EAAclb,UAC/CzT,KAAKmpB,SAAS,CAACoF,uBAAmB7tB,QAC/B,CACH,QAAkCA,IAA9BiuB,EAAcpa,YAA2B,CACzC,IAAIX,EAAO5T,KAAKyL,MAAM+B,gBAAgBY,OAAOugB,EAAcpa,aAC3DvU,KAAKyL,MAAM6gB,iBAAiB1Y,EAAMW,aAClCvU,KAAKyL,MAAM8gB,sBAAiB7rB,QACzB,QAAkCA,IAA9BiuB,EAAcna,YACrBxU,KAAKyL,MAAM6gB,sBAAiB5rB,GAC5BV,KAAKyL,MAAM8gB,iBAAiBvsB,KAAKyL,MAAM+B,gBAAgBwW,OAAOA,OAAO2K,EAAcna,mBAChF,QAAiC9T,IAA7BiuB,EAAcG,WAA0B,CAC/C,IAAI/f,EAAO/O,KAAKyL,MAAM+B,gBAAgBqD,MAAMA,MAAM8d,EAAcG,YAChE9uB,KAAKyL,MAAM6gB,sBAAiB5rB,GAC5BV,KAAKyL,MAAM8gB,iBAAiBxd,GAEhC/O,KAAKmpB,SAAS,CAACoF,kBAAmBI,EAAclb,uCAIxD,WACIzT,KAAKmpB,SAAS,CAAC2E,aAAc9tB,KAAKmO,MAAM2f,YAAaC,aAAa,8BAGtE,WACI/tB,KAAKmpB,SAAS,CAAC4E,aAAc/tB,KAAKmO,MAAM4f,YAAaD,aAAa,gCAGtE,SAAallB,GACT,OAAIA,GAAK,EACEA,EAEAxB,KAAKC,MAAMuB,yBAI1B,WAAS,IAAArG,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,kBAAMhY,EAAKgY,eACxBzN,aAAc,kBAAMvK,EAAK0X,aACzBA,UAAW,kBAAM1X,EAAK0X,aACtB9N,UAAU,oCACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAK0sB,cACpB9iB,UAAWnM,KAAKmO,MAAM2f,YAAc,qBAAuB,kBACzBptB,IAAjCV,KAAKmO,MAAMogB,kBAAkCvuB,KAAKkvB,aAAalvB,KAAKmO,MAAMogB,kBAAkB3O,KAAO,OAExG1P,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAACsgB,GAAAlnB,EAAD,CACEmnB,OAAO,SACPjkB,MAAO9I,KAAKyL,MAAM3C,MAClBkkB,OAAQ,SAAC9jB,GAAD,OAAO3G,EAAK+N,SAASpH,EAAEoJ,OAAOxJ,QACtCgX,KAAM,IACND,IAAK,EACLD,IAAK,EACLvH,YAAY,aACZ6U,UAAU,KAEdhd,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAK4sB,cACpBhjB,UAAWnM,KAAKmO,MAAM4f,YAAc,qBAAuB,kBACzBrtB,IAAjCV,KAAKmO,MAAMogB,kBAAkCvuB,KAAKkvB,aAAalvB,KAAKmO,MAAMogB,kBAAkB1O,KAAO,QAGtG3P,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAf,cACA+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAK6sB,SACpBjjB,eAAmCzL,IAAxBV,KAAKyL,MAAM4jB,SAAyB,+BAAiC,wBAFlF,KAKFnf,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACZnM,KAAK0uB,oBAAoB1tB,IAAI,SAAA2tB,GAAa,OACzCze,EAAAtK,EAAA4G,cAAC8iB,GAAD,CACEre,SAAU,kBAAM1O,EAAKgtB,sBAAsBZ,IAC3CjiB,QAAS,kBAAMnK,EAAKitB,qBAAqBb,IACzC9b,WAAYtQ,EAAK4L,MAAMogB,oBAAsBI,EAAclb,UAC3DA,UAAWkb,EAAclb,wBAvKVxF,aA+K7BwhB,sJACF,WACI,OACIvf,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWnM,KAAKyL,MAAMoH,WAAa,0BAA4B,iBAAkBnG,QAAS1M,KAAKyL,MAAMiB,cACnEhM,IAApCV,KAAKyL,MAAMgI,UAAUic,WAClBxf,EAAAtK,EAAA4G,cAAA,WACGxM,KAAKyL,MAAMgI,UAAUic,WADxB,MACuC1vB,KAAKyL,MAAMgI,UAAUpS,KACtD6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBO,QAAS1M,KAAKyL,MAAMwF,UAAnD,MAGNf,EAAAtK,EAAA4G,cAAA,WACIxM,KAAKyL,MAAMgI,UAAUpS,KAClB6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBO,QAAS1M,KAAKyL,MAAMwF,UAAnD,cAZMhD,aAuChBC,YAXS,SAACC,EAAO1C,GAC5B,MAAO,CACH8iB,kBAAmBpgB,EAAM2F,IAAIya,kBAC7Bc,SAAUlhB,EAAM2F,IAAI6b,0BACpBjf,eAAgBvC,EAAMU,QAAQ6B,eAC9BiD,cAAexF,EAAM2F,IAAIH,cACzBE,cAAe1F,EAAM2F,IAAID,cACzB/K,MAAOqF,EAAM2F,IAAI8b,2BAA2BnkB,EAAMrK,KAAO,IAhBtC,SAAAsN,GACvB,MAAO,CACH4d,iBAAkB,SAAA1Y,GAAK,OAAIlF,EAAS4d,aAAiB1Y,KACrD2Y,iBAAkB,SAAApI,GAAK,OAAIzV,EAAS6d,aAAiBpI,KACrD8J,sBAAuB,SAAAnP,GAAM,OAAIpQ,EAASuf,aAAsBnP,KAChE2P,6BAA8B,SAACrtB,EAAI0H,GAAL,OAAe4F,EAAS+f,aAA6BrtB,EAAI0H,OAehFoF,CAA6C2f,8cC9NtDgC,4CACF,SAAAA,EAAYpkB,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA6vB,GAAA9G,EAAAC,KAAAhpB,KACVyL,6CAGV,WACI,OACIyE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gCAPE8B,aAkBdC,YALS,SAACC,EAAO1C,GAC5B,MAAO,IAI6B,KAAzByC,CAA+B2hB,qdCXxCC,4CAEF,SAAAA,EAAYrkB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA8vB,IACfxvB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACToW,OAAQwL,MAGZzvB,EAAK0vB,cAAgB1vB,EAAK0vB,cAAcC,KAAnBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IAPNA,mDAUnB,SAAcikB,GACVvkB,KAAKyL,MAAMsZ,eAAeR,mCAG9B,WACIvkB,KAAKyL,MAAMM,aAAa/L,KAAKyL,MAAMC,qCAGvC,WACI1L,KAAKyL,MAAMO,UAAUC,4CAGzB,WACoBjM,KAAKyL,MAAMW,UAC3B,OACI8D,EAAAtK,EAAA4G,cAAA,mBA3ByByB,aA6GtBC,IA/BkBD,YA+BlBC,YATS,SAACC,EAAO1C,GAC5B,MAAO,CACH2Z,YAAajX,EAAM2F,IAAIsR,YACvB1Z,SAAUyC,EAAMM,UAAU/C,SAC1BsC,cAAeG,EAAMC,OAAOI,gBAAgB/C,EAAM+B,gBAAgBe,kBAX/C,SAAAG,GACvB,MAAO,CACH3C,YAAa,SAAApD,GAAC,OAAI+F,EAAS3C,aAAYpD,KACvCoc,eAAgB,SAAApc,GAAC,OAAI+F,EAASqW,aAAepc,OAatCuF,CAA6C4hB,ydC5GtDK,4CACF,SAAAA,EAAY1kB,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAmwB,GAAApH,EAAAC,KAAAhpB,KACVyL,oDAGV,SAAc8Y,GACVvkB,KAAKyL,MAAM2kB,qBAAqB7L,yBAGpC,WAAS,IAAAjkB,EAAAN,KACL,OAAIA,KAAKyL,MAAM8Y,QAAU8L,KAEjBngB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAK0vB,cAAcM,OAClCnkB,UAAU,kBAFZ,SAUN+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAK0vB,cAAcK,OAClClkB,UAAU,kBAFZ,QAKA+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAK0vB,cAAcO,OAClCpkB,UAAWnM,KAAKyL,MAAM8Y,QAAUgM,KAC9B,0BAA4B,kBAHhC,SAMArgB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAK0vB,cAAcM,OAClCnkB,UAAWnM,KAAKyL,MAAM8Y,QAAU+L,KAC9B,0BAA4B,kBAHhC,mBAnCmBriB,aA0DlBC,eAZS,SAACC,EAAO1C,GAC5B,MAAO,CACH8Y,OAAQpW,EAAM2F,IAAI0c,oBAIC,SAAA9hB,GACvB,MAAO,CACH0hB,qBAAsB,SAAA7L,GAAM,OAAI7V,EAAS0hB,aAAqB7L,OAIvDrW,CAA6CiiB,8cC9DtDM,6JACF,WACI,QAAyB/vB,IAArBV,KAAKyL,MAAMmI,MACX,MAAO,GAGX,IAAI8c,EAAY1wB,KAAKyL,MAAMmI,MAAM8c,UACjC,MAAO,CAAC,CACJA,EAAUC,kBACVD,EAAUE,mBACVF,EAAUG,eACV,CAACH,EAAUI,kBACXJ,EAAUK,gBACVL,EAAUM,kBACV,CAACN,EAAUO,qBACVP,EAAUQ,oBACXR,EAAUS,sBACVT,EAAUU,8CAIlB,WAAS,IAAA9wB,EAAAN,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACZnM,KAAKoT,gBACDpS,IAAI,SAAAmS,GAAU,OACVjD,EAAAtK,EAAA4G,cAAC6kB,GAAD,CACE7jB,gBAAiBlN,EAAKmL,MAAM+B,gBAC5B2F,WAAYA,cA5BAlF,aAkC/BqjB,sJACF,WAAS,IAAA/uB,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZnM,KAAKyL,MAAM0H,WACPnS,IAAI,SAAAmS,GAAU,OACVjD,EAAAtK,EAAA4G,cAAC+kB,GAAD,CACE/jB,gBAAiBjL,EAAKkJ,MAAM+B,gBAC5BiG,UAAWN,cARRlF,aActBujB,wJACF,SAAS1oB,GAAO,IAAAlG,EAAA5C,KACZA,KAAKyL,MAAMgmB,qBAAqBzxB,KAAKyL,MAAMgI,WAC3CzT,KAAKyL,MAAMimB,6BAA6B1xB,KAAKyL,MAAMgI,WACnDgT,WAAW,WACP7jB,EAAK6I,MAAMimB,kCAA6BhxB,IACzC,2BAGP,WAAS,IAAAixB,EAAA3xB,KACD8f,EAAQ9f,KAAKyL,MAAMgI,UAAUme,YAAc5xB,KAAKyL,MAAMgI,UAAUoe,aAAgB,GAAK,IAAQ,EAC7Fhf,EAAa7S,KAAKyL,MAAMoH,WAC5B,OACI3C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAW0G,EAAa,qBAAsB,aAC/C3C,EAAAtK,EAAA4G,cAACmT,EAAA,EAAD,CACEte,KAAMrB,KAAKyL,MAAMgI,UAAUpS,KAC3BoS,UAAWzT,KAAKyL,MAAMgI,UACtBqe,aAAa,EACbC,YAAY,EACZvkB,gBAAiBxN,KAAKyL,MAAM+B,gBAC5B1E,MAAO9I,KAAKyL,MAAM3C,MAClBkpB,mBAAoB,SAAC9oB,GAAD,OAAOyoB,EAAKrhB,YAChCwP,KAAMA,EACND,IAAK7f,KAAKyL,MAAMgI,UAAUme,YAC1BhS,IAAK5f,KAAKyL,MAAMgI,UAAUoe,YAC1BxZ,YAAY,aACZ6U,UAAU,YA1BKjf,aAgD3BsjB,GAAYrjB,YAfM,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAMgI,UAAUrS,GACzB,MAAO,CACH0H,MAAOqF,EAAMU,QAAQojB,iBAAiB7wB,GACtCyR,WAAY1E,EAAM2F,IAAIya,oBAAsB9iB,EAAMgI,YAI/B,SAAA/E,GACvB,MAAO,CACH+iB,qBAAsB,SAAAhe,GAAS,OAAI/E,EAAS+iB,aAAqBhe,KACjEie,6BAA8B,SAAAje,GAAS,OAAI/E,EAASgjB,aAA6Bje,OAIvEvF,CAA6CsjB,IAEhDtjB,eAAQ,KAAM,KAAdA,CAAoBuiB,8cC9F7ByB,4CACF,SAAAA,EAAYzmB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAkyB,IACf5xB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,GAFE7N,qDAKnB,WAGI,YAFyCI,IAA7BV,KAAKyL,MAAMoI,cAA8B7T,KAAKyL,MAAMoI,cAC5D7T,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,gDAIrD,SAAkBtB,GACd,IAAIxB,EAAQ7Q,KAAKyL,MAAM+B,gBAAgBqD,MAAMA,MAC7C,OAAIwB,IAAS6b,KACgC,kBAA9BluB,KAAKyL,MAAMkI,cACX3T,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,eAEjD3T,KAAKyL,MAAMkI,cAElBtB,GAAQ8b,OACwC,GAA5Ctd,EAAM/M,QAAQ9D,KAAKyL,MAAMoI,eACtB7T,KAAKyL,MAAMoI,cACXxB,GAAQ+b,MACPvd,EAAM/M,QAAQ9D,KAAKyL,MAAMoI,gBAAkB,EAC5C7T,KAAKyL,MAAMoI,mBAFf,iCAOX,WACI,IAAID,EAAQ5T,KAAKmyB,uBACHzxB,IAAVkT,GACAA,EAAMwe,sCAId,WAAS,IAAA7vB,EAAAvC,KACL,OAAIA,KAAKyL,MAAM+kB,oBAAsBD,KAEjCrgB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAC6lB,GAAD,MACAniB,EAAAtK,EAAA4G,cAAC8lB,GAAD,CACE9kB,gBAAiBxN,KAAKyL,MAAM+B,gBAC5BoG,MAAO5T,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,kBAGjD3T,KAAKyL,MAAM8mB,KAEdriB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAC6lB,GAAD,OAMNniB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAC6lB,GAAD,WACoC3xB,IAAnCV,KAAKmyB,gBAAgBjE,YAA6DxtB,IAAlCV,KAAKmyB,gBAAgB/D,OAClEpuB,KAAKmyB,gBAAgBhE,MACrBje,EAAAtK,EAAA4G,cAACgmB,GAAA,EAAiBC,YAAlB,CACEC,MAAO1yB,KAAKyL,MAAM+B,gBAAgBklB,MAClCllB,gBAAiBxN,KAAKyL,MAAM+B,gBAC5BwkB,mBAAoB,SAACve,GAAD,OAAelR,EAAKkJ,MAAMumB,mBAAmBve,IACjEkf,gBAAiB,kBAAMpwB,EAAKowB,mBAC5BC,QAAS,EACTC,gBAAiB,SAAChvB,GAAD,OAAO5B,QAAQC,IAAI,qBAAuB2B,IAC3DgN,MAAO7Q,KAAKyL,MAAM+B,gBAAgBqD,MAClCzC,OAAQpO,KAAKyL,MAAM+B,gBAAgBY,OACnCwF,MAAO5T,KAAK6uB,kBAAkBX,MAC9Bnf,KAAM/O,KAAK6uB,kBAAkBT,MAC7BjK,MAAOnkB,KAAK6uB,kBAAkBV,QAAe,WAvEpClgB,aAsFdC,YATS,SAACC,EAAO1C,GAC5B,MAAO,CACHoI,cAAe1F,EAAM2F,IAAID,cACzBF,cAAexF,EAAM2F,IAAIH,cACzB6c,kBAAmBriB,EAAM2F,IAAI0c,kBAC7Bxc,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,YAI7C,KAAzB/F,CAA+BgkB,odC7FxCY,4CACF,SAAAA,EAAYrnB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA8yB,IACfxyB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,GAHE7N,uDAMnB,WACIN,KAAKyL,MAAMsD,KAAKwX,MAAMvmB,KAAKyL,MAAMsD,KAAK4W,OACtC3lB,KAAKyL,MAAMsnB,aAAa/yB,KAAKyL,MAAMsD,KAAK+f,WAAY9uB,KAAKyL,MAAMsD,KAAK4W,OACpE3lB,KAAKmpB,SAASnpB,KAAKmO,6BAGvB,WAAS,IAAA5L,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMnK,EAAKywB,qBACpB7mB,UAAWnM,KAAKyL,MAAMka,MAAQ,0BAA4B,8BAlB7C1X,aAsCdC,eAbS,SAACC,EAAO1C,GAC5B,MAAO,CACHka,MAAOxX,EAAMC,OAAO6kB,UAAUxnB,EAAMsD,KAAK+f,cAKtB,SAAApgB,GACvB,MAAO,CACHqkB,aAAc,SAACjE,EAAYnJ,GAAb,OAAuBjX,EAASqkB,aAAajE,EAAYnJ,OAIhEzX,CAA6C4kB,8cCvB7CI,4CAdX,SAAAA,EAAYznB,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAkzB,GAAAnK,EAAAC,KAAAhpB,KACVyL,6CAGV,WACI,OACIyE,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAC2mB,GAAD,CAAgBxH,UAAWC,KAAiB7c,KAAM/O,KAAKyL,MAAMsD,OAC7DmB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BATD8B,udCItBmlB,4CACF,SAAAA,EAAY3nB,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAozB,GAAArK,EAAAC,KAAAhpB,KACVyL,iDAGV,WACI,OAAOzL,KAAKyL,MAAMsD,MAAQ/O,KAAKyL,MAAMoI,4CAGzC,SAAemY,GACXhsB,KAAKyL,MAAMsD,KAAKyd,UAAUR,GAC1BhsB,KAAKyL,MAAM8gB,iBAAiBvsB,KAAKyL,MAAMsD,MACvC/O,KAAKyL,MAAM6gB,sBAAiB5rB,yBAGhC,WAAS,IAAAJ,EAAAN,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEL,UAAWnM,KAAK6S,aAAe,iBAAmB,SAClD3C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BACb+D,EAAAtK,EAAA4G,cAACsgB,GAAAlnB,EAAD,CACEmnB,OAAO,SACPjkB,MAAO9I,KAAKyL,MAAMugB,OAClBgB,OAAQ,SAAC9jB,GAAD,OAAO5I,EAAK2sB,eAAe/jB,EAAEoJ,OAAOxJ,QAC5CgX,KAAM,GACND,IAAK,EACLD,KAAM,GACNvH,YAAY,WACZ6U,UAAU,KAGVltB,KAAKyL,MAAM0F,aAAagc,gBAEtB,GADFjd,EAAAtK,EAAA4G,cAAC4gB,GAAA,EAAD,CAAsB/d,QAASrP,KAAKyL,MAAMsD,OAE9CmB,EAAAtK,EAAA4G,cAAC6mB,GAAD,CACEtkB,KAAM/O,KAAKyL,MAAMsD,OACnBmB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAf,QACQnM,KAAKyL,MAAMsD,KAAK1N,cArCV4M,iBA0DbC,YAdS,SAACC,EAAO1C,GAC5B,MAAO,CACHoI,cAAe1F,EAAM2F,IAAID,cACzBmY,OAAQvgB,EAAMsD,KAAKkd,cAIA,SAACvd,EAAUjD,GAClC,MAAO,CACH8gB,iBAAkB,SAAApI,GAAK,OAAIzV,EAAS6d,aAAiBpI,KACrDmI,iBAAkB,SAAA1Y,GAAK,OAAIlF,EAAS4d,aAAiB1Y,OAI9C1F,CAA6CklB,+dC3BtDE,4CACF,SAAAA,EAAY7nB,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAszB,IACfhzB,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACT6U,MAAO,EACPnP,mBAAenT,EACfypB,QAAS,EACT+B,QAASzgB,EAAM+B,gBAAgBe,gBAKnCjO,EAAKkN,gBAAkB/B,EAAM+B,gBAE7BlN,EAAK0S,OAAS1S,EAAK0S,OAAOid,KAAZnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IACdA,EAAKyQ,IAAMuU,IAAMiO,YAfFjzB,0CAkBnB,WACI,OAAON,KAAKwN,gBAAgBwW,sCAIhC,WACIhkB,KAAKwN,gBAAgBgmB,OACrBxzB,KAAKmpB,SAASnpB,KAAKmO,yCAGvB,SAAmBsF,GAAW,IAAAlR,EAAAvC,KAC1BA,KAAKyL,MAAMgmB,qBAAqBhe,GAChCzT,KAAKyL,MAAMimB,6BAA6Bje,GACxCgT,WAAW,WACPlkB,EAAKkJ,MAAMimB,kCAA6BhxB,IACzC,uBAGP,WACI,OAAOV,KAAKyL,MAAM+kB,oBAAsBH,MACpCrwB,KAAKyL,MAAM2Z,cAAgBqO,2BAGnC,SAAOvqB,GACH,IAAIiF,EAAQnO,KAAKyL,MAAM+B,gBAAgBW,MACvC,IAAIA,EAAMM,UAAUmE,eAApB,CAGA,IAAI8X,EAAgBvc,EAAM2F,IAAI4W,cAC9B1qB,KAAKyL,MAAM+B,gBAAgBwW,OAAO4J,SAC9BlD,8BAGR,WACI1qB,KAAKyL,MAAMioB,cACN1zB,KAAKyL,MAAMkoB,iCAGpB,WAAS,IAAA/wB,EAAA5C,KACL,OAAIA,KAAKyL,MAAMmoB,cACX3xB,QAAQC,IAAI,iBACJgO,EAAAtK,EAAA4G,cAACqnB,EAAA,EAAD,CAA8BrmB,gBAAiBxN,KAAKyL,MAAM+B,mBAGlE0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACX+D,EAAAtK,EAAA4G,cAACsnB,EAAA,EAAD,CAAYC,aAAc/zB,KAAK+Q,MACjCb,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAK/Q,KAAK+Q,IAAK5E,UAAWnM,KAAKyL,MAAM2Z,cAAgBqO,KAAQ,iBAAmB,YAMnFvjB,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CACEpb,UAAWnN,KAAKyL,MAAM+B,gBAAgBY,OAAO3M,OAAS,GACtDyO,EAAAtK,EAAA4G,cAACwnB,GAAD,CAAQxmB,gBAAiBxN,KAAKyL,MAAM+B,kBACpC0C,EAAAtK,EAAA4G,cAACynB,GAAD,CACE7nB,WAAW,EACXoB,gBAAiBxN,KAAKyL,MAAM+B,gBAC5BxB,UAAWhM,KAAKyL,MAAM+B,gBAAgBxB,aAE1CkE,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CACEpb,UAAWnN,KAAKyL,MAAM2Z,cAAgBqO,MACtCvjB,EAAAtK,EAAA4G,cAAC0nB,EAAD,CACElR,MAAOhjB,KAAKmO,MAAM6U,MAClBC,SAAU,SAAC/R,GAAD,OAAOtO,EAAKumB,SAAS,CAACnG,MAAO9R,KACvC1D,gBAAiBxN,KAAKyL,MAAM+B,mBAEhC0C,EAAAtK,EAAA4G,cAAA,OACEwG,OAAQhT,KAAKgT,OACb7G,UAAWnM,KAAKuyB,KAAO,sBAAwB,iBAC9CvyB,KAAKyL,MAAMkoB,WAAa3zB,KAAKyL,MAAM2Z,cAAgBqO,KAAQ,GAC3DvjB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAmB/K,GAAG,cACnC8O,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CACEpb,UAAWnN,KAAKyL,MAAM2Z,cAAgBqO,MACtCvjB,EAAAtK,EAAA4G,cAAC2nB,EAAA,EAAD,CAAoB3mB,gBAAiBxN,KAAKwN,mBAE5C0C,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CACEpb,UAAWnN,KAAKyL,MAAM2Z,cAAgBqO,MACtCvjB,EAAAtK,EAAA4G,cAAC4nB,GAAA,EAAD,CAAiB5mB,gBAAiBxN,KAAKyL,MAAM+B,oBAGjD0C,EAAAtK,EAAA4G,cAAC6nB,EAAA,EAAD,CAAqB7mB,gBAAiBxN,KAAKyL,MAAM+B,mBAEnDxN,KAAKyL,MAAM2Z,cAAgBqO,MAC5BvjB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM9J,EAAK0xB,cAAcnoB,UAAU,mBAC9CnM,KAAKyL,MAAMkoB,UACXzjB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBA5GpB8B,aA4IHC,gBAZS,SAACC,EAAO1C,GAC5B,IAAI8oB,EAAapmB,EAAMqmB,YAAYD,WAEnC,MAAO,CACHX,aAFezlB,EAAMM,UAAUgmB,eAAiBF,IAAeG,IAG/DlE,kBAAmBriB,EAAM2F,IAAI0c,kBAC7Bxc,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,UAC7EmR,YAAajX,EAAM2F,IAAIsR,YACvBuO,UAAWxlB,EAAM2F,IAAI6f,YAlBF,SAAAjlB,GACvB,MAAO,CACH4d,iBAAkB,SAAA1Y,GAAK,OAAIlF,EAAS4d,aAAiB1Y,KACrD8f,aAAc,SAAAxiB,GAAC,OAAIxC,EAASglB,aAAaxiB,KACzCqb,iBAAkB,SAAApI,GAAK,OAAIzV,EAAS6d,aAAiBpI,KACrDsN,qBAAsB,SAAAhe,GAAS,OAAI/E,EAAS+iB,aAAqBhe,KACjEie,6BAA8B,SAAAje,GAAS,OAAI/E,EAASgjB,aAA6Bje,OAgB1EvF,CAA6ColB,mGCnL/CqB,EAAU,SAACla,EAAGC,EAAGL,EAAGC,GAC7B,IAAI1P,EAAIxD,KAAKwtB,KAAKlT,EAAKjH,EAAGC,EAAGL,EAAGC,IAAOjB,OAAOqI,KAE1CmT,GADYztB,KAAK6B,IAAIqR,EAAGI,GACnBtT,KAAK6B,IAAIoR,EAAKI,IACnBqa,EAAY1tB,KAAKwtB,KAAKC,GAQ1B,OAPIxa,EAAKI,EAAK,IACVqa,IAAc,GAEdD,EAAK,KACLC,GAAc,GAAKD,GAGhB,CAACpa,EAAIC,EAAID,EAAKpB,OAAOnI,EAAE4jB,EAAWpa,EAAG9P,EAAGyP,EAAKhB,OAAOnI,EAAE4jB,EAAWxa,EAAG1P,EAAGyP,EAAIC,IAGhFoH,EAAO,SAACjH,EAAIC,EAAIL,EAAIC,GACtB,OAAOlT,KAAKwtB,KAAKxtB,KAAK2tB,IAAI1a,EAAKI,EAAI,GAAKrT,KAAK2tB,IAAIza,EAAKI,EAAI,KCwC/CxM,cAXS,SAACC,EAAO1C,GAC9B,MAAO,CACHwN,SAAU9K,EAAM6V,OAAOgR,6BAIF,SAACtmB,GAC1B,MAAO,IAIMR,CAnDM,SAAAzI,GAA4C,IAA1CwT,EAA0CxT,EAA1CwT,SAAUrL,EAAgCnI,EAAhCmI,gBAAiBqnB,EAAexvB,EAAfwvB,UAAejmB,EACzCC,wBAASvO,GADgCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxDkmB,EADwDhmB,EAAA,GACnDimB,EADmDjmB,EAAA,GAyB7D,GAtBAY,oBAAU,WACN,GAAKmJ,EAAL,CADY,IAIPmc,EAAwBnc,EAAxBmc,eAAgBlkB,EAAQ+H,EAAR/H,EAAGgG,EAAK+B,EAAL/B,EACpBme,EAASD,EAAeh0B,GACxBk0B,EAASC,SAASC,eAAe,kBAAoBH,GACzD,GAAIC,EAAS,CACT,IAAIG,EAAWH,EAAO1b,wBAClB8b,EAAST,EAAUtb,QAAQC,wBAE3B+b,GADY/nB,EAAgB+L,QAAQic,UACvBhoB,EAAgB+L,QAAQgc,YACrC7b,EAAOlM,EAAgB+L,QAAQkc,WAAaF,EAChDR,EAAO,CACH1a,GAAIgb,EAAS3b,KAAOA,EACpBY,GAAI+a,EAASzb,IAAM0b,EAAO1b,IAC1BK,GAAInJ,EAAI,EAAI4I,EACZQ,GAAIpD,EAAIwe,EAAO1b,IAAK,OAG7B,CAACf,KAECA,IAAaic,EAAO,MAAO,GAzB6B,IA2BxDza,EAAgBya,EAAhBza,GAAIC,EAAYwa,EAAZxa,GAAGL,EAAS6a,EAAT7a,GAAGC,EAAM4a,EAAN5a,GAEf,OACKpK,EAAAtK,EAAA4G,cAACspB,EAAA,EAAD,CACC3pB,UAAU,uBACV4pB,QAAS1c,OAAO0c,QAChBC,cAAgB,EAChBC,aAAc,EACbra,OAAQ,CAACnB,EAAGC,EAAG,IAAKD,EAAK,IAAKJ,EAAI,IAAKK,EAAK,IAAKJ,EAAI,IAAKG,EAAK,IAAKJ,EAAI,IAAKK,EAAK,IAAKJ,EAAKD,EAAGC,GAChGnD,YAAa,MCgBRjJ,cAXS,SAACC,EAAO1C,GAC9B,MAAO,CACHyqB,WAAY/nB,EAAMC,OAAO8nB,WAAWzqB,EAAMmI,MAAMW,eAI3B,SAAC7F,GAC1B,MAAO,IAIMR,CApDI,SAAAzI,GAA8D,IAA5D2vB,EAA4D3vB,EAA5D2vB,eAAgBH,EAA4CxvB,EAA5CwvB,UAAWrnB,EAAiCnI,EAAjCmI,gBAAiBsoB,EAAgBzwB,EAAhBywB,WAAgBlnB,EACzDC,wBAASvO,GADgDwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxEkmB,EADwEhmB,EAAA,GACnEimB,EADmEjmB,EAAA,GAyB7E,GAvBAY,oBAAU,WACN2W,WAAW,WACP,IAAI4O,EAASD,EAAeh0B,GACxB+0B,EAAOf,EAAegB,UAAUt0B,MAChCwzB,EAASC,SAASC,eAAe,kBAAoBH,GACrDgB,EAAOd,SAASC,eAAe,kBAAoBW,GACvD,GAAIb,GAAUe,EAAM,CAChB,IAAIZ,EAAWH,EAAO1b,wBAClB0c,EAASD,EAAKzc,wBACd8b,EAAST,EAAUtb,QAAQC,wBAE3B+b,GADY/nB,EAAgB+L,QAAQic,UACvBhoB,EAAgB+L,QAAQgc,YACrC7b,EAAOlM,EAAgB+L,QAAQkc,WAAaF,EAChDR,EAAO,CACH9a,GAAIob,EAAS3b,KAAO,EAAIA,EACxBQ,GAAImb,EAASzb,IAAM0b,EAAO1b,IAC1BS,GAAI6b,EAAOxc,KAAO,EAAIA,EACtBY,GAAI4b,EAAOtc,IAAM0b,EAAO1b,QAGjC,MACJ,CAACmb,EAAQC,EAAgBc,KAEvBhB,EACD,MAAO,GA1BkE,IA6BxEza,EAAgBya,EAAhBza,GAAIC,EAAYwa,EAAZxa,GAAGL,EAAS6a,EAAT7a,GAAGC,EAAM4a,EAAN5a,GAEf,OACIpK,EAAAtK,EAAA4G,cAACspB,EAAA,EAAD,CACE3pB,UAAU,cACV4pB,QAAS1c,OAAO0c,QAChBC,cAAgB,EAChBC,aAAc,EACdra,OAAQ+Y,EAAQla,EAAIC,EAAIL,EAAIC,GAC5BnD,YAAa,sBCoDRjJ,gBAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH8qB,eAAgBpoB,EAAM6V,OAAOuS,eAC7BL,WAAY/nB,EAAMC,OAAO8nB,WAAW,GACpC3V,gBAAwD7f,IAA5CyN,EAAM6V,OAAOgR,6BAIJ,SAACtmB,GAC1B,MAAO,CACH8nB,8BAA+B,SAAAtlB,GAAC,OAAIxC,EAAS8nB,aAA8BtlB,OAIlEhD,CAvFI,SAAAzI,GAKb,IAJF8wB,EAIE9wB,EAJF8wB,eACA3oB,EAGEnI,EAHFmI,gBACAJ,EAEE/H,EAFF+H,gBACAgpB,EACE/wB,EADF+wB,8BAEIzlB,EAAMC,sBAAOtQ,GAGjBoP,oBAAU,WAIN,OAHAuJ,OAAOC,iBAAiB,UAAWW,GACnCZ,OAAOC,iBAAiB,YAAaY,GAE9B,WACHb,OAAOE,oBAAoB,UAAWU,GACtCZ,OAAOE,oBAAoB,YAAaW,KAE7C,IAEH,IAAMD,EAAY1K,sBAAY,SAACrG,GACvBsE,EAAgBW,MAAM6V,OAAOuS,gBAC7BC,OAA8B91B,IAElC,IAEEwZ,EAAc3K,sBAAY,SAACrG,GAC7B,IAAI+P,EAAWzL,EAAgBW,MAAM6V,OAAOgR,2BAC5C,GAAK/b,EAAL,CACA,IAAI/H,EAAIhI,EAAEutB,MACNvf,EAAIhO,EAAEwtB,MACVF,EAA8B12B,OAAAsa,EAAA,EAAAta,CAAA,GACtBmZ,EADqB,CAEzB/H,IACAgG,SAEL,IAEH,IAAKqf,EACD,MAAO,GAEX,IAAII,EAAwBnpB,EAAgBY,OAAOpN,IAC/C,SAAC4S,GAAD,OAAWA,EAAMsY,QAAQ0K,eAAe51B,IAAI,SAAA61B,GAAC,OAAIA,EAAEC,gBAAgB9kB,OAAO,SAAAd,GAAC,OAAIA,EAAE6lB,WAAaC,MAAQh2B,IAClG,SAAA+Q,GAAC,MAAK,CAACqjB,eAAgBrjB,EAAG6B,aACzBqjB,OAAO,SAACrxB,EAAEoC,GAAH,SAAAkK,OAAApS,OAAA2R,EAAA,EAAA3R,CAAa8F,GAAb9F,OAAA2R,EAAA,EAAA3R,CAAkBkI,KAAI,MACjCivB,OAAO,SAACrxB,EAAEoC,GAAH,SAAAkK,OAAApS,OAAA2R,EAAA,EAAA3R,CAAa8F,GAAb9F,OAAA2R,EAAA,EAAA3R,CAAmBkI,KAAI,IAC/BiN,EAAQ,CACRoG,OAAQzN,EAAgB+L,SAAW/L,EAAgB+L,QAAQud,cAG/D,OAAKtpB,EAAgB+L,QAIjBzJ,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EAAOlE,IAAKA,EAAK5E,UAAU,eAClC+D,EAAAtK,EAAA4G,cAAA,YACE0D,EAAAtK,EAAA4G,cAAA,UAAQpL,GAAG,YAAYma,YAAY,KAAKC,aAAa,IACpDC,KAAK,IAAIC,KAAK,IAAIC,OAAO,QACxBzL,EAAAtK,EAAA4G,cAAA,WAASoP,OAAO,oBAGpB1L,EAAAtK,EAAA4G,cAAC2qB,EAAD,CAAcvpB,gBAAiBA,EAAiBqnB,UAAWlkB,IAC5D4lB,EAAsB31B,IACnB,SAAA+E,GAAA,IAAEqvB,EAAFrvB,EAAEqvB,eAAgBxhB,EAAlB7N,EAAkB6N,MAAlB,OACI1D,EAAAtK,EAAA4G,cAAC4qB,EAAD,CACE3qB,IAAK2oB,EAAeh0B,GACpBwM,gBAAiBA,EACjBgG,MAAOA,EACPqhB,UAAWlkB,EACXqkB,eAAgBA,OAnBnB,yHCiBAlnB,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CArEI,SAAAzI,GAA+C,IAA7CiE,EAA6CjE,EAA7CiE,QAAS2tB,EAAoC5xB,EAApC4xB,QAAS9P,EAA2B9hB,EAA3B8hB,OAA2B+P,EAAA7xB,EAAnB8xB,gBAAmB,IAAAD,KAAAtoB,EACxCC,mBAAS,IAD+BC,EAAApP,OAAA+R,EAAA,EAAA/R,CAAAkP,EAAA,GACzDhF,EADyDkF,EAAA,GACnDyC,EADmDzC,EAAA,GAAAuG,EAEpCxG,mBAASooB,EAAQ,IAFmB3hB,EAAA5V,OAAA+R,EAAA,EAAA/R,CAAA2V,EAAA,GAEzD+hB,EAFyD9hB,EAAA,GAEjD+hB,EAFiD/hB,EAAA,GAgC9D,GA7BA5F,oBAAU,WACN,IAAI4nB,EAAQ53B,OAAAqS,EAAA,EAAArS,CAAOu3B,GACnBK,EAAS3vB,KAAK,SAACnC,EAAEoC,GAAH,OAASpC,EAAErB,KAAOyD,EAAEzD,OAClCkzB,EAAUC,EAAS,KACpB,CAACL,EAASI,IAEb3nB,oBAAU,WACFynB,IACAhQ,EAAOvd,KAAPlK,OAAAqS,EAAA,EAAArS,CAAmBkK,KAExB,CAACA,EAAMud,IAEVzX,oBAAU,WACF0nB,IACAjQ,EAAOhjB,KAAOizB,EAAOjzB,KACrBgjB,EAAOoQ,OAASH,EAAOI,OAAS,GAChCrQ,EAAOsQ,QAAUL,EAAOK,QACxBtQ,EAAO3lB,UAAY41B,EAAOp2B,GAC1BmmB,EAAOuQ,YAAcN,EAAOn3B,MAC5ByK,YAAc0sB,EAAOtsB,OAAOtK,KACxB,SAAAmR,GAAC,OAAIwV,EAAOxd,aAAegI,IAC/BrI,EAAQquB,eAAeP,EAAOp2B,IACzBR,KAAK,SAAAgK,GACF2c,EAAOyQ,WAAaptB,EAAEqtB,QAAQ,GAAG52B,SAG9C,CAACm2B,EAAQjQ,KAGPiQ,EACD,MAAO,GAGX,IAAIpnB,EAAUinB,EAAQr2B,IAClB,SAAAmb,GAAC,MAAK,CAACpb,MAAOob,EAAE9b,MAAQ,IAAO8b,EAAE5X,KAAQ,IAAKuE,MAAOqT,KAEzD,OACI/J,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,eACbiG,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,QACbiG,EAAAxM,EAAA4G,cAAA,OAAKuB,IAAKypB,EAAOtsB,QACjBkH,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,eACbiG,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBqrB,EAAOn3B,OACtC+R,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,eAAeqrB,EAAOjzB,MACrC6N,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBqrB,EAAOI,MAAM52B,IAAI,SAAA61B,GAAC,OAAIzkB,EAAAxM,EAAA4G,cAAA,YAAOqqB,QAGhEzkB,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,UACbiG,EAAAxM,EAAA4G,cAAC0rB,EAAAtyB,EAAD,CACE0K,SAAU,SAAC6nB,GAAD,OAAOV,EAAUU,EAAErvB,QAC7BsH,QAASA,EACTtH,MAAOsH,EAAQlG,KAAK,SAAAiuB,GAAC,OAAIA,EAAErvB,QAAU0uB,OAExCD,EAAWnlB,EAAAxM,EAAA4G,cAAC4rB,EAAA,EAAD,CAAMpuB,KAAMA,EAAM2H,QAASA,IAAa,sHC1D/C,SAASyb,EAAqB3hB,GACzC,IAAI0F,EAAe1F,EAAM4D,QAAQ8B,aADenC,EAEpBC,mBAASopB,EAAU5sB,EAAM4D,UAFLH,EAAApP,OAAA4U,EAAA,EAAA5U,CAAAkP,EAAA,GAEzCuV,EAFyCrV,EAAA,GAEjCsV,EAFiCtV,EAAA,GAI1CoB,EAAWf,sBAAY,SAACzG,GAC1BqI,EAAamnB,oBACT7sB,EAAM4D,QAAQkpB,WACdzvB,EAAMgR,KACNhR,EAAM0vB,OAEV/sB,EAAM4D,QAAQopB,QAAU,CAAC3vB,EAAMgR,KAAMhR,EAAM0vB,OAE3ChU,EAAU6T,EAAU5sB,EAAM4D,WAC3B,CAAC5D,EAAM4D,QAASmV,IAEnB,OACI3P,EAAAjP,EAAA4G,cAAA,OAAKL,UAAU,qBACT0I,EAAAjP,EAAA4G,cAACksB,EAAA9yB,EAAD,CACEuG,UAAU,mBACVwsB,iBAAiB,2BACjBC,eAAe,yBACfxoB,QAASyoB,EAAW1nB,GACpBb,SAAU,SAAC6nB,GAAD,OAAO7nB,EAAS6nB,EAAErvB,QAC5BA,MAAOyb,EACPhU,YAAY,UAK5B,SAAS8nB,EAAUhpB,GACf,IAAIyK,EAAOzK,EAAQopB,QAAQ,GACvBD,EAAQnpB,EAAQopB,QAAQ,GAO5B,MAAO,CACH13B,WANUL,IAAV83B,EACU1e,EAAO,EAAK,KAAO0e,EAAQ,GAE7B1e,EAAO,EAIfhR,MAAO,CACHgR,OACA0e,UAKZ,SAASK,EAAW1nB,GAEhB,IADA,IAAIf,EAAU,GACLvM,EAAE,EAAGA,EAAIsN,EAAa2nB,aAAcj1B,GAAG,EAC5CuM,EAAQ5O,KAAK,CACTT,MAAQ8C,EAAI,EAAK,KAAOA,EAAI,GAC5BiF,MAAO,CACHgR,KAAMjW,EACN20B,MAAO30B,EAAI,KAIvB,IAAK,IAAIA,EAAE,EAAGA,EAAIsN,EAAa2nB,aAAcj1B,IACzCuM,EAAQ5O,KAAK,CACTT,MAAO8C,EAAI,EACXiF,MAAO,CACHgR,KAAMjW,KAIlB,OAAOuM,sCCrEJ,SAASya,EAASznB,GAAwB,IAAnB21B,EAAmBl0B,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAJ,GACzC,YAAYnE,IAAR0C,GAA6B,OAARA,EACd,IAEHA,EAAI3B,OAASs3B,EAAgB31B,EAAI41B,UAAU,EAAGD,GAAkB,MAAQ31B,GACvEK,OALbkH,EAAAC,EAAAC,EAAA,sBAAAggB,8tCCUA,IA+Ke3c,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH1G,QAASoJ,EAAM8qB,OAAOC,cAAgB/qB,EAAM8qB,OAAOC,cAAcn0B,QAAU,IAItD,SAAC2J,GAC1B,MAAO,CACHyqB,iBAAkB,SAACvzB,GAAD,OAAO8I,EAASyqB,aAAiBvzB,OAI1CsI,CA/KQ,SAAAzI,GAAgD,IAA9CmO,EAA8CnO,EAA9CmO,MAAO2T,EAAuC9hB,EAAvC8hB,OAAQ4R,EAA+B1zB,EAA/B0zB,iBAAkBp0B,EAAaU,EAAbV,QAAaiK,EAC/BC,mBAAS,IADsBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC5DgpB,EAD4D9oB,EAAA,GAChDkqB,EADgDlqB,EAAA,GAAAuG,EAE3CxG,mBAAS,IAFkCyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAE5DpU,EAF4DqU,EAAA,GAEtD2jB,EAFsD3jB,EAAA,GAAAG,EAG7B5G,mBAAS,IAHoB6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG5DyjB,EAH4DxjB,EAAA,GAG/CyjB,EAH+CzjB,EAAA,GAAAoQ,EAI/BjX,wBAASvO,GAJsBylB,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAI5DsT,EAJ4DrT,EAAA,GAIhDsT,EAJgDtT,EAAA,GAAAuT,EAKvBzqB,oBAAS,GALc0qB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAK5DE,EAL4DD,EAAA,GAK5CE,EAL4CF,EAAA,GAAAG,EAMjC7qB,oBAAS,GANwB8qB,EAAAj6B,OAAAqP,EAAA,EAAArP,CAAAg6B,EAAA,GAM5DE,EAN4DD,EAAA,GAMjDE,EANiDF,EAAA,GAQnEjqB,oBAAU,WACFyX,EAAOyS,WACPC,GAAa,IAElB,CAAC1S,EAAQ0S,IAEZnqB,oBAAU,WAGNoqB,YAAclC,EAAY32B,GACrBT,KAAK,SAAA44B,GACEA,GACAH,EAAQG,EAAW1B,aACnByB,EAAeC,EAAWzvB,cAC1B0vB,EAAcD,IAEdC,OAAc/4B,MAG3B,CAACs3B,EAAY32B,EAAMg4B,EAASE,EAAgBE,IAE/C,IAAMU,EAAY5qB,sBAAY,WAC1B,IAAIxF,EAAe,GACfuvB,GAAeM,EACf7vB,EAAeuvB,EACRE,GAAcA,EAAWzvB,eAChCA,EAAeyvB,EAAWzvB,cALE,IAAAqwB,EAAAC,EAAA3xB,EAQbkL,EAAMpG,gBAAgBY,QART,IAQhC,IAAAisB,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAiD,KACzCyxB,EADyCF,EAAAtxB,MACxBye,OACjBA,EAAOvd,OACPswB,EAAQtwB,KAARlK,OAAA2R,EAAA,EAAA3R,CAAmBynB,EAAOvd,OAE1BwvB,GACAngB,OAAOkhB,eAAeC,QAAQ,iBAAmBxC,EAAa,IAAM32B,EAAM,IAAK4F,KAAKC,UAAUsyB,IACzFA,EAAWxzB,UAGZs0B,EAAQ14B,UAAY43B,EAAWxzB,UAF/Bs0B,EAAQ14B,UAAawF,KAAKC,OAAM,IAAIqf,MAAOC,UAAY,MAK3D2T,EAAQ14B,UAAYwF,KAAKC,OAAM,IAAIqf,MAAOC,UAAY,KAE1D2T,EAAQG,YC9DO,cDgEfH,EAAQvwB,aAAeA,EACvBuwB,EAAQxC,YAAcz2B,EACtBi5B,EAAQtC,WAAaA,EACrBsC,EAAQ/1B,KAAO,EACf+1B,EAAQ3C,OAAS,GACjB2C,EAAQzC,QAAU,GAClByC,EAAQN,WAAY,GA/BQ,MAAAr4B,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAiChC8wB,GAAa,IACd,CAAC1S,EAAQlmB,EAAMi4B,EAAaM,EAAgBJ,EAAYS,IAErDS,EAAmBnrB,sBAAY,SAAChE,GAClCgc,EAAOxd,aAAewB,EACtBgc,EAAOuQ,YAAcz2B,EACrBkmB,EAAOyQ,WAAaA,EACpBzQ,EAAOhjB,KAAO,EACdgjB,EAAOoQ,OAAS,GAChBpQ,EAAOsQ,QAAU,GAIb2B,GACAngB,OAAOkhB,eAAeC,QAAQ,iBAAmBxC,EAAa,IAAM32B,EAAM,IAAK4F,KAAKC,UAAUsyB,IACzFA,EAAWxzB,UAGZuhB,EAAO3lB,UAAY43B,EAAWxzB,UAF9BuhB,EAAO3lB,UAAawF,KAAKC,OAAM,IAAIqf,MAAOC,UAAY,MAK1DY,EAAO3lB,UAAYwF,KAAKC,OAAM,IAAIqf,MAAOC,UAAY,KAEzDY,EAAOkT,YC/FY,cDgGnBtB,GAAiB,GAEjB1S,WAAU3mB,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACD8gB,EAAOoT,WAAW51B,GADjB,OAEPo0B,GAAiB,GAFV,wBAAA5yB,EAAA2B,SAAApC,MAGR,MACJ,CAACkyB,EAAY32B,EAAMkmB,EAAQiS,EAAYz0B,IAEpC61B,EAAUrrB,sBAAY,WACxB4pB,GAAiB,GACjB1S,WAAU3mB,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAg1B,IAAA,IAAAC,EAAAC,EAAA9W,EAAA,OAAAte,EAAAC,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,OAAAq0B,EAAApyB,EACYkL,EAAMpG,gBAAgBY,QADlC4sB,EAAAx0B,KAAA,EAAAs0B,EAAAnyB,IAAA,WAAAoyB,EAAAD,EAAAlyB,KAAAC,KAAA,CAAAmyB,EAAAv0B,KAAA,eACEwd,EADF8W,EAAAjyB,MAAAkyB,EAAAv0B,KAAA,EAEGwd,EAAOsD,OAAOoT,WAAW51B,GAF5B,OAAAi2B,EAAAv0B,KAAA,eAAAu0B,EAAAv0B,KAAA,iBAAAu0B,EAAAx0B,KAAA,GAAAw0B,EAAAt0B,GAAAs0B,EAAA,SAAAF,EAAA5xB,EAAA8xB,EAAAt0B,IAAA,eAAAs0B,EAAAx0B,KAAA,GAAAs0B,EAAA3xB,IAAA6xB,EAAAC,OAAA,YAIP9B,GAAiB,GAJV,yBAAA6B,EAAA9yB,SAAA2yB,EAAA,wBAKR,MACJ,CAACjnB,EAAO7O,IAGL41B,EAAaprB,sBAAY,SAACrG,GACxBowB,GAAeM,EACfc,EAAiBpB,GACVE,GAAcA,EAAWzvB,aAChC2wB,EAAiBlB,EAAWzvB,cAE5B2wB,OAAiBh6B,IAEtB,CAACW,EAAM22B,EAAYsB,EAAa/R,EAAQiS,EAAYz0B,EAAS60B,IAMhE,OAJA9pB,oBAAU,WACN2pB,OAAc/4B,IACf,CAAC+4B,EAAelS,IAGfrX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAf,gBAGA+D,EAAAtK,EAAA4G,cAAA,SACE1D,MAAOkvB,EACP1nB,SAAU,SAACpH,GAAD,OAAOkwB,EAAclwB,EAAEoJ,OAAOxJ,QACxCuJ,KAAK,OACLlG,UAAU,4BAEd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAf,gBAGA+D,EAAAtK,EAAA4G,cAAA,SACE1D,MAAOzH,EACPiP,SAAU,SAACpH,GAAD,OAAOmwB,EAAQnwB,EAAEoJ,OAAOxJ,QAClCuJ,KAAK,OACLlG,UAAU,4BAGd+D,EAAAtK,EAAA4G,cAAC0uB,EAAA,EAAD,CAAc3qB,YAAY,sBAAsB4qB,UAAW7B,EAAa8B,aAAc,SAAClyB,GAC/EqwB,EAAerwB,GACf2wB,GAAkB,MAGxBG,EAKQ,GAJT9pB,EAAAtK,EAAA4G,cAAA,OACGE,QAASiuB,EACTxuB,UAA0B,KAAf6rB,EAAoB,uBAAyB,eAF3D,QAKAgC,EACA9pB,EAAAtK,EAAA4G,cAAA,OAAKE,QAASkuB,EAASzuB,UAAU,eAAjC,YAGA+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASytB,EAAWhuB,UAAU,eAAnC,yBEnII+B,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhCK,SAAAzI,GAAmC,IAAjCg1B,EAAiCh1B,EAAjCg1B,YAAaY,EAAoB51B,EAApB41B,eAC/B,OACInrB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM2uB,EDPL,WCQVlvB,UDRU,WCQCsuB,EAAyB,kBAAoB,UAF1D,UAKAvqB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM2uB,EDbA,gBCcflvB,UDde,gBCcJsuB,EAA8B,kBAAoB,UAF/D,eAKAvqB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM2uB,OAAe36B,IAC9ByL,eAA2BzL,IAAhB+5B,EAA4B,kBAAoB,UAF7D,qCCLJ/wB,UAAU,IAAI7J,KAiHdy7B,EAAS,SAAAC,GAAmC,IAAjC16B,EAAiC06B,EAAjC16B,OAAQgS,EAAyB0oB,EAAzB1oB,WAAYnG,EAAa6uB,EAAb7uB,QAC7BP,EAAY,SAIhB,OAHI0G,IACA1G,GAAa,aAGb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMA,EAAQ7L,IACvBsL,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAKlN,EAAOqK,MAAOiB,UAAU,kBAClC+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBtL,EAAOR,SAoB1Cm7B,EAAiB,SAACn6B,GACpB,IAAIo6B,EAAiBp6B,EAAKyC,QAAQ,SAQlC,OAPI23B,GAAkB,IAClBp6B,EAAOA,EAAKgS,MAAM,EAAGooB,KAEzBA,EAAiBp6B,EAAKyC,QAAQ,UACR,IAClBzC,EAAOA,EAAKgS,MAAM,EAAGooB,IAElBp6B,GAGI6M,cA3BS,SAACC,EAAO1C,GAC9B,MAAO,CACHiwB,gBAA0Ch7B,IAA9ByN,EAAMM,UAAUktB,UAC5B52B,QAASoJ,EAAM8qB,OAAOC,cAAgB/qB,EAAM8qB,OAAOC,cAAcn0B,QAAU,IAItD,SAAC2J,GAC1B,MAAO,CACHyqB,iBAAkB,SAACvzB,GAAD,OAAO8I,EAASyqB,aAAiBvzB,KACnDg2B,aAAc,SAAAvkB,GAAI,OAAG3I,EAASktB,aAAavkB,OAiBlCnJ,CAtJK,SAAAzI,GAKH,IAJb8hB,EAIa9hB,EAJb8hB,OACA4R,EAGa1zB,EAHb0zB,iBACAuC,EAEaj2B,EAFbi2B,WACAE,EACan2B,EADbm2B,aACA72B,EAAaU,EAAbV,QAAaiK,EACiBC,mBAAS,IAD1BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACNjN,EADMmN,EAAA,GACGsP,EADHtP,EAAA,GAAAuG,EAEWxG,mBAAS,IAFpByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAENpU,EAFMqU,EAAA,GAEA2jB,EAFA3jB,EAAA,GAAAG,EAGuB5G,wBAASvO,GAHhCoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGNgmB,EAHM/lB,EAAA,GAGMgmB,EAHNhmB,EAAA,GAKPimB,EAAgBxsB,sBAAY,SAAC1O,GAC/B,GAAIA,EAAOO,KAAOy6B,EAUd,OATAC,OAAcp7B,GACd6mB,EAAO3lB,eAAYlB,EACnB6mB,EAAOhjB,UAAO7D,EACd6mB,EAAOuQ,iBAAcp3B,EACrB6mB,EAAOoQ,OAAS,GAChBpQ,EAAOsQ,QAAU,KACjBtQ,EAAOxd,kBAAerJ,EACtB6mB,EAAOyQ,gBAAat3B,OACpB6mB,EAAOkT,iBAAc/5B,GAIzBo7B,EAAcj7B,EAAOO,IACrBmmB,EAAO3lB,UAAYf,EAAOO,GAC1BmmB,EAAOhjB,KAAO1D,EAAO0D,KACrBgjB,EAAOuQ,YAAcj3B,EAAOR,MAC5BknB,EAAOoQ,OAAS92B,EAAOoU,OAAS,GAChCsS,EAAOsQ,QAAUh3B,EAAOg3B,QACxB/sB,YAAcjK,EAAOqK,OAChBtK,KAAK,SAAA2K,GAAI,OAAIgc,EAAOxd,aAAewB,IACxC7B,EAAQquB,eAAel3B,EAAOO,IACzBR,KAAK,SAAAub,QACQzb,IAANyb,IACAoL,EAAOyQ,WAAa7b,EAAE8b,QAAQ,GAAG52B,KACjCkmB,EAAOuQ,YAAc3b,EAAE9b,MACvBknB,EAAOkT,YAAc,YAGjCuB,IAASxB,QAAQ,cAAevzB,KAAKC,UAAUrG,KAChD,CAAC0mB,EAAQuU,EAAeD,IAErBnd,EAASnP,sBAAY,WACvB7F,EAAQuyB,cAAcT,EAAen6B,IAChCT,KAAK,SAAAsQ,GAAC,OAAIsN,EAAWtN,MAC3B,CAAC7P,EAAMmd,IAEV1O,oBAAU,WACN,IAAIlH,EAAI4yB,EAAejU,EAAOlmB,MAC9Bg4B,EAAQzwB,GACRc,EAAQuyB,cAAcT,EAAe5yB,IAChChI,KAAK,SAAAsQ,GACF,GAAI8qB,IAASE,QAAQ,eAAgB,CACjC,IAAIC,EAASl1B,KAAKm1B,MAAMJ,IAASE,QAAQ,gBACpChrB,EAAEjH,KAAK,SAAAiN,GAAC,OAAIA,EAAE9V,KAAO+6B,EAAO/6B,OAC7B8P,EAAC,CAAIirB,GAAJjqB,OAAApS,OAAA2R,EAAA,EAAA3R,CAAgBoR,IACjB6qB,EAAcI,IAGtB3d,EAAWtN,MAEpB,CAACqW,EAAQ/I,EAAY6a,EAASyC,IAEjC,IAAMO,EAAc9sB,sBAAY,WAC5B4pB,GAAiB,GACjB1S,WAAU3mB,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EACD8gB,EAAOoT,WAAW51B,GADjB,OAEPo0B,GAAiB,GAFV,wBAAA5yB,EAAA2B,SAAApC,MAGR,MACJ,CAACyhB,EAAQxiB,IAMZ,OAAK22B,EAQDxrB,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,SACE1D,MAAOzH,EACPiP,SAAU,SAACpH,GAAD,OAAOmwB,EAAQnwB,EAAEoJ,OAAOxJ,QAClCuJ,KAAK,OACLlG,UAAU,yBACZ+D,EAAAtK,EAAA4G,cAAA,OACEE,QAASgS,EACTvS,UAAU,iBAFZ,WAMkB,IAAnBpK,EAAQN,OAAeyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAf,+DAAgG,GACxH+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,WACZpK,EAAQf,IAAI,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAC8vB,EAAD,CAAQzpB,WAAY3B,EAAE9P,KAAOy6B,EAAYnvB,QAASqvB,EAAel7B,OAAQqQ,OAE7FhB,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS2vB,EAAalwB,UAAU,sBAArC,SAvBE+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAf,UACO+D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,eAAeO,QAP5B,WACdkvB,GAAa,KAMF,UADP,8BC9DG1tB,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzBO,SAAAzI,GAAqB,IAAnBmO,EAAmBnO,EAAnBmO,MAAO2T,EAAY9hB,EAAZ8hB,OAAYvY,EACDC,wBAASvO,GADRwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAChCyrB,EADgCvrB,EAAA,GACnBmsB,EADmBnsB,EAAA,GAGvC,OACIgB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAf,mCAGA+D,EAAAtK,EAAA4G,cAAC+vB,EAAD,CAAalB,eAAgBA,EAAgBZ,YAAaA,IHf9C,WGgBXA,EAAyBvqB,EAAAtK,EAAA4G,cAACgwB,EAAD,CAAajV,OAAQA,IAAY,GHjB1C,gBGkBhBkT,EAA8BvqB,EAAAtK,EAAA4G,cAACiwB,EAAD,CAAgB7oB,MAAOA,EAAO2T,OAAQA,IAAY,cCcrFmV,EAAO,SAAA32B,GAAsC,IAApCwH,EAAoCxH,EAApCwH,OAAQovB,EAA4B52B,EAA5B42B,OAAQjwB,EAAoB3G,EAApB2G,QAAS0R,EAAWrY,EAAXqY,MAEhCjS,EAAY,OACZoB,GAAUovB,IACVxwB,GAAa,YAGjB,IAAI8I,EAAQ,CACRmJ,MAAOA,GAGX,OACIlO,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPvI,QAAS,kBAAMA,EAAQa,IACvBpB,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,wBAcK0B,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1DA,SAAAzI,GAA4B,IAA1Bm3B,EAA0Bn3B,EAA1Bm3B,QAASxe,EAAiB3Y,EAAjB2Y,MAAO/L,EAAU5M,EAAV4M,KAAUrD,EACXC,wBAASvO,GADEwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAChC2tB,EADgCztB,EAAA,GACxB2tB,EADwB3tB,EAAA,GAGjCxC,EAAU6C,sBAAY,SAAC4M,GACzB0gB,EAAU1gB,GACVxV,IAASm2B,OAAOC,UAAUH,EAASzgB,EAAG9J,IACvC,CAACwqB,EAAWD,IASf,OAPA9sB,oBAAU,WACNnJ,IAASm2B,OAAOE,eAAeJ,EAASvqB,GACnCzR,KAAK,SAAAsQ,GACF2rB,EAAU3rB,MAEnB,CAAC2rB,EAAWD,IAGX1sB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UAdR,CAAC,EAAG,EAAG,EAAG,EAAG,GAeZnL,IACF,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAACywB,EAAD,CACE7e,MAAOA,EACP1R,QAASA,EACTa,OAAQ2D,EACRyrB,OAAQA,0BC4DbzuB,cAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHyxB,QAAS/uB,EAAMC,OAAO+uB,oBAAoB1xB,EAAMmI,MAAMxS,MAIjC,SAACsN,EAAUjD,GACpC,MAAO,CACH2xB,kBAAmB,SAACF,GAAD,OAAaxuB,EAC5B2uB,aAAuB5xB,EAAMmI,MAAMxS,GAAI87B,OAIlChvB,CAnFW,SAAAzI,GAAoD,IAAlDmO,EAAkDnO,EAAlDmO,MAAO0pB,EAA2C73B,EAA3C63B,OAA2CC,EAAA93B,EAAnCy3B,eAAmC,IAAAK,EAA3B,GAA2BA,EACpE7wB,GADoEjH,EAAvB23B,kBACnC7tB,sBAAY,SAACoH,GACzB/C,EAAMpG,gBAAgBgwB,eAAe7mB,EAAG/C,EAAMW,YAAaoC,EAAE8mB,SAAU9mB,EAAE+mB,aAAa,IACvF,CAAC9pB,KAEE+pB,EAAcpuB,sBAAY,WAC5B,IAAIkP,EAAQye,EAAQl8B,IAAI,SAAAkQ,GAAC,OAAIA,EAAE0sB,cAAa95B,QAAQw5B,EAAOM,aAEvDj1B,EAAIu0B,IADRze,GAEI9V,GACA+D,EAAQ/D,IAEb,CAACiL,EAAOspB,EAASI,IAEdO,EAActuB,sBAAY,WAC5B,IAAIkP,EAAQye,EAAQl8B,IAAI,SAAAkQ,GAAC,OAAIA,EAAE0sB,cAAa95B,QAAQw5B,EAAOM,aAEvDj1B,EAAIu0B,IADRze,GAEI9V,GACA+D,EAAQ/D,IAEb,CAACiL,EAAOspB,EAASI,IAEdQ,EAAevuB,sBAAY,SAAC2B,GAC9B,OAAIA,EAAE0sB,cAAgBN,EAAOM,YAClB,yBAEJ,iBACR,CAACN,IAEA7e,EAAQye,EAAQl8B,IAAI,SAAAkQ,GAAC,OAAIA,EAAE0sB,cAAa95B,QAAQw5B,EAAOM,aAGvDG,EAAY,cACZC,EAAY,kBAUhB,OARIvf,GALMye,EAAQz7B,OAKC,IACfu8B,GAAa,aAGbvf,EAAQ,IACRsf,GAAa,aAIb7tB,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAASixB,EACTxxB,UAAW6xB,IACb9tB,EAAAtK,EAAA4G,cAAA,OACEE,QAASmxB,EACT1xB,UAAW4xB,KAEf7tB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACZ+wB,EAAQl8B,IACL,SAACkQ,EAAGrN,GAAJ,OACIqM,EAAAtK,EAAA4G,cAAA,OACEC,IAAKyE,EAAE7P,KAAO,IAAMwC,EACpB6I,QAAS,kBAAMA,EAAQwE,IACvB/E,UAAW2xB,EAAa5sB,IACvBA,EAAE7P,KAJL,KAKG6P,EAAElH,MAAQkH,EAAElH,KAAK5H,KAAK,MALzB,mDCyBL8L,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA/EE,SAAAzI,GAAe,IAAbm3B,EAAan3B,EAAbm3B,QAAa5tB,EACQC,mBAAS,IADjBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvBivB,EADuB/uB,EAAA,GACVgvB,EADUhvB,EAAA,GAAAuG,EAEExG,mBAAS,IAFXyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEvB0oB,EAFuBzoB,EAAA,GAEb0oB,EAFa1oB,EAAA,GAAAG,EAGQ5G,mBAAS,IAHjB6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGvBwoB,EAHuBvoB,EAAA,GAGVwoB,EAHUxoB,EAAA,GAK5BhG,oBAAU,WACN,IAAK8sB,EAAQ2B,YAGT,OAFAD,EAAe,SACfF,EAAY,IAGhBz3B,IAAS63B,MAAMC,YAAY7B,EAAQ8B,eAAiB9B,EAAQr1B,MACvD3G,KAAK,SAAAS,GAAI,OAAI+8B,EAAY/8B,KAC9Bs9B,YAAa/B,EAAQ30B,aAChBrH,KAAK,SAAAg+B,GACEA,GACAN,ECvBb,SAA0BM,GAC/B,IAAIr6B,EAAOq6B,EAAKC,cAEZC,GAAS,EAAIF,EAAKG,YAAYC,WAClCF,EAAQA,EAAMr9B,OAAS,EAAIq9B,EAAQ,IAAMA,EAEzC,IAAIG,EAAML,EAAKM,UAAUF,WAGzB,OAAOF,EAAQ,KAFfG,EAAMA,EAAIx9B,OAAS,EAAIw9B,EAAM,IAAMA,GAER,IAAM16B,EDcA46B,CAAiBP,OAG7C,CAACR,EAAaE,EAAgB1B,EAAQwC,SAAUxC,IAEnD,IAAMyC,EAAc9vB,sBAAY,WAC5BqtB,EAAQ0C,KAAKrB,IACd,CAACrB,EAASqB,IAEP3tB,EAAWf,sBAAY,SAACrG,GAC1Bg1B,EAAeh1B,EAAEoJ,OAAOxJ,QACzB,CAACo1B,IAEAqB,EAAe3C,EAAQ4C,mBAAqBC,IAC5C,UAAY,UAEZC,EAAW,GACX9C,EAAQ4C,mBAAqBG,KAC7B/C,EAAQgD,WACRF,EACIxvB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAf,4BACA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,SACE+D,YAAY,0BACZD,SAAUA,EACVxH,MAAOm1B,EAAa5rB,KAAK,OAAOlG,UAAU,sBAC5C+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS2yB,EACTlzB,UAA2B,KAAhB8xB,EAAqB,8BAAgC,sBAFlE,WAUZ,IAAI4B,EAAY,GAQhB,OAPIjD,EAAQ2B,aAAe3B,EAAQ4C,mBAAqBC,MACpDI,EACI3vB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,iBAAiBgyB,GADnC,IACqDoB,EADrD,YAC2ErvB,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,gBAAgBkyB,KAK/GnuB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZuzB,EACAG,+BEzDLziB,EAAS,IAAI1J,IAmEJxF,cAfS,SAACC,EAADpI,GAA8B,IAArB+5B,EAAqB/5B,EAArB+5B,SAAUlsB,EAAW7N,EAAX6N,MAEnC0pB,GADIwC,GAAYlsB,GACL0pB,OACf,MAAO,CACHsC,cAA8Bl/B,IAApB48B,EAAOsC,UAAgCtC,EAAOsC,SACxDv+B,KAAMi8B,EAAOj8B,KACb2I,KAAMszB,EAAOtzB,OAIM,SAAC0E,GAC1B,MAAO,IAIMR,CAjEM,SAAAzI,GAA6F,IAA3FmO,EAA2FnO,EAA3FmO,MAAOksB,EAAoFr6B,EAApFq6B,SAAiBC,GAAmEt6B,EAA1Eu6B,MAA0Ev6B,EAAnEs6B,gBAAgBE,EAAmDx6B,EAAnDw6B,YAAaL,EAAsCn6B,EAAtCm6B,SAAUv+B,EAA4BoE,EAA5BpE,KAA4B6+B,EAAAz6B,EAAtB4M,YAAsB,IAAA6tB,EAAjBnY,IAAiBmY,EAC1GnuB,EAAI+tB,GAAYlsB,EAChB0pB,EAASvrB,EAAEurB,OAEXlf,EAAQhB,EAAOiB,iBAAiBtM,GAChCiU,EAAiB,CACjB7H,gBAAiBC,GAGrB,OACIlO,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,iCACV+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO+Q,EAAgB7Z,UAAU,oBAEtC+D,EAAAtK,EAAA4G,cAAC2zB,EAAD,CAAmB7C,OAAQA,EAAQ1pB,MAAOksB,GAAYlsB,KAExD1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe9K,GAAQ0Q,EAAEqS,YAAcrS,EAAEuM,WACxDpO,EAAAtK,EAAA4G,cAAC4zB,EAAD,CAAWR,SAAUA,EAAUhD,QAASU,IACxCptB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACXyzB,QAAqBl/B,IAATW,EACG,GAAhB,gBAGJi8B,EAAOiB,YACPruB,EAAAtK,EAAA4G,cAAC6zB,EAAA,EAAD,CACEr2B,KAAMszB,EAAOtzB,KACbi2B,YAAaA,EACbF,eAAgBA,EAChBnD,QAASU,IACT,IACDsC,GAAYv+B,EACb6O,EAAAtK,EAAA4G,cAAC8zB,EAAD,CACEliB,MAAOA,EACPwe,QAASU,EAAOM,YAChBvrB,KAAMkuB,MAAkB,IAE7BrwB,EAAAtK,EAAA4G,cAACg0B,EAAA,EAAD,CACEnuB,KAAMA,EACNuB,MAAO7B,EACPkuB,YAAaA,EACbrD,QAASU,IAEXptB,EAAAtK,EAAA4G,cAACqY,EAAA,EAAD,CAAgBrX,gBAAiBoG,EAAMpG,qBCyBlCU,cAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHwc,QAAS9Z,EAAMC,OAAOqyB,oBAAoBh1B,EAAMmI,MAAMxS,MAIjC,SAACsN,EAAUjD,GACpC,MAAO,CACHi1B,kBAAmB,SAACzY,GAAD,OAAavZ,EAC5BiyB,aAAuBl1B,EAAMmI,MAAMxS,GAAI6mB,OAIlC/Z,CAlFW,SAAAzI,GAAoD,IAAlDmO,EAAkDnO,EAAlDmO,MAAO2T,EAA2C9hB,EAA3C8hB,OAA2CqZ,EAAAn7B,EAAnCwiB,eAAmC,IAAA2Y,EAA3B,GAA2BA,EACpEl0B,GADoEjH,EAAvBi7B,kBACnCnxB,sBAAY,SAAC5G,GACzBiL,EAAMitB,cAAcl4B,OAAGjI,OAAWA,GAAW,IAC9C,CAACkT,KAEE+pB,EAAcpuB,sBAAY,WAC5B,IAAIkP,EAAQwJ,EAAQnkB,QAAQyjB,GAExB5e,EAAIsf,IADRxJ,GAEI9V,GACA+D,EAAQ/D,IAEb,CAACiL,EAAOqU,EAASV,IAEdsW,EAActuB,sBAAY,WAC5B,IAAIkP,EAAQwJ,EAAQnkB,QAAQyjB,GAExB5e,EAAIsf,IADRxJ,GAEI9V,GACA+D,EAAQ/D,IAEb,CAACiL,EAAOqU,EAASV,IAEduW,EAAevuB,sBAAY,SAAC2B,GAC9B,OAAIA,IAAMqW,EACC,yBAEJ,iBACR,CAACA,IAEA9I,EAAQwJ,EAAQnkB,QAAQyjB,GAGxBwW,EAAY,cACZC,EAAY,kBAUhB,OARIvf,GALMwJ,EAAQxmB,OAKC,IACfu8B,GAAa,aAGbvf,EAAQ,IACRsf,GAAa,aAIb7tB,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAASixB,EACTxxB,UAAW6xB,IACb9tB,EAAAtK,EAAA4G,cAAA,OACEE,QAASmxB,EACT1xB,UAAW4xB,KAEf7tB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACZ8b,EAAQjnB,IACL,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMA,EAAQwE,IACvB/E,UAAW2xB,EAAa5sB,IACvBA,EAAE7P,KAHL,KAIG6P,EAAElH,KAAOkH,EAAElH,KAAK5H,KAAK,MAAQ,GAJhC,2DChCL8L,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1BI,SAAAzI,GAAc,IAAZ8hB,EAAY9hB,EAAZ8hB,OACXuZ,EAAavxB,sBAAY,WACvBgY,EAAOthB,QACPoT,OAAO0nB,KAAK,+BAAiCxZ,EAAOthB,QAAS,UACtDshB,EAAO3lB,WACdyX,OAAO0nB,KAAK,+BAAiCxZ,EAAO3lB,UAAW,WAEpE,CAAC2lB,IAEJ,OACIrX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAA,QAAME,QAASo0B,GAAf,8mCCTV,IAAME,GAAW,WAAIv8B,GAEfw8B,GAAQ,GACDC,GAAa,eAAAz7B,EAAA3F,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAC,EAAOmiB,GAAP,IAAAxb,EAAA00B,EAAAC,EAAAC,EAAAhH,EAAAD,EAAAje,EAAA2e,EAAAC,EAAAuG,EAAA,OAAA37B,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,aACrBgG,EAAMwb,EAAQ7lB,KAAK,QACZ6+B,IAFc,CAAA16B,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,SAGdw2B,GAAMx0B,IAHQ,cAAAlG,EAAAE,KAAA,EAKJ,IAAI86B,KAAaP,GAASt8B,iBAC1CsL,KAAKwxB,OACLC,OAAO,YACPA,OAAO,WACPC,QAAQ,WAAYzZ,GACpB0Z,cAAa,GAVO,cAKrBR,EALqB56B,EAAAM,KAAAN,EAAAE,KAAA,EAYH,IAAI86B,KAAaP,GAASt8B,iBAC3CsL,KAAK4xB,MACLH,OAAO,cACPA,OAAO,gBACPC,QAAQ,aAAczZ,GACtB0Z,cAAa,GAjBO,OAYrBP,EAZqB76B,EAAAM,KAmBrBw6B,EAAa,GAnBQhH,EAAAwH,GAoBXV,GApBW,IAoBzB,IAAA9G,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAASsT,EAAeie,EAAAtxB,MACpBu4B,EAAWllB,EAAEijB,UAAY,8BAAgCjjB,EAAElW,QAAU,SArBhD,MAAAtE,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAAA2xB,EAAA+G,GAuBXT,GAvBW,IAuBzB,IAAAtG,EAAAnyB,MAAAoyB,EAAAD,EAAAlyB,KAAAC,MAASsT,EAAgB4e,EAAAjyB,MACrBu4B,EAAWllB,EAAE2lB,YAAcz2B,IAAK02B,WAAW5lB,EAAEpS,cAxBxB,MAAApI,GAAAm5B,EAAA5xB,EAAAvH,GAAA,QAAAm5B,EAAA3xB,IAAA,OA0BzB83B,GAAMx0B,GAAO40B,EA1BY96B,EAAAkE,OAAA,SA2BlB42B,GA3BkB,yBAAA96B,EAAA2B,SAAApC,MAAH,gBAAAqC,GAAA,OAAA1C,EAAA4C,MAAArI,KAAA6E,YAAA,GCqBXqJ,eAXS,SAACC,EAAO1C,GAC9B,MAAO,CACHu2B,WAAY7zB,EAAM8zB,SAASC,gBAIN,SAACxzB,GAC1B,MAAO,IAIMR,CA1BO,SAAAzI,GAAkB,IAAhBu8B,EAAgBv8B,EAAhBu8B,WACpB,YAAmBthC,IAAfshC,EACQ9xB,EAAAtK,EAAA4G,cAAA,YAGJ0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe61B,EAAW3gC,KAAKoC,QAC9CyM,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ61B,EAAWh4B,KAAKhJ,IAAI,SAAAoE,GAAG,OAAI8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAS/G,kBCH9DgY,GAAS,IAAI1J,IACftS,GAAK,EAqEM+gC,GAnEI,SAAA18B,GAWb,IAVF+hB,EAUE/hB,EAVF+hB,UACAD,EASE9hB,EATF8hB,OACA6a,EAQE38B,EARF28B,SACAC,EAOE58B,EAPF48B,YACAtvB,EAMEtN,EANFsN,YACAwH,EAKE9U,EALF8U,YACAN,EAIExU,EAJFwU,UAEAzM,GAEE/H,EAHF68B,SAGE78B,EAFF+H,iBACA+0B,EACE98B,EADF88B,cACEvzB,EAC0BC,wBAASvO,GADnCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACGwzB,EADHtzB,EAAA,GACYuzB,EADZvzB,EAAA,GAGIwzB,EAAgB,SAACV,GACnBx0B,EAAgBklB,MAAMhkB,SAASi0B,aAAiBX,KAGpDlyB,oBAAU,WACN,GAAK0yB,EAAL,CAIA,IAAII,IAAMxhC,GACVqlB,WAAW,WACP,GAAImc,IAAMxhC,GAAI,CACV,IAAImmB,EAAS,IAAIsb,KAAOL,GACxBjb,EAAOub,MAAK,GACPliC,KAAK,SAAAsQ,GACFwxB,EAAcnb,OAG3B,UAZCmb,OAAchiC,IAanB,CAAC8hC,EAASE,IAEb,IAAIztB,EAAQ,CACR8tB,YAAa3lB,GAAO4lB,SAAS5lB,GAAOmB,gBAAgB6jB,GAAW,IAQnE,OALI5a,GAA2B,KAAdA,IACbvS,EAAMguB,gBAAkB,QAAWzb,EAAY,MAK/CtX,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACkJ,gBAAiBf,GAAO4lB,SAAS5lB,GAAOmB,gBAAgB6jB,GAAW,IAC3E5uB,WAAW,EACXT,YAAa,SAAC7J,GAAD,OAAO6J,EAAYqvB,IAChC9uB,WAAY,SAACpK,GAAD,OAAOA,EAAE+J,mBACrB9G,UAAU,oBACV+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,kBAAMA,EAAY6nB,IAC/Bz1B,YAAa,kBAAM81B,EAAWL,IAC9Bt1B,aAAc,kBAAM21B,OAAW/hC,IAC/BuZ,UAAW,kBAAMA,EAAUmoB,IAC3B11B,QAAS,kBAAM61B,EAAcH,IAC7Bj2B,UAAWi2B,IAAa7a,EAAO6X,SAAW,8BAAgC,qBAC1EnqB,MAAOA,GACP/E,EAAAtK,EAAA4G,cAAC+b,GAAA,EAAD,CAAsBpb,UAAWk1B,EAAYxa,IAAIua,IAC/ClyB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,8BCnDzB/K,GAAK,EACL8hC,GAAU,EAgNCh1B,IA/MA,IAAIwF,IAEH,IAAI7T,IA6MLqO,YAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH03B,oBAAqBh1B,EAAMi1B,aAAaD,sBAInB,SAACz0B,GAC1B,MAAO,CACD20B,kBAAmB,SAAC9b,GAAD,OAAY7Y,EAAS20B,aAAkB9b,OAInDrZ,CA3MQ,SAAAzI,GAOM,IANzBs6B,EAMyBt6B,EANzBs6B,eACAsD,EAKyB59B,EALzB49B,kBACA9b,EAIyB9hB,EAJzB8hB,OACA3T,EAGyBnO,EAHzBmO,MACAqsB,EAEyBx6B,EAFzBw6B,YACAqD,EACyB79B,EADzB69B,UACAH,EAAyB19B,EAAzB09B,oBAEQpyB,EAAMC,sBAAOtQ,GAFIsO,EAGGC,mBAAS,GAHZC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGhB/J,EAHgBiK,EAAA,GAGTq0B,EAHSr0B,EAAA,GAAAuG,EAIexG,oBAAS,GAJxByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAIhB+tB,EAJgB9tB,EAAA,GAIH+tB,EAJG/tB,EAAA,GAAAG,EAKO5G,mBAAS,IALhB6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAKhBoS,EALgBnS,EAAA,GAKP4tB,EALO5tB,EAAA,GAAAoQ,EAMajX,mBAAS,IANtBkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAMhBmb,EANgBlb,EAAA,GAMJwd,EANIxd,EAAA,GAAAuT,EAOezqB,mBAAS,IAAI+P,KAP5B2a,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAOhB2I,EAPgB1I,EAAA,GAOHiK,EAPGjK,EAAA,GASfpf,EAAchL,sBAAW,eAAAxJ,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,EAAO6C,GAAP,OAAAhD,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACxBkC,IAAM4e,EAAO6X,SADW,CAAA74B,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,iBAI5B64B,EAAUO,YAJkB,wBAAAt9B,EAAA2B,SAAApC,MAAD,gBAAAqC,GAAA,OAAApC,EAAAsC,MAAArI,KAAA6E,YAAA,GAK5B,CAAC0iB,IAEJzX,oBAAU,WACN2zB,GAAe,IAChB,CAACA,EAAgB7vB,IACpB,IAAMqG,EAAW1K,sBAAW,eAAAgsB,EAAAz7B,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAg1B,EAAOlyB,GAAP,OAAAhD,EAAAC,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,UACrBkC,IAAM4e,EAAO6X,SADQ,CAAApE,EAAAv0B,KAAA,eAAAu0B,EAAAvwB,OAAA,iBAIzB64B,EAAUQ,YAJe,wBAAA9I,EAAA9yB,SAAA2yB,MAAD,gBAAAzyB,GAAA,OAAAmzB,EAAAlzB,MAAArI,KAAA6E,YAAA,GAKzB,CAAC0iB,IAEEgb,EAAgBhzB,sBAAW,eAAAw0B,EAAAjkC,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAm+B,EAAOr7B,GAAP,IAAAs7B,EAAAC,EAAA,OAAAv+B,EAAAC,EAAAU,KAAA,SAAA69B,GAAA,cAAAA,EAAA39B,KAAA29B,EAAA19B,MAAA,UAC1BkC,IAAM4e,EAAO6X,SADa,CAAA+E,EAAA19B,KAAA,eAAA09B,EAAA15B,OAAA,wBAI1Bw5B,IAAaf,GACbgB,EAAK,IAAIrB,KAAOl6B,GALUw7B,EAAA19B,KAAA,EAMxBy9B,EAAGpB,OANqB,OAO1BmB,IAAaf,IACbtvB,EAAMitB,cAAcqD,GARM,wBAAAC,EAAAj8B,SAAA87B,MAAD,gBAAAI,GAAA,OAAAL,EAAA17B,MAAArI,KAAA6E,YAAA,GAU9B,CAAC+O,EAAO2T,IAEXzX,oBAAU,WACNiB,EAAI4I,QAAQ0qB,SAAS,EAAG,GACxBd,EAAS,IACV,CAACtD,EAAarsB,EAAO2vB,IAExBzzB,oBAAU,WACFmwB,EACAqE,aAAiBrE,GACZr/B,KAAK,SAAA2jC,GAAM,OAAIb,EAAWa,KAI/Bhd,EAAOthB,QACPu+B,aAAmBjd,EAAOthB,SACrBrF,KAAK,SAAA2jC,GAAM,OAAIb,EAAWa,KACxBhd,EAAO3lB,UACd6iC,aAAqBld,EAAO3lB,WACvBhB,KAAK,SAAA2jC,GACFb,EAAWa,KAGnBG,aAA6Bnd,EAAOmX,cAAenX,EAAOtf,aACrDrH,KAAK,SAAA2jC,GAAM,OAAIb,EAAWa,MAEpC,CAAChd,EAAQmc,EAAYzD,EAAa1Y,EAAOthB,QAASshB,EAAO3lB,YAE5DkO,oBAAU,WACNoxB,GAAcjZ,GACTrnB,KAAK,SAAAmR,GAAC,OAAI4xB,EAAc5xB,KAC7B4yB,KACD,CAAC1c,EAAS0b,IAGb7zB,oBAAU,WACNiwB,OAAer/B,IAChB,CAACkT,IAEJ9D,oBAAU,WACNnJ,IAASm2B,OAAO8H,eACZC,KACCjkC,KAAK,SAAAgF,GACFg+B,EAAe,IAAI5kB,IAAIpZ,EAAE5E,IAAI,SAAAkQ,GAAC,OAAIA,EAAEpQ,YAE7C,CAAC8iC,EAAgBT,IAEpBrzB,oBAAU,WAEN,OADAiB,EAAI4I,QAAQL,iBAAiB,SAAUqrB,GAChC,WACH5zB,EAAI4I,QAAQJ,oBAAoB,SAAUorB,KAE/C,CAACpB,EAAUt+B,EAAOgjB,IAErB,IAAM0c,EAAWp1B,sBAAY,SAACrG,GAC1B,IAAIrF,IAAMzC,GACVqlB,WAAW,WACP,GAAI5iB,IAAMzC,IAAO2P,EAAI4I,QAArB,CAGA,IAAImrB,EAAK/zB,EAAI4I,QACGmrB,EAAGlP,UAAYkP,EAAGC,cACjBD,EAAG5N,aAAe,IAC3BjP,EAAQxmB,OAASwD,EA7GjB,IA8GAs+B,EAASt+B,EA9GT,MAiHT,MACJ,CAACs+B,EAAUtb,EAAShjB,IAEjB8N,EAAcxD,sBAAY,SAACgY,GAC7B8b,EAAkB9b,IACnB,IA6BCyd,EAAgBxB,EAAcvb,EAAQ5U,MAAM,EAAGpO,EAnJnC,IAmJ8D,GAC9E,OACIiL,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACZ8zB,EACA/vB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZ8b,EAAQxmB,OACTyO,EAAAtK,EAAA4G,cAAA,QACEE,QAAS,kBAAM+2B,GAAgBD,IAC/Br3B,UAAWq3B,EAAc,0BAA4B,kBAFvD,UAFF,iBAUAtzB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZ8b,EAAQxmB,OACTyO,EAAAtK,EAAA4G,cAAA,QACEE,QAAS,kBAAM+2B,GAAgBD,IAC/Br3B,UAAWq3B,EAAc,0BAA4B,kBAFvD,UAFF,oBAUDtzB,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAU,uBACtB64B,EAAchkC,IACX,SAACkQ,EAAGrN,GAAJ,OACIqM,EAAAtK,EAAA4G,cAACy4B,GAAD,CACEzd,UAAW6Z,EAAWnwB,GACtBzE,IAAK,UAAW5I,EAChBkP,YAAa,SAAC7J,GAAD,OAAO6J,EAAY7B,IAChCqJ,YAAa,kBAAMA,EAAYrJ,IAC/BoxB,SAAUz+B,EAAI,EACdoW,UAAW,kBAAMA,EAAU/I,IAC3B1D,gBAAiBoG,EAAMpG,gBACvB60B,YAAaA,EACb/uB,WAAY,SAACpK,GAAD,OAAOA,EAAE+J,mBACrBsvB,cAAe,kBAAMA,EAAcrxB,IACnCkxB,SAAUlxB,EACVqW,OAAQA,OAGpBrX,EAAAtK,EAAA4G,cAAC04B,GAAD,UCzLR9nB,YAAS,IAAI1J,KA4LJxF,YAvBS,SAACC,EAAO1C,GAC5B,IAAImI,EAAQnI,EAAMmI,MAClB,YAAclT,IAAVkT,EACO,CACHuxB,wBAAoBzkC,EACpB0kC,QAAQ,GAGT,CACH9kB,QAAS1M,EAAMyxB,eAAiBzxB,EAAMyxB,cAAc,GAAG/kB,QACvD6kB,mBAAoBh3B,EAAMC,OAAOk3B,qBAAqB75B,EAAMmI,MAAMxS,IAClEgkC,OAAQj3B,EAAMC,OAAOm3B,eAAe95B,EAAMmI,MAAMtF,YAAYlN,MACvD+M,EAAMC,OAAOm3B,eAAe95B,EAAMmI,MAAMtF,YAAYlN,IAAIqK,EAAMmI,MAAMW,aACzEixB,SAAU5xB,EAAM4xB,WAKG,SAAC92B,GAC1B,MAAO,IAIMR,CA1LQ,SAAAzI,GAAoF,IAAlF8uB,EAAkF9uB,EAAlF8uB,WAAY3gB,EAAsEnO,EAAtEmO,MAAOpG,EAA+D/H,EAA/D+H,gBAA6B23B,GAAkC1/B,EAA9CrE,GAA8CqE,EAA1C2/B,OAA0C3/B,EAAlC0/B,oBAAkCn2B,GAAAvJ,EAAd+/B,SACrDv2B,wBAASvO,IAD0DwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAClGixB,EADkG/wB,EAAA,GACrF6wB,EADqF7wB,EAAA,GAAAuG,EAEvExG,mBAAS,IAAIw2B,KAF0D/vB,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAElG6tB,EAFkG5tB,EAAA,GAAAA,EAAA,GASvG,GAJD5F,oBAAU,WACL,OAAO,kBAAMwzB,EAAUoC,YACxB,CAACpC,SAEU5iC,IAAVkT,EACA,OACG1D,EAAAtK,EAAA4G,cAAA,YAIP,GAAI+nB,IAAeoR,MACf/xB,EAAMwU,iBAAmBwd,KACrBhyB,EAAM4xB,UACN5xB,EAAMwU,iBAAmBC,KAC7B,OACInY,EAAAtK,EAAA4G,cAACq5B,EAAA,EAAYA,YAAb,CACEC,gBAAgB,EAChBC,cAAc,EACdC,eAAe,EACfC,SAAU,iBAAM,IAChBC,eAAgB14B,EAAgB04B,eAChCC,WAAY34B,EAAgB44B,KAC5B7xB,YAAa/G,EAAgB4e,OAAOxY,MACpCyyB,WAAY74B,EAAgB64B,WAC5BC,WAAYC,IACZ/4B,gBAAiBA,EACjBg5B,IAAKh5B,EAAgBg5B,IACrB5yB,MAAOA,IAIjB,IAAI2T,OAAS7mB,EACTo/B,EAAWlsB,EACX6yB,OAAS/lC,EACTgd,OAAahd,EAEjB,GAAIkT,EAAMwU,iBAAmBwd,SAEVllC,KADf6mB,EAAS3T,EAAM2T,UAEXkf,EAAU7yB,EAAM8yB,SAASnf,EAAOI,eAEjC,GAAI/T,EAAM8J,YAAc9J,EAAM8J,WAAWoK,sBAAwBE,KACpEye,EAAU7yB,EAAM+yB,iBAAmB/yB,EAAM8J,WAAWkpB,kBAEhDrf,EAASkf,EAAQlf,QAErB7J,EAAa9J,EAAM8J,gBAChB,GAAI9J,EAAM8J,YAAc9J,EAAM8J,WAAWoK,sBAAwBC,IACpErK,EAAa9J,EAAM8J,gBAChB,GAAI9J,EAAM8J,YAAc9J,EAAMwU,iBAAmBye,KAC9CjzB,EAAMxF,OAAO3M,OAAS,EAAG,CAC/B,IAAIsQ,EAAIozB,EAAqBA,EAAmBvxB,MAAQA,EAAMxF,OAAO,GAAGwF,MACpE7B,EAAE2L,WAAWoK,sBAAwBE,SAGrBtnB,KAFhB+lC,EACI10B,EAAE40B,iBAAmB50B,EAAE2L,WAAWkpB,kBAElCrf,EAASkf,EAAQlf,OACjBuY,EAAW/tB,GAERA,EAAE2L,WAAWoK,sBAAwBC,MAC5CrK,EAAa3L,EAAE2L,WACfoiB,EAAW/tB,GAInB,GAAI2L,IAAeoiB,EAAS0F,SACxB,OACIt1B,EAAAtK,EAAA4G,cAACs6B,EAAD,CACEz0B,KAAMqL,EAAWoK,oBACjBmY,YAAaA,EACbF,eAAgBA,EAChBC,MAAOtiB,EACP9J,MAAOksB,IAIjB,QAAep/B,IAAX6mB,QACuB7mB,IAAvB6mB,EAAOwf,aACPnzB,EAAM4xB,SACN,OACIt1B,EAAAtK,EAAA4G,cAAA,YAIR82B,EAAU0D,UAAUzf,EAAOwf,aAE3B,IAAIh1B,EAAI+tB,GAAYlsB,EAChBwK,EAAQhB,GAAOiB,iBAAiBtM,GAGpC,OACI7B,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,mBACV+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAACy6B,EAAA,EAAD,CACErzB,MAAOA,EACP2T,OAAQA,EACR2f,iBAAkB,iBAAM,MAE1Bh3B,EAAAtK,EAAA4G,cAAC26B,EAAA,EAAD,CACE7D,UAAWA,EACX91B,gBAAiBA,EACjB45B,OAAQ7f,EAAOwf,YACf3lC,GAAImmB,EAAO6X,SACX7X,OAAQA,EACRjM,MAAO,IACPD,OAAQ,KACVnL,EAAAtK,EAAA4G,cAAC66B,EAAD,CAAmB9f,OAAQA,EAAQ3T,MAAOksB,KAE5C5vB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAmCP9K,EAnCmCkmB,EAAOlmB,UAoC/CX,IAATW,EACO,IAEXA,EAAOA,EAAKoC,QACHhC,OAAS,GACPJ,EAAK23B,UAAU,EAAG,IAAM,MAE5B33B,IA1CIkmB,EAAO+f,UAAY,gBACnBp3B,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAC4zB,EAAD,CAAWxD,QAASrV,IACpBrX,EAAAtK,EAAA4G,cAAC+6B,EAAD,CAAYhgB,OAAQA,MAIzBrX,EAAAtK,EAAA4G,cAAC6zB,EAAA,EAAD,CACEJ,YAAaA,EACbF,eAAgBA,EAChBnD,QAASrV,IACXrX,EAAAtK,EAAA4G,cAAC8zB,EAAD,CACEliB,MAAOA,EACPwe,QAASrV,EAAO6X,SAChB/sB,KAAMm1B,OAEVt3B,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAACi7B,EAAA,EAAD,CAAe7zB,MAAOA,EAAO2T,OAAQA,IACrCrX,EAAAtK,EAAA4G,cAACk7B,EAAA,EAAD,CAAYl6B,gBAAiBA,EAAiB+Z,OAAQA,KAEtDA,EAAO+f,UAQRp3B,EAAAtK,EAAA4G,cAACm7B,EAAD,CAAe/zB,MAAOA,EAAO2T,OAAQA,IAPtCrX,EAAAtK,EAAA4G,cAACo7B,GAAD,CACEtE,UAAWA,EACXvD,eAAgBA,EAChBE,YAAaA,EACbrsB,MAAOksB,EACPvY,OAAQA,IAIXrX,EAAAtK,EAAA4G,cAACqY,EAAA,EAAD,CAAgBrX,gBAAiBA,KAI1C,IAAsBnM,IAYtB,2CC3Ee6M,gBAvCS,SAACC,EAAO1C,GACnBA,EAAM+B,gBAAgByG,SAA/B,IACIse,GAAO,EACPpkB,EAAMM,UAAUo5B,iBAChBtV,GAAO,EAEP9mB,EAAM+B,gBAAgBY,QAAkD,IAAxC3C,EAAM+B,gBAAgBY,OAAO3M,SAC7D8wB,GAAO,GAGPpkB,EAAMM,UAAUq5B,SAAavB,IAIjC,IAAI3yB,EAAQnI,EAAM+B,gBAAgBY,OAAOD,EAAM2F,IAAIH,eAInD,OAHIC,GAASA,EAAMxF,QAAUwF,EAAMxF,OAAO,KACtCwF,EAAQA,EAAMxF,OAAO,GAAGwF,OAErB,CACHA,MAAOA,EACPxS,QAAcV,IAAVkT,EAAsB,OACLlT,IAAjBkT,EAAM2T,aAAiD7mB,IAAzBkT,EAAM2T,OAAOI,QAC3C/T,EAAM2T,OAAOI,QAAU/T,EAAMwQ,YAAcxQ,EAAM0K,UACrDypB,UAAWt8B,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAO3M,OACxEumC,aAAgB75B,EAAMqmB,YAAYwT,aAClCzT,WAAYpmB,EAAMqmB,YAAYD,WAC9B0T,aAAc95B,EAAMqmB,YAAYyT,aAChCt0B,cAAexF,EAAM2F,IAAIH,cACzB4e,KAAMA,IAIa,SAAA7jB,GACvB,MAAO,CACHw5B,6BAA8B,SAACC,GAAD,OAC1Bz5B,EAASw5B,YAA6BC,OAInCj6B,CAhGf,SAAoCzC,GAChC,IAAIwJ,EAAQ,CACRoG,OAAQ5P,EAAMu8B,cAKZ/tB,GAFkBxO,EAAnB+B,gBAEa+B,sBACd,WACI9D,EAAMy8B,8BAA6B,IAEvC,CAACz8B,EAAMy8B,gCAEPtL,EAAU,GACVwL,EAAU,GACd,GAAI38B,EAAM8mB,KACN,OACIriB,EAAAtK,EAAA4G,cAAA,YAGR,IAAIoH,OAAQlT,EA0BZ,YAzB4BA,IAAxB+K,EAAMkI,eAA+BlI,EAAM+B,gBAAgBY,UAC3DwF,EAAQnI,EAAM+B,gBAAgBY,OAAO3C,EAAMkI,kBAGvCy0B,EACIl4B,EAAAtK,EAAA4G,cAAC67B,GAAA,EAAD,CAAmBz0B,MAAOA,EAAOpG,gBAAiB/B,EAAM+B,mBAG5DoG,GACInI,EAAMu8B,aAAe,KACrBpL,EACI1sB,EAAAtK,EAAA4G,cAAC87B,GAAA,EAAD,CACEC,gBAAgB,+BAChBC,WAAW,EACXC,cAAc,EACVj7B,gBAAiB/B,EAAM+B,gBAC3Bk7B,aAAa,EACb90B,MAAOA,MASrB1D,EAAAtK,EAAA4G,cAAA,OACEyN,UAAWA,EACXhF,MAAOA,EACP9I,UAAU,gCACTi8B,EACAxL,sGCYI1uB,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHk9B,eAAgBx6B,EAAMy6B,QAAQC,gBAAgBp9B,EAAMq9B,QAAQzvB,OAAOjY,MAI9C,SAACsN,GAC1B,MAAO,CACHq6B,oBAAqB,SAAA73B,GAAC,OAAIxC,EAASq6B,aAAoB73B,OAI9ChD,CA7EO,SAAAzI,GAUhB,IATFsuB,EASEtuB,EATFsuB,aACAiV,EAQEvjC,EARFujC,QACAC,EAOExjC,EAPFwjC,QACAF,EAMEtjC,EANFsjC,oBACAD,EAKErjC,EALFqjC,QACAI,EAIEzjC,EAJFyjC,SACAC,EAGE1jC,EAHF0jC,YACAC,EAEE3jC,EAFF2jC,SACAT,EACEljC,EADFkjC,eAEM53B,EAAMC,mBADVq4B,EAEkFC,YAAiB,CACjG97B,gBAAiBs7B,EAAQt7B,gBACzB+7B,kBAAmBxV,EACnBhjB,MACAm4B,WACAC,cACAx6B,QAASm6B,EAAQzvB,OACjB2vB,UACAC,UACAG,WACAT,mBAVgCpuB,GAFlC8uB,EAEKG,YAFLH,EAEkBI,eAFlBJ,EAEkC9uB,aAAaN,EAF/CovB,EAE+CpvB,UAAWhF,EAF1Do0B,EAE0Dp0B,MAaxDy0B,GAfFL,EAEiEM,cAatD,IAGThB,IACAe,EAAO5vB,KAAO6uB,EAAez3B,EAC7Bw4B,EAAO1vB,IAAM2uB,EAAezxB,GAGhC,IAAM0yB,EAAcr6B,sBAAY,WAAM,IAC7Bs6B,EAAoBf,EAAQ36B,MAAM26B,QAAlCe,iBACLd,EAAoBc,EAAiB73B,OACjC,SAAAd,GAAC,OAAIA,IAAM43B,MAChB,CAACA,IAEJ,OACI54B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB8I,MAAOA,EAAOlE,IAAKA,GACjDb,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbN,UAAWA,EACX9N,UAAU,kBACV+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASk9B,EAAaz9B,UAAU,cAArC,MAIF+D,EAAAtK,EAAA4G,cAACs9B,EAAA,EAAD,CACE9mB,MAAO,EACPomB,SAAUA,EACV57B,gBAAiBs7B,EAAQt7B,gBACzB07B,SAAUA,EACVC,YAAaA,EACbY,UAAU,EACVC,YAAY,EACZhB,QAASA,EACTC,QAASA,EACTlV,aAAchjB,EACd+3B,QAASA,gCC9BN56B,uBAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH4P,OAAQ5P,EAAMw+B,SAAS5uB,OACvB6uB,gBAAiB/7B,EAAM26B,QAAQoB,kBAIV,SAACx7B,GAC1B,MAAO,IAIMR,CAjCS,SAACzC,GAAU,IAAAuD,EACLC,oBAAS,GADJC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC1Bm7B,EAD0Bj7B,EAAA,GAClBk7B,EADkBl7B,EAAA,GAQ/B,OALAY,oBAAU,WACDrE,EAAMy+B,iBACPE,GAAU,IAEf,CAAC3+B,EAAMy+B,gBAAiBE,IAEvBl6B,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACoG,OAAQ5P,EAAMw+B,SAAS5uB,OAAS,IACxClP,UAAWg+B,EAAS,0BAA4B,oBAChDA,EAIDj6B,EAAAtK,EAAA4G,cAAC69B,EAAA,EAAD,CAAcC,gBAAiB7+B,EAAM+B,kBAHpC/B,EAAMy+B,iBACNz+B,EAAMy+B,gBAAgB57B,cAAgB7C,EAAMw+B,UAC5C/5B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBAAqBO,QAAS,kBAAM09B,GAAU,IAAOr8B,IAAI,yCCiDnEG,cAhBS,SAACC,EAAO1C,GAC9B,MAAO,CACHy+B,gBAAiB/7B,EAAM26B,QAAQoB,gBAC/BK,SAAU9+B,EAAMw+B,SAASO,SACzBC,UAAWh/B,EAAMw+B,SAASS,UAC1BC,eAAgBx8B,EAAM26B,QAAQ6B,iBAIT,SAACj8B,GAC1B,MAAO,CACHk8B,mBAAoB,SAAA15B,GAAC,OAAIxC,EAASk8B,aAAmB15B,KACrD25B,kBAAmB,SAAA35B,GAAC,OAAIxC,EAASm8B,aAAkB35B,OAI1ChD,CA7DI,SAAAzI,GAOb,IANFmlC,EAMEnlC,EANFmlC,mBACAC,EAKEplC,EALFolC,kBACAN,EAIE9kC,EAJF8kC,SACAE,EAGEhlC,EAHFglC,UACAP,EAEEzkC,EAFFykC,gBACAD,EACExkC,EADFwkC,SAGMa,EAAiB,SAACjpB,GACpB+oB,EAAmB/oB,IAGvB,OAAQ3R,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACoG,OAAQ4uB,EAAS5uB,OAAS,IAAK0vB,UAAWd,EAAS5uB,OAAS,KACpElP,UAAU,eACTs+B,EAAUzpC,IACP,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAA,OACEgH,WAAW,EACXT,YAAa,SAAC7J,GACVA,EAAE8hC,aAAax1B,QAAQ,YAAatE,EAAE9P,IACtCypC,EAAkB35B,IAEtBoC,WAAY,SAAApK,GAAC,OAAIA,EAAEqK,kBACnB9G,IAAKyE,EAAE9P,GACPsL,QAAS,kBAAMk+B,EAAmB15B,IAClC/E,UAAW+E,IAAMg5B,EAAkB,oBAAsB,YACzDh6B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc4B,IACzBmD,EAAEmB,OAAS44B,IACP,qBAAuB,wBAZjC,IAaiC,kBAApB/5B,EAAEg6B,cACTh6B,EAAEg6B,cAAgBh6B,EAAEmB,OAAS44B,IAC7B,SAAW,aAEzBV,EAASvpC,IACN,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAC2+B,EAAA,EAAD,CACE1+B,IAAKyE,EAAE9P,GACP0nC,QAAS53B,EACT5J,WAAY,GACZsjC,mBAAoBE,EACpBD,kBAAmBA,EACnBX,gBAAiBA,SCnB3Bh8B,cAXS,SAACC,EAAO1C,GAC9B,MAAO,CACH4P,OAAQ5P,EAAMw+B,SAAS5uB,SAIF,SAAC3M,GAC1B,MAAO,IAIMR,CA1Be,SAAAzI,GAAgB,IAAdwkC,EAAcxkC,EAAdwkC,SAAcj7B,EACfC,oBAAS,GADMC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACrCm7B,EADqCj7B,EAAA,GAC7Bk7B,EAD6Bl7B,EAAA,GAEtC/C,EAAY,wBAIhB,OAHIg+B,IACAh+B,GAAa,WAET+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWA,GACd+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM09B,GAAWD,IAC1Bp8B,IAAI,iBAAiB5B,UAAU,uBAClCg+B,GACAj6B,EAAAtK,EAAA4G,cAAC4+B,EAAD,CAAYnB,SAAUA,mCCftBoB,EAAa,SAACpB,GAGvB,IAFA,IAAIqB,EAAU,GACVxC,EAAUmB,EAASsB,QAChBzC,EAAQx6B,aAAew6B,EAAQx6B,YAAYi9B,SAC9CD,EAAQ9pC,KAAKsnC,EAAQx6B,aACrBw6B,EAAUA,EAAQx6B,YAAYi9B,QAElC,OAAOD,0hCCFX,IAmDep9B,cAZS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACH88B,sBAAuB,SAAAt6B,GAAC,OAAIxC,EAAS88B,aAAsBt6B,KAC3Du6B,kBAAmB,SAACrqC,EAAI8P,GAAL,OAAWxC,EAAS+8B,aAAkBrqC,EAAI8P,OAIpDhD,CAnDY,SAAAzI,GAA0D,IAAxDwkC,EAAwDxkC,EAAxDwkC,SAAUwB,EAA8ChmC,EAA9CgmC,kBAAmBD,EAA2B/lC,EAA3B+lC,sBAClDF,EAAUD,EAAWpB,GAEnByB,EAAOn8B,sBAAY,SAACo8B,GAAc,IAC/Bx9B,EAAS87B,EAASsB,QAAQ/9B,gBAA1BW,MACDy9B,EAAaz9B,EAAM26B,QAAQ+C,mBAAmB75B,OAC9C,SAAAd,GAAC,OAAKo6B,EAAQ9mC,SAAS0M,IAAMA,IAAM+4B,IACnC6B,EAAQhsC,OAAA2R,EAAA,EAAA3R,CAAQwrC,GACpBQ,EAASC,UAET,IAPoC3R,EAOhC4R,EAAQ,GAPwB3R,EAAA3xB,EAStBojC,GATsB,IASpC,IAAAzR,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAwB,KAAfF,EAAeyxB,EAAAtxB,MAEpB,GADAkjC,EAAMxqC,KAAKmH,GACPA,IAAMgjC,EACN,OAZ4B,MAAAhqC,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAgBpCwiC,EAAUrwB,MAAQ2uB,EAAS3uB,MAC3BqwB,EAAUtwB,OAAS4uB,EAAS5uB,OAC5B,IAAIinB,EAAWn0B,EAAMy6B,QAAQC,gBAAgBoB,EAAS7oC,IACtDqqC,EAAkBE,EAAUvqC,GAAIkhC,GAChCkJ,EAAqB,GAAAt5B,OAAApS,OAAA2R,EAAA,EAAA3R,CAAM8rC,GAAgBI,KAC5C,CAACV,EAASE,EAAuBvB,IAEpC,OACI/5B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACZm/B,EAAQtqC,IACL,SAACkQ,GAAD,OACIhB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACf+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMg/B,EAAKx6B,IAAI/E,UAAU,eAAe+E,EAAEq6B,QAAQU,KAAK,kBCoD1E/9B,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHygC,iBAAkB/9B,EAAMg+B,QAAQD,mBAIX,SAACx9B,GAC1B,MAAO,CACH09B,qBAAsB,SAAAl7B,GAAC,OAAIxC,EAAS09B,aAAqBl7B,OAIhDhD,CAnFM,SAAAzI,GAQf,IAPF2mC,EAOE3mC,EAPF2mC,qBACAC,EAME5mC,EANF4mC,cACAC,EAKE7mC,EALF6mC,WACAC,EAIE9mC,EAJF8mC,cACAvC,EAGEvkC,EAHFukC,WACAC,EAEExkC,EAFFwkC,SACAiC,EACEzmC,EADFymC,iBACEl9B,EAC0BC,oBAAS,GADnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACGw9B,EADHt9B,EAAA,GACYu9B,EADZv9B,EAAA,GAGFY,oBAAU,WACDk6B,GAIDqC,IADAH,IAKL,CAACA,EAAkBlC,IAEtB,IAAM0C,EAAen9B,sBAAY,WAC7B88B,GAAerC,GACfC,EAAS0C,UAAY3C,EACrBuC,GAAevC,IAChB,CAACA,EAAYuC,EAAetC,EAAUoC,IAEzC,OACIn8B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACAphB,UAAU,gBACVkL,KAAMm1B,EAAU,OAAS,QACzBI,OAAQJ,EACNh0B,OAAQ,kBAAMi0B,GAAYD,KAC5Bt8B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAgBpmB,KAAK,KAAK0lC,OAAK,EAACzuB,MAAM,WAAtC,QAGAlO,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,KACGyc,GACD95B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS,kBAAM0/B,EAAqBnC,EAASsB,WAD/C,eAKAr7B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE9gB,IAAI,GACJC,QAASggC,EACTvlC,KAAK,MAHP,kBAKG6iC,GACA95B,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,mBACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BAGrB69B,GAAc95B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE9gB,IAAI,GACJC,QAAS,kBAAM2/B,GAAeC,IAC9BnlC,KAAK,MAHP,cAKGmlC,GACAp8B,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,mBACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qDCnC5B+B,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA9BQ,SAAAzI,GAAgB,IAAdwkC,EAAcxkC,EAAdwkC,SAAcj7B,EACbC,mBAAS,CAAC69B,IAAK7C,EAAS8C,WAAa,YADxB79B,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC9BgI,EAD8B9H,EAAA,GACxB89B,EADwB99B,EAAA,GAGnCY,oBAAU,WACNm6B,EAAS8C,UAAY/1B,EAAK81B,IAC1B7qC,QAAQC,IAAI,eAAgB8U,EAAK81B,MAClC,CAAC91B,IAN+B,IAAAvB,EAQPxG,wBAASvO,GARFgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAQ9Bw3B,EAR8Bv3B,EAAA,GAQrBw3B,EARqBx3B,EAAA,GASnC,OACIxF,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMwgC,EAAWD,OAAUvsC,EAAY,SAChDuU,MAAO,CAACkJ,gBAAiBnH,EAAK81B,KAAM3gC,UAAU,cACnC,SAAZ8gC,GACA/8B,EAAAtK,EAAA4G,cAAC2gC,EAAA,EAAD,CAAc/uB,MAAOpH,EAAM1G,SAAU08B,uECiSjC9+B,cAjBS,SAACC,EAAO1C,GAC9B,MAAO,CACHygC,iBAAkB/9B,EAAMg+B,QAAQD,iBAChCvD,eAAgBx6B,EAAMy6B,QAAQC,gBAAgBp9B,EAAMw+B,SAAS7oC,IAC7D+c,gBAAiBhQ,EAAMM,UAAU0P,kBAIZ,SAACzP,EAAUjD,GACpC,MAAO,CACHggC,kBAAmB,SAACrqC,EAAI8zB,GAAL,OAAaxmB,EAAS+8B,aAAkBrqC,EAAI8zB,KAC/DsW,sBAAuB,SAAAt6B,GAAC,OAAIxC,EAAS88B,aAAsBt6B,KAC3D83B,QAAS,SAAA93B,GAAC,OAAIxC,EACV0+B,aAAc3hC,EAAMw+B,SAAS7oC,GAAI8P,OAI5BhD,CA1RE,SAAAzI,GAcX,IAbFwjC,EAaExjC,EAbFwjC,QACAC,EAYEzjC,EAZFyjC,SACAC,EAWE1jC,EAXF0jC,YACAC,EAUE3jC,EAVF2jC,SACAJ,EASEvjC,EATFujC,QACAiB,EAQExkC,EARFwkC,SACAoD,EAOE5nC,EAPF4nC,WACA7B,EAME/lC,EANF+lC,sBACAC,EAKEhmC,EALFgmC,kBACA1X,EAIEtuB,EAJFsuB,aACA4U,EAGEljC,EAHFkjC,eACAxqB,EAEE1Y,EAFF0Y,gBACA+tB,EACEzmC,EADFymC,iBAEIn7B,EAAMC,sBAAOtQ,GACb4sC,EAAat8B,sBAAOtQ,GAEnB6sC,EAAkBC,YAAkB,CAACpE,WAAU96B,YAAa27B,EAAUiC,qBAAtEqB,eAJHzsB,EAKmDC,YAAe,CAAChQ,IAAKu8B,IAAnEtsB,EALLF,EAKKE,cAAeC,EALpBH,EAKoBG,YAAaC,EALjCJ,EAKiCI,eAC7BusB,EAAiBz8B,iBAAOiQ,GAN5BjS,EAOgCC,mBAASg7B,EAAS0C,UAPlDz9B,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAOGg7B,EAPH96B,EAAA,GAOeq9B,EAPfr9B,EAAA,GAAAuG,EAQgCxG,oBAAS,GARzCyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAQG62B,EARH52B,EAAA,GAQe22B,EARf32B,EAAA,GAAA2zB,EAUkFC,YAAiB,CACjG97B,gBAAiBy8B,EAASz8B,gBAC1B+7B,kBAAmBxV,EACnBhjB,MACAm4B,WACAC,cACAx6B,QAASs7B,EACTjB,UACAC,UACAG,WACAT,mBAVGa,EAVLH,EAUKG,YAAaC,EAVlBJ,EAUkBI,eAAgBlvB,EAVlC8uB,EAUkC9uB,YAAaN,EAV/CovB,EAU+CpvB,UAAWhF,GAV1Do0B,EAU0Dp0B,MAAO00B,GAVjEN,EAUiEM,cAa/D+D,GAAY18B,oBC7Da,SAAAvL,GAAoC,IAAlCsL,EAAkCtL,EAAlCsL,IAAe5J,GAAmB1B,EAA7BwkC,SAA6BxkC,EAAnB0B,MAAmB6H,GAAAvJ,EAAbujC,QACpB/5B,mBAAS9H,IADwB+H,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC5D2+B,EAD4Dz+B,EAAA,GACjD0+B,EADiD1+B,EAAA,GAEjEY,oBAAU,WAEN,OADAiB,EAAI4I,QAAQL,iBAAiB,aAAcu0B,EAAS,CAACC,SAAS,IACvD,WACC/8B,GAAOA,EAAI4I,SACX5I,EAAI4I,QAAQJ,oBAAoB,aAAcs0B,EAAS,CAACC,SAAS,MAG1E,CAACH,EAAWC,IAEf,IAAMC,EAAUt+B,sBAAY,SAACrG,GAEzB,IAAI,IAAIwd,MAAOC,UAAYtN,OAAO00B,eAAiB,IAE/C,OAAO,EAEX,IAAKh9B,IAAQA,EAAI4I,QACb,OAAO,EAGXzQ,EAAE+J,kBACF/J,EAAEqK,iBAX6B,IAAAy6B,EAaDj9B,EAAI4I,QAA7Bic,EAb0BoY,EAa1BpY,UAAWD,EAbeqY,EAafrY,WAEXxS,EAAkBja,EAAlBia,OAAQC,EAAUla,EAAVka,OAETlS,EAAIykB,EAAaxS,EACjBjM,EAAI0e,EAAYxS,EAEpB,IAAKjc,EACD,OAAO,EAUX,MALAA,EAAO,CACHmU,MAAOlU,KAAKyY,IAAI8tB,EAAUryB,MAAOjC,OAAO40B,WAHnC,GAIL5yB,OAAQjU,KAAKyY,IAAI8tB,EAAUtyB,OAAQhC,OAAO60B,YAHrC,KAMA5yB,MAAQ,KAAOnU,EAAKkU,OAAS,KAAtC,CAGA,IAAI8yB,EAAQ,CAAC7yB,MAAO6H,EAAShc,EAAKmU,MAAOD,OAAQ+H,EAASjc,EAAKkU,QAI/D,OAHAuyB,EAAaO,GAEbp9B,EAAI4I,QAAQ0qB,SAASnzB,EAAEgG,IAChB,IACT,CACEy2B,EACAC,IDUJQ,CAAkB,CAACnE,WAAUl5B,IAAK28B,GAAWvmC,KAAMqiC,EAAaR,QAASS,IAEzE35B,oBAAU,WAEN,OADAiB,EAAI4I,QAAQL,iBAAiB,aAAcu0B,IACpC,WACC98B,EAAI4I,SACJ5I,EAAI4I,QAAQJ,oBAAoB,aAAcs0B,MAGvD,IAEH,IAAMA,GAAU,SAAC3kC,GACbA,EAAE+J,mBAGAo7B,GAAsB9+B,sBAAY,WACpC,IAAI+L,EAAQjC,OAAO40B,WACf5yB,EAAShC,OAAO60B,YAChBjE,EAAS3uB,MAAQ,IAAMjC,OAAO40B,YAC9BhE,EAAS5uB,OAAS,IAAMhC,OAAO60B,cAC/B5yB,EAAQ,IACRD,EAAQ,KAEZ4uB,EAAS3uB,MAAQA,EACjB2uB,EAAS5uB,OAASA,EAClBouB,EAAe,CACXv4B,EAAGoK,EACHpE,EAAGmE,IAEPowB,EAAkBxB,EAAS7oC,GAAI,CAAC8P,EAAG,EAAGgG,EAAG,KAC1C,CAAC+yB,EAAUR,IAER6E,GAAgBC,YAAeF,IAEjCG,GAAcx9B,iBAAOk4B,GACzBp5B,oBAAU,WACN0+B,GAAY70B,QAAUuvB,GACvB,CAACA,IAEJp5B,oBAAU,WACN,OAAO,kBACIs5B,EAASzvB,QAAQswB,EAAS7oC,IACjC+nC,EAAYqF,GAAY70B,QAAQ3H,OAAO,SAAAd,GAAC,OAAIA,IAAM+4B,OAEvD,IACHn6B,oBAAU,WACFmR,IACAwsB,EAAe9zB,QAAUsH,IAE9B,CAACA,IAEJ,IAAMwtB,GAAel/B,sBAAY,SAACrG,GAC9BA,EAAE+J,kBACF,IAAIq4B,EAAUD,EAAWpB,GACrByE,EAAcrB,EAAWr7B,OAAO,SAAAd,GAAC,OAAIA,IAAM+4B,IAAaqB,EAAQ9mC,SAAS0M,KAC7Es6B,EAAsBkD,IACvB,CAACrB,IAEEsB,GAAgBp/B,sBAAY,WAC9B06B,EAAS0E,iBACV,CAAC1E,IAOE2E,IALiBr/B,sBAAY,WAAM,IAAAs/B,EACzBpB,EAAe9zB,QAAtBzI,EADgC29B,EAChC39B,EAAEgG,EAD8B23B,EAC9B33B,EACP+yB,EAAS6E,eAAe59B,EAAEgG,IAC3B,CAAC+yB,IAEgB16B,sBAAY,WAAM,IAAAw/B,EACtBtB,EAAe9zB,QAAtBzI,EAD6B69B,EAC7B79B,EAAEgG,EAD2B63B,EAC3B73B,EACP+yB,EAAS+E,cAAStuC,OAAWA,EAAWwQ,EAAEgG,IAC3C,CAAC+yB,KAEEgF,GAAsB1/B,sBAAY,WAAM,IAAA2/B,EAC9BzB,EAAe9zB,QAAtBzI,EADqCg+B,EACrCh+B,EAAEgG,EADmCg4B,EACnCh4B,EACP+yB,EAASkF,sBAAiBzuC,OAAWA,EAAWwQ,EAAEgG,IACnD,CAAC+yB,IAEEmF,GAAe7/B,sBAAY,WAAM,IAAA8/B,EACvB5B,EAAe9zB,QAAtBzI,EAD8Bm+B,EAC9Bn+B,EAAEgG,EAD4Bm4B,EAC5Bn4B,EACP+yB,EAASqF,eAAU5uC,OAAWA,EAAWwQ,EAAGgG,IAC7C,CAAC+yB,IAEEsF,GAAwBhgC,sBAAY,WAGtC,IAFA,IAAIigC,EAAiBvF,EAASz8B,gBAAgBW,MAAMy6B,QAAQ6G,iBAE5DC,EAAA,EAAAC,EADU7vC,OAAOsE,KAAKorC,GACtBE,EAAAC,EAAAluC,OAAAiuC,IAAoB,CAAf,IAAItuC,EAAEuuC,EAAAD,GACHE,EAAO3F,EAASz8B,gBAAgBqiC,aAAazuC,GAC7CwuC,GACAA,EAAKE,aAAa,2BAA2B,KAGtD,CAAC7F,IAEAP,GAAM5pC,OAAAsa,EAAA,EAAAta,CAAA,GAAQmV,IACdu0B,GAAeA,EAAYt4B,EAAI,GAAKs4B,EAAYtyB,EAAK,IACrDwyB,GAAOpuB,MAAQkuB,EAAYt4B,EAC3Bw4B,GAAOruB,OAASmuB,EAAYtyB,GAG5ByxB,IACAe,GAAO1vB,IAAM5S,KAAKwY,IAAIvG,OAAO60B,YAAc,IAAK9mC,KAAKyY,IAAI,EAAG8oB,EAAezxB,IAC3EwyB,GAAO5vB,KAAO6uB,EAAez3B,GAEjC,IAAI6+B,GAASrG,GAAOqG,OAAS,IAC7BrG,GAAOqG,OAASA,GAEhB,IAAI5jC,GAAY,uBACX69B,GAAcsC,IACfngC,IAAa,wBAEb+8B,EAASplC,QAAQmmC,KAAcf,EAASznC,OAAS,IACjD0K,IAAa,eAGjB,IAAM6jC,GAAUzgC,sBAAY,WACxB0gC,YAAiBhG,EAASz8B,gBAAiBy8B,IAC5C,CAACA,IAEEiG,GAAc3gC,sBAAY,WAC5B06B,EAASkG,mBAAmBlvB,EAAY/P,EAAG+P,EAAY/J,IACxD,CAAC+J,IAEAmvB,GAAYnG,EAAS97B,MAAMy6B,QAAQ6G,iBACnCxvB,GAAWngB,OAAOsE,KAAKgsC,IAAWp+B,OAAO,SAAAd,GAAC,OAC1Ck/B,GAAUl/B,KAGd,OADAw4B,GAAOvrB,gBAAkBA,EAErBjO,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAAAxD,GACLjH,QAAQC,IAAI,sBAEhBqY,YAAaA,EACbN,UAAWA,EACX9N,UAAWA,GAAW8I,MAAOy0B,GAAQ34B,IAAKA,GAC1Cb,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOygC,GAAc0G,IAAInnC,IACtCiD,UAAU,kBACZ+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOygC,GAAc2G,IAAIpnC,IACtCiD,UAAU,mBACZ+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOygC,GAAc4G,IAAIrnC,IACtCiD,UAAU,qBACZ+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOygC,GAAc6G,IAAItnC,IACtCiD,UAAU,sBACZ+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS4hC,GAAeniC,UAAU,oBACpC89B,EAASsB,QAAQU,KAAK,GACvB/7B,EAAAtK,EAAA4G,cAACikC,EAAD,CAAoBxG,SAAUA,IAC9B/5B,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAAArR,GAAC,OAAIA,EAAE+J,mBACpBvG,QAAS+hC,GACTtiC,UAAU,cAHZ,MAKF+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKu8B,EACLtsB,cAAeA,EACfzG,YAAa,SAACrR,GACVA,EAAE+J,kBACFiO,OAAexgB,IAEnByL,UAAU,qBACV+D,EAAAtK,EAAA4G,cAACkkC,EAAA,EAAD,CAAavkC,UAAU,eAAe8U,YAAaA,EAAc,CAC7D/P,EAAG+P,EAAY/P,EACfgG,EAAG+J,EAAY/J,QAAKxW,GACrBuf,GAASxe,OAAS,GAClByO,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAa21B,IADf,uBAIAjwB,GAASxe,OAAS,GAAKyO,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAag1B,IADf,0BAGEr/B,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAI,4BAElCkS,GAASxe,OAAS,GAClByO,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAagzB,GADf,gBAIDr9B,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAao0B,IADf,kCAIAz+B,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAaq0B,IADf,aAIA1+B,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAa60B,IADf,cAIAl/B,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAay1B,IADf,sBAIA9/B,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CACEp2B,YAAa00B,IADf,uBAKF/+B,EAAAtK,EAAA4G,cAACokC,EAAA,EAAD,CAAgB3G,SAAUA,EAAU37B,YAAa27B,GAC/C/5B,EAAAtK,EAAA4G,cAACqkC,EAAD,CACExE,cAAeA,EACfC,WAAYA,EACZC,cAAeA,EACfvC,WAAYA,EACZC,SAAUA,KAEd/5B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAACskC,EAAD,CACEtjC,gBAAiBy8B,EAASz8B,gBAC1By8B,SAAUA,IACZ/5B,EAAAtK,EAAA4G,cAACukC,EAAA,EAAD,CACEzE,WAAYA,EACZoB,UAAWA,GACX1D,WAAYA,EACZC,SAAUA,IACZ/5B,EAAAtK,EAAA4G,cAACwkC,EAAD,CACExjC,gBAAiBy8B,EAASz8B,gBAC1By8B,SAAUA,giCEjOX/7B,gBAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH4hC,WAAYl/B,EAAM26B,QAAQ+C,mBAC1BtB,SAAUp8B,EAAM26B,QAAQe,iBACxBoH,kBAAmB9iC,EAAM26B,QAAQmI,oBAKZ,SAACviC,GAC1B,MAAO,IAIMR,CAtDI,SAAAzI,GAA6D,IAAA20B,EAA3DiT,EAA2D5nC,EAA3D4nC,WAAY9C,EAA+C9kC,EAA/C8kC,SAAUxW,EAAqCtuB,EAArCsuB,aAAckd,EAAuBxrC,EAAvBwrC,kBAC/C7H,EAAWp4B,iBAAO,IADoDkgC,EAEnCC,cAAlClI,EAFqEiI,EAErEjI,QAASC,EAF4DgI,EAE5DhI,SAAUC,EAFkD+H,EAElD/H,YAEtBiI,EAAS,GAJ+D/W,EAAAgX,EAKvDhE,GALuD,IAK5E,IAAAhT,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAiC,KACxB0iC,EADwBnR,EAAAtxB,MACxByiC,QACD8B,EAAW7oC,SAAS+mC,EAAQj9B,cAE5B8iC,EAAO5vC,KAAK+pC,EAAQj9B,cATgD,MAAA3M,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAY5E,MAAO,CACHohC,EAASvpC,IACL,SAAA8nC,GAAO,OACH54B,EAAAtK,EAAA4G,cAAC8kC,EAAD,CACExI,QAASA,EACTM,SAAUA,EACVH,QAASA,EACTlV,aAAcA,EACdiV,QAAS,kBAAM,GACfE,SAAUA,EACVC,YAAaA,MAEvBkE,EACKr7B,OAAO,SAAAd,GAAC,OAAK+/B,GAAqBA,EAAkBzhC,SAAW0B,IAC/Dc,OACL,SAAAd,GAAC,OAAKkgC,EAAO5sC,SAAS0M,KAAIlQ,IACtB,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAC+kC,EAAD,CACE9kC,IAAKyE,EAAE9P,GACP6nC,QAASA,EACTC,SAAUA,EACVC,YAAaA,EACbC,SAAUA,EACViE,WAAYA,EACZpD,SAAU/4B,EACV6iB,aAAcA,8LCUlB7lB,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA9CO,SAAAzI,GAA+C,IAA7C+J,EAA6C/J,EAA7C+J,OAAQhC,EAAqC/H,EAArC+H,gBAAiBgkC,EAAoB/rC,EAApB+rC,eAAoBxiC,EACnCC,mBAAS,IAD0BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC1DkuB,EAD0DhuB,EAAA,GACjDuiC,EADiDviC,EAAA,GAGjEY,oBAAU,WACF0hC,EAAe/vC,OAAS,EACxBgwC,EAAWD,GAEXE,YAAiBliC,GAAQ5O,KACrB,SAAA+V,GAAC,OAAI86B,EAAW96B,MAEzB,CAAC86B,EAAYjiC,EAAQgiC,IAExB,IAAMG,EAAapiC,sBAAW,eAAAxJ,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,EAAOoD,EAAGo0B,GAAV,IAAAsU,EAAA9pC,EAAAyM,EAAA,OAAA5O,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAC3ByC,EAAE+J,kBACE2+B,EAAK/hC,YAAUrC,EAAiBgC,OAAQ9O,OAAWA,GAAW,GAFvC6F,EAAAE,KAAA,EAGV4E,IAAK2K,QAAQsnB,EAAOuU,YAHV,cAGvB/pC,EAHuBvB,EAAAM,KAIvB0N,EAAc/G,EAAgB4e,OAAOxY,MAJdrN,EAAAE,KAAA,EAKrBmrC,EAAGE,SAAShqC,EAAM0F,EAAgBY,OAAQmG,GAAa,GAAM,GALxC,OAOvBq9B,EAAGh+B,OAASg+B,EAAGh+B,MAAMm+B,oBACrBH,EAAGh+B,MAAMm+B,qBARc,wBAAAxrC,EAAA2B,SAAApC,MAAD,gBAAAqC,EAAAC,GAAA,OAAArC,EAAAsC,MAAArI,KAAA6E,YAAA,GAU3B,CAAC2K,EAAQhC,IAEZ,OACI0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZ+wB,EAAQl8B,IACL,SAAAs8B,GAAM,OACFptB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAOyoC,EAAWzoC,EAAGo0B,IAC9BnxB,UAAU,iBACTmxB,EAAOj9B,MAAMoD,aCMnByK,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CArCM,SAAAzI,GAA2D,IAAzDoN,EAAyDpN,EAAzDoN,WAAYrD,EAA6C/J,EAA7C+J,OAAQhC,EAAqC/H,EAArC+H,gBAAiBgkC,EAAoB/rC,EAApB+rC,eAAoBxiC,EACtCC,mBAAmC,IAA1BuiC,EAAe/vC,QADcyN,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACrEgjC,EADqE9iC,EAAA,GACxD+iC,EADwD/iC,EAAA,GAE5E,OACIgB,EAAAtK,EAAA4G,cAAA,OACEL,UAAW0G,EAAa,yBAA2B,iBACnD3C,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,SACV+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GACNA,EAAE+J,kBACFg/B,GAAgBD,IAEpB7lC,UAAU,mBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAW6lC,EAAc,cAAgB,gBAEhD9hC,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMmD,YAAUrC,EAAiBgC,IAC1CrD,UAAU,eACT1I,YAAK+L,KAGRwiC,EAEsE,GAFxD9hC,EAAAtK,EAAA4G,cAAC0lC,EAAD,CACEV,eAAgBA,EAChBhkC,gBAAiBA,EAAiBgC,OAAQA,UCEvDtB,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA3BO,SAAAzI,GAAgD,IAA9CoJ,EAA8CpJ,EAA9CoJ,QAASrB,EAAqC/H,EAArC+H,gBAAiBkD,EAAoBjL,EAApBiL,eAC9C,OAAuB,IAAnB7B,EAAQpN,OACD,GAGPyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZrM,OAAOsE,KAAKyK,GAAS7N,IAClB,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAAC2lC,EAAD,CACE1lC,IAAKyE,EACL2B,WAAY3B,IAAMR,EAClBlB,OAAQ0B,EACRsgC,eAAgB3iC,EAAQqC,GACxB1D,gBAAiBA,2BCEtBU,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhBQ,SAACzC,GACpB,OACIyE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2DC2CR+B,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzCQ,SAAAzI,GAAmC,IAAjC2sC,EAAiC3sC,EAAjC2sC,WAAY5kC,EAAqB/H,EAArB+H,gBAC5B6kC,EAAiB7kC,EAAjB6kC,cACDnP,EAAUlyB,iBAAO,GAFiChC,EAG5BC,mBAASojC,EAAcC,eAHKpjC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGzCujC,GAHyCrjC,EAAA,GAAAA,EAAA,IAAAuG,EAItBxG,oBAAS,GAJayG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAIjD+8B,EAJiD98B,EAAA,GAItC+8B,EAJsC/8B,EAAA,GAyBtD,OAnBA5F,oBAAU,WACN,GAAKsiC,EAAL,CAGAlP,EAAQvpB,UACR84B,GAAa,GACb,IAAIxO,EAAWf,EAAQvpB,QACvB8M,WAAW,WACHwd,IAAaf,EAAQvpB,SAGzBnM,EAAgBklC,gBAAgB,CAACN,IAAa,EAAMC,GAAe,GAAO,GAAOzxC,KAC7E,SAAAsQ,GACIuhC,GAAa,GACbF,EAAUF,EAAcC,cAAc/N,WAtB1C,OAyBT,CAACgO,EAAWH,EAAYK,IAEvBD,EACQtiC,EAAAtK,EAAA4G,cAACmmC,EAAA,EAAD,CAAoBC,KAAK,eAAet3B,MAAO,MAEnDpL,EAAAtK,EAAA4G,cAACqmC,EAAA,EAAD,CAAuBj/B,MAAOy+B,EAAe7kC,gBAAiBA,MCFpE4P,EAAS,IAAI1J,IA6Kbo/B,EAAM,SAAArtC,GAAoH,IAAlHstC,EAAkHttC,EAAlHstC,UAAWlvC,EAAuG4B,EAAvG5B,EAAGmvC,EAAoGvtC,EAApGutC,OAAQC,EAA4FxtC,EAA5FwtC,aAAc7tC,EAA8EK,EAA9EL,IAAK8tC,EAAyEztC,EAAzEytC,WAAYlpC,EAA6DvE,EAA7DuE,KAAMwD,EAAuD/H,EAAvD+H,gBAAiBqF,EAAsCpN,EAAtCoN,WAAYsgC,EAA0B1tC,EAA1B0tC,qBAC9FpiC,EAAMC,sBAAOtQ,GAD2Go5B,EAEhG7qB,wBAASvO,GAFuFq5B,EAAAj6B,OAAAqP,EAAA,EAAArP,CAAAg6B,EAAA,GAEvHsZ,EAFuHrZ,EAAA,GAE9GsZ,EAF8GtZ,EAAA,GAI5HtjB,YAAU,CACN7I,gBAAiBslC,EACjBI,SAAUviC,EACV8B,WAAYA,EACZ0gC,OAAQ,EACRC,iBAAiB,IAGrB,IAAM9mC,EAAU6C,sBAAW,eAAAxJ,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,EAAOoD,GAAP,IAAA05B,EAAA6Q,EAAA1hC,EAAAoK,EAAA,OAAAxW,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACxB4sC,GAAW,IACPnqC,EAAEgV,QAFkB,CAAA3X,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,SAGbwoC,EAAa7tC,IAHA,UAMZ,MAARA,EANoB,CAAAmB,EAAAE,KAAA,eAQhBm8B,EAAIp1B,EAAgBkmC,cACpBD,EAAS7Q,EAAE+Q,eAAe,MAAO,EAAG,KACpC5hC,EAAI0hC,EAAOrsC,KAAKC,MAAMD,KAAKwsC,SAAWH,EAAOhyC,SACjD+L,EAAgBklC,gBAAgB,CAAC3gC,EAAEjJ,QAXfvC,EAAAkE,OAAA,qBAepBsU,MAAM80B,QAAQ7pC,GAfM,CAAAzD,EAAAE,KAAA,gBAgBhB0V,EAAI/U,KAAKC,MAAMD,KAAKwsC,SAAW5pC,EAAKvI,QAhBpB8E,EAAAE,KAAA,GAiBd+G,EAAgBklC,gBAAgB1oC,EAAKmS,IAjBvB,QAAA5V,EAAAE,KAAA,wBAAAF,EAAAE,KAAA,GAmBd+G,EAAgBklC,gBAAgB,CAAC1oC,IAnBnB,QAqBX,WAATA,GACAwD,EAAgBY,OAAOZ,EAAgBY,OAAO3M,OAAS,GAAGqyC,OAE9DT,GAAW,GAxBa,yBAAA9sC,EAAA2B,SAAApC,MAAD,gBAAAqC,GAAA,OAAApC,EAAAsC,MAAArI,KAAA6E,YAAA,GAyBxB,CAACwuC,EAAYrpC,IAWZmC,EAAY0G,EAAa,0BAA4B,iBAErDugC,IACAjnC,GAAa,YAGjB,IAAI8I,EAAQ,GAWZ,OARI89B,IACA99B,EAAMkJ,gBAAkB,OAAUta,EAAI,EAAK,IAAM,gBAGjDmvC,IACA7mC,GAAa,SAIb+D,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAY5nC,UAAU,WAAWwC,QAASqlC,KAAkBC,IAAK7uC,GAC/D8K,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPlE,IAAKA,EACLyC,WAAW,EACXF,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBR,YAjCY,WAChB,GAAIgM,MAAM80B,QAAQ7pC,GAAO,CACrB,IAAImS,EAAI/U,KAAKC,MAAMD,KAAKwsC,SAAW5pC,EAAKvI,QACxC0xC,EAAqBnpC,EAAKmS,SAE1Bg3B,EAAqB,CAACnpC,KA6BtB0C,QAASA,EACTP,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,aACT/G,MAgCA8I,gBAzBS,SAACC,EAAO1C,GAC9B,MAAO,CACH0S,gBAAiBhQ,EAAMM,UAAU0P,gBACjC+rB,gBAAiB/7B,EAAM26B,QAAQoB,gBAC/BkI,WAAYjkC,EAAM+lC,SAASC,mBAE3BvgC,MAAOnI,EAAM+B,gBAAgB4mC,mBAC7BC,kBAAmBlmC,EAAM+lC,SAASG,oBAIb,SAAC3lC,GAC1B,MAAO,CACH4lC,cAAe,SAAApjC,GAAC,OAAIxC,EAAS6lC,aAAsBrjC,KACnDsjC,iBAAkB,SAAAtjC,GAAC,OAAIxC,EAAS8lC,aAAiBtjC,KACjDujC,yBAA0B,SAAAvjC,GAAC,OAAIxC,EAAS+lC,YAAyBvjC,KACjEiiC,qBAAsB,SAAAjiC,GAAC,OAAIxC,EAASykC,aAAqBjiC,KACzDwjC,sBAAuB,SAAC/lC,GAAD,OAAaD,EAASgmC,aAAsB/lC,KACnEgmC,gBAAiB,SAAAC,GAAC,OAAIlmC,EAASimC,aAAgBC,KAC/CC,mBAAoB,SAAAD,GAAC,OAAIlmC,EAASmmC,aAAmBD,KACrDE,iBAAkB,SAAAF,GAAC,OAAIlmC,EAASqmC,aAA0BH,KAC1DI,eAAgB,SAAAJ,GAAC,OAAIlmC,EAASsmC,aAAeJ,OAIpC1mC,CAzRY,SAACzC,GACxB,IAAMsF,EAAMC,sBAAOtQ,GADesO,EAEIC,wBAASvO,GAFbwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAE3BimC,EAF2B/lC,EAAA,GAEdgmC,EAFchmC,EAAA,GAAAuG,EAGUxG,wBAASvO,GAHnBgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAG3B/E,EAH2BgF,EAAA,GAGXrB,EAHWqB,EAAA,GAI5Bw9B,EAAaliC,sBAAOtQ,GAJQmV,EAKV5G,mBAASkmC,KALCr/B,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAK3B7L,EAL2B8L,EAAA,GAKrBnE,EALqBmE,EAAA,GAAAoQ,EAMJjX,mBAAS,IANLkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAM3BrX,EAN2BsX,EAAA,GAMlBivB,EANkBjvB,EAAA,GAAAuT,EAQJzqB,mBAAS,GARL0qB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAQ3B2b,EAR2B1b,EAAA,GAAA2b,GAAA3b,EAAA,GAUR4b,YAAY,CAClC5jC,UACAyjC,aACAprC,OACA6E,UACArB,gBAAiB/B,EAAM+B,gBACvB4kC,WAAY3mC,EAAM2mC,WAClBkC,cAAe7oC,EAAM6oC,cACrBW,cACAC,iBACAxkC,iBACA2D,oBACAtD,SAZGT,EAV2BglC,EAU3BhlC,SAAUklC,EAViBF,EAUjBE,MAejB1lC,oBAAU,WACNrE,EAAMipC,sBAAsB3jC,IAC7B,IAEH,IAAM0kC,EAAa,WACfhqC,EAAMgpC,yBAAyBiB,KAC/BjqC,EAAM+oC,kBAAiB,IAGrBmB,EAAgBpmC,sBAAY,WAC9B9D,EAAM+B,gBAAgBmoC,gBACtBlqC,EAAM+B,gBAAgB6e,YAAY5gB,EAAM+B,gBAAgBY,OAAO3M,OAAS,GACxEgK,EAAM+B,gBAAgBY,OAAO3C,EAAM+B,gBAAgBY,OAAO3M,OAAS,GAAG8jC,gBAAiB,GAExF,CAAC95B,EAAM+B,kBAEJooC,EAAWrmC,sBAAY,WACzB9D,EAAM+B,gBAAgBqoC,qBACtBpqC,EAAM+B,gBAAgB6e,YAAY5gB,EAAM+B,gBAAgBY,OAAO3M,OAAS,GACxEgK,EAAM+B,gBAAgBY,OAAO3C,EAAM+B,gBAAgBY,OAAO3M,OAAS,GAAG8jC,gBAAiB,GAExF,CAAC95B,EAAM+B,kBAeJylC,GAbU1jC,sBAAY,WACxB9D,EAAM+B,gBAAgBsoC,yBACtBrqC,EAAM+B,gBAAgB6e,YAAY5gB,EAAM+B,gBAAgBY,OAAO3M,OAAS,IAEzE,CAACgK,EAAM+B,kBAGY+B,sBAAY,WAC9B9D,EAAM+B,gBAAgBuoC,4BACtBtqC,EAAM+B,gBAAgB6e,YAAY5gB,EAAM+B,gBAAgBY,OAAO3M,OAAS,IAEzE,CAACgK,EAAM+B,kBAEW+B,sBAAY,SAACnK,GAC1BA,GACAqG,EAAM6oC,cAAclvC,GAExBqG,EAAMkpC,iBAAgB,GACtBlpC,EAAMopC,mBAAmB,WAC1B,KAECmB,EAAkB,uBAClBC,EAAgB,4BAChBxqC,EAAM4oC,mBAAsB5oC,EAAMyqC,wBAA0BzqC,EAAMyqC,uBAAuBlkC,OACzF,SAAAd,GAAC,OAAIA,GAAKA,EAAEiT,QAAO1iB,OAAS,KAC5Bu0C,GAAmB,QACnBC,GAAiB,SAGrB,IAAMhkC,EAAY1C,sBAAY,SAACrG,GACb,QAAVA,EAAEuD,MACFvD,EAAEqK,iBACF0/B,MAEL,IACG14B,EAAchL,sBAAY,WAC5B9D,EAAMqpC,sBAAiBp0C,IACxB,IAECsyC,GAAS,EACT51B,EAAO+4B,cAAc1qC,EAAM0S,iBAAmB,MAC9C60B,GAAS,GAEb,IAAIoD,EAAiB,gBAChB3qC,EAAMy+B,iBAAwC,KAArBz+B,EAAM2mC,aAChCgE,GAAkB,eAGsB,IAAxC3qC,EAAM+B,gBAAgBY,OAAO3M,QAAqC,KAArBgK,EAAM2mC,aACnDgE,GAAkB,cAGtB,IAAIC,EAAarsC,EACLyB,EAAM+B,gBAAgB4mC,mBAIlC,OAHI3oC,EAAMy+B,kBACNmM,EAAa,IAGbnmC,EAAAtK,EAAA4G,cAAA,OAAK+N,YAAaA,EAAapO,UAAWiqC,GACxClmC,EAAAtK,EAAA4G,cAAC8pC,EAAD,MACApmC,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAAS4nC,KAAgBpqC,UAAU,oBAC7C+D,EAAAtK,EAAA4G,cAAA,SACEuE,IAAKA,EACLylC,WAAW,QACXvkC,UAAWA,EACX9F,UAAU,eACVkG,KAAK,OACLvJ,MAAO2C,EAAM2mC,WACb7hC,YAAY,gBACZD,SAAUA,IACZJ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAYO,QAAS,WACP,KAArBjB,EAAM2mC,WACF3mC,EAAM8mB,MACN9mB,EAAM8mB,OAGVijB,MANR,MAUFtlC,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKmiC,EACL/mC,UAAW6pC,GACW,KAArBvqC,EAAM2mC,WACNliC,EAAAtK,EAAA4G,cAACiqC,EAAD,CAAgBjpC,gBAAiB/B,EAAM+B,gBAAiB4kC,WAAY6C,IACpEn1C,OAAOsE,KAAKiyC,GAAYr1C,IACpB,SAACoE,EAAIvB,GAAL,OACAqM,EAAAtK,EAAA4G,cAACkqC,EAAD,CACEvD,qBAAsB1nC,EAAM0nC,qBAC5BJ,eAAuBryC,IAAZ20C,GAAyBxxC,EAAIwxC,EACxCxxC,EAAGA,EACH4I,IAAKrH,EACL4tC,OAAQA,EACRE,WAAYA,EACZuC,WAAYA,EACZxC,aAAcA,EACdzlC,gBAAiB/B,EAAM+B,gBACvBqF,WAAYzN,IAAQ6vC,EACpB7vC,IAAKA,EACL4E,KAAMA,EAAK5E,SAQlBqG,EAAMy+B,mBAAqBz+B,EAAM2mC,YAAmC,KAArB3mC,EAAM2mC,aACtDliC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAW8pC,GACd/lC,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAASgoC,KAA6B1C,IAAI,SACpD/jC,EAAAtK,EAAA4G,cAAA,OAAKE,QAASkpC,EAAUzpC,UAAU,0BAA0B4B,IAAI,qBAElEmC,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAASgoC,KAA6B1C,IAAI,SACpD/jC,EAAAtK,EAAA4G,cAAA,OAAKE,QAASipC,EAAexpC,UAAU,0BAA0B4B,IAAI,yBAEvEmC,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAASgoC,KAA6B1C,IAAI,SACpD/jC,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMjB,EAAMupC,gBAAe,IAAO7oC,UAAU,2BAA2B4B,IAAI,oKC9LpGm1B,EAAQ,EAwGGh1B,cAdS,SAACC,EAAO1C,GAC5B,IAAImI,EAAQnI,EAAM+B,gBAAgB4mC,mBACpC,MAAO,CACHxgC,QACAioB,WAAYjoB,GAASA,EAAM2T,QAAU3T,EAAM2T,OAAOI,UAI7B,SAACjZ,GAC1B,MAAO,CACH4lC,cAAe,SAAApjC,GAAC,OAAIxC,EAAS6lC,aAAsBrjC,OAI1ChD,CAvGO,SAAAzI,GAMhB,IALF6uC,EAKE7uC,EALF6uC,cACA1gC,EAIEnO,EAJFmO,MACA2T,EAGE9hB,EAHF8hB,OACA/Z,EAEE/H,EAFF+H,gBACAquB,EACEp2B,EADFo2B,WAEM6R,EAAY18B,sBAAOtQ,GACrBk2C,EAAgB5lC,iBAAO4lC,GAFzB5nC,EAG0BC,mBAAS,IAHnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGGiZ,EAHH/Y,EAAA,GAGYw0B,EAHZx0B,EAAA,GAIFY,oBAAU,WACN,IAAI3K,OAAiBzE,EAEjB4G,EAAa,GACZigB,EAAO3lB,WAAc2lB,EAAOthB,SAA8B,KAAnBshB,EAAOthB,QAC/Cd,EAAkBoiB,EAAO3lB,UAAY,CAACoE,UAAWuhB,EAAO3lB,WACxD,CAACqE,QAASshB,EAAOthB,SAEjBqB,EAAaigB,EAAOvd,KAAK,GAG7B,IAAIi6B,IAAaf,EACjBv+B,YACI,GAAI2C,EAAYigB,EAAOxiB,QAAS,MAAO,GAAG,EAAOI,GAChDvE,KAFL,eAAAmF,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAGQ,SAAAg1B,EAAM94B,GAAN,IAAA80C,EAAA5uB,EAAA,OAAAtiB,EAAAC,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,UACQw9B,IAAaf,EADrB,CAAAlI,EAAAv0B,KAAA,eAAAu0B,EAAAvwB,OAAA,oBAE2B,IAAnB1I,EAAQN,OAFhB,CAAAu5B,EAAAv0B,KAAA,eAGQ9B,YACI,GAAI2C,EAAYigB,EAAOxiB,QAAS,MAAO,GAAG,EAAOI,GAChDvE,KAFL,eAAA26B,EAAAz7B,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAEU,SAAAC,EAAO/D,GAAP,IAAA80C,EAAA5uB,EAAA,OAAAtiB,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACqB,IAAnB1E,EAAQN,OADV,CAAA8E,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,wBAIEosC,EAAM90C,EAAQ+0C,QAAQ,SAAA5lC,GAAC,OAAIA,EAAEnP,QAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAEkuB,cAC5C39B,OAAS,KACbo1C,EAAMA,EAAIxjC,MAAM,EAAG,KANrB9M,EAAAE,KAAA,EAQkBswC,YAAkBF,EAAK5vC,KAAKC,UAAU/B,IARxD,OAQE8iB,EARF1hB,EAAAM,KASF68B,EAAWzb,GATT,wBAAA1hB,EAAA2B,SAAApC,MAFV,gBAAAsC,GAAA,OAAAmzB,EAAAlzB,MAAArI,KAAA6E,YAAA,IAHRm2B,EAAAvwB,OAAA,wBAkBQosC,EAAM90C,EAAQ+0C,QAAQ,SAAA5lC,GAAC,OAAIA,EAAEnP,QAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAEkuB,cAC5C39B,OAAS,KACbo1C,EAAMA,EAAIxjC,MAAM,EAAG,KApB3B2nB,EAAAv0B,KAAA,EAsBwBswC,YAAkBF,EAAK5vC,KAAKC,UAAU/B,IAtB9D,OAsBQ8iB,EAtBR+S,EAAAn0B,KAuBI68B,EAAWzb,GAvBf,yBAAA+S,EAAA9yB,SAAA2yB,MAHR,gBAAA1yB,GAAA,OAAApC,EAAAsC,MAAArI,KAAA6E,YAAA,KA4BD,CAAC0iB,EAAQmc,IAEZ,IAAMsT,EAAaznC,sBAAW,eAAAw0B,EAAAjkC,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAm+B,EAAO5+B,EAAK8Y,GAAZ,IAAAlU,EAAAitC,EAAA,OAAAtxC,EAAAC,EAAAU,KAAA,SAAA69B,GAAA,cAAAA,EAAA39B,KAAA29B,EAAA19B,MAAA,cAC3BmwC,EAAcj9B,SAAU,EACxB26B,EAAc,IACVtqC,EAAK4J,EAAM0+B,cAActoC,KACzBitC,EAAQ,CAAC7xC,GACT8Y,IACA+4B,EAAK,GAAA/kC,OAAApS,OAAA2R,EAAA,EAAA3R,CAAOkK,GAAPlK,OAAA2R,EAAA,EAAA3R,CAAgBm3C,KANE9S,EAAA19B,KAAA,EAQrBmN,EAAMpG,gBAAgBklC,gBACxBuE,GAAO,EAAMrjC,GAAO,GATG,OAU3BgjC,EAAcj9B,SAAU,EAVG,wBAAAwqB,EAAAj8B,SAAA87B,MAAD,gBAAAI,EAAA8S,GAAA,OAAAnT,EAAA17B,MAAArI,KAAA6E,YAAA,GAW3B,CAAC+O,IAEAujC,EAAQr3C,OAAA2R,EAAA,EAAA3R,CAAOmoB,GACnBkvB,EAASpvC,KAAK,SAACnC,EAAEoC,GAAH,OAASpC,EAAEoE,KAAK,IAAMhC,EAAEgC,KAAK,IAAMpE,EAAEoE,KAAK5H,KAAK,KAAKg1C,cAAcpvC,EAAEgC,KAAK5H,KAAK,QAE5F,IAAI6hB,EAASzW,EAAgBW,MAAM26B,QAAQoB,gBACvC18B,EAAgB4mC,mBAAqB5mC,EAAgB6kC,cACzD,OACIniC,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtBlC,IAAK28B,EAAWvhC,UAAU,kBAC3BgrC,EAASn2C,IACN,SAAAumB,GAAM,OACFrX,EAAAtK,EAAA4G,cAAC6qC,EAAA,EAAD,CACEC,UAAW,IACX5J,UAAWA,EACXjhC,IAAK8a,EAAOI,QACZM,QAASA,EACT+uB,WAAYA,EACZpjC,MAAOqQ,EACPhE,SAAU4b,IAAetU,EAAOI,QAChCvmB,GAAImmB,EAAOI,QAASJ,OAAQA,EAAQqvB,cAAeA,0BCtC/DW,EAAkB,SAACruC,GAGrB,IAFA,IAAIsuC,EAAStuC,EAAEuuC,cACX5zC,EAAE,EACC2zC,KAAY3zC,EAAI,IAAI,CACvB,GAAI2zC,EAAOrrC,UAAU3H,SAAS,kBAC1B,OAAOgzC,EAEXA,EAASA,EAAOC,cAEpB,OAAOD,GAaItpC,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzEI,SAAAzI,GAA6C,IAA3CiyC,EAA2CjyC,EAA3CiyC,UAAWnwB,EAAgC9hB,EAAhC8hB,OAAgCowB,EAAAlyC,EAAxBmyC,cAAwB,IAAAD,EAAhB,CAACzmC,EAAE,EAAGgG,EAAE,GAAQygC,EAAA3oC,EAClCC,mBAAS,CAACiC,EAAE,EAAGgG,EAAE,IADiBhI,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvDsD,EADuDpD,EAAA,GAC/C2oC,EAD+C3oC,EAAA,GAExDsoC,EAASxmC,sBAAOtQ,GAEpBoP,oBAAU,WACN,IAAInB,EAAU4mB,SAASC,eAAe,iBAAmBjO,EAAOI,SAChE,GAAKhZ,EAAL,CACA,IAAI+K,EAAO/K,EAAQiL,wBACnB89B,EAAU,CAACxmC,EAAIwI,EAAKI,KAVd,IAU6B,IAAK5C,EAAG9P,KAAKwY,IAAIvG,OAAO60B,YAAc,IATlE,IASgFx0B,EAAKM,IAAM89B,SACnG,IAGHhoC,oBAAU,WACN,IAAInB,EAAU4mB,SAASC,eAAe,iBAAmBjO,EAAOI,SAChE,GAAKhZ,EAAL,CACA,IAAIopC,EAASR,EAAgB5oC,GAI7B,OAHA6oC,EAAO79B,QAAUo+B,EACjBA,EAAOz+B,iBAAiB,SAAU0+B,GAClCA,IACO,kBACHD,EAAOx+B,oBAAoB,SAAUy+B,MAC1C,CAACzwB,EAAQswB,IAEZ,IAAMG,EAAezoC,sBAAY,SAACrG,GAC9B,IAAIyF,EAAU4mB,SAASC,eAAe,iBAAmBjO,EAAOI,SAChE,GAAKhZ,EAAL,CACA,IAAI+K,EAAO/K,EAAQiL,wBACfq+B,EAAQT,EAAO79B,QAAQC,wBAC3Bi+B,EAAU,CACN3mC,EAAIwI,EAAKI,KAAM5C,EACf9P,KAAKwY,IAAI43B,EAAO79B,QAAQorB,aAAekT,EAAMj+B,IAAK5S,KAAKyY,IAAIo4B,EAAMj+B,IAAKN,EAAKM,aAL/D69B,OAAUn3C,IAM3B,CAAC6mB,EAAQswB,IAEZ,OAAKvlC,EAIDpC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAA,kBAAgBpL,GAAG,cACjB8O,EAAAtK,EAAA4G,cAAA,QAAM+mC,OAAO,KAAK2E,UAAU,cAC5BhoC,EAAAtK,EAAA4G,cAAA,QAAM+mC,OAAO,MAAM2E,UAAU,eAE/BhoC,EAAAtK,EAAA4G,cAAA,WAASoP,OAAQ,CACbg8B,EAAO1mC,EA7CP,IA6CkB0mC,EAAO1gC,EACzB0gC,EAAO1mC,EA9CP,IA8CkB0mC,EAAO1gC,EA7CxB,IA8CD5E,EAAOpB,EAAGoB,EAAO4E,EAAI,GACrB5E,EAAOpB,EAAGoB,EAAO4E,MAZhB,qBC1BTkG,WAAS,IAAI1J,KAuEJxF,cAbS,SAACC,EAAO1C,GAC9B,MAAO,CACH0sC,gBAAiBhqC,EAAM+lC,SAASiE,kBAIX,SAACzpC,GAC1B,MAAO,CACH0pC,mBAAoB,SAAAlnC,GAAC,OAAIxC,EAAS0pC,aAAmBlnC,KACrDmnC,iBAAkB,SAAAnnC,GAAC,OAAIxC,EAAS2pC,aAAiBnnC,OAIxChD,CArES,SAAAzI,GAA8E,IAA5E+H,EAA4E/H,EAA5E+H,gBAAiB2qC,EAA2D1yC,EAA3D0yC,gBAAiBE,EAA0C5yC,EAA1C4yC,iBAAkBD,EAAwB3yC,EAAxB2yC,mBACtErnC,EAAMC,sBAAOtQ,GADiFsO,EAExEC,mBAAS,IAF+DC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAE7F2oB,EAF6FzoB,EAAA,GAErFopC,EAFqFppC,EAAA,GAAAm6B,EAK5FC,YAAiB,CAACv4B,QADjB2mC,EAJ2FrO,EAI3FqO,UAAWz9B,EAJgFovB,EAIhFpvB,UAAWM,EAJqE8uB,EAIrE9uB,YAAaq9B,EAJwDvO,EAIxDuO,OAU1C,GAPA9nC,oBAAU,WACFqoC,GACAxxC,IAAS4xC,aAAaC,kBAAkBL,EAAgBxwB,SACnD/mB,KAAK03C,IAEf,CAACH,EAAiBG,KAEhBH,EAAmB,MAAO,GAC/B,IAAIjtC,EAAQitC,EAAgB1wB,eAC5B,MAAO,CACHvX,EAAAtK,EAAA4G,cAAA,OACEC,IAAK,EACLsE,IAAKA,EACLkJ,UAAWA,EACXM,YAAaA,EACbtF,MAAO2iC,EAAS,CAAC59B,IAAK49B,EAAO1gC,EAAG4C,KAAM89B,EAAO1mC,GAAK,GAAI/E,UAAU,8BAChE+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM0rC,OAAmB13C,IAAYyL,UAAU,aAA7D,KACA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZjB,EACAgF,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAY8I,MAAO,CAACguB,gBAAiB,OAAS/3B,EAAQ,OACrEgF,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACkJ,gBAAiBf,EAAOmB,gBAAgB45B,EAAgBxwB,UAChExb,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACoB,KAAhCgsC,EAAgBrgB,YAChBr0B,YAAK00C,EAAgB92C,MAAQoC,YAAK00C,EAAgBrgB,cAErD5nB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ1I,YAAK00C,EAAgBngB,aAExB9nB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM2rC,EAAiBF,EAAgB5zC,OAChD4H,UAAU,gBACgB,IAAzBgsC,EAAgB5zC,MAAc4zC,EAAgB5zC,MAEjD2L,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACZwrB,EAAO32B,IAAI,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAA,QAAMC,IAAKyE,GAAIA,QAItChB,EAAAtK,EAAA4G,cAACisC,EAAD,CACEjrC,gBAAiBA,EACjB+Z,OAAQ4wB,KAEZjoC,EAAAtK,EAAA4G,cAACksC,EAAD,CAAYjsC,IAAK,EAAGirC,UAAWA,EAAWE,OAAQA,EAAQrwB,OAAQ4wB,gCC2C3DjqC,cAfS,SAACC,EAAO1C,GAC5B,IAAImI,EAAQnI,EAAM+B,gBAAgB4mC,mBACpC,MAAO,CACH7vC,KAAM4J,EAAM+lC,SAASyE,cACrB9c,WAAYjoB,GAASA,EAAM2T,QAAU3T,EAAM2T,OAAOI,UAI7B,SAACjZ,GAC1B,MAAO,CACH0pC,mBAAoB,SAAAlnC,GAAC,OAAIxC,EAAS0pC,aAAmBlnC,KACrDmnC,iBAAkB,SAAAnnC,GAAC,OAAIxC,EAAS2pC,aAAiBnnC,OAIxChD,CAhGO,SAAAzI,GAKhB,IAJFo2B,EAIEp2B,EAJFo2B,WACAwc,EAGE5yC,EAHF4yC,iBACA9zC,EAEEkB,EAFFlB,KACAiJ,EACE/H,EADF+H,gBAEMuD,EAAMC,sBAAOtQ,GACbgtC,EAAa18B,sBAAOtQ,GACpBk2C,EAAgB5lC,kBAAO,GAH3BhC,EAK4BC,mBAAS,IALrCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAKKiZ,EALL/Y,EAAA,GAKcw0B,EALdx0B,EAAA,GAAAm6B,EAMkDC,YAAiB,CAACv4B,QAA/DwJ,EANL8uB,EAMK9uB,YAAaN,EANlBovB,EAMkBpvB,UAAW29B,EAN7BvO,EAM6BuO,OAAQF,EANrCrO,EAMqCqO,UAgCvC,GA9BA5nC,oBAAU,WACN,IAAIs5B,EAAW7T,SAASqjB,uBAAuB,oBAC/C,GAAwB,IAApBxP,EAAS3nC,OAAb,CAEA,IAAIqjC,EAAKsE,EAAS,GAClBsO,EAAU,CACNxmC,EAAG4zB,EAAGjP,WAAa,IACnB3e,EAAG4tB,EAAG+T,cAEX,CAACt0C,EAAMmzC,IACV5nC,oBAAU,WACDvL,GAGLoC,IAASC,sBACJhG,KAAK,SAAAsF,GAAQ,OACR,IAAIq7B,KAAa,IAAI98B,KAAuBC,iBAC3CsL,KAAK8oC,MACLrX,OAAO,YACPsX,MAAM,OAAQx0C,GACdm9B,QAAQ,UAAWx7B,GACnBy7B,eACA/gC,KAND,eAAAmF,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAMM,SAAAC,EAAM/D,GAAN,IAAA80C,EAAA5uB,EAAA,OAAAtiB,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACEowC,EAAM93B,MAAM/O,KAAK,IAAIgP,IAAIjd,EAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAEkuB,aAD9C74B,EAAAE,KAAA,EAEkBswC,YAAkBF,EAAKtyC,GAFzC,OAEE0jB,EAFF1hB,EAAAM,KAGF68B,EAAWzb,GAHT,wBAAA1hB,EAAA2B,SAAApC,MANN,gBAAAqC,GAAA,OAAApC,EAAAsC,MAAArI,KAAA6E,YAAA,OAYX,CAAC6+B,EAAYn/B,KAEXA,EAAQ,MAAO,GAEpB,IAAI0f,EAASzW,EAAgBW,MAAM26B,QAAQoB,gBACvC18B,EAAgB4mC,mBAAqB5mC,EAAgB6kC,cACzD,OACIniC,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,2BACV8I,MAAO2iC,EAAS,CAAC99B,KAAM89B,EAAO1mC,EAAG8I,IAAK49B,EAAO1gC,GAAK,GAClDqD,YAAaA,EACbN,UAAWA,EACXlJ,IAAKA,GACLb,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM2rC,OAAiB33C,IAAYyL,UAAU,aAA3D,KACA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZ5H,EACD2L,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM2rC,EAAiB9zC,EAAK,IAAI4H,UAAU,aACxD+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM2rC,EAAiB9zC,EAAK,IAAI4H,UAAU,iBAG5D+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtBlC,IAAK28B,EAAWvhC,UAAU,kBACzB8b,EAAQjnB,IACT,SAAAumB,GAAM,OACFrX,EAAAtK,EAAA4G,cAAC6qC,EAAA,EAAD,CACEC,UAAW,GACX5J,UAAWA,EACXjhC,IAAK8a,EAAOI,QACZM,QAASA,EACT+uB,WAAY,iBAAM,IAClBpjC,MAAOqQ,EACPhE,SAAU4b,IAAetU,EAAOI,QAChCvmB,GAAImmB,EAAOI,QAASJ,OAAQA,EAAQqvB,cAAeA,UClFtD/rC,EAAA,WAAApF,GAA4D,IAA1D+H,EAA0D/H,EAA1D+H,gBAA0D/H,EAAzC0yC,gBAAyC1yC,EAAxB2yC,mBAC/C,MAAO,CACHloC,EAAAtK,EAAA4G,cAACwsC,EAAD,CAAiBxrC,gBAAiBA,IAClC0C,EAAAtK,EAAA4G,cAACysC,EAAD,CAAezrC,gBAAiBA,iHCyCzBU,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHytC,UAAW/qC,EAAMM,UAAUyqC,YAIN,SAACxqC,GAC1B,MAAO,CACDyqC,aAAc,SAAAD,GAAS,OAAIxqC,EAASyqC,aAAaD,OAI1ChrC,CA9CK,SAAAzI,GAA6C,IAA3C0zC,EAA2C1zC,EAA3C0zC,aAAcD,EAA6BzzC,EAA7ByzC,UAAWtlC,EAAkBnO,EAAlBmO,MAAOwK,EAAW3Y,EAAX2Y,MAC5Cg7B,EAAW7pC,sBAAY,WACzBqE,EAAMpG,gBAAgB6rC,kBAAkBzlC,EAAMW,cAC/C,CAACX,IACE0lC,EAAc/pC,sBAAY,WAC5BqE,EAAMpG,gBAAgB+rC,gBAAgB3lC,EAAMW,cAC7C,CAACX,IAEE4lC,EAAiBjqC,sBAAY,WAC/B4pC,GAAcD,IACf,CAACA,IAEAjkC,EAAQ,CACRkJ,gBAAiBC,GAGjBq7B,EAAiB,CACjB1W,YAAa3kB,GAGjB,OACIlO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACb+D,EAAAtK,EAAA4G,cAACktC,EAAA,EAAD,CAAoBlsC,gBAAiBoG,EAAMpG,kBAC3C0C,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOwkC,EACP/sC,QAAS8sC,EACTrtC,UAAW+sC,EAAY,4BAA8B,mBAClDA,EAAY,YAAc,eAE/BhpC,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOvI,QAAS0sC,EAAUjtC,UAAU,iBAAhD,KACA+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOvI,QAAS4sC,EAAantC,UAAU,oBAAnD,mDCvBJiR,EAAS,IAAI1J,IA+DbimC,EAAO,SAAA5zC,GAA0D,IAAxDwe,EAAwDxe,EAAxDwe,OAAQljB,EAAgD0E,EAAhD1E,KAAMu4C,EAA0C7zC,EAA1C6zC,eAAgBC,EAA0B9zC,EAA1B8zC,cAAejmC,EAAW7N,EAAX6N,MACpDzH,EAAY,OACZoY,IAAWq1B,IACXztC,GAAa,aAGjB,IAAI8I,EAAQ,GASZ,OAPI2kC,IAAmBr1B,IACnBtP,EAAM6kC,kBAAoB,EAC1B7kC,EAAM8kC,kBAAoB,QAC1B9kC,EAAM+kC,kBAAoB58B,EAAOiB,iBAAiBzK,IAKlD1D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPvI,QAAS,kBAAMmtC,EAAct1B,IAC7BpY,UAAWA,GACV9K,IAKLwpB,EAAW,SAACxpB,GACd,OAAIA,EAAKI,OAAS,GACPJ,EAAKgS,MAAM,EAAG,IAAM,MAExBhS,GAmBI6M,cAhBS,SAACC,EAAO1C,GAC9B,MAAO,CACH8oB,WAAYpmB,EAAMqmB,YAAYD,WAC9BiR,SAAU/5B,EAAMmI,OAASnI,EAAMmI,MAAM4xB,WAIhB,SAAC92B,GAC1B,MAAO,CACHmrC,cAAe,SAACtlB,GAAD,OACX7lB,EAAS+lC,YAAyBlgB,KACtCigB,iBAAkB,SAACn9B,GAAD,OACd3I,EAAS8lC,aAAiBn9B,OAIrBnJ,CA7GD,SAAAzI,GAAoE,IAAlEmO,EAAkEnO,EAAlEmO,MAAOimC,EAA2Dp0C,EAA3Do0C,cAAetlB,EAA4C9uB,EAA5C8uB,WAAYiR,EAAgC//B,EAAhC+/B,SAAgCx2B,GAAAvJ,EAAtB+uC,iBACVvlC,oBAAS,IADuBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvEirC,EADuE/qC,EAAA,GACtDgrC,EADsDhrC,EAAA,GAG1EirC,EAAavmC,EAAMwU,iBAAmBwd,KACtChyB,EAAMwU,iBAAmBC,KACzBmd,EACA4U,EAAWxmC,EAAMwU,iBAAmBC,IACpCgyB,EAAUzmC,EAAMwU,iBAAmBwd,IACnC7zB,EAAI6B,EACJA,EAAMwU,iBAAmBye,KACzBjzB,EAAMxF,OAAO3M,OAAS,IACtBsQ,EAAI6B,EAAMxF,OAAO,GAAGwF,OAGpB7B,EAAEqW,iBAAmBkyB,KAAcvoC,EAAE2L,aACjC3L,EAAE2L,WAAWoK,sBAAwBE,KACrCjW,EAAE2L,WAAWoK,sBAAwBC,MAErCsyB,GAAU,IAGdtoC,EAAEyzB,WACF6U,GAAU,GAGdvqC,oBAAU,WACF01B,GACAqU,EAAclU,MAEnB,CAACH,IAEJ,IAAIpa,EAAY,CACZhN,MAAOhB,EAAOiB,iBAAiBzK,IAGnC,OACI1D,EAAAtK,EAAA4G,cAAA,OACEM,aAAc,kBAAMotC,GAAmB,IACvC/tC,UAAU,SACV+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMwtC,GAAoBD,IACnChlC,MAAOmW,EAAWjf,UAAW8tC,EAAkB,0BAA4B,sBAC1EpvB,EAASjX,EAAMwQ,YAAcxQ,EAAM0K,WACnC27B,EACA/pC,EAAAtK,EAAA4G,cAAC+tC,EAAA,EAAD,CAAgBC,UAAU,EAAMC,KAAMlmB,EAAY/mB,gBAAiBoG,EAAMpG,kBAAqB,IAEhG6sC,EACAnqC,EAAAtK,EAAA4G,cAACkuC,EAAD,CAAM9mC,MAAOA,EAAO2Q,OAAQmxB,IACtBkE,eAAgBrlB,EAChBlzB,KAAMuS,EAAMwU,iBAAmBkyB,IAAa,UAAY,OACxDT,cAAeA,IAAmB,GACxCM,EACAjqC,EAAAtK,EAAA4G,cAACkuC,EAAD,CAAM9mC,MAAOA,EAAO2Q,OAAQohB,IAAUiU,eAAgBrlB,EAChDlzB,KAAK,WAAWw4C,cAAeA,IACnC,GACFO,EACAlqC,EAAAtK,EAAA4G,cAACkuC,EAAD,CAAM9mC,MAAOA,EAAO2Q,OAAQmQ,IAAYklB,eAAgBrlB,EAClDlzB,KAAK,QAAQw4C,cAAeA,IAAmB,gBC/C1Dz8B,eAAS,IAAI1J,KACbinC,EAAoB,IACpBC,EAAa,GA+MJ1sC,gBAjDS,SAACC,EAAO1C,GAC5B,GAAIA,EAAMmI,MAAO,CACb,IAAIA,EAAQnI,EAAMmI,MAKlB,OAJIA,GAASA,EAAMxF,QAAUwF,EAAMxF,OAAO,KACtCwF,EAAQA,EAAMxF,OAAO,GAAGwF,OAGrB,CACHxS,QAAcV,IAAVkT,EAAsB,OACLlT,IAAjBkT,EAAM2T,aAAiD7mB,IAAzBkT,EAAM2T,OAAOI,QAC3C/T,EAAM2T,OAAOI,QAAU/T,EAAMwQ,YAAcxQ,EAAM0K,UACrDu8B,WAAYpvC,EAAMmI,MAAM/E,SAAWpD,EAAMmI,MAAM/E,QAAQpN,OACvDq5C,eAAgB3sC,EAAM4sC,WAAWC,YAAYvvC,EAAMmI,MAAMxS,IACzDuc,UAAWxP,EAAM4sC,WAAWE,eAAexvC,EAAMmI,MAAMxS,IACvDmtB,kBAAmBpgB,EAAM4sC,WAAWG,eAAezvC,EAAMmI,MAAMxS,IAC/D+5C,eAAgBhtC,EAAM4sC,WAAW1jC,KACjC+jC,mBAAoBjtC,EAAM4sC,WAAWM,gBAAgB5vC,EAAMmI,MAAMxS,IACjE+jC,mBAAoBh3B,EAAMC,OAAOk3B,qBAAqB75B,EAAMmI,MAAMxS,IAClEmzB,WAAYpmB,EAAMqmB,YAAYD,YAGtC,MAAO,IAGgB,SAAC7lB,EAAUjD,GAClC,MAAO,CACH6vC,4BAA6B,SAAC7nC,GAAD,OACzB/E,EAAS4sC,aAA4B7vC,EAAMmI,MAAMxS,GAAIqS,KACzD+gC,iBAAkB,SAACn9B,GAAD,OACd3I,EAAS8lC,aAAiBn9B,KAC9BkkC,yBAA0B,SAACC,GAAD,OACtB9sC,EAAS6sC,aAAyB9vC,EAAMmI,MAAMxS,GAAIo6C,KACtDC,6BAA8B,SAACD,GAAD,OAC1B9sC,EAAS+sC,aAA6BhwC,EAAMmI,MAAMxS,GAAIo6C,KAC1DE,4BAA6B,SAACF,GAAD,OACzB9sC,EAASgtC,aAA4BjwC,EAAMmI,MAAMxS,GAAIo6C,KACzDtT,6BAA8B,SAACC,GAAD,OAC1Bz5B,EAASw5B,YAA6BC,KAC1CwT,2BAA4B,SAACtgC,GAAD,OACxB3M,EAASitC,YAA2BtgC,KACxCugC,kBAAmB,SAACvkC,GAAD,OACf3I,EAASktC,aAAkBvkC,KAC/BwiC,cAAe,SAACtlB,GAAD,OACX7lB,EAAS+lC,YAAyBlgB,KACtCsnB,gBAAiB,SAACC,GAAD,OACbptC,EAASqtC,aAAuBD,OAI7B5tC,CA7Mf,SAA2BzC,GAAO,IACzBmI,EAA2EnI,EAA3EmI,MAAkC2a,GAAyC9iB,EAApEqvC,eAAoErvC,EAApDkS,UAAoDlS,EAAzC8iB,mBACpCytB,GAD6EvwC,EAAtB2vC,mBAC5Ba,YAA4BroC,IAE1D9D,oBAAU,WACFrE,EAAMywC,gBACNzwC,EAAMmwC,mBAAkB,IAE7B,CAACnwC,EAAMywC,iBAMV,IAAMC,EAAqB5sC,sBAAY,SAACrG,EAAGuK,GAEvC,GADAvK,EAAE+J,kBACExH,EAAM0vC,gBAAkB1nC,IAAc8a,EACtC,OAAO9iB,EAAMmwC,mBAAkB,GAEnCnwC,EAAMmwC,mBAAkB,GACxBnwC,EAAM6vC,4BAA4B7nC,IACnC,CACC8a,EACA9iB,EAAM8vC,yBACN9vC,EAAMgwC,6BACNhwC,EAAM0vC,iBAzBoBnsC,EA4BIC,wBAASvO,GA5BbwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GA4BvBotC,EA5BuBltC,EAAA,GA4BZmtC,EA5BYntC,EAAA,GA6BxBqL,EAAchL,sBAAY,SAACrG,GAC7B,IAAI47B,EAAKvP,SAASqjB,uBAAuB,mBAAmB,GACxD1hC,EAAIhO,EAAE6Q,QAAU+qB,EAAGlrB,wBAAwBI,IAE/CvO,EAAMowC,gBAAgB3kC,GACtBzL,EAAMy8B,8BAA6B,GAEnC,IAAIoU,GAAM,IAAI51B,MAAOC,UACrB,QAAkBjmB,IAAd07C,GACIE,EAAMF,GAAazB,EAAmB,CACtC,GAAIlvC,EAAM8mB,KACN,OAAO9mB,EAAM8mB,OAEb9mB,EAAM+B,gBAAgBklB,MAAM6pB,WAAW/nB,YAAYwT,cAAgB4S,EACnEnvC,EAAMkwC,2BAA2Ba,IAAe9nB,MAEhDjpB,EAAM+oC,kBAAiB,GAInC6H,EAAaC,IACd,CAACF,EAAWC,IAETI,EAAiBhxC,EAAM0vC,eACvB,+BACA,gCAIF/8B,GAHsB3S,EAAM0vC,eAGpB/9B,EAAOiB,iBAAiB5S,EAAMmI,QACtCqB,EAAO,GAGX,GAAIxJ,EAAM8oB,aAAeG,MAAejpB,EAAMywC,eAE1C,OACIhsC,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,sBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAACkwC,EAAD,CAAOt7C,GAAIqK,EAAMrK,GAAIwS,MAAOA,IAC5B1D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbN,UAAW,kBAAMxO,EAAMy8B,8BAA6B,IACpD/7B,UAAU,mBAEV+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GACVA,EAAE+J,kBACExH,EAAM8mB,KACN9mB,EAAM8mB,OAEN9mB,EAAM+oC,kBAAiB,GAE3B/oC,EAAMy8B,8BAA6B,IAEvC/7B,UAAU,iCACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAS/B,IAAIwwC,EACAzsC,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GACVA,EAAE+J,kBACExH,EAAM8mB,KACN9mB,EAAM8mB,OAEN9mB,EAAM+oC,kBAAiB,GAE3B/oC,EAAMy8B,8BAA6B,IAEvC/7B,UAAU,iCACJ+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAG3B,OACI+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,sBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACZ+D,EAAAtK,EAAA4G,cAACkwC,EAAD,CAAOt7C,GAAIqK,EAAMrK,GAAIwS,MAAOA,IAC7B1D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbN,UAAW,kBAAMxO,EAAMy8B,8BAA6B,IACpD/7B,UAAU,mBAERV,EAAMywC,eAAiC,GAAhBS,IAG7BzsC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kCACXV,EAAMywC,eAEL,GADHhsC,EAAAtK,EAAA4G,cAACowC,EAAA,EAAD,CAA8BhpC,MAAOA,EAAOpG,gBAAiB/B,EAAM+B,kBAEjE/B,EAAMywC,eAIL,GAHFhsC,EAAAtK,EAAA4G,cAAA,OACGL,UAAU,kBACV4B,IAAK0uC,EAAgB/vC,QAAS,kBAAMjB,EAAMmwC,mBAAmBnwC,EAAM0vC,mBAErEjrC,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbN,UAAW,kBAAMxO,EAAMy8B,8BAA6B,IACpD/7B,UAAU,yCAET6vC,EAAyBh7C,IACtB,SAAAyS,GAAS,OACLvD,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOizC,EAAmBjzC,EAAGuK,IAC1CwB,MAAOxJ,EAAM0vC,gBAAkB5sB,IAAsB9a,EAC9C,CACI0K,gBAAiBC,EACjBA,MAAO,SACX,GACPjS,UAAU,oBAAoB0wC,YAAiBppC,OAE7DvD,EAAAtK,EAAA4G,cAACswC,EAAD,CAAa1+B,MAAOA,EAAOxK,MAAOA,IACjCnI,EAAMywC,eAAiBS,EAAgB,4LC1FrCzuC,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHsxC,UAAW5uC,EAAM6V,OAAOuS,iBAIH,SAAC7nB,GAC1B,MAAO,CACHsuC,aAAc,SAAC9rC,GAAD,OAAOxC,EAASuuC,aAAkB/rC,OAIvChD,CA9EK,SAAAzI,GAAqD,IAAnDqc,EAAmDrc,EAAnDqc,cAAelO,EAAoCnO,EAApCmO,MAAOopC,EAA6Bv3C,EAA7Bu3C,aAAcD,EAAet3C,EAAfs3C,UAAe/tC,EACzCC,oBAAS,GADgCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAChEw9B,EADgEt9B,EAAA,GACvDu9B,EADuDv9B,EAAA,GAG/DguC,EAAoB3tC,sBAAY,WAClC4tC,YAAWr7B,EAAelO,IAC3B,CAACkO,IAEEs7B,EAAkB7tC,sBAAY,WAChC8tC,YAAav7B,IACd,CAACA,IAEEw7B,EAAmB/tC,sBAAY,WACjCguC,YAAU3pC,EAAOkO,IAClB,CAACA,IAEE07B,EAAqBjuC,sBAAY,WACnCkuC,YAAO7pC,EAAOkO,IACf,CAACA,IAEJ,OAAKA,GAA0C,IAAzBA,EAAcrgB,OAKhCyO,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACEphB,UAAU,iBACVkL,KAAMm1B,EAAU,OAAS,QACzBI,OAAQJ,EACRh0B,OAAQ,kBAAMi0B,GAAYD,KAC1Bt8B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAgBpmB,KAAK,KAAK0lC,OAAK,EAACzuB,MAAM,WACnC0D,EAAcrgB,OADjB,UAGAyO,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,KACErd,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS,kBAAMswC,GAAcD,IAC7B51C,KAAK,MAFP,cAIE+I,EAAAtK,EAAA4G,cAACkxC,EAAA,EAAD,CACEvxC,UAAU,kBACVgB,UAAW4vC,KAEf7sC,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAASwwC,EACT/1C,KAAK,MAFP,eAKA+I,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS0wC,EACTj2C,KAAK,MAFP,kBAKA+I,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS8wC,EACTr2C,KAAK,MAFP,gBAKA+I,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS4wC,EACTn2C,KAAK,MAFP,gBApCG,+kDCPf,IAAMiW,EAAS,UAAI1J,GAEbiqC,0CACF,SAAAA,EAAYlyC,GAAO,IAAAnL,EAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA29C,GACfr9C,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,GAEN,IAAImI,EAAQnI,EAAM+B,gBAAgBY,OAAO3C,EAAMkI,eAC/C,GAAIC,EAAO,CACP,IAAI8c,EAAY9c,EAAM8c,UACtBpwB,EAAK6N,MAAQ,CACTogB,kBAAmBmC,EAAUC,kBAC7B7nB,MAAO4nB,EAAUC,kBAAkB7nB,YAGvCxI,EAAK6N,MAAQ,GAXF,OAcf7N,EAAK6N,MAAMilC,SAAU,EAdN9yC,+CAiBnB,WACIN,KAAKyL,MAAMwiB,sBAAsB,gCAGrC,SAAaxiB,GACT,QAAqC/K,IAAjC+K,EAAM+B,gBAAgBY,OAA1B,CAGA,IAAIwF,EAAQnI,EAAM+B,gBAAgBY,OAAO3C,EAAMkI,eAC/C,QAAcjT,IAAVkT,EAGJ,OAAOA,EAAM8c,8BAGjB,WACI,OAAO1wB,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,2CAGxD,WACI,IAAI6T,OAAY9mB,EACZuU,EAAQ,GACZ,GAAIjV,KAAK4T,MAAM2T,OAAQ,CAGnB,QAAkB7mB,KAFlB8mB,EAAYxnB,KAAK4T,MAAM2T,OAAOE,iBAEe,KAAdD,EAC3B,OACItX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB4B,IAAKyZ,IAI7CvS,EAAK,gBACDmI,EAAOmB,gBAAgBve,KAAK4T,MAAM2T,OAAOI,cAE7C1S,EAAK,gBAAsBmI,EAAOmB,gBAAgBve,KAAK4T,MAAMwQ,YAAcpkB,KAAK4T,MAAM0K,WAG1F,OACIpO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB8I,MAAOA,yCAI/C,SAAsBgV,GAClB,GAAIjqB,KAAK49C,aAAa3zB,KAAejqB,KAAK49C,aAAa59C,KAAKyL,QACxDwe,EAAU7oB,KAAOpB,KAAKyL,MAAMrK,GAAK,CACjC,IAAImtB,EAAoBvuB,KAAKmO,MAAMogB,kBAE/BmC,EAAY1wB,KAAK49C,aAAa3zB,GAOlC,QAN0BvpB,IAAtB6tB,QACkB7tB,IAAdgwB,IACAnC,EAAoBmC,EAAUC,wBAIpBjwB,IAAdgwB,EACA,OAAO,EAGoB,aAA3BnC,EAAkBltB,KAClBrB,KAAKmO,MAAMogB,kBAAqBmC,EAAUC,kBACR,WAA3BpC,EAAkBltB,KACzBrB,KAAKmO,MAAMogB,kBAAqBmC,EAAUK,gBACR,YAA3BxC,EAAkBltB,KACzBrB,KAAKmO,MAAMogB,kBAAqBmC,EAAUM,iBACR,cAA3BzC,EAAkBltB,KACzBrB,KAAKmO,MAAMogB,kBAAqBmC,EAAUE,mBACR,aAA3BrC,EAAkBltB,KACzBrB,KAAKmO,MAAMogB,kBAAqBmC,EAAUI,kBAE1C9wB,KAAKmO,MAAMogB,kBAAqBmC,EAAUC,kBAE9C3wB,KAAKmO,MAAMrF,MAAQ9I,KAAKmO,MAAMogB,kBAAkBzlB,MAEpD,OAAO,wBAGX,WACI,OAAO9I,KAAKyL,MAAMqW,eAAiB9hB,KAAKyL,MAAMqW,cAAcrgB,OAAS,iCAGzE,SAAgBgS,GACZzT,KAAKmpB,SAAS,CACVoF,kBAAmB9a,EACnB3K,MAAO2K,EAAU3K,yCAIzB,SAAkBA,GAAO,IAAAvG,EAAAvC,KACrB,GAAIA,KAAK69C,SAAU,CACf,IADezjB,EACX0jB,EAAqB,GACrBp7B,EAAQ,GAFG2X,EAAA3xB,EAGE1I,KAAKyL,MAAMqW,eAHb,IAGf,IAAAuY,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAA2C,KAAlCiX,EAAkCsa,EAAAtxB,MACvC4Z,EAAMlhB,KAAKse,GACXg+B,EAAkB,GAAA5rC,OAAApS,OAAA2R,EAAA,EAAA3R,CACVg+C,GADUh+C,OAAA2R,EAAA,EAAA3R,CAEVggB,EAAK3M,WAAWnB,OAChB,SAAAd,GAAC,OAAIA,EAAE7P,OAASkB,EAAK4L,MAAMogB,kBAAkBltB,UAR1C,MAAAM,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAWf,IAAIyK,EAAQ5T,KAAKyL,MAAM+B,gBAAgBY,QACnCpO,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKyL,MAAMkI,eACjDmqC,EAAmBv6C,QACf,SAACic,EAAO3b,GAAR,OACItB,EAAKkJ,MAAM+B,gBAAgBuwC,iBAAiBrvC,SACxCsvC,YACIpqC,EACA8O,EAAM7e,GACN2b,EACA1W,IACJ,GACA,KACZ8K,EAAMqqC,cACNj+C,KAAKmpB,SAAS,CACVrgB,MAAOA,SAGX9I,KAAKmO,MAAMogB,kBAAkBzlB,MAAQA,EACrC9I,KAAKmpB,SAAS,CACVrgB,MAAOA,IAEX9I,KAAKyL,MAAMwiB,sBAAsB,CAACjuB,KAAKmO,MAAMogB,oFAIrD,SAAAzoB,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACIzG,KAAKmpB,SAAS,CAACiqB,SAAS,IAD5B7sC,EAAAE,KAAA,EAEUzG,KAAK4T,MAAMsqC,cAAa,GAFlC,OAGIl+C,KAAKmpB,SAAS,CAACiqB,SAAS,IAH5B,wBAAA7sC,EAAA2B,SAAApC,EAAA9F,iIAMA,SAAA66B,IAAA,OAAAl1B,EAAAC,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,cACIzG,KAAKmpB,SAAS,CAACiqB,SAAS,IAD5BpY,EAAAv0B,KAAA,EAEUzG,KAAK4T,MAAMuqC,mBAFrB,OAGIn+C,KAAKmpB,SAAS,CAACiqB,SAAS,IAH5B,wBAAApY,EAAA9yB,SAAA2yB,EAAA76B,qFAMA,WAAW,IAAA4C,EAAA5C,KACP,GAAIA,KAAK69C,UAAY79C,KAAKyL,MAAMqW,cAAc,GAAI,CAC9C,IACItC,EADOxf,KAAKyL,MAAMqW,cAAc,GACnB3O,WAAWjJ,KAAK,SAAAgH,GAAC,OAAIA,EAAE7P,OAASuB,EAAKuL,MAAMogB,kBAAkBltB,OAC9E,OAAQme,GAAyB,OAAhBA,EAAM1d,MACnB0d,EAAM1d,MAD8B9B,KAAKmO,MAAMogB,kBAAkBzlB,MAGrE,OAAO9I,KAAKmO,MAAMogB,kBAAkBzlB,4BAI5C,WAAS,IAAA6oB,EAAA3xB,KACDyL,EAAQzL,KAAKyL,MACbmI,EAAQnI,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAO3C,EAAMkI,eAC3E4a,EAAoBvuB,KAAKmO,MAAMogB,kBACnC,QAA4B7tB,IAAxB+K,EAAMkI,oBAAyCjT,IAAVkT,QACflT,IAAtB6tB,EACA,OACIre,EAAAtK,EAAA4G,cAAA,YAGR,IAAIkkB,EAAY9c,EAAM8c,UAClB9Q,EA4HZ,SAAgBnM,EAAWid,GACvB,OAAIjd,IAAcid,EAAUC,kBACjB,IAEAld,EAAUmM,IAhIPw+B,CAAO7vB,EAAmBmC,GAChC7Q,EAmIZ,SAAgBpM,EAAWid,GACvB,GAAIjd,IAAcid,EAAUC,kBACxB,OAAO,EACJ,GAAIld,IAAcid,EAAUK,gBAC/B,OAAO,IACJ,GAAItd,IAAcid,EAAUM,iBAC/B,OAAO,IAEX,OAAOvd,EAAUoM,IA3IHw+B,CAAO9vB,EAAmBmC,GAKhC4tB,GAHiBt+C,KAAKyL,MAAMqW,eAC5B9hB,KAAKyL,MAAMqW,cAAcrgB,OAER,IACjBmS,GACAA,EAAM0pB,QACN1pB,EAAM0pB,OAAOM,YACb0gB,EACIpuC,EAAAtK,EAAA4G,cAAC+xC,EAAA,EAAD,CACE3gB,YAAahqB,EAAM0pB,OAAOM,YAC1BvrB,KAAMkuB,MAEL3sB,GAASA,EAAM2T,SACtB+2B,EACIpuC,EAAAtK,EAAA4G,cAAC+xC,EAAA,EAAD,CACE3gB,YAAahqB,EAAM2T,OAAOI,QAC1BtV,KAAMm1B,OAIhB,IAAIxjB,EAAUhkB,KAAKyL,MAAMqW,cACrB/C,MAAM/O,KAAK,IAAIgP,IAAIhf,KAAKyL,MAAMqW,cAAc9gB,IAAI,SAAA2H,GAAC,OAAIA,GAAKA,EAAEwb,QAAOnS,OAAO,SAAArJ,GAAC,OAAIA,MAD1C,GAEzC,OACIuH,EAAAtK,EAAA4G,cAAA,OACEM,aAAc,kBAAM6kB,EAAK1X,aACzBA,UAAW,kBAAM0X,EAAK1X,aACtB9N,UAAU,oBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZnM,KAAKynB,eACNvX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAcnM,KAAK4T,MAAMwQ,YAAcpkB,KAAK4T,MAAM0K,WACjEpO,EAAAtK,EAAA4G,cAACgyC,EAAA54C,EAAD,CACI64C,SAAU,KACVt3C,KAAM,GACNiX,MAAO,UACPg1B,QAASpzC,KAAKmO,MAAMilC,UAEvBkL,EACDpuC,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAY5nC,UAAU,gBAAgBwC,QAAS+vC,KAC7CxuC,EAAAtK,EAAA4G,cAAA,KAAGE,QAAS,kBAAMilB,EAAKgtB,kBAAkBxyC,UAAU,SACnD+D,EAAAtK,EAAA4G,cAAA,KAAGE,QAAS,kBAAMilB,EAAKitB,cAAczyC,UAAU,YAGnD+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAACqyC,EAAD,CACEnyC,QAAS,kBAAMilB,EAAKmtB,gBAAgBpuB,EAAUC,oBAC9C1Q,SAAUsO,IAAsBmC,EAAUC,kBAC1CouB,kBAAmBruB,EAAUC,kBAAkBtvB,OAASrB,KAAKyL,MAAMuzC,yBACnE39C,KAAK,SACL6O,EAAAtK,EAAA4G,cAACqyC,EAAD,CACEnyC,QAAS,kBAAMilB,EAAKmtB,gBAAgBpuB,EAAUE,qBAC9CmuB,kBAAmBruB,EAAUE,mBAAmBvvB,OAASrB,KAAKyL,MAAMuzC,yBACpE/+B,SAAUsO,IAAsBmC,EAAUE,mBAC1CvvB,KAAK,UACT6O,EAAAtK,EAAA4G,cAACqyC,EAAD,CACEnyC,QAAS,kBAAMilB,EAAKmtB,gBAAgBpuB,EAAUK,kBAC9CguB,kBAAmBruB,EAAUK,gBAAgB1vB,OAASrB,KAAKyL,MAAMuzC,yBACjE/+B,SAAUsO,IAAsBmC,EAAUK,gBAC1C1vB,KAAK,SACP6O,EAAAtK,EAAA4G,cAACqyC,EAAD,CACEnyC,QAAS,kBAAMilB,EAAKmtB,gBAAgBpuB,EAAUM,mBAC9C+tB,kBAAmBruB,EAAUM,iBAAiB3vB,OAASrB,KAAKyL,MAAMuzC,yBAClE/+B,SAAUsO,IAAsBmC,EAAUM,iBAC1C3vB,KAAK,SACP6O,EAAAtK,EAAA4G,cAACqyC,EAAD,CACEnyC,QAAS,kBAAMilB,EAAKmtB,gBAAgBpuB,EAAUI,oBAC9CiuB,kBAAmBruB,EAAUI,kBAAkBzvB,OAASrB,KAAKyL,MAAMuzC,yBACnE/+B,SAAUsO,IAAsBmC,EAAUI,kBAC1CzvB,KAAK,SACP6O,EAAAtK,EAAA4G,cAACyyC,EAAD,CACEn2C,MAAO9I,KAAKk/C,cAGhBhvC,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,yBACVW,aAAc,kBAAM6kB,EAAK1X,cAEzB/J,EAAAtK,EAAA4G,cAACsgB,EAAAlnB,EAAD,CACEkD,MAAOq2C,WAAWn/C,KAAKk/C,YACvBlyB,OAAQ,SAAC9jB,GAAD,OAAOyoB,EAAKytB,kBAAkBl2C,EAAEoJ,OAAOxJ,QAC/CgX,KAAiC,cAA3ByO,EAAkBltB,KAAuB,EAAI,IACnDwe,IAAKA,EACLD,IAAKA,EACLvH,YAAY,aACZ6U,UAAU,IAEZhd,EAAAtK,EAAA4G,cAAC6yC,EAAD,CAAazrC,MAAOA,EAAOkO,cAAe9hB,KAAKyL,MAAMqW,iBAEtDkC,EAAOhjB,IAAI,SAAAmjB,GAAK,OAAIjU,EAAAtK,EAAA4G,cAAC8yC,EAAA,EAAD,CACE1rC,MAAOA,EACPnH,IAAK0X,EAAM/iB,GAAIoM,gBAAiBmkB,EAAKlmB,MAAM+B,gBAAiB2W,MAAOA,cA5Q3EmB,IAAMrX,WAkRnC,SAASgxC,EAAexzC,GACpB,OACIyE,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,mBAAmBV,EAAM3C,OAK7C,SAAS+1C,EAAgBpzC,GACrB,IAAIU,EAAY,mBAUhB,OATIV,EAAMwU,WACN9T,GAAa,aAGbV,EAAMszC,oBACN5yC,GAAa,qBAKb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAASjB,EAAMiB,QACfP,UAAWA,GAAYV,EAAMpK,MAkDxB6M,gBArBS,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAM+B,gBAAgByG,SAC3BD,EAAqB7F,EAAMM,UAAUuF,mBAAmB5S,GACxDmN,EAAiBJ,EAAMM,UAAUF,eAAeyF,IAAuB,EAEvEJ,EAAQnI,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAOD,EAAM2F,IAAIH,eACnF,MAAO,CACHvS,QAAcV,IAAVkT,EAAsB,EACtBA,EAAMwQ,WAAaxQ,EAAMwQ,gBACR1jB,IAAjBkT,EAAM2T,aAAiD7mB,IAAzBkT,EAAM2T,OAAOI,QAC3C/T,EAAM2T,OAAOI,QAAU/T,EAAM0K,UACjCypB,UAAWt8B,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAO3M,OACxE8M,eAAgBA,EAChByF,mBAAoBA,EACpBL,cAAexF,EAAM2F,IAAIH,cACzBmO,cAAe3T,EAAMoxC,SAASrJ,uBAC9B8I,yBAA0B7wC,EAAMuU,MAAMs8B,yBACtCQ,WAAYrxC,EAAMuU,MAAM88B,aAvBL,SAAA9wC,GACvB,MAAO,CACHuf,sBAAuB,SAAAnP,GAAM,OAAIpQ,EAASuf,aAAsBnP,OAyBzD5Q,CAA6CyvC,yIC5WtDj5C,GAAkB,WAAI+6C,IAA6B/6C,gBAE5Cg7C,EAAe,eAAAj6C,EAAA3F,OAAA6/C,EAAA,EAAA7/C,CAAA8/C,EAAAh6C,EAAAC,KAAG,SAAAC,EAAO1E,GAAP,IAAAoB,EAAAT,EAAA89C,EAAA,OAAAD,EAAAh6C,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACvBjE,EAAQ,IAAI++B,IAAa78B,GACxBsL,KAAK8vC,MACLre,OAAO,gBACPsX,MAAM,aAAc33C,GAJEmF,EAAAE,KAAA,EAMPjE,EAAMm/B,eANC,cAMvB5/B,EANuBwE,EAAAM,KAOvBg5C,EAAS99C,EAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAE6uC,eAEhCv9C,EAAQ,IAAI++B,IAAa78B,GACpBsL,KAAKgwC,MACLve,OAAO,SACPA,OAAO,eACPC,QAAQ,cAAeme,GAbDt5C,EAAAE,KAAA,EAedjE,EAAMm/B,eAfQ,cAAAp7B,EAAAkE,OAAA,SAAAlE,EAAAM,MAAA,wBAAAN,EAAA2B,SAAApC,MAAH,gBAAAqC,GAAA,OAAA1C,EAAA4C,MAAArI,KAAA6E,YAAA,4HCWtBuY,EAAS,UAAI1J,GAmRbusC,EAAkB,SAACzE,EAAQ0E,GAAT,OAAoB1E,GAAW,CACnDz6C,WAA8BL,IAAvB86C,EAAOjnC,aAA8BinC,EAAO2E,eAE/C3E,EAAO2E,iBAAmBD,EAAS,aACnC1E,EAAOp3B,YAAco3B,EAAOn6C,MAASm6C,EAAOl9B,SAAWk9B,EAAOl9B,UAF9D,QAGJxV,MAAO0yC,IACL4E,EAAqB,SAAC3sC,GAAD,OAAeA,GAAc,CAAC1S,MAAO0S,EAAU4sC,WAAYv3C,MAAO2K,IAEvF6sC,EAAyB,SAAC9E,GAAwB,IAAhB+E,EAAgB17C,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,IAAAA,UAAA,GAChDsO,EAAaqoC,EAAOroC,WACnBnB,OAAO,SAAAd,GAAC,OAAIqvC,EAAQrvC,EAAEsvC,cAAcC,YAAcvvC,EAAEuvC,cAKzD,OAJAttC,EAAWpL,KACP,SAACnC,EAAEoC,GAAH,OAASu4C,EACLv4C,EAAEw4C,cAAcC,YAAYh/C,OAASmE,EAAE46C,cAAcC,YAAYh/C,OACjEuG,EAAEy4C,YAAYh/C,OAASmE,EAAE66C,YAAYh/C,SACtC0R,EAAWnB,OACd,SAAAd,GAAC,OACGA,EAAEwvC,aACFxvC,EAAEyvC,gBACDzvC,EAAE0vC,UACQ,YAAX1vC,EAAE7P,MAAiC,kBAAX6P,EAAE7P,QAGhCw/C,EAAwB,SAACC,EAAeltC,GAE1C,IAAImtC,EAAentC,EAAMotC,YAAYnyC,QAAQ3E,KACzC,SAAAhB,GAAC,OAAIA,EAAEsG,SAAWyxC,MAEtB,IAAKF,EACD,OAAOD,EAGX,IAAII,EAAe,GACnB,IAAK,IAAIr9C,KAAKk9C,EAAaI,OAAQ,CAC/B,IAAIliC,EAAQ8hC,EAAaI,OAAOt9C,GAC5Bob,EAAMmiC,UAAU3/C,OAAS,GACzBy/C,EAAa1/C,KAAK,CACVT,MAAOke,EAAM5d,KACbyH,MAAOmW,IAKvB,SAAA/M,OAAApS,OAAAqS,EAAA,EAAArS,CAAYghD,GAAkBI,IAI5BG,EAA0B,SAACztC,GAC7B,IAAIktC,EAAgB,GAapB,OAZIltC,EAAM8J,YAAc9J,EAAMwU,iBAAmBye,KAC7Cia,EAAct/C,KAAK,CAACsH,MAAO8K,EAAM8J,WAAY3c,MAAO6S,EAAM8J,WAAWrc,OAGzEy/C,EAAa,CACT,CAAC//C,MAAO,OAAQ+H,MAAO,OADdoJ,OAAApS,OAAAqS,EAAA,EAAArS,CAELghD,GAFKhhD,OAAAqS,EAAA,EAAArS,CAGL8T,EAAM/E,QAAQ7N,IACd,SAAAkQ,GAAC,OAAI+uC,EAAgB/uC,MAJhBpR,OAAAqS,EAAA,EAAArS,CAKL8T,EAAMO,YAAYtF,QAAQ7N,IAC1B,SAAAkQ,GAAC,OAAI+uC,EAAgB/uC,QAsDlBhD,gBAjDS,SAACC,EAAO1C,GAC5B,GAAIA,EAAMmI,MAAO,CACb,IAAIA,EAAQnI,EAAMmI,MAKlB,OAJIA,GAASA,EAAMxF,QAAUwF,EAAMxF,OAAO,KACtCwF,EAAQA,EAAMxF,OAAO,GAAGwF,OAGrB,CACHxS,QAAcV,IAAVkT,EAAsB,OACLlT,IAAjBkT,EAAM2T,aAAiD7mB,IAAzBkT,EAAM2T,OAAOI,QAC3C/T,EAAM2T,OAAOI,QAAU/T,EAAMwQ,YAAcxQ,EAAM0K,UACrDu8B,WAAYpvC,EAAMmI,MAAM/E,SAAWpD,EAAMmI,MAAM/E,QAAQpN,OACvDq5C,eAAgB3sC,EAAM4sC,WAAWC,YAAYvvC,EAAMmI,MAAMxS,IACzDuc,UAAWxP,EAAM4sC,WAAWE,eAAexvC,EAAMmI,MAAMxS,IACvDmtB,kBAAmBpgB,EAAM4sC,WAAWG,eAAezvC,EAAMmI,MAAMxS,IAC/D+5C,eAAgBhtC,EAAM4sC,WAAW1jC,KACjC+jC,mBAAoBjtC,EAAM4sC,WAAWM,gBAAgB5vC,EAAMmI,MAAMxS,IACjE+jC,mBAAoBh3B,EAAMC,OAAOk3B,qBAAqB75B,EAAMmI,MAAMxS,IAClEmzB,WAAYpmB,EAAMqmB,YAAYD,YAGtC,MAAO,IAGgB,SAAC7lB,EAAUjD,GAClC,MAAO,CACH6vC,4BAA6B,SAAC7nC,GAAD,OACzB/E,EAAS4sC,aAA4B7vC,EAAMmI,MAAMxS,GAAIqS,KACzD+gC,iBAAkB,SAACn9B,GAAD,OACd3I,EAAS8lC,aAAiBn9B,KAC9BkkC,yBAA0B,SAACC,GAAD,OACtB9sC,EAAS6sC,aAAyB9vC,EAAMmI,MAAMxS,GAAIo6C,KACtDC,6BAA8B,SAACD,GAAD,OAC1B9sC,EAAS+sC,aAA6BhwC,EAAMmI,MAAMxS,GAAIo6C,KAC1DE,4BAA6B,SAACF,GAAD,OACzB9sC,EAASgtC,aAA4BjwC,EAAMmI,MAAMxS,GAAIo6C,KACzDtT,6BAA8B,SAACC,GAAD,OAC1Bz5B,EAASw5B,YAA6BC,KAC1CwT,2BAA4B,SAACtgC,GAAD,OACxB3M,EAASitC,YAA2BtgC,KACxCugC,kBAAmB,SAACvkC,GAAD,OACf3I,EAASktC,aAAkBvkC,KAC/BwiC,cAAe,SAACtlB,GAAD,OACX7lB,EAAS+lC,YAAyBlgB,KACtCsnB,gBAAiB,SAACC,GAAD,OACbptC,EAASqtC,aAAuBD,OAI7B5tC,CAlYsB,SAACzC,GAAU,IACvCmI,EAA2EnI,EAA3EmI,MAAOknC,EAAoErvC,EAApEqvC,eAAgBn9B,EAAoDlS,EAApDkS,UAAW4Q,EAAyC9iB,EAAzC8iB,kBAAmB6sB,EAAsB3vC,EAAtB2vC,mBACtD0F,EAAgBltC,EAAMwU,iBAAmBye,IACzC,GACA,CACI,CAAC/9B,MAAO,KAAM/H,MAAO,QACrB,CAAC+H,MAAO8K,EAAO7S,MAAO,UAE1BugD,EAAc,GACdC,EAAmB,GAEQtF,YAA4BroC,GAMhCrE,sBAAY,SAACrG,EAAGuK,GAEvC,GADAvK,EAAE+J,kBACExH,EAAM0vC,gBAAkB1nC,IAAc8a,EACtC,OAAO9iB,EAAMmwC,mBAAkB,GAEnCnwC,EAAMmwC,mBAAkB,GACxBnwC,EAAM6vC,4BAA4B7nC,IACnC,CACC8a,EACA9iB,EAAM8vC,yBACN9vC,EAAMgwC,6BACNhwC,EAAM0vC,iBAIVrrC,oBAAU,WACFrE,EAAM05B,oBACNqc,EAAmB/1C,EAAM05B,qBAE9B,CAAC15B,EAAM05B,mBAAoBqc,IAE9B1xC,oBAAU,WACN,IAAI2D,EAAY8a,EACX9a,IAGDA,EAAUgK,QAAQE,WAElBlS,EAAM8vC,yBACF9nC,EAAUgK,QAAQC,YAAcjK,EAAUgK,QAAQjO,QAAUiE,EAAUgK,QAAQG,YAGlFnS,EAAMiwC,4BAA4BjoC,EAAUgK,QAAQE,YAC7ClK,EAAUgK,QAAQG,YAAcnK,EAAUgK,QAAQjO,OACzD/D,EAAM8vC,yBAAyB9nC,EAAUgK,QAAQG,YAAcnK,EAAUgK,QAAQjO,QAEjF/D,EAAMiwC,4BAA4BjoC,EAAUgK,QAAQC,YAExDjS,EAAM6vC,4BAA4B7nC,KACnC,CAAC8a,IAGA3a,EAAMwU,iBAAmBye,MACzBya,EAAW,CACP,CAACvgD,MAAO,OAAQ+H,MAAO,MACvB,CAAC/H,MAAO,QAAS+H,MAAO8K,IAFjB1B,OAAApS,OAAAqS,EAAA,EAAArS,CAGH8T,EAAM6tC,kBAEdH,EAAcT,EAAsBS,EAAa1tC,IAGjDwnC,GAAsBA,EAAmBxnC,QACzCA,EAAQwnC,EAAmBxnC,OAG3BA,EAAM8J,YAAc9J,EAAMwU,iBAAmBye,KAC7Cia,EAAct/C,KAAK,CAACsH,MAAO8K,EAAM8J,WAAY3c,MAAO,eAGxD+/C,EAAgBD,EAAsBC,EAAeltC,GAGjDA,EAAM/E,UACNiyC,EAAa,GAAA5uC,OAAApS,OAAAqS,EAAA,EAAArS,CACLghD,GADKhhD,OAAAqS,EAAA,EAAArS,CAEL8T,EAAM/E,QAAQ7N,IACd,SAAAkQ,GAAC,OAAI+uC,EAAgB/uC,MAHhBpR,OAAAqS,EAAA,EAAArS,CAIL8T,EAAMO,YAAYtF,QAAQ7N,IAC1B,SAAAkQ,GAAC,OAAI+uC,EAAgB/uC,QAUjC,IAAIwwC,EAAmB,GAmBvB,IAAK,IAAI79C,KAlBL+P,EAAM/E,SAAWisC,GAAkBA,EAAe3nC,aAC9CwK,GAAam9B,EAAe2G,oBACE/gD,IAA1Bid,EAAUpJ,aAA6BoJ,EAAUD,aACjDC,EAAYA,EAAUD,YAE1BgkC,EAAmBpB,EAAuB3iC,EAAWlS,EAAM80C,OACtDv/C,IAAI,SAAAkQ,GAAC,OAAIkvC,EAAmBlvC,MAEjCwwC,EAAmBpB,EAAuBxF,EAAgBrvC,EAAM80C,OAC3Dv/C,IAAI,SAAAkQ,GAAC,OAAIkvC,EAAmBlvC,KAGjC4pC,EAAe2G,gBACfF,EAAmBzG,EAAe2G,kBAK5BC,EAAkB,CAC5B,IAAIjuC,EAAYiuC,EAAiB79C,GAAGiF,OAClB2C,EAAM80C,MACpB9sC,EAAU+sC,cAAcC,YACxBhtC,EAAUgtC,aACEh/C,OAAS,IACrBigD,EAAiB79C,GAAGsI,UAAY,mBAIxC,IAAMq1C,EAAqBjyC,sBAAY,SAACzG,GAGpC,GAFA7G,QAAQC,IAAI,0BAA2B4G,GACvC2C,EAAMgwC,6BAA6B3yC,IAC9BA,EAKD,OAJA7G,QAAQC,IAAI,0BACZuJ,EAAM8vC,yBAAyB,MAC/B9vC,EAAMiwC,4BAA4B,WAClCjwC,EAAM6vC,iCAA4B56C,GAItC,GAAIoI,EAAMoW,eACNzT,EAAM8vC,yBAAyBzyC,OADnC,CAKA,IAAIg4C,EAAgBO,EAAyBv4C,EAAM8K,MAAQ9K,EAAM8K,MAAQ9K,GACrE64C,EAAiBb,EAAc,GAAGh4C,MACtC,GAAIgyC,EAAgB,CAChB,IAAI8G,EAAMd,EACL9uC,OAAO,SAAAvM,GAAA,OAAAA,EAAEqD,QACToB,KAAK,SAAAnE,GAAA,OAAAA,EAAE+C,MACIzH,OAASy5C,EAAez5C,OACpCugD,IACAD,EAAiBC,EAAI94C,OAIxB64C,IACDA,EAAiB74C,GAErB2C,EAAM8vC,yBAAyBoG,GAC/B,IAAIxuC,EAAamtC,EAAuBqB,EAAgBl2C,EAAM80C,OAC9D,GAAIhyB,EAAmB,CACnB,IAAIszB,EAAoB1uC,EAAWjJ,KAC/B,SAAAyM,GAAC,OAAIA,EAAEtV,OAASktB,EAAkBltB,OACtC,GAAIwgD,EAEA,YADAp2C,EAAM6vC,4BAA4BuG,GAI1Cp2C,EAAM6vC,4BAA4BnoC,EAAW,MAC9C,CAAC2nC,EAAgBvsB,IAEduzB,EAAiBvyC,sBAAY,SAACzG,GAEhC,GADA2C,EAAM8vC,yBAAyBzyC,IAC1BA,EAID,OAHA2C,EAAM8vC,yBAAyB,MAC/B9vC,EAAMiwC,4BAA4B,WAClCjwC,EAAM6vC,iCAA4B56C,GAGtC,GAAIoI,EAAM24C,eAAiB34C,EAAM24C,gBAAgBhgD,OAAS,EAAG,CACzD,IAAIkc,EAAY7U,EAAM24C,gBAAgB,GAAG34C,MACzC2C,EAAMiwC,4BAA4B/9B,GAClC7U,EAAQ6U,EAEZ,IAAIxK,EAAamtC,EAAuBx3C,EAAO2C,EAAM80C,OACrD,GAAIhyB,EAAmB,CACnB,IAAIszB,EAAoB1uC,EAAWjJ,KAC/B,SAAAyM,GAAC,OAAIA,EAAEtV,OAASktB,EAAkBltB,OACtC,GAAIwgD,EAEA,YADAp2C,EAAM6vC,4BAA4BuG,GAI1Cp2C,EAAM6vC,4BAA4BnoC,EAAW,KAC9C,CACCob,EACA9iB,EAAM6vC,4BACN7vC,EAAMiwC,4BACNjwC,EAAM8vC,2BAEJwG,EAAoBxyC,sBAAY,SAACzG,GACnC2C,EAAMiwC,4BAA4B5yC,GAClC,IAAIqK,EAAamtC,EAAuBx3C,EAAO2C,EAAM80C,OACrD,GAAIhyB,EAAmB,CACnB,IAAIszB,EAAoB1uC,EAAWjJ,KAC/B,SAAAyM,GAAC,OAAIA,EAAEtV,OAASktB,EAAkBltB,OACtC,GAAIwgD,EAEA,YADAp2C,EAAM6vC,4BAA4BuG,GAI1Cp2C,EAAM6vC,4BAA4BnoC,EAAW,KAC9C,CAACob,IAEEyzB,EAAqBzyC,sBAAY,SAACzG,GAEpC,OADay4C,EAAiBr3C,KAAK,SAAA+3C,GAAG,OAAIA,EAAIn5C,QAAUA,KAEzD,CAACy4C,IAKAW,GAHmBz2C,EAAM0vC,eAGL1vC,EAAM0vC,eACxB,YAAc,sBAER/9B,EAAOiB,iBAAiB5S,EAAMmI,OAc5C,OAVMA,EAAMwU,iBAAmBye,IACpBuU,IACD8G,GAAqB,+BAGpBpH,IACDoH,GAAqB,iBAK3BrtC,EAAAjP,EAAA4G,cAAA,OAAKL,UAAW+1C,GACbZ,EAAY7/C,OAAS,EACrBoT,EAAAjP,EAAA4G,cAAC4I,EAAAxP,EAAD,CACE2U,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtB7C,QAASkxC,EACThxC,SAAU,SAAC6nB,GAAD,OAAOqpB,EAAmBrpB,EAAErvB,QACtCA,MAAOm3C,EAAgB7E,GAAoB,GAC3C7qC,YAAY,gBACZ,GACF6qC,IAAuBxnC,EACvB,GACDiB,EAAAjP,EAAA4G,cAAC4I,EAAAxP,EAAD,CACE2U,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtB0lB,iBAAiB,kBACjBvoB,QAAS0wC,EACTxwC,SAAU,SAAC6nB,GAAD,OAAO2pB,EAAe3pB,EAAErvB,QAClCA,MAAOm3C,EAAgBnF,GACvBvqC,YAAY,WACb6qC,IAAuBxnC,GAAS2tC,EAAiB9/C,OAAS,EAC1DoT,EAAAjP,EAAA4G,cAAC4I,EAAAxP,EAAD,CACC+yB,iBAAiB,sBAChBpe,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtB7C,QAASmxC,EACTjxC,SAAU,SAAC6nB,GAAD,OAAO4pB,EAAkB5pB,EAAErvB,QACrCA,MAAOk5C,EAAmBrkC,GAC1BpN,YAAY,eAAkB,GACjCsE,EAAAjP,EAAA4G,cAAC4I,EAAAxP,EAAD,CACE+yB,iBAAiB,qBACjBpe,YAAa,SAACrR,GAAD,OAAOA,EAAE+J,mBACtB7C,QAASsxC,EACTpxC,SAAU,SAAC6nB,GAAD,OAAO1sB,EAAM6vC,4BAA4BnjB,EAAErvB,QACrDA,MAAOs3C,EAAmB7xB,GAC1Bhe,YAAY,oDCnStB5F,EAAAC,EAAAC,EAAA,sBAAAoxC,IAAO,IAAMA,EACT,SAACroC,GACG,IAAIkL,EAASlL,EAAM8c,UAAY9c,EAAMuuC,mBAChCnwC,OAAO,SAAAd,GAAC,OAAIA,EAAEuvC,cACdzuC,OAAO,SAAAd,GAAC,OAAIA,EAAEuvC,YAAYh/C,OAAS,IAAK,GAC7C,OAAOsd,MAAM/O,KAAK,IAAIgP,IAAIF,+GCE5B1B,WAAS,IAAI1J,KA2CJxF,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzCS,SAAAzI,GAAqC,IAAnC0e,EAAmC1e,EAAnC0e,MAAO3W,EAA4B/H,EAA5B+H,gBAAiBoG,EAAWnO,EAAXmO,MAAW5E,EACbC,mBAASkV,EAAM2S,iBADF5nB,EAAApP,OAAA+R,EAAA,EAAA/R,CAAAkP,EAAA,GACpD8nB,EADoD5nB,EAAA,GACnCkzC,EADmClzC,EAAA,GAGnDmzC,EAAa9yC,sBAAY,WAC3B+yC,YAAkBn+B,GAClBi+B,EAAmBtiD,OAAAqS,EAAA,EAAArS,CAAKqkB,EAAM2S,mBAC/B,CAACsrB,EAAoBj+B,IAEpBlP,EAAQ,CACRkJ,gBAAiBf,EAAOmB,gBAAgB4F,EAAM/iB,KAElD,OACIgR,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,qBACbiG,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,gBACbiG,EAAAxM,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,gBAC7BiG,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,cACZgY,EAAM9iB,MAET+Q,EAAAxM,EAAA4G,cAAA,OAAKE,QAAS21C,EAAYl2C,UAAU,qBAApC,MAED2qB,EAAgB91B,IACb,SAAAo0B,GAAc,OACVhjB,EAAAxM,EAAA4G,cAAC+1C,EAAA,EAAD,CACE91C,IAAK2oB,EAAeh0B,GACpBwS,MAAOA,EACPpG,gBAAiBA,EACjB4nB,eAAgBA,qtCClBpC,IAAMhY,EAAS,IAAI1J,IACnB2F,OAAOmpC,MAAQ,GACfnpC,OAAOopC,KAAO,GAEd,IAiKMC,EAAS,SAAAnnB,GAQ4B,IAPvConB,EAOuCpnB,EAPvConB,kBACA9+C,EAMuC03B,EANvC13B,EACA9B,EAKuCw5B,EALvCx5B,QACAoI,EAIuCoxB,EAJvCpxB,eACAJ,EAGuCwxB,EAHvCxxB,aACA9D,EAEuCs1B,EAFvCt1B,QACAb,EACuCm2B,EADvCn2B,IACAw9C,EAAuCrnB,EAAvCqnB,cAAeC,EAAwBtnB,EAAxBsnB,mBAAwB38B,EACLjX,mBAAS,IADJkX,EAAArmB,OAAA+R,EAAA,EAAA/R,CAAAomB,EAAA,GAC9BiY,EAD8BhY,EAAA,GACpBiY,EADoBjY,EAAA,GAEnCrW,oBAAU,WACF/N,EAAQ,IAAMA,EAAQ,GAAGwF,MACzBZ,IAAS63B,MAAMC,YAAY18B,EAAQ,GAAGwF,MACjC3G,KAAK,SAAAsQ,GAAC,OAAIktB,EAAYltB,MAEhC,IAEH,IAAI+D,EAAQ,GAER6tC,EAAgB,GAGhB1kC,EAAQhB,EAAO4lB,SACf5lB,EAAOmB,gBAAgBxU,GAAiC,KAAjBA,EAAsBA,EAAe9D,GAAU,GACtF8D,EACAkL,EAAMguB,gBAAkB,OAAS53B,IAAK02B,WAAWh4B,GAAgB,IAC1D9D,EACPgP,EAAMguB,gBAAkB,kCAAyCh9B,EAAU,UAEtEkE,GAAmB/E,IACpB6P,EAAM8tC,QAAU,QAGxB,IAAIC,EAAS74C,EACTiT,EAAO4lB,SAAS5lB,EAAOmB,gBAAgB0kC,IAAwB94C,IAAkB,GACjF/E,EAAMgY,EAAO4lB,SAAS5lB,EAAO4lB,SAAS5lB,EAAOmB,gBAAgBnZ,GAAM,GAAI,QAAK1E,EAC5EsiD,IAEA5kC,EAAQ4kC,GAKZ,IAAI3iD,EAAQ0J,GAAgBhI,EAAQ,GAAG+1B,YACnC/1B,EAAQ,GAAGi2B,WAAa,IAAMj2B,EAAQ,GAAG+1B,YACzC/tB,EAAehI,EAAQ,GAAG1B,MAC1B4F,EAAUlE,EAAQ,GAAG1B,MACrB+E,GACU,KAAV/E,GAAgBA,KAChBA,EAAQ0B,EAAQ,GAAG1B,OAEvB,IA3CmC+5B,EAgD/B8oB,EAAS,GAhDsB7oB,EAAA3xB,EA2CxB3G,EACNiQ,OAAO,SAAAd,GAAC,OAAIA,EAAElH,OACdhJ,IAAI,SAAAkQ,GAAC,OAAIA,EAAElH,OAAMitB,OAAO,SAACrxB,EAAEoC,GAAH,SAAAkK,OAAApS,OAAAqS,EAAA,EAAArS,CAAc8F,GAAd9F,OAAAqS,EAAA,EAAArS,CAAoBkI,KAAI,IAChDgK,OAAO,SAAAmxC,GAAI,OAAI/9C,IAAQ+9C,GAAiB,cAATA,KA9CD,IAiDnC,IAAA9oB,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAsB,KAAbzD,EAAag1B,EAAAtxB,MAClBo6C,EAAO99C,GAAOA,EAAI3D,QAlDa,MAAAE,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAoDnC,IAAI0W,EAAM,IACNujC,EAASh+C,EACb,IAAK,IAAI+9C,KAAQD,EACTC,IAAS/9C,GAAO89C,EAAOC,GAAQtjC,IAC/BujC,EAASD,EACTtjC,EAAMqjC,EAAOC,IAGrB,IAAIE,EAAmC,KAA1BthD,EAAQ,GAAGi2B,WACpBj2B,EAAQ,GAAGi2B,WAAamG,EACxBrG,EAAc/1B,EAAQmI,KAAK,SAAAgH,GAAC,MAAsB,KAAlBA,EAAE4mB,cAClC9xB,OAAYtF,EACZo3B,IACAz3B,EAAQy3B,EAAYA,YACpB9xB,EAAY8xB,EAAY9xB,WAEvB+D,GAAiB9D,GAA2B,IAAhB8D,GAAiC,IAAX9D,IACnD5F,EAAQ+E,EAAI1B,eAEhB0B,EAAMg+C,EACEh8C,KAAKC,MAAMxD,EAAI,IAAvBxD,EAAuCijD,EAAWjjD,GAGlD+d,EAAQhB,EAAOmmC,YAAYnlC,EAAO/E,OAAOopC,MAEzC,IAAIt2C,EAAY,oBAShB,OARIpC,IACAoC,GAAa,WAGbtI,EAAI,GAAK,IACTsI,GAAa,WAIbiG,EAAAxM,EAAA4G,cAACg3C,EAAA,EAAD,CACEvP,IAAK5zC,EACLsO,QAAS80C,KACTrxC,EAAAxM,EAAA4G,cAAA,OACEgH,WAAW,EACXT,YAAa,SAAC7J,GAAD,OAAO25C,EAAmB9gD,EAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAEkuB,aAC1D9rB,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrB0B,MAAO,CAACqG,MAAOzX,EAAI,EAAI,EAAI,IAAM,KACjC6I,QAAS,SAACxD,GAAD,OAAOA,EAAE+J,mBAAqB2vC,EAAc15C,EAAG,CAACnH,UAASgI,eAAc9D,UAASb,SACzF+G,UAAWA,GACXiG,EAAAxM,EAAA4G,cAAA,OACEyI,MAAO6tC,EACP32C,UAAU,aACViG,EAAAxM,EAAA4G,cAAA,YACGpH,GAAe,KAARA,EAAaA,EAAM+E,GAAqC,IAAnBpI,EAAQN,OAAeM,EAAQ,GAAG1B,MAAQ4iD,IAAwB94C,KAGnHiI,EAAAxM,EAAA4G,cAAA,OACEL,UAAU,gBACT9L,GAEF0J,GAAgB9D,EAChBmM,EAAAxM,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GACNA,EAAE+J,kBAEE0vC,EADA18C,GAAuB,KAAZA,EACO,CAACA,WAED,CAACD,eAG3BmG,UAAU,eAAe8I,MAAOA,IAElC7C,EAAAxM,EAAA4G,cAAA,OAAKyI,MAAO6tC,EAAe32C,UAAU,cAAck3C,MA4B9DC,EAAa,SAACjjD,GAChB,IAAKA,EACD,MAAO,GAGXA,GADAA,EAAQA,EAAMoD,QACAJ,QAAQ,mBAAoB,IAE1C,IADA,IACSQ,EAAE,EAAGA,EAAIxD,EAAMoB,OAAQoC,IAC5B,GAAIxD,EAAMqjD,WAAW7/C,GAAK,GACtB,OAAOxD,EAAM24B,UAAUn1B,IAKpBqK,gBA3BS,SAACC,EAAO1C,GAC5B,MAAO,IAIgB,SAACiD,GACxB,MAAO,CACHykC,qBAAsB,SAAAjiC,GAAC,OAAIxC,EAASykC,aAAqBjiC,KACzD2xC,mBAAoB,SAACl6C,GAAD,OAAO+F,EAASm0C,aAAmBl6C,KACvDg7C,oBAAqB,SAACh7C,GAAD,OAAO+F,EAASi1C,aAAoBh7C,OAkBlDuF,CA3UH,SAAAzI,GAcN,IAbF1D,EAaE0D,EAbF1D,QACAuF,EAYE7B,EAZF6B,WACAs8C,EAWEn+C,EAXFm+C,WACAz+B,EAUE1f,EAVF0f,UACAy9B,EASEn9C,EATFm9C,cACAr1C,EAQE9H,EARF8H,OACArI,EAOEO,EAPFP,gBACAy+C,EAMEl+C,EANFk+C,oBACAx+C,EAKEM,EALFN,eACA09C,EAIEp9C,EAJFo9C,mBACAF,EAGEl9C,EAHFk9C,kBACAxP,EAEE1tC,EAFF0tC,qBACAzF,EACEjoC,EADFioC,UAEI38B,EAAMC,sBAAOtQ,GADfsO,EAEgCC,mBAASlN,GAFzCmN,EAAApP,OAAA+R,EAAA,EAAA/R,CAAAkP,EAAA,GAEG60C,EAFH30C,EAAA,GAEe40C,EAFf50C,EAAA,GAAAnJ,EAGoF89C,GAAc,GAA/Fz+C,EAHHW,EAGGX,IAAM6C,EAHTlC,EAGSkC,YAA8ByB,GAHvC3D,EAGsB4D,gBAHtB5D,EAGuC2D,SAASE,EAHhD7D,EAGgD6D,QAASC,EAHzD9D,EAGyD8D,UAAWk6C,EAHpEh+C,EAGoEg+C,aAHpEtuC,EAIoBxG,wBAASvO,GAJ7BgV,EAAA5V,OAAA+R,EAAA,EAAA/R,CAAA2V,EAAA,GAIGmpB,EAJHlpB,EAAA,GAISsuC,EAJTtuC,EAAA,GAAAG,EAK0B5G,mBAAiB,KAAR7J,GAA6B,KAAfkC,GAAqBnC,GALtE2Q,EAAAhW,OAAA+R,EAAA,EAAA/R,CAAA+V,EAAA,GAKG22B,EALH12B,EAAA,GAKY22B,EALZ32B,EAAA,GAOFhG,oBAAU,WACF/N,GACA+hD,EAAc/hD,IAEnB,CAACA,EAAS+hD,IAEbh0C,oBAAU,WACa,KAAfxI,GACAmlC,GAAW,IAEhB,CAACnlC,EAAYmlC,IAEhB38B,oBAAU,WACN6uB,YAAa12B,GAAarH,KACtBojD,IACL,CAAC/7C,IAEJ,IAAI2qC,EAAe,KAARxtC,EAAaA,EAAMw5B,EAAOqlB,YAAWrlB,GAAQ,GACpD3pB,EAAQ,CACRkJ,gBAAiBf,EAAOmmC,YAAYnmC,EAAO4lB,SAAS5lB,EAAOmB,gBAAgBq0B,GAAO,KAAMv5B,OAAOmpC,QAG/F0B,EAAQ98C,KAAK2tB,IAAIgvB,EAAe,GAAM,IACrCvX,IACDv3B,EAAMgW,QAAUi5B,GAGpBp0C,oBAAU,WACFjG,GACA4iC,GAAW,IAEhB,CAAC5iC,EAAW4iC,IAEf,IAAM//B,EAAS6C,sBAAY,WACvBo0C,EAAoBp2C,GAChBi/B,EACAoX,EAAWC,EAAYz+C,GAEnByE,EACA4iC,GAAW,GAGX9nC,YACI,GACA2C,EAAY,EAAG,MAAO,EAAGpC,OAAiBxE,EAAW0E,GACpDxE,KAAK,SAACub,GACHla,QAAQC,IAAI,0BAA2BkD,GACvC0+C,EAAc3nC,EAAE,OAIjC,CACCynC,EACA7hD,EACAqD,EACAonC,EACAC,EACAqX,EACAj6C,EACAg6C,EACAt2C,EACArI,IAEJi/C,YAAY,CAACpzC,MAAK28B,YAAWvoB,YAAWi/B,SAAU5X,IAElD18B,oBAAU,WAIN,OAHIqV,GACA9L,OAAOC,iBAAiB,UAAWrH,GAEhC,kBAAMkT,GAAa9L,OAAOE,oBAAoB,UAAWtH,KACjE,CAACkT,EAAWy+B,EAAY7hD,EAASqD,EAAKonC,EAASC,EAAYqX,EAAej6C,EAAWg6C,EAAYt2C,IAEpG,IAAM0E,EAAY1C,sBAAY,SAACrG,GACb,UAAVA,EAAEuD,KACFC,KAEL,CAACyY,EAAWy+B,EAAY7hD,EAASqD,EAAKonC,EAASC,EAAYqX,EAAej6C,EAAWg6C,EAAYt2C,IAEhGpB,EAAY,MAIhB,OAHIqgC,IACArgC,GAAa,iBAEbqgC,GAAa9iC,GAAYG,GAAcD,GAIvCub,IACAhZ,GAAa,YAGbiG,EAAAxM,EAAA4G,cAACg3C,EAAA,EAAD,CAAY70C,QAAS01C,KACnBjyC,EAAAxM,EAAA4G,cAAA,OACEuE,IAAKA,EACLyC,UAAmB,KAARpO,GAA6B,KAAfkC,EACzByL,YAAa,kBAAMogC,EAAqB/tC,IACxCkO,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrB0B,MAAOA,EAAO9I,UAAWA,EAAWO,QAASA,GAC7C0F,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,eACbiG,EAAAxM,EAAA4G,cAAA,OAAKyI,MAAOu3B,EAAUv3B,OAAQvU,EAAWyL,UAAU,QACxC,KAAR/G,EAAaA,EAAMw5B,EAAOqlB,YAAWrlB,GAAQ,KAGhD4N,EACDp6B,EAAAxM,EAAA4G,cAAA,OAAKL,UAAU,WACZrM,OAAOsE,KAAKsF,GAAS1I,IAClB,SAAC+I,EAAclG,GAAf,OACIuO,EAAAxM,EAAA4G,cAACk2C,EAAD,CACE7+C,EAAGA,EACH8+C,kBAAmBA,EACnBl2C,IAAK1C,EACL84C,mBAAoBA,EACpBD,cAAeA,EACf74C,aAAcA,EACdhI,QAAS2H,EAAQK,OAC1BjK,OAAOsE,KAAKwF,GAAS5I,IAClB,SAACiF,EAASpC,GAAV,OACIuO,EAAAxM,EAAA4G,cAACk2C,EAAD,CACE7+C,EAAGA,EACH4I,IAAKxG,EACL48C,mBAAoBA,EACpBF,kBAAmBA,EACnBC,cAAeA,EACf38C,QAASA,EACTlE,QAAS6H,EAAQ3D,OAC1BnG,OAAOsE,KAAKyF,GAAW7I,IACpB,SAACoE,EAAKvB,GAAN,OACIuO,EAAAxM,EAAA4G,cAACk2C,EAAD,CACE7+C,EAAGA,EACH4I,IAAKrH,EACLy9C,mBAAoBA,EACpBD,cAAeA,EACfz4C,eAAgBN,EAAUzE,GAAK,GAAG+E,eAClC/E,IAAKA,EACLrD,QAAS8H,EAAUzE,QA/BpBgN,EAAAxM,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,qBAnB7ClK,QAAQC,IAAI,wBAAyBsqC,EAASqX,EAAY9hD,EAAS2H,EAASG,EAAWD,GAChF,qFCrET06C,EAAW,SAAAv+C,GAAgC,IAA7BhF,EAA6BgF,EAA7BhF,MAAO+H,EAAsB/C,EAAtB+C,MAAOwH,EAAevK,EAAfuK,SAChC,OACEuE,EAAAjP,EAAA4G,cAAA,aACEqI,EAAAjP,EAAA4G,cAAA,SAAO6F,KAAK,WAAWkyC,QAASz7C,EAAOwH,SAAUA,IAChDvP,IAeQmN,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAxEU,SAAAzI,GAAe,IAAb++C,EAAa/+C,EAAb++C,QAAax1C,EAChBC,mBAASu1C,EAAQ5kC,KADD1Q,EAAApP,OAAA4U,EAAA,EAAA5U,CAAAkP,EAAA,GAC/B4Q,EAD+B1Q,EAAA,GAC1Bu1C,EAD0Bv1C,EAAA,GAAAuG,EAEhBxG,mBAASu1C,EAAQ3kC,KAFDnK,EAAA5V,OAAA4U,EAAA,EAAA5U,CAAA2V,EAAA,GAE/BoK,EAF+BnK,EAAA,GAE1BgvC,EAF0BhvC,EAAA,GAAAG,EAGZ5G,mBAASu1C,EAAQG,OAHL7uC,EAAAhW,OAAA4U,EAAA,EAAA5U,CAAA+V,EAAA,GAG/B8uC,EAH+B7uC,EAAA,GAGxB8uC,EAHwB9uC,EAAA,GAKpChG,oBAAU,WACN20C,EAAOD,EAAQ5kC,KACf8kC,EAAOF,EAAQ3kC,KACf+kC,EAASJ,EAAQG,QAClB,CAACH,EAASC,EAAQG,EAAUF,IAE/B,IAAMp0C,EAAWf,sBAAY,SAACrG,EAAG27C,EAAQC,GACrC,IAAIh8C,EAAQI,EAAEoJ,OAAOxJ,MACjB8pC,EAAO9pC,EACX,GAAc,MAAVA,GAA2B,OAAVA,EACjBA,EAAQ,OACL,GAAc,MAAVA,EACPA,EAAQ,OACL,GAAc,KAAVA,EACPA,EAAQ,OACL,IAAKxD,YAASwD,GACjB,OAEJ+7C,EAAOjS,GACP4R,EAAQM,GAAS3F,WAAWr2C,IAC7B,CAAC47C,EAAQD,EAAQD,IAEpB10C,oBAAU,WACN80C,EAASJ,EAAQG,QAClB,CAACC,EAAUJ,EAAQG,QAEtB,IAAMI,EAAoBx1C,sBAAY,WAClCi1C,EAAQG,OAASA,EACjBC,GAAUD,IACX,CAACA,EAAOC,EAAUJ,IAErB,OACI3vC,EAAAjP,EAAA4G,cAAA,OAAKL,UAAU,sBACX0I,EAAAjP,EAAA4G,cAAA,OAAKL,UAAW,WAAhB,MACE0I,EAAAjP,EAAA4G,cAAA,SAAOL,UAAU,gBACVrD,MAAO8W,EACPtP,SAAU,SAACpH,GAAD,OAAOoH,EAASpH,EAAGu7C,EAAQ,QAAQpyC,KAAK,UAE3DwC,EAAAjP,EAAA4G,cAAA,OAAKL,UAAW,WAAhB,MACE0I,EAAAjP,EAAA4G,cAAA,SAAOL,UAAU,gBACVrD,MAAO+W,EACPvP,SAAU,SAACpH,GAAD,OAAOoH,EAASpH,EAAGw7C,EAAQ,QAAQryC,KAAK,UAE7DwC,EAAAjP,EAAA4G,cAAC83C,EAAD,CAAUvjD,MAAM,QAAQ+H,MAAO67C,EAAOr0C,SAAUy0C,qpBC1C1D,IAEMC,0CACF,SAAAA,EAAYv5C,GAAO,IAAAnL,EAAA,OAAAR,OAAAmlD,EAAA,EAAAnlD,CAAAE,KAAAglD,IACf1kD,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACT+2C,YAAa,GACbC,aAAa,EACbC,MAAO,GACPngD,MAAO,EACPogD,iBAAa3kD,GAGjBJ,EAAKglD,WACLhlD,EAAKilD,gBAZUjlD,yFAenB,SAAAwF,IAAA,IAAAvD,EAAAvC,KAAA,OAAAwlD,EAAA5/C,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,eACmC/F,IAA3BV,KAAKyL,MAAMg6C,SAASrkD,GAD5B,CAAAmF,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,iBAKI9D,IAAS++C,UAAUC,oBACf3lD,KAAKyL,MAAMg6C,SAASrkD,GACpBpB,KAAKyL,MAAMrF,OACX,SAACw/C,GAAD,OAAUrjD,EAAKsjD,UAAUD,KARjC,wBAAAr/C,EAAA2B,SAAApC,EAAA9F,sFAWA,SAAU4lD,GACFA,EAAKE,cAAgB9lD,KAAKmO,MAAMk3C,aAChCrlD,KAAKmpB,SAAS,CAACk8B,iBAAa3kD,IAEhCV,KAAKmpB,SAAS,CACVi8B,MAAK,CAAGQ,GAAH1zC,OAAApS,OAAAqS,EAAA,EAAArS,CAAaE,KAAKmO,MAAMi3C,wEAIrC,SAAAvqB,IAAA,IAAAuqB,EAAA,OAAAI,EAAA5/C,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,cAAAu0B,EAAAv0B,KAAA,EACsB6+C,YAAStlD,KAAKyL,MAAMg6C,SAASrkD,IADnD,eAEkBV,KADV0kD,EADRpqB,EAAAn0B,MAAA,CAAAm0B,EAAAv0B,KAAA,eAAAu0B,EAAAvwB,OAAA,iBAKIzK,KAAKmpB,SAAS,CAACi8B,MAAOA,IAL1B,wBAAApqB,EAAA9yB,SAAA2yB,EAAA76B,8HAQA,SAAAgkC,IAAA,IAAA+hB,EAAA3/C,EAAA4/C,EAAAC,EAAAZ,EAAA,OAAAG,EAAA5/C,EAAAU,KAAA,SAAA69B,GAAA,cAAAA,EAAA39B,KAAA29B,EAAA19B,MAAA,cACQs/C,EAAgB/lD,KAAKyL,MAAMg6C,SAASrkD,GACpCgF,EAASpG,KAAKyL,MAAMrF,OACpB4/C,EAAiBhmD,KAAKmO,MAAM+2C,YAC5Be,EAAcC,IAJtB/hB,EAAA19B,KAAA,EAM4BE,IAAS++C,UAAUS,YACvC//C,EACA2/C,EACAE,EACAD,GAVR,OAMQX,EANRlhB,EAAAt9B,KAYI7G,KAAKmpB,SAAS,CAAC+7B,YAAa,GAAIC,aAAa,EAAME,YAAaA,IAZpE,wBAAAlhB,EAAAj8B,SAAA87B,EAAAhkC,4FAeA,WACI,OAAOA,KAAKolD,MAAM3jD,OA9DR,oCAiEd,WACI,OAAIzB,KAAKolD,MAAM3jD,OAASzB,KAAKmO,MAAMlJ,MAlEzB,GAmECjF,KAAKolD,MAAM/xC,MACdrT,KAAKmO,MAAMlJ,MAAOjF,KAAKmO,MAAMlJ,MApE3B,IAsECjF,KAAKolD,MAAM/xC,MAAMrT,KAAKmO,MAAMlJ,oCAI3C,WACI,OACImhD,EAAAxgD,EAAA4G,cAAA,OAAKL,UAAU,qCAKvB,WAAS,IAAAvJ,EAAA5C,KACL,OACIomD,EAAAxgD,EAAA4G,cAAA,OAAKL,UAAU,sBACbi6C,EAAAxgD,EAAA4G,cAAC65C,EAAA,EAAD,CAAsBl5C,UAAWpG,IAAS20B,cACxC0qB,EAAAxgD,EAAA4G,cAAC85C,EAAA,EAAD,CAAYn6C,UAAU,mBACpBi6C,EAAAxgD,EAAA4G,cAAC85C,EAAA,EAAD,CACEh2C,SAAU,SAACi2C,GACP3jD,EAAKuL,MAAM+2C,YAAcqB,EAAMj0C,OAAOxJ,MACtClG,EAAKumB,SAASvmB,EAAKuL,QAEvBkE,KAAK,WACLvJ,MAAO9I,KAAKmO,MAAM+2C,YAClB30C,YAAY,eAAepE,UAAU,sBACvCi6C,EAAAxgD,EAAA4G,cAAC85C,EAAA,EAAD,CAAiBE,UAAU,UACzBJ,EAAAxgD,EAAA4G,cAAC85C,EAAA,EAAD,CAAQn/C,KAAK,KAAKuF,QAAS,kBAAM9J,EAAK6jD,eAAeroC,MAAM,aAA3D,WAINgoC,EAAAxgD,EAAA4G,cAACk6C,EAAA9gD,EAAD,CACE64C,SAAU,KACVt3C,KAAM,GACNiX,MAAO,UACPg1B,aAAoC1yC,IAA3BV,KAAKmO,MAAMk3C,cAEnBrlD,KAAKmO,MAAMi3C,MAAMpkD,IAClB,SAAC4kD,EAAM/hD,GAAP,OAAauiD,EAAAxgD,EAAA4G,cAACm6C,EAAD,CAAMC,IAAK/iD,EAAI,GAAK,EAAG+hD,KAAMA,MAC1CQ,EAAAxgD,EAAA4G,cAAA,OAAKE,QAAS1M,KAAKyL,MAAMo7C,OAAQ16C,UAAU,mCAA3C,sBAzGgB8B,aAiH1B04C,0CACF,SAAAA,EAAYl7C,GAAO,IAAAkmB,EAAA,OAAA7xB,OAAAmlD,EAAA,EAAAnlD,CAAAE,KAAA2mD,IACfh1B,EAAAm1B,EAAA99B,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACT44C,YAAa,GACbC,SAAUv7C,EAAMm6C,KAAKoB,SACrBC,YAAY,EACZroB,KAAM,IAGVjN,EAAKu1B,aAVUv1B,2DAanB,SAAsB1H,GAIlB,OAHIjqB,KAAKyL,MAAMm6C,OAAS37B,EAAU27B,MAC9B5lD,KAAKknD,WAAWj9B,EAAU27B,OAEvB,kEAGX,SAAAuB,IAAA,IAAAvB,EAAAx/C,EAAA+3B,EAAAS,EAAAwoB,EAAAC,EAAAxiD,UAAA,OAAA2gD,EAAA5/C,EAAAU,KAAA,SAAAghD,GAAA,cAAAA,EAAA9gD,KAAA8gD,EAAA7gD,MAAA,cAAiBm/C,EAAjByB,EAAA5lD,OAAA,QAAAf,IAAA2mD,EAAA,GAAAA,EAAA,GAAsBrnD,KAAKyL,MAAMm6C,KACzBx/C,EAASw/C,EAAKoB,SAAWpB,EAAKoB,SAC9BpB,EAAKr+C,KAFb+/C,EAAA7gD,KAAA,EAGyBE,IAAS63B,MAAMC,YAAYr4B,GAHpD,mBAIqB1F,KADby9B,EAHRmpB,EAAAzgD,OAKQ7G,KAAKmpB,SAAS,CAAC69B,SAAU7oB,IALjCmpB,EAAA7gD,KAAA,EAQqBE,IAASg4B,aAAainB,EAAK39C,aARhD,UAQQ22B,EARR0oB,EAAAzgD,KASI7G,KAAKmpB,SAAS,CACVyV,UAAel+B,IAATk+B,EAAqB,GAAIA,EAAK2oB,oBAGpC3B,EAAK4B,WAbb,CAAAF,EAAA7gD,KAAA,gBAcQzG,KAAKmpB,SAAS,CACVlT,YAAa2vC,EAAK3vC,YAClB8wC,YAAa,iBAAmBnB,EAAKvlD,MAAQ,MAhBzDinD,EAAA78C,OAAA,sBAkBem7C,EAAK3vC,YAlBpB,CAAAqxC,EAAA7gD,KAAA,gBAmBQzG,KAAKmpB,SAAS,CACVlT,YAAa2vC,EAAK3vC,YAClB8wC,YAAa,iBAAmBnB,EAAKvlD,MAAQ,MArBzDinD,EAAA78C,OAAA,sBAwBem7C,EAAKqB,WAxBpB,CAAAK,EAAA7gD,KAAA,gBAyBQzG,KAAKmpB,SAAS,CACV89B,YAAY,EACZF,YAAa,cA3BzBO,EAAA78C,OAAA,yBAAA68C,EAAA7gD,KAAA,GAgCwB4E,IAAK2K,QAAQ4vC,EAAKE,aAAa,GAhCvD,QAgCQsB,EAhCRE,EAAAzgD,KAiCI7G,KAAKmpB,SAAS,CAAC49B,YAAaK,EAAQxqB,UAjCxC,yBAAA0qB,EAAAp/C,SAAAi/C,EAAAnnD,wFAqCA,WACQA,KAAKmO,MAAM8H,aACDoD,OAAO0nB,KAAK,WAAa/gC,KAAKmO,MAAM8H,YAAa,UACvDwxC,mCAIZ,WACcpuC,OAAO0nB,KAAK,SAAW/gC,KAAKmO,MAAM64C,SAAU,UAClDS,8BAGR,WAAS,IAAAC,EAAA1nD,KACDmM,EAAY,0BAIhB,OAHInM,KAAKyL,MAAMm7C,MACXz6C,GAAa,QAGbi6C,EAAAxgD,EAAA4G,cAAA,OAAKL,UAAWA,GACdi6C,EAAAxgD,EAAA4G,cAAA,OACEE,QAAS,kBAAMg7C,EAAKC,eACpBx7C,UAAU,sBAAsBnM,KAAKmO,MAAM64C,SAF7C,KAGAZ,EAAAxgD,EAAA4G,cAAA,OAAKE,QAAS,kBAAMg7C,EAAKE,eAAez7C,UAAU,sBAChDi6C,EAAAxgD,EAAA4G,cAAC65C,EAAA,EAAD,CAAsBl5C,WAAYnN,KAAKmO,MAAM84C,YAC1CjnD,KAAKmO,MAAM44C,aAEdX,EAAAxgD,EAAA4G,cAAC65C,EAAA,EAAD,CAAsBl5C,UAAWnN,KAAKmO,MAAM84C,YAC1Cb,EAAAxgD,EAAA4G,cAAA,OAAKL,UAAU,sBAGnBi6C,EAAAxgD,EAAA4G,cAAA,OAAKL,UAAU,aAAanM,KAAKmO,MAAMywB,cAxFlC3wB,aA8FJ+2C,qICxNR,SAAeM,EAAtBn9C,GAAA,OAAA0/C,EAAAx/C,MAAArI,KAAA6E,sDAAO,SAAAiB,EAAwB1E,GAAxB,IAAA0mD,EAAA1C,EAAA2C,EAAAC,EAAAC,EAAAC,EAAAC,EAAAtjD,UAAA,OAAA+6C,EAAAh6C,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UAA4BqhD,IAA5BK,EAAA1mD,OAAA,QAAAf,IAAAynD,EAAA,KAAAA,EAAA,QACQznD,IAAPU,EADD,CAAAmF,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,cAEQ/J,GAFR,cAAA6F,EAAAE,KAAA,EAIeE,IAAS++C,UAAU0C,YACjChnD,GALD,cAICgkD,EAJD7+C,EAAAM,KAAAN,EAAAE,KAAA,EAOuBE,IAAS0hD,mBAAmBC,iBAClDlnD,GARD,cAOC2mD,EAPDxhD,EAAAM,KASCmhD,EAAoB,GATrBzhD,EAAAE,KAAA,GAWmB8hD,IAAiBC,aAAapnD,GAXjD,eAYH6mD,GADIA,EAXD1hD,EAAAM,MAYmB7F,IAAI,SAAAkQ,GAAC,OAAApR,OAAA2oD,EAAA,EAAA3oD,CAAA,GAAUoR,EAAV,CAAa+1C,YAAY,OAEhDiB,EAAYJ,EAAc,GAAA51C,OAAApS,OAAA4oD,EAAA,EAAA5oD,CACrBioD,GAAmBC,EADEloD,OAAA4oD,EAAA,EAAA5oD,CACoBmoD,GADpBnoD,OAAA4oD,EAAA,EAAA5oD,CACmCslD,IADnC,GAAAlzC,OAAApS,OAAA4oD,EAAA,EAAA5oD,CAErBslD,GAFqBtlD,OAAA4oD,EAAA,EAAA5oD,CAEXmoD,KACTlgD,KAAK,SAACnC,EAAGoC,GAAJ,OAAUA,EAAEC,YAAcrC,EAAEqC,cAjBxC1B,EAAAkE,OAAA,SAkBIy9C,GAlBJ,yBAAA3hD,EAAA2B,SAAApC,4nBCGD6iD,0CACF,SAAAA,EAAYl9C,GAAO,IAAAnL,EAAA,OAAAR,OAAA8oD,EAAA,EAAA9oD,CAAAE,KAAA2oD,IACfroD,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,GAGb7N,EAAKuoD,cANUvoD,uFASnB,SAAAwF,IAAA,OAAA85C,EAAAh6C,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACSE,IAASmiD,QAAQC,SAD1B,CAAAxiD,EAAAE,KAAA,eAAAF,EAAAE,KAAA,EAEcE,IAASmiD,QAAQD,cAF/B,OAGQ7oD,KAAKmpB,SAASnpB,KAAKmO,OAH3B,wBAAA5H,EAAA2B,SAAApC,EAAA9F,yFAOA,WACI,OAAOA,KAAKyL,MAAM+B,gBAAgBW,MAAM+uB,QAAQ8rB,sCAGpD,SAAQ9/C,GAMJ,OALAjH,QAAQC,IAAI,eAAiBgH,EAAEuD,KAC/BvD,EAAE+J,kBACY,WAAV/J,EAAEuD,KACFzM,KAAKgpD,eAAep8B,UAEjB,wBAGX,WAAS,IAAArqB,EAAAvC,KAEDipD,EADOtiD,IAASmiD,QAAQI,KACND,WAQtB,OAPAA,EAAWlhD,KAAK,SAACnC,EAAGoC,GAChB,YAAetH,IAAXkF,EAAEvE,WAAiCX,IAAXsH,EAAE3G,KACnB,EAEJuE,EAAEvE,KAAK+1C,cAAcpvC,EAAE3G,QAI9B8nD,EAAAvjD,EAAA4G,cAAA,OACEL,UAAU,qBACT88C,EAAWjoD,IACR,SAACooD,EAAQvlD,GAAT,OACIslD,EAAAvjD,EAAA4G,cAAC68C,EAAA,EAAD,CACM58C,IAAK28C,EAAO/nD,KAAK,IACjBioD,iBAAkB,kBAAM/mD,EAAK4mB,SAAS5mB,EAAK4L,QAC3Co7C,aAAchnD,EAAKkJ,MAAM89C,aACzBC,eAAgBjnD,EAAKkJ,MAAM+9C,eAC3BC,WAAYlnD,EAAKkJ,MAAMg+C,WACvBC,UAAWnnD,EAAKkJ,MAAMi+C,UACtBN,OAAQA,cApDLn7C,aAgEhBC,gBALS,SAAAC,GACpB,MAAO,IAI6B,KAAzBD,CAA+By6C,sCCtE9C,IAAAp2C,EAAA5H,EAAA,GAAA6H,EAAA7H,EAAA/B,EAAA2J,GAAAo3C,EAAAh/C,EAAA,IAAAi/C,EAAAj/C,EAAA,GAAAA,EAAA,MAmCeuD,gBAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHm7C,iBAAkB,SAAA34C,GAAC,OAAExC,EAASm7C,aAAiB34C,OAItChD,CA/BQ,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MAEjBqB,EAAQ,CACRkJ,gBAFQvK,EAAMwK,OAIlB,OAAQ5L,EAAA5M,EAAA4G,cAAA,OACEgH,WAAW,EACXT,YAAa,kBAAM82C,aAAiBj2C,IACpCN,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBpH,UAAU,2BACVqG,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,mCACbqG,EAAA5M,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,cAC7BqG,EAAA5M,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,cAC7BqG,EAAA5M,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,cAC7BqG,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,oBACfqG,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,2DCnB/B,IAAAoG,EAAA5H,EAAA,GAAA6H,EAAA7H,EAAA/B,EAAA2J,GAAAu3C,EAAAn/C,EAAA,IAAAo/C,EAAAp/C,EAAA,IAAAgI,EAAAhI,EAAA,GAAAq/C,EAAAr/C,EAAA,IAAAs/C,EAAAt/C,EAAA,IAAAu/C,EAAAv/C,EAAA,KAwDeuD,gBAbS,SAACC,EAAO1C,GAC9B,MAAO,CACH0+C,WAAY1+C,EAAMq9B,SAAWr9B,EAAMq9B,QAAQwJ,eACvC7mC,EAAMq9B,QAAQwJ,cAAc7wC,SAIX,SAACiN,GAC1B,MAAO,CACHk8B,mBAAoB,SAAA15B,GAAC,OAAIxC,EAASk8B,aAAmB15B,OAI5ChD,CA9CI,SAAAzI,GAA2F,IAAzF0kD,EAAyF1kD,EAAzF0kD,WAAYrhB,EAA6ErjC,EAA7EqjC,QAAS14B,EAAoE3K,EAApE2K,QAASoU,EAA2D/e,EAA3D+e,UAAWD,EAAgD9e,EAAhD8e,OAAgD6lC,EAAA3kD,EAAxC4kD,gBAAwC,IAAAD,KAAxBxf,EAAwBnlC,EAAxBmlC,mBAClF96B,oBAAU,WACDM,EAAQ5L,SAAS+f,IAClBC,EAAUpU,EAAQ,KAEvB,CAACA,EAASoU,EAAWD,IACxB,IAAI+lC,EAAexhB,GAAWA,EAAQyhB,eAAiBzhB,EAAQyhB,kBAAoBh6B,IAC/E,SAAW,UAEf,OACI/d,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,qBACbqG,EAAA5M,EAAA4G,cAACu9C,EAAA,EAAD,CACEp7C,QAAS67C,IACT99C,QAAS,kBAAMk+B,OAAmBlqC,IAClCyL,UAAU,iCACVqG,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,gBAEhBiE,EACCpP,IACE,SAAAypD,GAAO,OACPj4C,EAAA5M,EAAA4G,cAAA,OACEE,QAAS,kBAAM8X,EAAUimC,IACzBt+C,UAAWs+C,IAAYlmC,EAAS,mBAAqBkmC,EAAQ,UAAW,UAAYA,EAAQ,WAC/E,aAAZA,EAAyBH,EAAeG,EACxCN,EAAa,GAAiB,aAAZM,GAA0Bj4C,EAAA5M,EAAA4G,cAAA,QAAML,UAAU,iBAAiBg+C,MAEnFE,GAAY73C,EAAA5M,EAAA4G,cAAA,OAAKL,UAAU,mBAAmBO,QAAS,kBAAMg+C,YAAW5hB,IAAU/6B,IAAI,uLCClFG,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH4L,KAAMlJ,EAAMqmB,YAAYm2B,eAIH,SAACj8C,GAC1B,MAAO,CACHk8C,QAAS,SAAC15C,GAAD,OAAOxC,EAASm8C,aAA2B35C,OAI3ChD,CA7Ba,SAAAzI,GAAsC,IAApC4R,EAAoC5R,EAApC4R,KAAM7J,EAA8B/H,EAA9B+H,gBAAiBo9C,EAAanlD,EAAbmlD,QACjD,OAAKvzC,EAKDnH,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAD,CAAOC,gBAAgB,iBAAiB1zC,KAAMA,EAAMwvC,OAAQ,kBAAM+D,GAAQ,KACxE16C,EAAAtK,EAAA4G,cAACw+C,EAAA,EAAD,CAAoBz4B,KAAM,kBAAMq4B,GAAQ,IAAQp9C,gBAAiBA,IACjE0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAACmxC,EAAA,EAAD,CACEnwC,gBAAiBA,IACnB0C,EAAAtK,EAAA4G,cAACy+C,EAAA,EAAD,CAAgBz9C,gBAAiBA,MAT9B,2GCKT4P,EAAS,IAAI1J,IAEbw3C,EAAmBC,eAAK,SAAC1/C,GAC3B,IAAMsF,EAAMC,iBAAOD,GADkB/B,EAECC,oBAAS,GAFVC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAE9Bo8C,EAF8Bl8C,EAAA,GAAAA,EAAA,ICfd,SAAAzJ,GAAyC,IAAvC4lD,EAAuC5lD,EAAvC4lD,iBAAkBt6C,EAAqBtL,EAArBsL,IAAK8B,EAAgBpN,EAAhBoN,WAChD/C,oBAAU,WACN,GAAK+C,GACAw4C,GACAt6C,GACAs6C,EAAiB1xC,SACjB5I,EAAI4I,QAJT,CASA,IAAIgc,EAAa01B,EAAiB1xC,QAAQgc,WAEtC21B,EAAc31B,EADA01B,EAAiB1xC,QAAQ4xC,YAGvCzxC,EAAO/I,EAAI4I,QAAQkc,WAEnB21B,GAAO1xC,GADCA,EAAO/I,EAAI4I,QAAQ4xC,cACJ,GACvBC,EAAM71B,GAAc61B,EAAMF,IAE1BD,EAAiB1xC,QAAQ0qB,SAASvqB,EAAO,IAAK,KAEnD,CAACjH,EAAY9B,EAAKs6C,IDHrBI,CAAY,CACRJ,iBAAkB5/C,EAAMigD,qBACxB36C,MACA8B,WAAYpH,EAAMoH,aAkCtB,IAAM84C,EAAmBp8C,sBAAY,SAACrG,IAC9BuC,EAAM4G,OAASu5C,KACdngD,EAAM86C,MAAMz9C,SAGjBI,EAAEqK,iBACFrK,EAAE+J,kBACFxH,EAAMkgD,qBACP,CAAClgD,EAAM4G,KAAM5G,EAAM86C,MAAO96C,EAAMkgD,mBAE7BE,EAAkBt8C,sBAAY,SAACrG,IAC7BuC,EAAM4G,OAASu5C,KACdngD,EAAM86C,MAAMz9C,SAGjBI,EAAEqK,iBACFrK,EAAE+J,kBACFxH,EAAMogD,oBACP,CAACpgD,EAAM4G,KAAM5G,EAAM86C,MAAO96C,EAAMogD,kBAE7BC,EAAWv8C,sBAAY,SAACrG,IACtBuC,EAAM4G,OAASu5C,KACdngD,EAAM86C,MAAMz9C,SAGjBI,EAAE+J,kBACFxH,EAAMqgD,SAAS5iD,KAChB,CAACuC,EAAM4G,KAAM5G,EAAM86C,QAElB3T,EAAO,GACPnnC,EAAM4G,OAAS05C,IACfnZ,EAAOnnC,EAAM3C,MAAQ,EACd2C,EAAM4G,OAASu5C,MACtBhZ,EAAOnnC,EAAM3C,MAAQ,KAGzB,IAAMkjD,EAAuBz8C,sBAAY,SAAC0F,GAOtC,OANIxJ,EAAM4G,OAASu5C,MACVngD,EAAM86C,MAAMz9C,QAEbmM,EAAMgW,QAAU,OAGjBhW,GACR,CAACxJ,EAAM4G,KAAM5G,EAAM86C,QAElB0F,GAAW,EAKXA,IAJAxgD,EAAM4G,OAASu5C,MACdngD,EAAM86C,MAAMz9C,OAMjB,IAEIsV,EAFA8tC,EAAW,GACXtlC,OAA8BlmB,IAAnB+K,EAAMmb,SAAyB,GAAKnb,EAAMmb,SAEzD,GAAInb,EAAM0gD,OAAQ,CACd,IAAI9lB,EAAa56B,EAAM86C,MAAMlgB,WAEzBjoB,OADe1d,IAAf2lC,EACQjpB,EAAOqI,SAAS,IAEhBrI,EAAOqI,SAAS4gB,EAAWA,gBAEpC,CACH,IAAI+lB,EAAW3gD,EAAM6C,YAAYlN,GAAGiS,MAChC5H,EAAM6C,YAAYlN,GAAGiS,MAAM,EAAG,IAAM,IAAM5H,EAAM6C,YAAYlN,GAChEgd,EAAQhB,EAAOmB,gBAAgB6tC,GAC1BC,MAAM5gD,EAAM3C,SACbojD,EAASI,eAAmC,GAAjB7gD,EAAM3C,MAAQ,GAAO,WAGxD,IAAIyjD,EAAY,GAEhBL,EAAQpsD,OAAAsa,EAAA,EAAAta,CAAA,GACAosD,EADA,CAEJ5wC,MAAOkxC,YAAY5lC,EAAUnb,EAAM46B,WAAY56B,EAAMghD,QAAU,EAC/DtuC,gBAAiBf,EAAO4lB,SAAS5kB,EAAO,KAG5CmuC,EAAYP,EAAqBO,GAEjC,IAAIpgD,EAAYV,EAAMoH,WAClB,mBAAqB,UAErBpH,EAAMihD,SACNvgD,GAAa,SAGjBogD,EAAS,MAAYC,YAAY5lC,EAAUnb,EAAM46B,WAAY56B,EAAMghD,QAEnE,IAAIE,EAAY,CACZrxC,MAAO4wC,EAAS5wC,MAChBsxC,SAAUnhD,EAAMmhD,UAAYV,EAAS5wC,OAYzC,OATI7P,EAAMoH,YAAcuL,IACpBmuC,EAAS,OAAa,aAAenvC,EAAO4J,SAAS5I,EAAO,KAC5DuuC,EAAS,gBAAsBvvC,EAAO4J,SAAS5I,EAAO,KAGtD3S,EAAMohD,eACN1gD,GAAa,kBAGA,IAAbya,EACO,GAIP1W,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACL5E,UAAWA,EACX8N,UAAWxO,EAAMwO,UACjBhF,MAAOs3C,GAEPr8C,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOi3C,EACP3xC,YAAauxC,EACb3/C,UAAU,eACV+D,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAW8+C,GAC/B/7C,EAAAtK,EAAA4G,cAAA,OACE+N,YAAasxC,EACb5xC,UAAWxO,EAAMwO,UACjB9N,UAAU,eAEd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZymC,GAEH1iC,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAW8+C,GAC/B/7C,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaoxC,EACb1xC,UAAWxO,EAAMwO,UACjB9N,UAAU,iBAGdV,EAAMohD,aAQL,GAPF38C,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO03C,EAAWxgD,UAAU,gBAC3Bi/C,EAAc0B,YACXrhD,EAAM86C,MAAO96C,EAAM6C,YAAasY,EAChC4lC,YAAY,EAAG/gD,EAAM46B,WAAY56B,EAAMghD,SAAW,GACtDv8C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAoBb+B,cAbS,SAACC,EAAO1C,GAC5B,IAAIshD,EAAiB5+C,EAAMqmB,YAAYu4B,eAIvC,MAAO,CACHl6C,gBAJgCnS,IAAnBqsD,QAEsBrsD,IAAnCqsD,EAAethD,EAAM86C,MAAMnlD,IAG3BwlB,SAAUnb,EAAM86C,MAAM3/B,SACtB9d,MAAO2C,EAAM86C,MAAMz9C,MACnB2jD,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAA+Bg9C,GEvJ9C,IAQeh9C,cARS,SAACC,EAAO1C,GAC5B,MAAO,CACHmb,SAAUnb,EAAM86C,MAAM3/B,SACtBomC,gBAAiBvhD,EAAM86C,MAAM0G,UAAUxrD,OACvCgrD,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAhEf,SAAuBzC,GACnB,IAAI86C,EAAQ96C,EAAM86C,MAElB,IAAKA,EAAMz9C,MAAO,CAEd,IAAImM,EAAQ,CACRqG,MAAOkxC,YAAY/gD,EAAMmb,SAAUnb,EAAM46B,WAAY56B,EAAMghD,QAC3DxhC,QAAS,MAGb,OACI/a,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAmB8I,MAAOA,GACvC/E,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,KAKXsxC,EAAMzmC,KAAjB,IACI8G,EAAW2/B,EAAM3/B,SACjBtL,EAAQkxC,YAAY5lC,EAAUnb,EAAM46B,WAAY56B,EAAMghD,QACtDx3C,EAAQ,CACRqG,MAAOA,GAGP2xC,EAAYxhD,EAAM86C,MAAM2G,eAC5B,OACIh9C,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAW,mBAAqBV,EAAM86C,MAAMzmC,MAC5DmtC,EAAUjsD,IACP,SAACulD,EAAO1iD,GAAR,OACIqM,EAAAtK,EAAA4G,cAAC2gD,EAAD,CACM7+C,YAAa8+C,IACbR,SAAUtxC,EACV7O,IAAK85C,EAAMnlD,GACXgrD,SAAU,QAAQhlD,KAAK2tB,IAAIwxB,EAAMz9C,MAAQ,EAAG,GAC5CuJ,KAAMu5C,IACNO,QAAQ,EACR9lB,WAAY56B,EAAM46B,WAClBqmB,OAAQ7oD,IAAMopD,EAAUxrD,OAAS,EACjC4rD,QAAe,IAANxpD,EACTkP,YAAa,SAAC7J,GAAD,MAAO,IACpB4iD,SAAU,SAAC5iD,GACPuC,EAAMqgD,SAASrgD,EAAM86C,MAAOA,EAAOr9C,IAEvC+Q,UAAW,SAAC/Q,GAAD,OAAOuC,EAAMwO,UAAUssC,IAClC+G,eAAgB,SAACpkD,GAAD,OAAOuC,EAAM6hD,eAAe7hD,EAAM86C,MAAOA,IACzDoF,iBAAkB,SAACziD,GAAD,OAAOuC,EAAMkgD,iBAAiBlgD,EAAM86C,MAAOA,IAC7DgH,cAAe,SAACrkD,GAAD,OAAOuC,EAAM8hD,cAAc9hD,EAAM86C,MAAOA,IACvDsF,gBAAiB,SAAC3iD,GAAD,OAAOuC,EAAMogD,gBAAgBpgD,EAAM86C,MAAOA,IAC3DiH,WAAY/hD,EAAM+hD,WAClBhgD,gBAAiB/B,EAAM+B,gBACvB+4C,MAAOA,uCC+ChBr4C,cArBS,SAACC,EAAO1C,GAC5B,IAAI6I,EAAM7I,EAAM+B,gBAAgBwG,mBAChC,MAAO,CACH+4C,eAAgB5+C,EAAMqmB,YAAYu4B,eAClC/4C,mBAAoBvI,EAAM+B,gBAAgBwG,mBAC1CL,cAAelI,EAAM+B,gBAAgBY,OAAOD,EAAM2F,IAAIH,eACtDq0B,aAAgB75B,EAAMqmB,YAAYwT,aAClCylB,gBAAiBt/C,EAAMqmB,YAAYi5B,gBACnCC,WAAYv/C,EAAMqmB,YAAYk5B,WAAWp5C,EAAIlT,IAC7CmzB,WAAYpmB,EAAMqmB,YAAYD,aAKX,SAAC7lB,GACxB,MAAO,CACHi/C,mBAAoB,SAACz8C,GAAD,OAAOxC,EAASk/C,YAA8B18C,KAClE2oC,cAAe,SAAC3oC,GAAD,OAAOxC,EAAS+lC,YAAyBvjC,OAIjDhD,CAnGW,SAAAzI,GAWpB,IAVFkoD,EAUEloD,EAVFkoD,mBACAF,EASEhoD,EATFgoD,gBACAjgD,EAQE/H,EARF+H,gBACAw6B,EAOEviC,EAPFuiC,aAEAr0B,GAKElO,EANFsnD,eAMEtnD,EALFkO,eACA+5C,EAIEjoD,EAJFioD,WACAn5B,EAGE9uB,EAHF8uB,WAEAslB,GACEp0C,EAFFuO,mBAEEvO,EADFo0C,eAEI5kC,EAAQ,CACRoG,OAAQ2sB,GAcZ,GAVAl4B,oBAAU,WACF29C,GAAmB95C,GACnBA,EAAcsqC,eAEnB,CAACwP,EAAiB95C,IAErB7D,oBAAU,WACN,OAAO,kBAAM69C,OAAmBjtD,KACjC,KAEG+sD,GAAmBl5B,IAAejE,MAAao9B,EACjD,MAAO,GAGX,IAAItlB,EAAU,GACVxL,EAAU,GACVhpB,OAAQlT,EACZ,QAAsBA,IAAlBiT,GAcA,IAbAC,EAAQD,KAGJy0B,EACIl4B,EAAAtK,EAAA4G,cAAC67B,EAAA,EAAD,CACE6T,gBAAgB,EAChB3pB,KAAM,WACFo7B,OAAmBjtD,GACnBm5C,EAAcnlB,MAElB9gB,MAAOA,EAAOpG,gBAAiBA,KAGrC+mB,IAAejE,IACfsM,EAAUixB,YAAoBj6C,QAC3B,GAAIo0B,EAAe,GAAI,CAC1B,IAAI9b,EAAUtY,EAAMk6C,SAASL,EAAgBM,eAC7CnxB,EACI1sB,EAAAtK,EAAA4G,cAAC87B,EAAA,EAAD,CACEC,gBAAgB,+BAChBC,WAAW,EACXtc,QAASA,EACTlJ,MAAO,GACPylB,cAAc,EACdj7B,gBAAiBA,EACjBk7B,aAAa,EACb90B,MAAOA,UAIjBqB,EAAMoG,OAAS,EAGnB,OACInL,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,gCACTi8B,EACAxL,KC7EL+d,EAAoB,IACpBC,EAAa,GAoCJ1sC,YAAQ,KATI,SAAAQ,GACvB,MAAO,CACHw5B,6BAA8B,SAACC,GAAD,OAC1Bz5B,EAASw5B,YAA6BC,KAC1CwT,2BAA4B,SAACtgC,GAAD,OACxB3M,EAASitC,YAA2BtgC,OAIjCnN,CAlCf,SAAkCzC,GAAO,IAAAuD,EACHC,wBAASvO,GADNwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC9BotC,EAD8BltC,EAAA,GACnBmtC,EADmBntC,EAAA,GAE/BqL,EAAchL,sBAAY,SAACrG,GAC7BuC,EAAMy8B,8BAA6B,GACnC,IAAIoU,GAAM,IAAI51B,MAAOC,eACHjmB,IAAd07C,GACIE,EAAMF,GAAazB,IACflvC,EAAM+B,gBAAgBklB,MAAM6pB,WAAW/nB,YAAYwT,cAAgB4S,EACnEnvC,EAAMkwC,2BAA2Ba,IAAe9nB,MAEhDjpB,EAAMkwC,2BAA2B,IAI7CU,EAAaC,IACd,CAACF,EAAWC,IAEf,OACInsC,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbpO,UAAU,gCAKpB,gCChCe,SAAS6hD,EAAcviD,GAClC,IAAIy9C,EAAOz9C,EAAMy9C,KADwBl6C,EAELC,mBAASi6C,EAAKD,YAFT/5C,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAElCi6C,EAFkC/5C,EAAA,GAEtB++C,EAFsB/+C,EAAA,GAGzCY,oBAAU,WACDrE,EAAMy9C,KAAKH,UACZt9C,EAAMy9C,KAAKpmB,OACNliC,KAAK,kBACAqtD,EAAcnuD,OAAA2R,EAAA,EAAA3R,CAAK2L,EAAMy9C,KAAKD,gBAE7C,CAACx9C,EAAMy9C,OAEV,IAAMK,EAAe,SAAC2E,GAClBjsD,QAAQC,IAAI,eAAgBgsD,GADD,IAEtBC,EAAYD,EAAZC,SACL1iD,EAAM+B,gBAAgB4gD,uBAAuBF,EAAKvmC,QAASwmC,IAGzD3E,EAAiB,SAACJ,GACpBnnD,QAAQC,IAAI,iBAAkBknD,IAG5BK,EAAa,SAACyE,KAGhBG,EAAgBvuD,OAAA2R,EAAA,EAAA3R,CAAQmpD,GAK5B,OAJIoF,EAAiB5sD,OAAS,MAC1B4sD,EAAmBpF,EAAW51C,MAAM,EAAG,MAIvCnD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oCACZkiD,EAAiBrtD,IACV,SAAAooD,GAAM,OACFl5C,EAAAtK,EAAA4G,cAAC8hD,EAAA,EAAD,CACM7hD,IAAK28C,EAAO/nD,KACZioD,iBAAkB,iBAAM,IACxBC,aAAcA,EACdC,eAAgBA,EAChBC,WAAYA,EACZC,WAAW,EACXN,OAAQA,OCpCpC,IAAMmF,EAAkB,GAClBC,EAAU,UACVC,EAAY,YAmGHvgD,YANS,SAACC,EAAO1C,GAC5B,MAAO,CACHgvC,KAAMtsC,EAAMqmB,YAAYk6B,cAIQ,KAAzBxgD,CAjGf,SAA8BzC,GAAO,IAAAuD,EACEC,oBAAS,GADXC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC1B2/C,EAD0Bz/C,EAAA,GACf0/C,EADe1/C,EAAA,GAAAuG,EAEIxG,mBAAS,IAFbyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEd6+B,GAFc5+B,EAAA,GAAAA,EAAA,IAAAG,EAGJ5G,mBAASu/C,GAHL14C,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG1B0O,EAH0BzO,EAAA,GAGlB0O,EAHkB1O,EAAA,GAK3B+4C,EAAiBt/C,sBAAY,WAC/Bq/C,GAAcD,IACf,CAACC,EAAcD,IAEd15C,EAAQ,GA8BZ,OA7BI05C,IACA15C,EAAK,SAAes5C,EACpBt5C,EAAK,MAAYs5C,GAOOh/C,sBAAY,SAACrG,GACrCorC,EAAcprC,EAAEoJ,OAAOxJ,QACxB,CAACwrC,IAEkB/kC,sBAAY,SAAC0yC,GAC/Bz9B,EAAUy9B,IACX,CAACz9B,IAeAtU,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,0BACX+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZ+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMmiD,KACf1iD,UAAU,mBACTwiD,EACGz+C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBAGvB+D,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,WAAYwhD,GACjCz+C,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWoX,IAAWiqC,GACzCt+C,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,kBACV+D,EAAAtK,EAAA4G,cAACm8C,EAAA,EAAD,CACEn7C,gBAAiB/B,EAAM+B,gBACvBi8C,WAAY,SAACnsB,GAAD,MAAY,IACxBksB,eAAgB,SAACJ,GAAD,MAAY,IAC5BG,aAAc,SAAC2E,GAAD,OA7CP,SAACA,GAClBziD,EAAM+B,gBAAgBshD,wBAAwBZ,GA4CZ3E,CAAa2E,IACrCxE,WAAW,MAGjBx5C,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWoX,IAAWkqC,GAC1Cv+C,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,kBACV+D,EAAAtK,EAAA4G,cAACwhD,EAAD,CACExgD,gBAAiB/B,EAAM+B,gBACvB07C,KAAMviD,IAASm2B,OAAOiyB,mBAsBxC,cCzFO,SAAS98C,EAAUs0C,EAAO/4C,GAC7B,IAAIf,EAAM85C,EAAM95C,IACZA,EAAM,GAAKA,GAAO,GAK1B,SAAsBc,EAAQC,GAC1B,GAAIA,EAAgBwhD,QAChB,OAGJ,GAqCJ,SAA4BxhD,GACxB,OALG,SAAyBA,GAC5B,OAAOA,EAAgBW,MAAMqmB,YAAYyT,aAIlCgnB,CAAgBzhD,GAAiB1J,QAAQspD,IAAgBhsD,KAAO,EAtCnE8tD,CAAmB1hD,GAAkB,CACrC,IAAI2hD,EAAqBC,EAAkB5hD,EAAiB4/C,IAAgBhsD,IAC5E,IAAK,IAAIyC,KAAKsrD,EAAoB,CAC9B,IAAI5I,EAAQ4I,EAAmBtrD,GAC/B2J,EAAgBsG,IAAIpF,SAAS2gD,YAAe9I,EAAO+I,IAAqB/hD,KAE5E,OAGJ,IAAK,IAAI1J,KAAK2J,EAAgB4I,aAAc,CACxC,IAAI9H,EAAcd,EAAgB4I,aAAavS,GAC3C0rD,EACAH,EAAkB5hD,EAAiBc,EAAYlN,IAEnD,IAAK,IAAIyC,KAAK0rD,EAA6B,CACvC,IAAIhJ,EAAQgJ,EAA4B1rD,GACxC2J,EAAgBsG,IAAIpF,SAAS8gD,YAAYjJ,EAAOh5C,EAAS,IACrDY,EAAMX,GAAiBgnB,YAAYi5B,iBACnCjgD,EAAgBkB,SAASk/C,YAA8BrH,IAI/D/4C,EAAgBkB,SAAS+gD,aAA6B3vD,OAAAsa,EAAA,EAAAta,CAAA,GAE1CyvD,MAjCZG,CAAalqD,SAASiH,GAAMe,GAsCpC,SAAS4hD,EAAkB5hD,EAAiBmiD,GACxC,OAAOniD,EAAgBW,MAAMqmB,YAAYu4B,gBAAkB,GAW/D,IAAM5+C,EAAQ,SAACyhD,GAAD,OAAYA,EAAOzhD,gBClE1B,SAAS0hD,EAAa/vC,GAAuC,IAAjCumB,EAAiCxhC,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAtB,GAC1C,QADgEA,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,KAAAA,UAAA,GAErDwhC,EAAaj/B,KAAKu9C,MAAM7kC,EAAOumB,GAE/BA,EAAaj/B,KAAKC,MAAMyY,EAAOumB,gBCOxCypB,GAAQ,QACRC,GAAO,OA+Jb,SAASC,GAAkBvkD,GACvB,MAAO,CACHwkD,WAAYzD,YAAY/gD,EAAMykD,eAAgBzkD,EAAM46B,WAAY56B,EAAMghD,QACtEnxC,MAAOkxC,YAAY/gD,EAAM0kD,aAAe1kD,EAAMykD,eAAgBzkD,EAAM46B,WAAY56B,EAAMghD,SAI9F,IAkBev+C,eAlBS,SAAAC,GACpB,IAAIoT,EAAYpT,EAAMqmB,YAAYjT,UAClC,MAAO,CACH2uC,oBAA8BxvD,IAAd6gB,EAA0BA,EAAUtc,WAAQvE,EAC5DyvD,kBAA4BzvD,IAAd6gB,EAA0BA,EAAU6uC,SAAM1vD,EACxD2vD,aAAcliD,EAAMqmB,YAAY67B,aAChChqB,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SAIN,SAAA/9C,GACxB,MAAO,CACH6hD,4BAA6B,SAACC,GAAD,OAAgB9hD,EAAS6hD,YAA4BC,KAClFC,wBAAyB,SAACxrD,EAAOmrD,GAAR,OAAgB1hD,EAAS+hD,YAAwBxrD,EAAOmrD,KACjFM,2BAA4B,SAACzwC,GAAD,OAAcvR,EAASgiD,YAA2BzwC,OAGvE/R,CAtLf,SAA4BzC,GAAO,IAAAuD,EACKC,oBAAS,GADdC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxBuR,EADwBrR,EAAA,GACZyhD,EADYzhD,EAAA,GAAAuG,EAEKxG,wBAASvO,GAFdgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAExBm7C,EAFwBl7C,EAAA,GAEZm7C,EAFYn7C,EAAA,GAAAG,EAGmB5G,wBAASvO,GAH5BoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGxBi7C,EAHwBh7C,EAAA,GAGLi7C,EAHKj7C,EAAA,GAAAoQ,EAIDjX,oBAAS,GAJRkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAIxB8qC,EAJwB7qC,EAAA,GAIf8qC,EAJe9qC,EAAA,GAMzB5L,EAAchL,sBAAY,SAACrG,GAC7BA,EAAE+J,kBACF09C,GAAc,GACdM,GAAW,GACX,IACI1d,EADO2d,YAAoBC,EAAUjoD,GAAIuC,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,QAC5DhhD,EAAMykD,eAC1BW,EAActd,IACf,CACCod,EACAM,EACA1wC,EACA9U,EAAMykD,eACNzkD,EAAM46B,WACNwqB,EACAplD,EAAMghD,SAEJ2E,EAAkB7hD,sBAAY,SAACrG,GAC5B8nD,IACDvlD,EAAMilD,4BAA4BjlD,EAAM4kD,cACnC5kD,EAAM4kD,aAGPgB,IAFAC,EAAU7lD,EAAMykD,eAAgBzkD,EAAM0kD,gBAK/C,CAACa,EAASvlD,EAAM4kD,eAEbc,EAAY5hD,sBAAY,SAACrG,GAC3B,OAAIuC,EAAMigD,qBACCjgD,EAAMigD,qBAAqB/1B,WAAazsB,EAAEutB,MAE1CvtB,EAAEutB,OAEd,CAAChrB,EAAMigD,uBAEJzxC,EAAY1K,sBAAY,SAACrG,GAC3BynD,GAAc,GACdE,OAAcnwD,GACdqwD,OAAqBrwD,GACrBuwD,GAAW,IACZ,CAACN,EAAeE,EAAeI,IAE5B/2C,EAAc3K,sBAAY,SAACrG,GAC7B,GAAIqX,EAAY,CACZ,IAAIgxC,EAAWL,YAAoBC,EAAUjoD,GAAIuC,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,QAAUmE,EAC9F,GAAIW,EAAW,EACX,OAEJ,IACIC,EAASD,GADM9lD,EAAM0kD,aAAe1kD,EAAMykD,gBAE1CuB,EAAiB5B,EAAa0B,GAC9BG,EAAe7B,EAAa2B,GAChC/lD,EAAMglD,wBACFgB,EACAC,GACAjmD,EAAM4kD,cACNiB,EAAUG,EAAgBC,GAE9BT,GAAW,QACR,GAAIH,IAAsBf,GAAM,CACnC,IAAIwB,EAAW1B,EACXqB,YAAoBC,EAAUjoD,GAAIuC,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,SACzE,GAAI8E,GAAY9lD,EAAM0kD,aAClB,OAEJ1kD,EAAMglD,wBACFc,EACA9lD,EAAM0kD,cACN1kD,EAAM4kD,cACNiB,EAAUC,EAAU9lD,EAAM0kD,cAE9Bc,GAAW,QACR,GAAIH,IAAsBhB,GAAO,CACpC,IAAI0B,EAAS3B,EACTqB,YAAoBC,EAAUjoD,GAAIuC,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,SACzE,GAAI+E,GAAU/lD,EAAMykD,eAChB,OAEJzkD,EAAMglD,wBACFhlD,EAAMykD,eACNsB,GACJP,GAAW,GACPxlD,EAAM4kD,cACNiB,EAAU7lD,EAAMykD,eAAgBsB,KAGzC,CAAC/lD,EAAMykD,eAAgBe,EACtBxlD,EAAM0kD,aAAc5vC,EACpB9U,EAAM4kD,aAAc5kD,EAAMghD,OAC1BhhD,EAAM46B,WAAYuqB,EAAYE,IAE5BO,EAAc,WAChB5lD,EAAM8kD,4BAA4B,KAGhCe,EAAY,SAACrsD,EAAOmrD,GACtB,IAAI7uC,EAAY,CAACtc,QAAOmrD,OACpBuB,EAAgB,GAEpB,IAAK,IAAI9tD,KADT8tD,EAAcvE,IAAgBhsD,IAAMmgB,EACtB9V,EAAM+B,gBAAgB4I,aAChCu7C,EAAclmD,EAAM+B,gBAAgB4I,aAAavS,GAAGzC,IAAMmgB,EAG9D9V,EAAM8kD,4BAA4BoB,IAGhCC,EAAariD,sBAAY,SAACrG,EAAG2oD,GAC/Bd,EAAqBc,IACtB,CAACd,IAGA5kD,EAAYV,EAAM4kD,aAAe,oBAAsB,YAC3D,OACIngD,EAAAtK,EAAA4G,cAAA,OACIyN,UAAWA,EACXC,YAAaA,EACb/N,UAAU,uBACZ+D,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO+6C,GAAkBvkD,GAAQU,UAAWA,GAC/C+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAO0oD,EAAW1oD,EAAG6mD,KAClC5jD,UAAU,mBACV+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAaA,EACbN,UAAWm3C,EACXjlD,UAAU,WACZ+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAO0oD,EAAW1oD,EAAG4mD,KAClC3jD,UAAU,iCChJf2lD,GAAgBC,aACzB,CAHqB,SAAC5jD,EAAO1C,GAAR,OAAkBA,EAAM6C,YAAYlN,IACrC,SAAC+M,EAAO1C,GAAR,OAAkB0C,EAAMqmB,YAAYyT,eAGxD,SAAC0nB,EAAe1nB,GAAhB,OAAiCA,EAAankC,QAAQ6rD,IAAkB,ICgC5E,IAUezhD,eAVS,SAACC,EAAO1C,GAC5B,MAAO,CACHumD,OAAQ7jD,EAAMqmB,YAAYw9B,OAC1BC,WAAY9jD,EAAMqmB,YAAYy9B,WAC9B5rB,WAAYiqB,IACZz9C,WAAYpH,EAAMoH,YAAci/C,GAAc3jD,EAAO1C,GACrDghD,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAzCf,SAAqBzC,GACjB,IAAIwJ,EAAQ,CACR6E,KAAM0yC,YACF/gD,EAAMwmD,WAAYxmD,EAAM46B,WAAY56B,EAAMghD,SAuBlD,OApBIhhD,EAAM8nC,SACNt+B,EAAM6E,MAAQrO,EAAM8nC,QAGnB9nC,EAAMoH,aACPoC,EAAK,QAAe,QAGxBnF,oBAAU,WACDrE,EAAM+B,kBAGN/B,EAAM+B,gBAAgB8S,cACF5f,IAArB+K,EAAMwmD,YAENxmD,EAAM+B,gBAAgB0kD,gBAClBzmD,EAAMwmD,cAEf,CAACxmD,EAAM+B,gBAAiB/B,EAAMwmD,aAG7B/hD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBAAuB8I,MAAOA,kCC/BxCk9C,UAAY,SAAA1sD,GAMA,IALrBgwC,EAKqBhwC,EALrBgwC,WACAzN,EAIqBviC,EAJrBuiC,aACA0lB,EAGqBjoD,EAHrBioD,WACA0E,EAEqB3sD,EAFrB2sD,SACAxkD,EACqBnI,EADrBmI,gBACAykD,EAAqB5sD,EAArB4sD,gBAAqBrjD,EACOC,mBAAS,CAAC+K,IAAK,IADtB9K,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACdsjD,EADcpjD,EAAA,GACNqjD,EADMrjD,EAAA,GAEP8B,iBAAO,GAErBlB,oBAAU,WACN60B,KACD,CAAC8Q,EAAY7nC,EAAiBykD,EAAiB3E,EAAY1lB,IAE9Dl4B,oBAAU,WACN,GAAKlC,EAQL,OALAA,EAAgB+L,QAAQL,iBACpB,aAAcu0B,GAClBjgC,EAAgB+L,QAAQL,iBACpB,SAAUqrB,GAEP,WACC/2B,EAAgB+L,UAChB/L,EAAgB+L,QAAQJ,oBACpB,SAAUorB,GACd/2B,EAAgB+L,QAAQJ,oBACpB,aAAcs0B,MAG3B,CAACwkB,EAAiBzkD,EAAiB2kD,EAAWH,IAEjD,IAAMvkB,EAAUt+B,sBAAY,SAACrG,GACzB,OAAI9B,KAAK6B,IAAIC,EAAEia,QAAU/b,KAAK6B,IAAIC,EAAEka,UAGpCla,EAAEqK,iBACF3F,EAAgB+L,QAAQ0qB,SAAS,EAAGz2B,EAAgB+L,QAAQic,UAAY1sB,EAAEka,SACnE,IACR,IAEGuhB,EAAWp1B,sBAAW,eAAAxJ,EAAAjG,OAAA4F,GAAA,EAAA5F,CAAA6F,GAAAC,EAAAC,KAAC,SAAAC,EAAOoD,GAAP,IAAA0sB,EAAAsB,EAAAs7B,EAAAn3C,EAAArB,EAAA,OAAArU,GAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACnBmH,GAAoBA,EAAgB+L,SACpC04C,GAAoBA,EAAgB14C,QAFjB,CAAApT,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,iBAMrBmrB,EAAYhoB,EAAgB+L,QAAQic,UACpCsB,EAAetpB,EAAgB+L,QAAQorB,aACvCytB,EAAe58B,EAAYsB,EAC3B7b,EAASg3C,EAAgB14C,QAAQorB,aACjC/qB,EAAMo4C,EAAWI,EAAen3C,EAAS,GAAKua,EAClDy8B,EAAgB14C,QAAQ1E,MAAxB,IAAuC+E,EAAM,KAXpB,wBAAAzT,EAAA2B,SAAApC,MAAD,gBAAAqC,GAAA,OAAApC,EAAAsC,MAAArI,KAAA6E,YAAA,GAYzB,CAAC0tD,EAAWF,EAAiBzkD,EAAiBwkD,IAEjD,MAAO,CAACE,uBCtDCG,GAAU,SAAAhtD,GAOjB,IANFgnD,EAMEhnD,EANFgnD,OACAiG,EAKEjtD,EALFitD,qBACAhH,EAIEjmD,EAJFimD,qBACAx6C,EAGEzL,EAHFyL,EACA+gD,EAEExsD,EAFFwsD,WACA5rB,EACE5gC,EADF4gC,WAEA,KAAIomB,EAVY,IAUYA,EAAS,GAArC,CAKA,IACI92B,EADQ62B,YAAYyF,EAAY5rB,EAAYomB,GACvBv7C,EAjBA,IAkBzBwhD,EAAqBjG,GACrBf,EAAqB/xC,QAAQ0qB,SAAS1O,EAAY,KCrBzCg9B,GAAY,SAACnlD,GAAmC,IAAlBkgD,EAAkB7oD,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAP,GAC9CwW,EAAS,GAAK,IAAO,EAAI7N,EAAgB4I,aAAa3U,QAE1D,IAAK,IAAIL,KAAMssD,EAAY,CACvB,GAAIA,EAAWtsD,GAEXia,GAAU,GADQ7N,EAAgBolD,eAAexxD,GACtBgN,OAAO3M,OAG1C,OAAO4Z,odCSX,IAwGMw3C,GAAO1H,eAAK,SAAC1/C,GACf,IAAMqnD,EAAYvjD,sBAAY,WAG1B,IAFA,IAAIwjD,EAAUtnD,EAAMunD,YAChBC,EAAM,GACDpvD,EAAE,EAAGA,EAAIkvD,EAASlvD,IACvBovD,EAAIzxD,KAAK,CACLse,KAAU,GAAJjc,EACN+iB,SAAU,KAGlB,OAAOqsC,GACR,CAACxnD,EAAMunD,cAEHE,EAAez8C,aAAU,CAC5B1F,IAAKtF,EAAMigD,qBACXe,OAAQhhD,EAAMghD,OACdpmB,WAAY56B,EAAM46B,WAClB8sB,OAAQL,IACRtlD,gBAAiB/B,EAAM+B,gBACvB4lD,aAAc3nD,EAAMunD,cANjBE,YASHG,EAAOP,IAAYz/C,MACnB6/C,EAAYjuD,MAAOiuD,EAAY9C,KAE/BkD,EAAW9G,YAAY,GAAI/gD,EAAM46B,WAAY56B,EAAMghD,QAEvD,MAAO,CACHv8C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAa8I,MAAO,CAACs+C,SAAUL,EAAYM,YACtDH,EAAKryD,IACD,SAAAyE,EAAgB5B,GAAhB,IAAEic,EAAFra,EAAEqa,KAAFra,EAAQqD,MAAR,OACIoH,EAAAtK,EAAA4G,cAACinD,GAAD,CACEhH,OAAQhhD,EAAMghD,OACdpxC,OAAQ5P,EAAM4P,OACd5O,IAAKqT,EAAO,GACZwzC,SAAUA,EACVpD,eAAgBzkD,EAAMykD,eACtBC,aAAc1kD,EAAM0kD,aACpBuD,eAAgBjoD,EAAMioD,eACtBlmD,gBAAiB/B,EAAM+B,gBACvB64B,WAAY56B,EAAM46B,WAClB94B,OAAQuS,EAAO,UAI/B6zC,sJACF,WACI,IAAIC,EAAO5zD,KAAKyL,MAAM8B,QAAQ,EAAIvN,KAAKyL,MAAM46B,YACzCpxB,EAAQ,CACRs+C,SAAUvzD,KAAKyL,MAAM6nD,UAErBO,EAAY,GACZ7zD,KAAKyL,MAAMghD,QAAU,KACrBoH,EAAS,QAAc,IAG3BA,EAAS,OAAa7zD,KAAKyL,MAAM4P,OACjC,IAAIy4C,EAAa,CACbz4C,OAAQw4C,EAAUx4C,QAGlBrb,KAAKyL,MAAMghD,QAAU,IAAOzsD,KAAKyL,MAAM8B,OAAS,IAAM,IACtDumD,EAAU,QAAc,IAG5B,IAAIC,EAAY,OAKhB,OAJI/zD,KAAKyL,MAAMghD,QAAU,KACrBsH,GAAa,WAIb7jD,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,OACV+D,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWnN,KAAKyL,MAAMghD,OAAS,IAAOmH,EAAO,IAAM,GACvE1jD,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,eACb,EAAIynD,IAGT1jD,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO6+C,EAAY3nD,UAAU,eAElC+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO4+C,EAAW1nD,UAAW4nD,IAElC7jD,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO4+C,EAAW1nD,UAAW4nD,IAClC7jD,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO4+C,EAAW1nD,UAAW4nD,YAvCrBC,iBAqEZ9lD,eAbS,SAACC,EAAO1C,GAC5B,IAAI6I,EAAM7I,EAAM+B,gBAAgBwG,mBAChC,MAAO,CACHigD,gBAAiBxoD,EAAM+B,gBAAgB4I,aAAa3U,OACpDgrD,OAAQt+C,EAAMqmB,YAAYi4B,OAC1BuG,YAAa7kD,EAAMqmB,YAAYw+B,YAC/BtF,WAAYv/C,EAAMqmB,YAAYk5B,WAC9B1lB,aAAc75B,EAAMqmB,YAAYwT,aAChCyN,WAAYtnC,EAAMqmB,YAAYi5B,iBAAmBt/C,EAAMqmB,YAAYk5B,WAAWp5C,EAAIlT,MAnB/D,SAACsN,EAAUjD,GAClC,MAAO,CACHinD,qBAAsB,SAACjG,GAAD,OAAY/9C,EAC9BgkD,YAAqBjG,KACzByH,qBAAsB,SAAChjD,GAAD,OAAOxC,EACzBwlD,YAAqBhjD,KACzBijD,yBAA0B,SAACjjD,GAAD,OAAOxC,EAC7BylD,YAAyBjjD,OAiBtBhD,CAvNU,SAACzC,GACtB,IAAMsF,EAAMC,sBAAOtQ,GAWb2c,GATW80C,GAAU,CACvBzE,WAAYjiD,EAAMiiD,WAClB2E,gBAAiBthD,EACjBnD,gBAAiBnC,EAAM2oD,iBACvBhC,SAAU3mD,EAAM2mD,SAChBpqB,aAAcv8B,EAAMu8B,aACpByN,WAAYhqC,EAAMgqC,aANf6c,OASWthD,sBAAOtQ,IACnB2zD,EAAarjD,sBAAOtQ,GACpB4zD,EAAQtjD,sBAAOtQ,GACf6zD,EAAQvjD,sBAAOtQ,GACf8zD,EAAUxjD,sBAAOtQ,GAEjB6Z,EAAchL,sBAAY,SAACrG,GAC7BmU,EAAU1D,SAAU,EACpB06C,EAAW16C,QAAUzQ,EAAEwtB,MACvB49B,EAAM36C,QAAUzQ,EAAEwtB,MAClB69B,EAAM56C,QAAUzQ,EAAEutB,MAElB+9B,EAAQ76C,QAAU0Q,YAAY,WAC1B,IAAIoqC,EAAOH,EAAM36C,QAAU06C,EAAW16C,QAClC+6C,EAAUjpD,EAAM+B,gBAAgBW,MAAMqmB,YAAYi4B,OAClDA,EAASiI,EAAUD,EAAO,GAC9BhI,EAASrlD,KAAKyY,IA/BN,GA+BuB4sC,IAC/BA,EAASrlD,KAAKwY,IAAI,EAAG6sC,MAENiI,IAIXlI,YAAY,GAAG/gD,EAAMunD,YAAavnD,EAAM46B,WAAYomB,GAAUpzC,OAAO40B,WAAa,KAKtFwkB,GAAQ,CACJhG,SACAiG,qBAAsBjnD,EAAMinD,qBAC5BT,WAAYA,IACZ5rB,WAAY56B,EAAM46B,WAClBn1B,EAAGqjD,EAAM56C,QACT+xC,qBAAsBjgD,EAAMigD,yBAEjC,MACJ,CAACjgD,EAAM46B,WAAY56B,EAAMunD,cAEtB/4C,EAAY,SAAC/Q,GACfshB,cAAcgqC,EAAQ76C,SACtB0D,EAAU1D,SAAU,EACpB06C,EAAW16C,aAAUjZ,GAWnBuxD,EAAa,WACf,OAAOxmD,EAAM+B,gBAAgBW,MAAMqmB,YAAYy9B,YAI/C9lD,EAAY,WACZV,EAAMioD,iBACNvnD,GAAa,WAKjB,OACI+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLkE,MALM,GAMN9I,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACf+D,EAAAtK,EAAA4G,cAAA,OACEM,aAAcmN,EACdC,YA7BY,SAAChR,GACZmU,EAAU1D,UAIf26C,EAAM36C,QAAUzQ,EAAEwtB,QAyBdnc,YAAaA,EACbN,UAAWA,EACX9N,UAAU,kBACV+D,EAAAtK,EAAA4G,cAACmoD,GAAD,CACEnnD,gBAAiB/B,EAAM+B,gBACvB+lC,QAAS,EACT1gC,YAAY,IACd3C,EAAAtK,EAAA4G,cAACqmD,GAAUpnD,IAEZA,EAAMmpD,sdChHXC,0JACF,WACI,OAAO,0BAGX,WAAS,IAAAv0D,EAAAN,KACDqzD,EAAO,IAAIt0C,MAAM/e,KAAK80D,cAC1BzB,EAAKr8C,KAAK,GACV,IAAIs8C,EAAW9G,YAAY,EAAGxsD,KAAKyL,MAAM46B,WAAYrmC,KAAKyL,MAAMghD,QAEhE,OACIv8C,EAAAtK,EAAA4G,cAAA,OACCL,UAAU,mBACRknD,EAAKryD,IACF,SAAC+zD,EAAKlxD,GAAN,OACIqM,EAAAtK,EAAA4G,cAACwoD,GAAD,CACE1B,SAAUA,EACVpD,eAAgB5vD,EAAKmL,MAAMykD,eAC3BC,aAAc7vD,EAAKmL,MAAM0kD,aACzB9pB,WAAY/lC,EAAKmL,MAAM46B,WAAY94B,OAAQ1J,cAnB7BoK,aAyBhC0lD,sJACF,WACe3zD,KAAKyL,MAAM8B,OAAavN,KAAKyL,MAAM46B,WAA9C,IACIpxB,EAAQ,CACRqG,MAAOtb,KAAKyL,MAAM6nD,UAEtB,OACIpjD,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,OACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAEf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBAdF8B,aAmCZC,YANS,SAACC,EAAO1C,GAC5B,MAAO,CACHghD,OAAQt+C,EAAMqmB,YAAYi4B,SAVP,SAAC/9C,EAAUjD,GACdA,EAAM6C,YAAYlN,GACtC,MAAO,CACHsxD,qBAAsB,SAACjG,GAAD,OAAY/9C,EAC9BgkD,YAAqBjG,OAUlBv+C,CAA6C2mD,0cC5D5D,IAGMI,4CACF,SAAAA,EAAYxpD,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAi1D,IACf30D,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAEDypD,gBAAiB,EAEtB50D,EAAK60D,aAAe70D,EAAK60D,aAAallC,KAAlBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IALLA,kDAQnB,WACIN,KAAKk1D,gBAAiB,mCAG1B,WACI77C,OAAOC,iBAAiB,aAActZ,KAAKm1D,cAC3Cn1D,KAAK0rD,qBAAuBn2B,SAASqjB,uBAAuB,yBAAyB,uCAGzF,WACIv/B,OAAOE,oBAAoB,aAAcvZ,KAAKm1D,kCAGlD,WAAuB,IAAlB1pD,EAAkB5G,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAZ7E,KAAKyL,MACRwmD,EAAaxmD,EAAM+B,gBAAgBW,MAAMqmB,YAAYy9B,WACrDnyC,EAAOrU,EAAM2pD,UAAY3pD,EAAMqU,KAAOmyC,EAE1C,OADYzF,YAAY1sC,EAAMrU,EAAM46B,WAAY56B,EAAMghD,0CAI1D,SAAmB4I,GACXA,EAAUD,YAAcp1D,KAAKyL,MAAM2pD,WACnCC,EAAUD,YACVp1D,KAAKk1D,gBAAe,GAExB,IAAInd,EAAS/3C,KAAK0rD,qBAAuB1rD,KAAK0rD,qBAAqB/1B,WAAa,EAEhF,GAAI0/B,EAAUv1C,OAAS9f,KAAKyL,MAAMqU,KAAM,CACpC,IAAI5O,EAAIlR,KAAKs1D,OACb,IAAKt1D,KAAKyL,MAAM2pD,YAAclkD,EAAImI,OAAO40B,WAAa,KAAO/8B,EAAI6mC,SAE1D,GAAI7mC,EAAImI,OAAO40B,WAAa,KACzB/8B,EAAI6mC,IACH/3C,KAAKyL,MAAM46B,WAAWkvB,OAAOv1D,KAAKyL,MAAM46B,YAAa,CAC5D,IAAKrmC,KAAKk1D,eAEN,QAOZ,OAAO,wBAGX,WACI,IAAIjgD,EAAS,CACT6E,KAAM9Z,KAAKs1D,QAMf,OAHKt1D,KAAKyL,MAAM2pD,YACZngD,EAAM8tC,QAAU,QAGhB7yC,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,wBAlES8B,aAsFlBC,eAdS,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAM+B,gBAAgBgoD,gBAC3BJ,EAAYjnD,EAAMM,UAAU2mD,UAAUh0D,IAAO,EACjD,MAAO,CACH0e,KAAMs1C,EAAY3pD,EAAM+B,gBAAgB6S,UAAY,EACpD4xC,WAAY9jD,EAAMqmB,YAAYy9B,WAC9BwD,WAAYtnD,EAAMqmB,YAAYihC,WAC9BpvB,WAAYiqB,IACZoF,eAAgBvnD,EAAM2F,IAAI4hD,eAC1BN,UAAWA,EACX3I,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAA+B+mD,IC5E9C,IAUe/mD,eAVS,SAACC,EAAO1C,GAC5B,IAAI8V,EAAYpT,EAAMqmB,YAAYm9B,cAAclmD,EAAMrK,IACtD,MAAO,CACH6D,WAAqBvE,IAAd6gB,EAA0B,EAAIA,EAAUtc,MAC/CmrD,SAAmB1vD,IAAd6gB,EAA0B,EAAIA,EAAU6uC,IAC7C/pB,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAvBf,SAAsBzC,GAClB,IAAIwJ,EAAQ,CACR6E,KAAM0yC,YAAY/gD,EAAMxG,MAAOwG,EAAM46B,WAAY56B,EAAMghD,QACvDnxC,MAAOkxC,YAAY/gD,EAAM2kD,IAAM3kD,EAAMxG,MAAOwG,EAAM46B,WAAY56B,EAAMghD,SAExE,OACIv8C,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,oBCVPwpD,GAAkB,SAAAlwD,GAOzB,IANFmI,EAMEnI,EANFmI,gBACAxM,EAKEqE,EALFrE,GACAoM,EAIE/H,EAJF+H,gBACAi/C,EAGEhnD,EAHFgnD,OACApmB,EAEE5gC,EAFF4gC,WACAkqB,EACE9qD,EADF8qD,4BAEMqF,EAAoB5kD,kBAAO,GAE3B2kB,EAAa,kBAAM/nB,EAAgB+L,QAAQgc,YAE3CkgC,EAAqBtmD,sBAAY,SAACrG,GACpC,IAAI4W,EAAOoxC,YAAoBhoD,EAAEutB,MAAQd,IAAc0Q,OAAY3lC,EAAW+rD,GAC9EmJ,EAAkBj8C,SAAU,EAC5B,IAAIg4C,EAAgB,GACpBA,EAAcvwD,GAAM,CAChB6D,MAAO6a,EACPswC,IAAKtwC,GAETywC,EAA4BoB,IAE7B,CAACtrB,EAAYomB,EAAQrrD,IAElB00D,EAAmBvmD,sBAAY,SAACrG,GAClC0sD,EAAkBj8C,SAAU,GAC7B,IAqBH,MAAO,CACHo8C,mBAlBuBxmD,sBAAY,SAACrG,GACpC,IAAI4W,EAAOoxC,YAAoBhoD,EAAEutB,MAAQd,IAAc0Q,OAAY3lC,EAAW+rD,GAK9E,GAFA3sC,GADgBA,GADE,GAAKumB,EAAWA,YAI9BuvB,EAAkBj8C,QAAS,CAC3B,IAAI4H,EATW/T,EAAgBW,MASJqmB,YAAYm9B,cAAcvwD,GACrD,QAAkBV,IAAd6gB,EAAyB,CACzBA,EAAU6uC,IAAMtwC,EAChB,IAAI0wC,EAAa,GACjBA,EAAWpvD,GAAMmgB,EACjBgvC,EAA4BC,MAGrC,CAAC/D,EAAQrrD,EAAIilC,IAIZyvB,mBACAD,kCCvCFz4C,GAAS,IAAI1J,IAGbsiD,GAAe7K,eAAK,SAAC1/C,GACvB,IAAI2wC,EAAYprC,iBAAO,GAEnBiE,GADSxJ,EAAMygB,QAAQzqB,OAAOgK,EAAM46B,YAC5B,CACRloB,gBAAiBf,GAAOiB,iBAAiB5S,EAAMmI,SAQ/C24C,EAAY,CACZjxC,MANQkxC,YACR/gD,EAAMmb,UAAY,GAClBnb,EAAM46B,WACN56B,EAAMghD,SAMNtgD,EAAY,gBAGhB,GAFA8I,EAAMqG,OAAS,EAEc,IAAzB7P,EAAM86C,MAAM3/B,SACZ,MAAO,GAGX,IAAMqvC,EAAgB1mD,sBAAY,SAACrG,GAC/BA,EAAE+J,kBACFxH,EAAMmI,MAAMpG,gBAAgB6e,YAAY5gB,EAAMmI,MAAMW,aACpD,IAAI2S,GAAO,IAAIR,MAAOC,UAClBO,EAAOk1B,EAAUziC,SA7BR,MA8BLlO,EAAMoH,WACNpH,EAAMkiD,wBAAmBjtD,IAEzB+K,EAAMouC,cAAcnlB,KACpBjpB,EAAMkiD,mBAAmBliD,EAAM86C,SAGvCnK,EAAUziC,QAAUuN,GACrB,CAACzb,EAAMoH,WAAYpH,EAAM86C,QAExB96C,EAAMoH,aACN1G,GAAa,YACbogD,EAAUpuC,gBAAkBf,GAAO4J,SAAS/R,EAAMkJ,gBAAiB,IACnEouC,EAAUxpB,YAAc9tB,EAAMkJ,gBAC9BouC,EAAUpuC,gBAAkBf,GAAO4J,SAAS/R,EAAMkJ,gBAAiB,MAGvE,IAAM+3C,EAAoB3mD,sBAAY,SAACrG,GACnCA,EAAE+J,kBACFxH,EAAM0qD,mBAAcz1D,IACrB,IAECkmB,EACMnb,EAAM86C,MAAM3/B,UAClB,GAEJ,OACI1W,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOs3C,EACPpgD,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa27C,EACbxpD,QAASupD,EACThhD,MAAOA,EAAO9I,UAAU,wBACvBV,EAAM+5B,SAAW,SAAW,IAE9BsnB,YACGrhD,EAAM86C,MACN,CAACn4C,OAAQ,CAAC3C,EAAMmI,QAChBgT,EACA4lC,YAAY,EAAG/gD,EAAM46B,WAAY56B,EAAMghD,SAAS,MAuB/Cv+C,eAlBS,SAACC,EAAO1C,GAC5B,IAAIoH,EAAa1E,EAAMqmB,YAAYi5B,kBAAoBhiD,EAAM86C,OACzDp4C,EAAM2F,IAAIH,gBAAkBlI,EAAMmI,MAAMW,YAC5C,MAAO,CACH1B,aACA6P,MAAO7P,EAAa1E,EAAMC,OAAO8nB,WAAWzqB,EAAMmI,MAAMW,kBAAe7T,IAIpD,SAACgO,GAC1B,MAAO,CACHi/C,mBAAoB,SAACz8C,GAAD,OAAOxC,EAASk/C,YAA8B18C,KAClEilD,cAAe,SAACjlD,GAAD,OAAOxC,EAChBylD,YAAyBjjD,KAC/B2oC,cAAe,SAAC3oC,GAAD,OAAOxC,EAAS+lC,YAAyBvjC,OAI/ChD,CAA6C8nD,ICpC7C9nD,eArBS,SAACC,EAAO1C,GAC5B,IAAI2qD,EAAYjoD,EAAMqmB,YAAY4hC,UAAU3qD,EAAM6C,YAAYlN,IAC1Di1D,OAAoC31D,IAAd01D,EACtBA,EAAUrK,UAAkBrrD,EAChC,MAAO,CACHyyD,OAAQkD,EACRjD,kBAAsC1yD,IAAxB21D,EAAoC,EAAIA,EAAoB50D,OAC1E60D,gBAAiBnoD,EAAMM,UAAU6nD,gBACjCjwB,WAAYiqB,IACZiG,qBAAsBpoD,EAAMqmB,YAAY+hC,qBAAqB9qD,EAAM6C,YAAYlN,IAC/EqrD,OAAQt+C,EAAMqmB,YAAYi4B,OAC1BM,eAAgB5+C,EAAMqmB,YAAYu4B,eAClCvnB,SAAU/5B,EAAMmI,MAAM4xB,WAIH,SAAC92B,GAC1B,MAAO,IAIMR,CA5DO,SAAAzI,GAShBA,EARF+wD,WAQE,IAAAC,EAAAhxD,EAPF0tD,cAOE,IAAAsD,EAPK,GAOLA,EANF7iD,EAMEnO,EANFmO,MAEA64C,GAIEhnD,EALF6I,YAKE7I,EAJFgnD,QACApmB,EAGE5gC,EAHF4gC,WACA0mB,EAEEtnD,EAFFsnD,eACAvnB,EACE//B,EADF+/B,SAEA,IAAKunB,GACsC,IAAvCjtD,OAAOsE,KAAK2oD,GAAgBtrD,aACqCf,IAAjEqsD,EAAejtD,OAAOsE,KAAK2oD,GAAgB,IAAIgB,cAC/C,MAAO,GAGX,IAAIxH,EAAQwG,EAAejtD,OAAOsE,KAAK2oD,GAAgB,IACvD,IAAKoG,EAAO3uD,SAAS+hD,GACjB,MAAO,GAEX,IAAIiN,EAAWhH,YAAYjG,EAAMzmC,KAAMumB,EAAYomB,GAEnD,OACIv8C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB8I,MAAO,CAACqG,MAAOk4C,KAC9C,CAACjN,GAAOvlD,IACL,SAAAulD,GAAK,OACDr2C,EAAAtK,EAAA4G,cAACkqD,GAAD,CACElxB,SAAUA,EACV/4B,IAAK85C,EAAMnlD,GACX8qB,QAAStY,EAAMk6C,SAASvH,EAAMz9C,MAAQ8K,EAAMk6C,SAASrsD,QACrDgrD,OAAQA,EACRpmB,WAAYA,EACZzf,SAAU2/B,EAAM3/B,SAChBhT,MAAOA,EACP2yC,MAAOA,oBC0GZr4C,sBA1BS,SAACC,EAAO1C,GAC5B,IAAIkrD,EAAkBxoD,EAAM2F,IAAIH,gBAAkBlI,EAAMmI,MAAMW,YAC1DP,EAAqBvI,EAAMmI,MAAMpG,gBAAgBwG,mBACrD,MAAO,CACHy4C,OAAQt+C,EAAMqmB,YAAYi4B,OAC1BkK,gBAAiBA,GAAmBlrD,EAAMmI,MAAMtF,cAAgB0F,EAChEqyB,WAAYiqB,IACZ7C,gBAAiBt/C,EAAMqmB,YAAYi5B,gBACnCl5B,WAAYpmB,EAAMqmB,YAAYD,aAIX,SAAC7lB,GAC1B,MAAO,CACH6hD,4BAA6B,SAACC,GAAD,OAAgB9hD,EACzC6hD,YAA4BC,KAChCoG,4BAA6B,SAACx1D,EAAI+xD,GAAL,OACzBzkD,EAASkoD,YAA4Bx1D,EAAI+xD,KAC7CxF,mBAAoB,SAAAh3C,GAAC,OAAIjI,EAASk/C,YAA8Bj3C,KAChEkgD,kBAAmB,SAAC1D,GAAD,OAAYzkD,EAC3B+gD,aAA6B0D,KACjCgD,cAAe,SAACjlD,GAAD,OAAOxC,EAClBylD,YAAyBjjD,OAIpBhD,CAhIO,SAAAzI,GAiBhB,IAhBFkoD,EAgBEloD,EAhBFkoD,mBACAryC,EAeE7V,EAfF6V,MACAmxC,EAcEhnD,EAdFgnD,OACAx3C,EAaExP,EAbFwP,MACArB,EAYEnO,EAZFmO,MACA4iD,EAWE/wD,EAXF+wD,WACAG,EAUElxD,EAVFkxD,gBACAroD,EASE7I,EATF6I,YACA8lD,EAQE3uD,EARF2uD,iBACA/tB,EAOE5gC,EAPF4gC,WACAkqB,EAME9qD,EANF8qD,4BACAqG,EAKEnxD,EALFmxD,4BACAC,EAIEpxD,EAJFoxD,kBACAV,EAGE1wD,EAHF0wD,cACA5hC,EAEE9uB,EAFF8uB,WACAk5B,EACEhoD,EADFgoD,gBAEM18C,EAAMC,sBAAOtQ,GACb07C,EAAYprC,iBAAO,GAEnBtE,EAAU6C,sBAAY,WACxBqE,EAAMpG,gBAAgB6e,YAAYzY,EAAMW,aACxC,IAAI+nC,GAAM,IAAI51B,MAAOC,UACrB,GAAI21B,EAAMF,EAAUziC,SA1BF,IA0BgC,CAE9C,IAAIs4C,EAAar+C,EAAMpG,gBAAgBW,MAAMqmB,YAAYy9B,WACrD1L,EAAQ3yC,EAAMtF,YAAYwF,IAAIgjD,SAAS/K,IAAgBkG,GACvDkB,EAAS,GACbA,EAAO5M,EAAMnlD,IAAMmlD,EACnBsQ,EAAkB1D,GAClBxF,EAAmBpH,GACnB4P,EAAc5P,EAAMzmC,MAExBs8B,EAAUziC,QAAU2iC,GACrB,CAAC1oC,IAlBFmjD,EAqBIpB,GAAgB,CACZv0D,GAAIwS,EAAMxS,GACVoM,gBAAiBoG,EAAMpG,gBACvBi/C,OAAQA,EACRpmB,WAAYA,EACZkqB,4BAA6BA,EAC7B3iD,gBAAiB4oD,IAPpBV,EApBLiB,EAoBKjB,iBAAkBD,EApBvBkB,EAoBuBlB,mBAAoBE,EApB3CgB,EAoB2ChB,oBC5DtB,SAAAtwD,GAAoE,IAAlEuxD,EAAkEvxD,EAAlEuxD,eAAgBjmD,EAAkDtL,EAAlDsL,IAAK8B,EAA6CpN,EAA7CoN,WAA6CpN,EAAjCgoD,gBAAiChoD,EAAhB8uB,WAC3EzkB,oBAAU,WACN,GAAK+C,GACAmkD,GACAjmD,GACAimD,EAAer9C,SACf5I,EAAI4I,QAJT,CASA,IAAIic,EAAYohC,EAAer9C,QAAQic,UAEnC48B,EAAe58B,EADAohC,EAAer9C,QAAQorB,aAGtC/qB,EAAMjJ,EAAI4I,QAAQk/B,UAClBoe,EAASj9C,EAAMjJ,EAAI4I,QAAQorB,cAE3B/qB,EAAM4b,GAAaqhC,EAASzE,IAE5BwE,EAAer9C,QAAQ0qB,SAAS,EAAGrqB,EAAM,OAE9C,CAACnH,EAAY9B,EAAKimD,IDgDrBE,CAAY,CACRF,eAAgB5C,EAChBrjD,MACA8B,WAAY8jD,EACZlJ,kBACAl5B,eAGJ,IAAMta,EAAY1K,sBAAY,SAACrG,GAC3B4sD,IAEA,IAAIlG,EAASh8C,EAAMpG,gBAGf2pD,EAFQvH,EAAOzhD,MAEMqmB,YAAYm9B,cAAc/9C,EAAMxS,IAEzD,GADgBmtB,YAAkBqhC,EAAQh8C,EAAMxS,KAC/B+1D,EAAc,CAC3B,IAAI1W,EAAc2W,YACdxH,EACAuH,EACAvjD,EAAMxS,IAEVw1D,EACIhjD,EAAMxS,GACNq/C,KAGT,CAAC7sC,IAEJ,OACI1D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLwJ,YAAas7C,EACb37C,YAAa67C,EACb97C,UAAWA,EACXvN,QAASA,EACTuI,MAAOA,EAAO9I,UAAWwqD,EAAkB,2BAA6B,mBACxEzmD,EAAAtK,EAAA4G,cAAC6qD,GAAD,CAAcj2D,GAAIwS,EAAMxS,KACvBu1D,EACAzmD,EAAAtK,EAAA4G,cAACmoD,GAAD,CAAarmD,YAAasF,EAAMtF,YAAauE,YAAY,IAAU,GACnE3C,EAAAtK,EAAA4G,cAAC8qD,GAAD,CACEd,WAAYA,EACZ5iD,MAAOA,EAAOtF,YAAaA,IAC9B4B,EAAAtK,EAAA4G,cAAC+qD,GAAA,EAAD,CACE9K,OAAQA,EAAM,KACd+J,WAAYA,EACZ18C,KAAM,IACNlG,MAAOA,EACP2sC,OAAO,EACPllC,OAAQ,GACRC,MAAOA,QEjFJpN,eAZS,SAACC,EAAO1C,GAC9B,MAAO,CACH4L,KAAMlJ,EAAMqmB,YAAYk5B,WAAWjiD,EAAM6C,YAAYlN,IACrD2mC,UAAWt8B,EAAM6C,YAAYF,QAAU3C,EAAM6C,YAAYF,OAAO3M,SAI3C,SAACiN,GAC1B,MAAO,IAIMR,CArCW,SAAAzI,GAMX,IALX2uD,EAKW3uD,EALX2uD,iBACAoC,EAIW/wD,EAJX+wD,WACAloD,EAGW7I,EAHX6I,YACA2G,EAEWxP,EAFXwP,MACAoC,EACW5R,EADX4R,KACAiE,EAAW7V,EAAX6V,MACA,OAAKjE,EAIDnH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACdmC,EAAYF,OAAOpN,IAChB,SAAA4S,GAAK,OACD1D,EAAAtK,EAAA4G,cAACgrD,GAAD,CACEpD,iBAAkBA,EAClB9lD,YAAaA,EACbgN,MAAOA,EACPk7C,WAAYA,EACZvhD,MAAOA,EACPrB,MAAOA,OAZV,KCZR,SAAS6jD,KAEZ,OADSliC,SAASqjB,uBAAuB,yBAAyB,GACxDjjB,WCkBd,IAAMvY,GAAS,IAAI1J,IAgHnB,IA8BexF,eA9BS,SAACC,EAAO1C,GAC5B,IAAIiX,EAAQvU,EAAMC,OAAOspD,kBAAkBjsD,EAAMmI,MAAMtF,YAAYlN,KAAO,GAEtE2rD,EAAiB5+C,EAAMqmB,YAAYu4B,eACnCl6C,OAAgCnS,IAAnBqsD,GAEbA,EAAe4K,OAA+BlsD,EAAMygB,QACpD0rC,EAAmBzpD,EAAMqmB,YAAYqjC,kBAAkBpsD,EAAMmI,MAAMtF,YAAYlN,IACnF,MAAO,CACHyR,WAAYA,EACZwzB,WAAYiqB,IACZ5tC,MAAOA,EAAMjX,EAAMsiD,eACnBtB,OAAQt+C,EAAMqmB,YAAYi4B,OAC1BqL,UAAWF,EAAmBA,EAAiBnsD,EAAMygB,QAAQ9qB,IAAM,IAIhD,SAAAsN,GACvB,MAAO,CACHmoD,kBAAmB,SAAC1D,GAAD,OAAYzkD,EAC3B+gD,aAA6B0D,KACjC4E,mBAAoB,SAACtd,GAAD,OAAU/rC,EAAS+lC,YAAyBgG,KAChEud,mBAAoB,SAAC9rC,EAASqnB,GAAV,OAAqB7kC,EAASupD,YAA8B/rC,EAASqnB,KACzF2kB,mBAAoB,SAAChsC,EAASic,GAAV,OAAuBz5B,EAASypD,YAA8BjsC,EAASic,KAC3F+rB,qBAAsB,SAAClC,GAAD,OAAYtjD,EAASwlD,YAAqBlC,KAChEmC,yBAA0B,SAACjjD,GAAD,OAAOxC,EAC7BylD,YAAyBjjD,OAItBhD,CA5If,SAAqBzC,GACjB,IAAIhK,EAASgK,EAAMygB,QAAQzqB,OAAOgK,EAAM46B,YAEpC3jB,OAAwBhiB,IAAhB+K,EAAMiX,MAAsB,GACpCjX,EAAMiX,MAAM1hB,IAAI,SAAC2H,EAAG9E,GAAJ,MAAW,CAC3Bu0D,WAAYv0D,EACZw0D,GAAI1vD,KAEHqJ,OAAO,SAAArJ,GAAC,OAAIA,EAAE0vD,KAEbC,EAAgB/oD,sBAAY,SAACrG,GAC/BA,EAAE+J,kBACF,IAAI6G,EAAO0yC,YAAY/gD,EAAMqsD,UAAWrsD,EAAM46B,WAAY56B,EAAMghD,QAC5DlZ,EAASrqC,EAAEutB,MAAQghC,KAAkB39C,EAAOy+C,IAChD9sD,EAAMusD,mBAAmBvsD,EAAMygB,QAASqnB,GAExC,IAAIwZ,EAAiB,GACrBA,EAAe4K,KAA6BlsD,EAAMygB,QAClDzgB,EAAMorD,kBAAkB9J,GACxBthD,EAAMmI,MAAM4kD,gBAAgB/sD,EAAMsiD,eAClCtiD,EAAMmI,MAAMqqC,aAAY,GACpBxyC,EAAM+B,gBAAgBW,MAAMqmB,YAAYD,aAAeG,KACvDjpB,EAAMoH,YACNpH,EAAMssD,mBAAmBrjC,KAE7BjpB,EAAMyoD,0BAAqBxzD,GAC3B+K,EAAM0oD,8BAAyBzzD,IAChC,CACC+K,EAAMssD,mBACNtsD,EAAMqsD,UACNrsD,EAAMsiD,cACNtiD,EAAMusD,mBACNvsD,EAAMoH,WACNpH,EAAMygB,QACNzgB,EAAMghD,SAEJxyC,EAAY1K,sBAAY,SAACrG,GAC3BA,EAAE+J,kBACFxH,EAAMusD,wBAAmBt3D,GACzB+K,EAAMysD,wBAAmBx3D,IAC1B,CAAC+K,EAAMusD,oBAAqBvsD,EAAMysD,oBAE/BO,EAAkBlpD,sBAAY,SAACrG,EAAG2oD,GACpC3oD,EAAE+J,kBACFxH,EAAMysD,mBAAmBzsD,EAAMygB,QAAS2lC,IACzC,CAACpmD,EAAMysD,mBAAoBzsD,EAAMygB,UAGhCjX,EAAQ,CACRkJ,gBAAiBf,GAAOmB,gBAAgB9S,EAAMmI,MAAMwQ,YAAc3Y,EAAMmI,MAAM0K,YAGlFrJ,EAAMqG,MAAQkxC,YACV/gD,EAAMygB,QAAQzqB,SACdgK,EAAM46B,WACN56B,EAAMghD,QAEV,IAAIF,EAAY,CACZjxC,MAAOrG,EAAMqG,MACbxB,KAAM0yC,YAAY/gD,EAAMqsD,UAAWrsD,EAAM46B,WAAY56B,EAAMghD,SAa/D,OATAF,EAAS,OAAa,aAAenvC,GAAO4J,SAAS/R,EAAMkJ,gBAAiB,IACxE1S,EAAMoH,aACN05C,EAAS,OAAa,aAAet3C,EAAMkJ,gBAC3CouC,EAAS,gBAAsBnvC,GAAO4J,SAAS/R,EAAMkJ,gBAAiB,IACtEouC,EAAS,QAAc,IAG3Bt3C,EAAMqG,OAAS,EAGXpL,EAAAtK,EAAA4G,cAAA,OACEyN,UAAW,kBAAMxO,EAAMusD,wBAAmBt3D,IAC1CuU,MAAOs3C,EACPpgD,UAdU,2BAeV+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa+9C,EACbr+C,UAAWA,EACXhF,MAAOA,EAAO9I,UAAU,0BACxB+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOuvD,EAAgBvvD,EAAG6mD,MACvC5jD,UAAU,cACZ+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,WACf+D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GAAD,OAAOuvD,EAAgBvvD,EAAG4mD,MACvC3jD,UAAU,gBAEd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,6BACZuW,EAAM1hB,IACH,SAACkQ,EAAGrN,GAAJ,OACIqM,EAAAtK,EAAA4G,cAACksD,GAAA,EAAD,CACMxsC,QAASzgB,EAAMygB,QACf5Q,MAAO7Z,EAAS+qD,YAAY,EAAG/gD,EAAM46B,WAAY56B,EAAMghD,QACvDpxC,OAAQ,GACR5O,IAAK,aAAe5I,EAAI,IAAMqN,EAAEknD,WAChCO,WAAY,UACZl3D,OAAQA,EACRmS,MAAOnI,EAAMmI,MACbwkD,WAAYlnD,EAAEknD,WACd/xB,WAAY56B,EAAM46B,WAClB5lB,SAAUvP,EAAE4O,aC/GvB,IAAIpM,IA+BnB,IAYexF,eAZS,SAACC,EAAO1C,GAC5B,MAAO,CACHmtD,YAAantD,EAAMmI,MAAMk6C,SAASrsD,SAIf,SAAAiN,GACvB,MAAO,CACHqpD,mBAAoB,SAACtd,GAAD,OAAU/rC,EAAS+lC,YAAyBgG,OAIzDvsC,CAzCf,SAAuBzC,GACnB,IAAMyO,EAAc3K,sBAAY,SAACrG,GAC7B,GAAIuC,EAAM+B,gBAAgBW,MAAMqmB,YAAY8hC,gBAAiB,CACzDptD,EAAE+J,kBADuD,IAAA4lD,EAGrDptD,EAAM+B,gBAAgBW,MAAMqmB,YAAY8hC,gBADvCA,EAFoDuC,EAEpDvC,gBAAiBwC,EAFmCD,EAEnCC,QAElB5nD,EAAIhI,EAAEutB,MAAQghC,KAAkBqB,EAChCV,EAAalH,YAAoBhgD,EAAGzF,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,QAC3E/9C,iBAAShO,EAAWq4D,YAAqBttD,EAAMmI,MAAO0iD,EAAiB8B,MAE5E,CAAC3sD,EAAMghD,SAEV,OACIv8C,EAAAtK,EAAA4G,cAAA,OAAK0N,YAAaA,GACfzO,EAAMmI,MAAMk6C,SACR97C,OAAO,SAACd,EAAGrN,GAAJ,OAAUA,GAAK,IACtB7C,IAAI,SAACkrB,EAASroB,GAAV,OACAqM,EAAAtK,EAAA4G,cAACwsD,GAAD,CACMvsD,IAAK,WAAWyf,EAAQ9qB,GACxBoM,gBAAiB/B,EAAM+B,gBACvB0e,QAASA,EACTtY,MAAOnI,EAAMmI,MACbm6C,cAAelqD,EAAE,kBCrC7Bi0C,GAAS,GACTmhB,GAAe,GAErB,SAASC,GAAqBp5C,EAAMumB,GAEvC,OAF2DxhC,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAH,IAC5CwhC,EAAWA,WAAa,GACd,IAAMvmB,EAAO,GAGhC,SAASq5C,GAAuBntC,GACnC,OAAO8rB,GAAS9rB,EAASitC,GAGtB,SAASG,GAAsB92B,GAClC,OAAOl7B,KAAKyY,IAAI,EAAGzY,KAAKwY,IAAI,GAAIk4B,GAAUxV,GAAY22B,KCJ1D,IAAMI,GAAwBlO,eAAK,SAAA1lD,GASZ,IARnB8U,EAQmB9U,EARnB8U,YACA++C,EAOmB7zD,EAPnB6zD,eACAC,EAMmB9zD,EANnB8zD,iBACAt/C,EAKmBxU,EALnBwU,UACA6F,EAImBra,EAJnBqa,KACAumB,EAGmB5gC,EAHnB4gC,WACAomB,EAEmBhnD,EAFnBgnD,OACAzgC,EACmBvmB,EADnBumB,OACAwtC,EAAmB/zD,EAAnB+zD,cACA,OACItpD,EAAAtK,EAAA4G,cAAA,UACE+N,YAAaA,EACb5N,YAAa2sD,EACbxsD,aAAcysD,EACdt/C,UAAWA,EACXgC,GAAIi9C,GAAqBp5C,EAAMumB,EAAYomB,GAC3CvwC,GAAIi9C,GAAuBntC,GAC3B7P,EAAG,EACHnF,KAAMwiD,EAAgB,OAAS,QAC/BpiD,OAAQoiD,EAAgB,OAAS,MACjCriD,YAAa,MAaRjJ,eATS,SAACC,EAAO1C,GAC5B,MAAO,CACHqU,KAAMrU,EAAM86C,MAAMzmC,KAClBkM,OAAQvgB,EAAM86C,MAAMv6B,OACpBqa,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SAIM,KAAzBv+C,CAA+BmrD,ICpC/B,SAASI,GAAiBhuD,GACrC,YAAyB/K,IAArB+K,EAAMiuD,WACExpD,EAAAtK,EAAA4G,cAACmtD,GAAA,KAAD,CAAMzoD,EAAG,EAAGgG,EAAG,EAAGoE,MAAO,EAAGD,OAAQ,IAI3CnL,EAAAtK,EAAA4G,cAAA,UACEM,aAAcrB,EAAMqB,aACpByN,YAAa9O,EAAMiB,QACnBuP,GAAIi9C,GAAqBztD,EAAMiuD,WAAW55C,KAAMrU,EAAM46B,WAAY56B,EAAMghD,QACxEvwC,GAAIi9C,GAAuB1tD,EAAMiuD,WAAW5wD,OAC5CqT,EAAG,EACHnF,KAAM,OACNI,OAAQ,OACRD,YAAa,kBCuMTjJ,mBApBS,SAACC,EAAO1C,GAC5B,IAAI2qD,EAAYjoD,EAAMqmB,YAAY4hC,UAAU3qD,EAAM6C,YAAYlN,IAC1D+xD,OAAuBzyD,IAAd01D,EACTA,EAAU3qD,EAAMmuD,gBAChBl5D,EACAm5D,EAAO1rD,EAAM2F,IAAIgmD,iBAAiBruD,EAAM6C,YAAYlN,IAExD,MAAO,CACH+xD,OAAQA,EACRnnC,OAAQ7d,EAAM2F,IAAIimD,kBAAer5D,OACpBA,IAATm5D,EAAqB,EAAIA,EAC7BxzB,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SArBP,SAAA/9C,GACvB,MAAO,CACHwlD,qBAAsB,SAAClC,GAAD,OAAYtjD,EAASwlD,YAAqBlC,KAChEgI,eAAgB,kBAAMtrD,EAAS6hD,YAA4B,MAC3D4D,yBAA0B,SAACjjD,GAAD,OAAOxC,EAC7BylD,YAAyBjjD,OAwBtBhD,CArMf,SAAgCzC,GAC5B,IAAIsF,EAAMC,sBAAOtQ,GADkBsO,EAEDC,wBAASvO,GAFRwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAE9B0qD,EAF8BxqD,EAAA,GAElB+qD,EAFkB/qD,EAAA,GAAAuG,EAGaxG,wBAASvO,GAHtBgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAG9BykD,EAH8BxkD,EAAA,GAGXykD,EAHWzkD,EAAA,GAAAG,EAIW5G,wBAASvO,GAJpBoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAI9BukD,EAJ8BtkD,EAAA,GAIZukD,EAJYvkD,EAAA,GAAAoQ,EAKSjX,oBAAS,GALlBkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAK9Bo0C,EAL8Bn0C,EAAA,GAKbo0C,EALap0C,EAAA,GAO7BtL,EAAQ,SAAC3R,GACX,IAAIwQ,EAAO3I,EAAI4I,QAAQC,wBACvB,MAAO,CACH1I,EAAGhI,EAAE2Q,QAAUH,EAAKI,KACpB5C,EAAGhO,EAAE6Q,QAAUL,EAAKM,MAItBwgD,EAAc,SAACtxD,GACjBA,EAAE+J,kBACF,IAAI9E,EAAQ1C,EAAM+B,gBAAgBklB,MAAM6pB,WAFjBngC,EAGVvB,EAAM3R,GAAdgI,EAHkBkL,EAGlBlL,EAAGgG,EAHekF,EAGflF,EACJ4I,EAAOoxC,YAAoBhgD,EAAGzF,EAAM46B,WAAY,EAAGl4B,EAAMqmB,YAAYi4B,QACzE,IAAIJ,MAAMvsC,GAAV,CAGA,IAAIhX,EAAQswD,GAAsBliD,GAC9BqvC,EAAQ,IAAIkU,KACZhvD,EAAM6C,YAAaxF,GACvBy9C,EAAMzmC,KAAOA,EACbrU,EAAM6C,YAAYwF,IAAI4mD,YAAYnU,EAAO,GACzC0T,OAAcv5D,GACdy5D,EAAqB5T,GACrBgU,GAAmB,GACnB9uD,EAAMuuD,mBAgCJ9/C,EAAc3K,sBAAY,SAACrG,GAC7B,QAA0BxI,IAAtBw5D,EAAJ,CADmC,IAAAS,EAKvB9/C,EAAM3R,GAAbgI,EAL8BypD,EAK9BzpD,EAAEgG,EAL4ByjD,EAK5BzjD,EACH/I,EAAQ1C,EAAM+B,gBAAgBklB,MAAM6pB,WACpCz8B,EAAOoxC,YAAoBhgD,EAAGzF,EAAM46B,WAAY,EAAGl4B,EAAMqmB,YAAYi4B,QACrE3jD,EAAQswD,GAAsBliD,GAClCgjD,EAAkBp6C,KAAOA,EACzBo6C,EAAkBpxD,MAAQA,EAC1B2C,EAAM6C,YAAYssD,oBAAoBC,YAClCpvD,EAAM6C,YACN7C,EAAM+B,iBAEVysD,OAAcv5D,GACd65D,GAAmB,GACnB9uD,EAAMyoD,0BAAqBxzD,GAC3B+K,EAAM0oD,8BAAyBzzD,GAC/B+K,EAAMuuD,mBACP,CAACE,EAAmBzuD,EAAM0nD,OAAQ1nD,EAAM46B,aAErCy0B,EAAiBvrD,sBAAY,SAACrG,GAAM,IAAA6xD,EAC1BlgD,EAAM3R,GAAbgI,EADiC6pD,EACjC7pD,EAAEgG,EAD+B6jD,EAC/B7jD,EACH/I,EAAQ1C,EAAM+B,gBAAgBklB,MAAM6pB,WACpCz8B,EAAOoxC,YAAoBhgD,EAAGzF,EAAM46B,WAAY,EAAGl4B,EAAMqmB,YAAYi4B,QACrE3jD,EAAQswD,GAAsBliD,GAClC+iD,EAAc,CAACn6C,OAAMhX,WACtB,CAACmxD,EAAexuD,EAAM46B,aAEnB20B,EAAmBzrD,sBAAY,SAACg3C,GAClC8T,EAAoB9T,GACpB0T,OAAcv5D,IACf,CAACu5D,EAAeI,IAEbY,EAAa1rD,sBAAY,SAACrG,GAC5BixD,OAAqBz5D,GACrB25D,OAAoB35D,GACpBu5D,OAAcv5D,GACd65D,GAAmB,IACpB,CAACJ,EAAsBE,EAAqBJ,IAEzCiB,EAAoB3rD,sBAAY,SAACg3C,GAC9B+T,GACD7uD,EAAM6C,YAAYssD,oBAAoBO,YAAY5U,GAEtD0U,KACD,CAACX,IAEAnH,EAAS1nD,EAAM0nD,QAAU,GAEzB73C,EAAQ49C,GAAqBztD,EAAM6C,YAAYwF,IAAIrS,OAAS,IAAMgK,EAAM46B,WAAY56B,EAAMghD,QAE1F2O,EA5EkB,WAClB,IAAIjI,EAAS1nD,EAAM0nD,QAAU,GACzBiI,EAAM,GAKV,IAAK,IAAIv3D,KAJa,IAAlBsvD,EAAO1xD,QAAiB0xD,EAAO,GAAGrzC,KAAO,KAEzCs7C,EAAM,CAAC,CAAClqD,EAAG,EAAGgG,EADDiiD,GAVJ,WACb,IACIU,EADQpuD,EAAM+B,gBAAgBklB,MAAM6pB,WACvBzoC,IAAIgmD,iBAAiBruD,EAAM6C,YAAYlN,IACxD,YAAgBV,IAATm5D,EAAqB,EAAIA,EAOQ3a,OAG1BiU,EACViI,EAAI55D,KAAK,CACL0P,EAAGgoD,GAAqB/F,EAAOtvD,GAAGic,KAAMrU,EAAM46B,WAAY56B,EAAMghD,QAChEv1C,EAAIiiD,GAAuBhG,EAAOtvD,GAAGmoB,UAI7C,IAAIqvC,EAAOD,EAAIA,EAAI35D,OAAS,GAM5B,OAJA25D,EAAI55D,KAAK,CACL0P,EAAGmqD,EAAKnqD,EAAI,IACZgG,EAAGmkD,EAAKnkD,IAELkkD,EAwDDE,GACV,OACIprD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,+BACb+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLuK,MAAOA,EACPD,OAAQy8B,GACRhrC,aAAcmuD,EACd/gD,YAAaA,EACbD,UAAWghD,GAEX/qD,EAAAtK,EAAA4G,cAAA,QACE0N,YAAa,SAAChR,GAAD,OAAO4xD,EAAe5xD,IACnCyD,YAAa,SAACzD,GAAD,OAAO4xD,EAAe5xD,IACnCqR,YAAa,SAACrR,GAAD,OAAOsxD,EAAYtxD,IAChCqyD,MAAO,EACPvkD,KAAK,cACLiU,QAAS,EACT9T,YAAa,GACbvM,EAAG,WAAawwD,EAAI/nD,MAAM,GAAGrS,IAAI,SAAAyE,GAAA,OAAAA,EAAEyL,EAAa,IAAfzL,EAAIyR,IAAoB9U,KAAK,KAC9DgV,OAAQ,UACVlH,EAAAtK,EAAA4G,cAAA,QACE0N,YAAa,SAAChR,GAAD,OAAO4xD,EAAe5xD,IACnCyD,YAAa,SAACzD,GAAD,OAAO4xD,EAAe5xD,IACnCqR,YAAa,SAACrR,GAAD,OAAOsxD,EAAYtxD,IAChCsyD,QAAQ,EACRxkD,KAAK,cACLG,YAAa,EACbvM,EAAG,WAAawwD,EAAI/nD,MAAM,GAAGrS,IAAI,SAAA+E,GAAA,OAAAA,EAAEmL,EAAa,IAAfnL,EAAImR,IAAoB9U,KAAK,KAC9DgV,OAAQ,QACVlH,EAAAtK,EAAA4G,cAACitD,GAAD,CACEpzB,WAAY56B,EAAM46B,WAClBv5B,aAAc,kBAAMmtD,OAAcv5D,IAClC+rD,OAAQhhD,EAAMghD,OACdiN,WAAYA,EACZhtD,QAAS8tD,IACVrH,EAAOnyD,IACJ,SAACulD,EAAO1iD,GAAR,OACIqM,EAAAtK,EAAA4G,cAACivD,GAAD,CACEhvD,IAAK,cAAgB85C,EAAMnlD,GAC3Bk4D,eAAgB,kBAAM0B,EAAiBzU,IACvCgT,iBAAkB,kBAAMc,OAAoB35D,IAC5C84D,cAAejT,IAAU6T,GAAoB7T,IAAU2T,EACvD3/C,YAAa,kBAAM4/C,EAAqB5T,IACxCtsC,UAAW,kBAAMihD,EAAkB3U,IACnCA,MAAOA,gCC3KvBnpC,YAAS,IAAI1J,KA2GJxF,eA5BS,SAACC,EAAO1C,GAC5B,IAAIkrD,EAAkBxoD,EAAM2F,IAAIH,gBAAkBlI,EAAMmI,MAAMW,YAC1DP,EAAqBvI,EAAMmI,MAAMpG,gBAAgBwG,mBACjDJ,EAAQnI,EAAMmI,MACdqQ,EAASrQ,EAKb,OAJIA,GAASA,EAAMxF,QAAUwF,EAAMxF,OAAO,KACtC6V,EAASrQ,EAAMxF,OAAO,GAAGwF,OAGtB,CACHxS,GAAI6iB,EAAOG,WAAaH,EAAOG,gBACT1jB,IAAlBujB,EAAOsD,aAAkD7mB,IAA1BujB,EAAOsD,OAAOI,QAC7C1D,EAAOsD,OAAOI,QACd1D,EAAO3F,UACXq4C,gBAAiBA,GAAmBlrD,EAAMmI,MAAMtF,cAAgB0F,EAChE0nD,MAAOjwD,EAAMmI,MAAM+nD,UACnBh2C,MAAOla,EAAMmI,MAAM+R,MACnB1H,QAASxS,EAAMmI,MAAMqV,YAIF,SAACva,GAC1B,MAAO,CACHi/C,mBAAoB,SAACz8C,GAAD,OAAOxC,EAASk/C,YAA8B18C,KAClE2oC,cAAe,SAAC3oC,GAAD,OAAOxC,EAAS+lC,YAAyBvjC,OAI/ChD,CAxGQ,SAAAzI,GAQjBA,EAPFkoD,mBAOE,IANF/5C,EAMEnO,EANFmO,MACA+iD,EAKElxD,EALFkxD,gBACA14C,EAIExY,EAJFwY,QACA0H,EAGElgB,EAHFkgB,MACA+1C,EAEEj2D,EAFFi2D,MACA7hB,EACEp0C,EADFo0C,cAEIuC,EAAYprC,iBAAO,GACnB3P,EAAOuS,EAAMwQ,YAAcxQ,EAAM0K,WAChC1K,EAAMwQ,YAAcxQ,EAAM2T,SAC3BlmB,EAAOuS,EAAM2T,OAAOlmB,MAGxB,IAAI+c,EAAQhB,GAAOiB,iBAAiBzK,GAEhCqB,EAAQ,GAGR0hD,IACA1hD,EAAMkJ,gBAAkBC,GAG5B,IAAM1R,EAAU6C,sBAAY,SAACrG,GACzBA,EAAE+J,kBACFW,EAAMpG,gBAAgB6e,YAAYzY,EAAMW,aAExC,IAAI+nC,GAAM,IAAI51B,MAAOC,UACjB21B,EAAMF,EAAUziC,QA/BF,KAgCdkgC,EAAcvpB,KAGlB8rB,EAAUziC,QAAU2iC,GACrB,CAAC1oC,IAEE0S,EAAc/W,sBAAY,WAC5BqE,EAAM2S,MAAMZ,IACb,CAACA,EAAO/R,IAELgoD,EAAcrsD,sBAAY,WAC5BqE,EAAMioD,MAAMH,IACb,CAACA,EAAO9nD,IAELkoD,EAAgBvsD,sBAAY,WAC9BqE,EAAMmoD,cAAc99C,IACrB,CAACA,EAASrK,IAEb,OACI1D,EAAAtK,EAAA4G,cAAA,OACEE,QAASA,EACTuI,MAAO,CAAC+mD,iBAAkB59C,GAAQjS,UAAU,oBAC5C+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAU,cACT9K,EAAKoC,QAERyM,EAAAtK,EAAA4G,cAACowC,GAAA,EAAD,CACE2D,OAAO,EACP/yC,gBAAiBoG,EAAMpG,gBACvBoG,MAAOA,IACT1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAACyvD,GAAA,EAAD,CAAoBroD,MAAOA,EAAOpG,gBAAiBoG,EAAMpG,kBACzD0C,EAAAtK,EAAA4G,cAAA,OACEE,QAAS4Z,EACTna,UAAWwZ,EAAQ,iBAAmB,YAAa/R,EAAMW,YAAc,GACzErE,EAAAtK,EAAA4G,cAAA,OACEE,QAASkvD,EACTzvD,UAAWuvD,EAAQ,iBAAmB,YAFxC,KAGAxrD,EAAAtK,EAAA4G,cAAA,OACEE,QAASovD,EACT3vD,UAAW8R,EAAU,qBAAuB,mBCrD3C/P,eAZS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHktC,kBAAmB,SAACvkC,GAAD,OACf3I,EAASktC,aAAkBvkC,OAItBnJ,CA3BS,SAAAzI,GACuB,IAA3CwP,EAA2CxP,EAA3CwP,MAAO3G,EAAoC7I,EAApC6I,YAAoC7I,EAAvBm2C,kBAMpB,OAJA3mC,EAAQ,CACJkJ,gBAFQlJ,EAAMkJ,iBAMdjO,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,qBAC1BmC,EAAYF,OAAOpN,IAChB,SAAA4S,GAAK,OAAI1D,EAAAtK,EAAA4G,cAAC0vD,GAAD,CAAgBzvD,IAAKmH,EAAMxS,GAAIwS,MAAOA,SCyB9C1F,eAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH4L,KAAMlJ,EAAMqmB,YAAYk5B,WAAWjiD,EAAM6C,YAAYlN,IACrDqsD,gBAAiBt/C,EAAMqmB,YAAYi5B,kBAId,SAAC/+C,EAAUjD,GACpC,MAAO,CACH0wD,yBAA0B,SAACjrD,GAAD,OAAOxC,EAASytD,aAAyB1wD,EAAM6C,YAAYlN,GAAI8P,KACzFy8C,mBAAoB,SAACz8C,GAAD,OAAOxC,EAASk/C,YAA8B18C,OAIzDhD,CArCU,SAAAzI,GAMnB,IALFgoD,EAKEhoD,EALFgoD,gBACAE,EAIEloD,EAJFkoD,mBACAr/C,EAGE7I,EAHF6I,YACA+I,EAEE5R,EAFF4R,KACA8kD,EACE12D,EADF02D,yBAEMzvD,EAAU6C,sBAAY,WACpB8H,GAAQo2C,GAAmBA,EAAgBn/C,cAAgBA,GAE3Dq/C,OAAmBjtD,GAEvBy7D,GAA0B9kD,IAC3B,CAACo2C,EAAiBp2C,EAAM/I,IAC3B,OACI4B,EAAAtK,EAAA4G,cAAA,OACEE,QAASA,EACTP,UAAU,sBACTkL,EAAOnH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAiB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gDCEjE,IAAMiwD,GAAU,CACZ,CAACtzD,MAAOijD,IAAgBhrD,MAAO,WAC/B,CAAC+H,MAAOuzD,IAA4Bt7D,MAAO,WAG/C,SAASs3B,KAAgC,IAAtBvvB,EAAsBjE,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAhBknD,IACrB,OAAOqQ,GAAQlyD,KAAK,SAAA+3C,GAAG,OAAIA,EAAIn5C,QAAUA,IAU9BoF,YANS,SAACC,EAAO1C,GAC5B,MAAO,CACH8qD,qBAAsBpoD,EAAMqmB,YAAY+hC,qBAAqB9qD,EAAM6C,YAAYlN,MAI/C,KAAzB8M,CAjCf,SAAgCzC,GAK5B,OACIyE,EAAAtK,EAAA4G,cAAC2D,GAAAvK,EAAD,CACEuG,UAAU,2BACVwsB,iBAAiB,mCACjBC,eAAe,iCACfxoB,QAASgsD,GACT9rD,SAAU,SAAC6nB,GAAD,OAVE9lB,EAUc8lB,EAAErvB,WAT9B2C,EAAM6C,YAAYguD,oBAAoBjqD,GAD1C,IAAkBA,GAWZvJ,MAAOuvB,GAAU5sB,EAAM8qD,sBACvBhmD,YAAY,wBActB,ICjBM6M,GAAS,IAAI1J,IACb4B,GAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAC5CinD,GAAkB,GA2GxB,IAwBeruD,eAxBS,SAACC,EAAO1C,GAC5B,IAAIugB,EAAS7d,EAAM2F,IAAIgmD,iBAAiBruD,EAAM6C,YAAYlN,IAEtD6nB,GADa9a,EAAMC,OAAOouD,eAAe/wD,EAAM6C,YAAYlN,KAAO,IAC3C,GAE3B,MAAO,CACHyR,WAAYi/C,GAAc3jD,EAAO1C,GACjCugB,YAAmBtrB,IAAXsrB,EAAuB,EAAIA,EACnCrG,MAAOxX,EAAM2F,IAAI2oD,iBAAiBhxD,EAAM6C,YAAYlN,IACpD6nB,eAA0BvoB,IAAduoB,GAAkCA,EAC9CykC,WAAYv/C,EAAMqmB,YAAYk5B,WAAWjiD,EAAM6C,YAAYlN,IAC3D2mC,UAAWt8B,EAAM6C,YAAYF,QAAU3C,EAAM6C,YAAYF,OAAO3M,SAI7C,SAACiN,EAAUjD,GACdA,EAAM6C,YAAYlN,GACtC,MAAO,CACHs7D,gBAAiB,SAAA/lD,GAAC,OAAIjI,EAASiuD,YAA2BhmD,KAC1DohD,mBAAoB,SAACtd,GAAD,OAAU/rC,EAAS+lC,YAAyBgG,KAChEmiB,+BAAgC,kBAAMluD,EAAS+gD,kBAA6B/uD,OAIrEwN,CAjIf,SAA8BzC,GAC1B,IAQMwH,EAAkB,SAAC/J,GACrBA,EAAE+J,mBAuBF9G,EAAY,4BACZV,EAAMoH,aACN1G,GAAa,aAGjB,IAAI9K,EAA2C,IAApCoK,EAAM6C,YAAYF,OAAO3M,OAChCgK,EAAM6C,YAAYF,OAAO,GAAGgW,YAC5B3Y,EAAM6C,YAAYF,OAAO,GAAGkQ,UAAYhJ,GAAM7J,EAAM5H,QAE3CnD,IAATW,GAAsBA,EAAKI,QAAU86D,KACrCl7D,EAAOA,EAAK23B,UAAU,EAAGujC,KAG7B,IAIIM,EAAYpxD,EAAM6C,YAAYwuD,QAAU,6BAA+B,oBACvE1xC,EAAY,GAGhB,GAAI3f,EAAM6C,YAAYwuD,SAAWrxD,EAAMoH,WAAY,CAC/C,IAAIe,EAAQnI,EAAM6C,YAAYF,OAAO,GACjC/M,EAAOuS,EAAMwQ,YAAcxQ,EAAM0K,UACrC8M,EAAY,CACRjN,gBAAiBf,GAAOmB,gBAAgBld,IAIhD,IAAID,EAAqC,kBAAzBqK,EAAM6C,YAAYlN,GAC9BqK,EAAM6C,YAAYlN,GAAGiS,MAAM,EAAG,IAC9B,IAAM5H,EAAM6C,YAAYlN,GACxBgd,EAAQhB,GAAO4lB,SAAS5lB,GAAOmB,gBAAgBnd,GAAK,GACpD6T,EAAQ,CACR+mD,iBAAkB59C,EAClBD,gBAAiBC,GAGrB,OACIlO,EAAAtK,EAAA4G,cAAA,WACA0D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAAArR,GAAC,OAAIA,EAAE+J,mBACpBgH,UAAW,SAAA/Q,GAAC,OAAIA,EAAE+J,mBAClBvG,QA3DY,SAACxD,GACfA,EAAE+J,kBACFxH,EAAMixD,gBAAgB,CAACjxD,EAAM6C,YAAYlN,KACzCqK,EAAM+B,gBAAgBwX,oBAAoBvZ,EAAM6C,YAAYlN,IAAI,IAyD9D8Y,YAAajH,EACbgC,MAAOA,EACPlC,YAAaE,EACb9G,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOmW,EACPjf,UAAW0wD,GACVx7D,GAEH6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BACb+D,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAW1B,EAAM6C,YAAYwuD,SAC/C5sD,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,WA5ErBjB,EAAM6C,YAAYF,OAAO,GAAG8a,iBA6EhB/c,UAAWV,EAAMwd,UAAY,2BAA6B,6BAC1D/Y,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,sBAGtB+D,EAAAtK,EAAA4G,cAACuwD,GAAD,CAAkBzuD,YAAa7C,EAAM6C,iBAIxC7C,EAAMiiD,WAAax9C,EAAAtK,EAAA4G,cAACwwD,GAAD,CAAiB/nD,MAAOA,EAAO3G,YAAa7C,EAAM6C,cAAiB,oCC5G3F2uD,GAA2B,GAE1B,SAASC,GAAcxqC,GAE1B,OADYA,EAAM6pB,WACL/nB,YAAYy9B,WC4B7B,IA6Ve/jD,eAdS,SAACC,EAAO1C,GAC5B,IAAI2qD,EAAYjoD,EAAMqmB,YAAY4hC,UAAU3qD,EAAM6C,YAAYlN,IAC1Di1D,OAAoC31D,IAAd01D,EACtBA,EAAUrK,UAAkBrrD,EAChC,MAAO,CACH0yD,kBAAsC1yD,IAAxB21D,EAAoC,EAAIA,EAAoB50D,OAC1E60D,gBAAiBnoD,EAAMM,UAAU6nD,gBACjCjwB,WAAYiqB,IACZiG,qBAAsBpoD,EAAMqmB,YAAY+hC,qBAAqB9qD,EAAM6C,YAAYlN,IAC/EyR,WAAYi/C,GAAc3jD,EAAO1C,GACjCghD,OAAQt+C,EAAMqmB,YAAYi4B,SA3BP,SAAC/9C,EAAUjD,GACdA,EAAM6C,YAAYlN,GACtC,MAAO,CACH+7D,YAAc,SAAAxmD,GAAC,OAAIjI,EAASyuD,YAAYxmD,KACxC+lD,gBAAiB,SAAA/lD,GAAC,OAAIjI,EAASiuD,YAA2BhmD,KAC1Dg3C,mBAAoB,SAAAh3C,GAAC,OAAIjI,EAASk/C,YAA8Bj3C,KAChEkgD,kBAAmB,SAAC1D,GAAD,OAAYzkD,EAC3B+gD,aAA6B0D,KACjC5C,4BAA6B,SAACC,GAAD,OAAgB9hD,EACzC6hD,YAA4BC,KAChC0D,qBAAsB,SAAChjD,GAAD,OAAOxC,EACzBwlD,YAAqBhjD,KACzBijD,yBAA0B,SAACjjD,GAAD,OAAOxC,EAC7BylD,YAAyBjjD,OAkBtBhD,CA3ViB,SAACzC,GAE7B,IAAM8wC,EAAW,WACb,OAAO9wC,EAAM+B,gBAAgBklB,MAAM6pB,YAGjC8Z,EAAsB,WACxB,IAAID,EAAY7Z,IAAW/nB,YAAY4hC,UAAU3qD,EAAM6C,YAAYlN,IACnE,YAAqBV,IAAd01D,GAA0BA,EAAUrK,MAAwB,IAGhEmH,EAAez8C,aAAU,CAC5B1F,IAAKtF,EAAM+qD,WACXnwB,WAAY56B,EAAM46B,WAClBomB,OAAQhhD,EAAMghD,OACd0G,OAAQkD,IACR7oD,gBAAiB/B,EAAM+B,gBACvB4lD,aAAc3nD,EAAM2nD,eANjBF,YAXgC6D,EAqBjCpB,GAAgB,CACZv0D,GAAIqK,EAAM6C,YAAYlN,GACtBoM,gBAAiB/B,EAAM+B,gBACvBi/C,OAAQhhD,EAAMghD,OACdpmB,WAAY56B,EAAM46B,WAClBkqB,4BAA6B9kD,EAAM8kD,4BACnC3iD,gBAAiBnC,EAAM+qD,aAP1BV,EApBgCiB,EAoBhCjB,iBAAkBD,EApBckB,EAoBdlB,mBAAoBE,EApBNgB,EAoBMhB,mBAUvCqH,EAAuBpsD,sBAAOtQ,GAC9BynC,EAAWn3B,kBAAO,GAClBqsD,EAAersD,iBAAO,GACtBssD,EAAgBtsD,sBAAOtQ,GACvBmxD,EAAY7gD,sBAAOtQ,GAEnBi1B,EAAa,kBAAMlqB,EAAM+qD,WAAW78C,QAAQgc,YAE5C7hB,EAAMrI,EAAM6C,YAAYwF,IAExBypD,EAAqBhuD,sBAAY,SAACrG,EAAGs0D,GAEvC,GADAt0D,EAAE+J,kBACiC,IAA/BuqD,EAAazP,cAAjB,CAIA,IAAIjuC,EAAOoxC,YAAoBhoD,EAAEutB,MAAQd,IAAclqB,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,QAC1F2Q,EAAqBzjD,QAAU6jD,EAC/BH,EAAa1jD,QAAUmG,EAAO09C,EAAa19C,OAC5C,CAACrU,EAAM46B,WAAY56B,EAAMghD,SAItBgM,EAAkB,SAAClS,EAAQkX,GAC7Bt1B,EAASxuB,QAAU4sC,EACnBsL,EAAUl4C,QAAU8jD,GAalBxjD,EAAY1K,sBAAY,SAACg3C,GAC3Bpe,EAASxuB,aAAUjZ,EACnBmxD,EAAUl4C,aAAUjZ,EACpB+K,EAAMwO,aACP,CAACxO,EAAMwO,YAEJC,EAAc3K,sBAAY,SAACrG,GAC7B,IAAI4W,EAAOoxC,YAAoBhoD,EAAEutB,MAAQd,IAAclqB,EAAM46B,gBAAY3lC,EAAW+K,EAAMghD,QAG1F3sC,GADgBA,GADC,GAAKrU,EAAM46B,WAAWA,YAGvC,IAAIq3B,EAAct2D,KAAKC,MAAMyY,GAE7B,GAAIqoB,EAASxuB,QAAS,CAIlB,GAFYwuB,EAASxuB,QAAQmG,KAAOqoB,EAASxuB,QAAQiN,SAEjDirC,EAAUl4C,UAAYm2C,IAAO,CAC7B,IAAI6N,EAAY7pD,EAAI8pD,aAAaz1B,EAASxuB,SAC1C,GAAIgkD,EAAW,CACX,IAAIE,EAAgB/pD,EAAI8pD,aAAaD,GACjCE,EAEIH,EAAcG,EAAc/9C,MAC5BqoB,EAASxuB,QAAQmG,KAAO49C,IACxBC,EAAU79C,KAAO49C,EACjB5pD,EAAIgqD,sBAED31B,EAASxuB,QAAQmG,KAAO49C,IAC/BC,EAAU79C,KAAO49C,EACjB5pD,EAAIgqD,2BAGT,CACH,IAAIC,EAAgBjqD,EAAIkqD,iBAAiB71B,EAASxuB,SAC9CskD,EAAWnqD,EAAI8pD,aAAaz1B,EAASxuB,eACnBjZ,IAAlBq9D,GAA+BL,EAAcK,EAAcj+C,aAC1Cpf,IAAbu9D,GAA0BP,EAAcO,EAASn+C,QACjDqoB,EAASxuB,QAAQmG,KAAO49C,EACxB5pD,EAAIgqD,sBAIXryD,EAAMoH,YACPqrD,SAED,GAAIC,IAAmB,KAAAC,EACCD,IAAtBjyC,EADqBkyC,EACrBlyC,QAAS2lC,EADYuM,EACZvM,UACdnjD,YAAS2vD,YAAuBnyC,EAAS2lC,EAAW6L,SAEpD3H,EAAmB7sD,EAAGuC,EAAM46B,WAAY56B,EAAMghD,SAEnD,CAAChhD,EAAM46B,WAAY56B,EAAMghD,OAAQhhD,EAAMoH,aAEpC/F,EAAe,WACjBq7B,EAASxuB,aAAUjZ,GAGjBsS,EAASzD,sBAAY,SAACg3C,GACxB,IAAIzmC,EAAOoxC,YACP3K,EAAM9vB,MAAQd,IACdlqB,EAAM46B,gBACN3lC,EACA+K,EAAMghD,QAGV,GAFA3sC,EAAO+vC,EAAa/vC,EAAMrU,EAAM46B,iBAEF3lC,IAA1B+K,EAAM6qD,gBAA+B,CACrC,IAAIgI,EAAgB,IAAIC,KACpB9yD,EAAM6qD,iBAIVx2C,GADgBA,GADC,GAAKrU,EAAM46B,WAAWA,YAGvCi4B,EAAcx+C,KAAOA,EACrBhM,EAAI4mD,YACA4D,EAAe,IACnB7yD,EAAM0xD,iBAAYz8D,QACf,QAAqCA,IAAjC08D,EAAqBzjD,QAAuB,CACnD,IAAI4sC,EAAQ6W,EAAqBzjD,QACjC7F,EAAIqnD,YAAY5U,GAChBzmC,GAAQu9C,EAAa1jD,QAGrBmG,GADgBA,GADC,GAAKrU,EAAM46B,WAAWA,YAGvCkgB,EAAMzmC,KAAOA,EACbhM,EAAI4mD,YACAnU,EAAOA,EAAM3/B,UAEjBw2C,EAAqBzjD,aAAUjZ,IAEpC,CAAC+K,EAAM46B,WAAY56B,EAAM6qD,kBAyBtBzjD,EAAa,SAAC0zC,GAChB,YAA4B7lD,IAArBqsD,UAE4BrsD,IAA/BqsD,IAAiBxG,EAAMnlD,KAQzB2rD,EAAiB,WACnB,OAAOxQ,IAAW/nB,YAAYu4B,gBAG5BoR,EAAkB,WACpB,OAAO5hB,IAAW/nB,YAAY2pC,iBAG5BD,EAAY,WACdzyD,EAAMixD,gBAAgB,CAACjxD,EAAM6C,YAAYlN,KACzCqK,EAAM+B,gBAAgBwX,oBAAoBvZ,EAAM6C,YAAYlN,IAAI,IAG9DmZ,EAAchL,sBAAY,SAACrG,GAC7B2sD,EAAmB3sD,GACnBg1D,KACD,CAACzyD,EAAM46B,WAAY56B,EAAMghD,SAExB+R,EAAkB,GACtB,GAAI/yD,EAAM6C,YAAYwuD,QAClB0B,EACItuD,EAAAtK,EAAA4G,cAACiyD,GAAD,CACE7qD,MAAOnI,EAAM6C,YAAYF,OAAO,GAChCq+C,OAAQhhD,EAAMghD,OACdpmB,WAAY56B,EAAM46B,WAClB74B,gBAAiB/B,EAAM+B,gBACvBc,YAAa7C,EAAM6C,kBAEtB,CACH,IAAIowD,EAAuBrI,KAAyB,GAChDxJ,GAAe,EACfphD,EAAM8qD,uBAAyB8F,MAC/BxP,GAAe,GAEnB,IAAI8R,EAAe,QACOj+D,IAAtBwyD,EAAYjuD,QACZ05D,EACID,EAAqBrrD,MAAM6/C,EAAYjuD,MAAOiuD,EAAY9C,IAAM,IAExEoO,EAAe,CACVtuD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB8I,MAAO,CAACqG,MAAO43C,EAAYM,aADjDthD,OAAApS,OAAA2R,EAAA,EAAA3R,CAER6+D,EAAc39D,IACT,SAACulD,EAAO1iD,GAAR,OACIqM,EAAAtK,EAAA4G,cAAC2gD,EAAD,CACEtpD,EAAGA,EACHgpD,aAAcA,EACdpgD,IAAK85C,EAAMnlD,GACXiR,KAAM05C,IACN1lB,WAAY56B,EAAM46B,WAClB/3B,YAAa7C,EAAM6C,YACnBo+C,OAAQ7oD,IAAMwyD,EAAoB50D,OAAS,EAC3C4rD,QAAe,IAANxpD,EACTkP,YAAa,SAAC7J,GAAD,OAAOq0D,EAAmBr0D,EAAGq9C,IAC1CuF,SAAU,kBAvFf,SAACvF,GACdtkD,QAAQC,IAAI,aACZ,IAAI08D,EAAkB9+D,OAAAsa,EAAA,EAAAta,CAAA,GAAKitD,MAAqB,GAIhD,GAFAthD,EAAM0oD,yBAAyB5N,EAAMzmC,MACrCrU,EAAMyoD,0BAAqBxzD,GACvBmS,EAAW0zC,GAKX,cAJOqY,EAAgBrY,EAAMnlD,IAE7BqK,EAAMorD,kBAAkB9J,QACxBthD,EAAM8kD,4BAA4B,IAItC9kD,EAAM8kD,4BAA4B,IAC9BhU,IAAW/nB,YAAYi5B,iBACvBhiD,EAAMkiD,mBAAmBpH,IAE7BqY,EAAkB,IACFrY,EAAMnlD,IAAMmlD,EAC5B96C,EAAMorD,kBAAkB+H,GAmEU9S,CAASvF,IACzBoF,iBAAkB,SAACziD,GAAD,OAAOuvD,EAAgBlS,EAAOuJ,MAChD71C,UAAWA,EACXwyC,OAAQhhD,EAAMghD,OACd3/C,aAAcA,EACd++C,gBAAiB,SAAC3iD,GAAD,OAAOuvD,EAAgBlS,EAAOwJ,MAC/CviD,gBAAiB/B,EAAM+B,gBACvB+4C,MAAOA,EACPmF,qBAAsBjgD,EAAM+qD,iBAKlD,IAAI/V,EAAc,QACiB//C,IAA/B+K,EAAM8qD,sBACN9qD,EAAM8qD,uBAAyBxK,MAC/BtL,EACIvwC,EAAAtK,EAAA4G,cAACqyD,GAAD,CACEjF,UAAWnuD,EAAM8qD,qBACjB/oD,gBAAiB/B,EAAM+B,gBACvBc,YAAa7C,EAAM6C,eAI7B,IAAInC,EAAY,cACZV,EAAMoH,aACN1G,GAAa,aAGbV,EAAM8qD,uBAAyB8F,MAE/BlwD,GAAa,eAGjB,IAAI8I,EAAQ,CACRqG,MAAO7P,EAAM6P,OAIjB,OADAnP,GAAa,IAAMV,EAAM6C,YAAYlN,GAEjC8O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sCACb+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPvI,QAASwxD,EACTlrD,OAAQA,EACRM,WAvGW,SAACpK,GAChBA,EAAEqK,kBAuGEgH,YAAaA,EACbN,UA5Oa,WACjB,IAAI6kD,GAAc,IAAIp4C,MAAOC,UACzB22C,EAAc3jD,SACdmlD,EAAcxB,EAAc3jD,SA/DhB,KDzBjB,SAAoC7F,EAAK4e,GAC3BA,EAAM6pB,WAAW9tC,UAAUswD,kBAA5C,IACI9M,EAAaiL,GAAcxqC,GAC3B6zB,EAAQ,IAAIgY,KAAmB,GACnChY,EAAMzmC,KAAOmyC,EACbn+C,EAAIpF,SAASgsD,YAAYnU,EAAO0W,KAChCvqC,EAAMhkB,SAAS+gD,aAA6B,CAAClJ,KAG7CzyC,EAAItG,gBAAgBkB,SAChBswD,aAA0BC,aAAenrD,EAAItG,mBC+EzC0xD,CAA2BprD,EAAKrI,EAAM+B,gBAAgBklB,OAE1D4qC,EAAc3jD,QAAUmlD,EACxBhJ,KAsOI57C,YAAaA,EACbpN,aAAcA,EACdX,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAC6qD,GAAD,CAAcj2D,GAAIqK,EAAM6C,YAAYlN,KACpC8O,EAAAtK,EAAA4G,cAACmoD,GAAD,CAAarmD,YAAa7C,EAAM6C,cAChC4B,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,kCACTqyD,GAEF/d,GAEHvwC,EAAAtK,EAAA4G,cAAC2yD,GAAD,CACE7jD,MAAO7P,EAAM6P,MACb84C,iBAAkB3oD,EAAM2oD,iBACxBoC,WAAY/qD,EAAM+qD,WAClBvhD,MAAOA,EACP3G,YAAa7C,EAAM6C,qjCCjW/B,IAsDeJ,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAtDU,SAACzC,GACtB,IAAMsF,EAAMC,sBAAOtQ,GACZ4xD,EAAUH,GAAU,CACvBvkD,gBAAiBnC,EAAMmC,gBACvBykD,gBAAiBthD,IAFduhD,OAIHr9C,EAAQq9C,GAAkB,GANEtjD,EAOQC,oBAAS,GAPjBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAOzBowD,EAPyBlwD,EAAA,GAOXmwD,EAPWnwD,EAAA,GA0BhC,OACIgB,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOlE,IAAKA,EAAK5E,UAAU,sBACrC+D,EAAAtK,EAAA4G,cAAC+gB,GAAA,EAAD,CACEphB,UAAU,gBACVkL,KAAM+nD,EAAe,OAAS,QAC9BxyB,OAAQwyB,EACR5mD,OAAQ,kBAAM6mD,GAAiBD,KAC/BlvD,EAAAtK,EAAA4G,cAAC+gB,GAAA,EAAD,CAAgBpmB,KAAK,KAAK0lC,OAAK,EAACzuB,MAAM,WACpClO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc4B,IAAI,mCAEnCmC,EAAAtK,EAAA4G,cAAC+gB,GAAA,EAAD,KACErd,EAAAtK,EAAA4G,cAAC+gB,GAAA,EAAD,CAAc7gB,QA5BP,WACbjB,EAAM+B,gBAAgBsG,IAAI0hC,QAC1B/pC,EAAM+B,gBAAgB4I,aAAa7S,QAC/B,SAAAoF,GAAC,OAAIA,EAAEmL,IAAI0hC,UAHI,IAAApb,EAAAC,EAAA3xB,GAKL+C,EAAM+B,gBAAgB4I,cALjB,IAKnB,IAAAikB,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAkD,KAAAkyB,EAAAD,EAAApyB,GAAA0xB,EAAAtxB,MAC1BsF,QAD0B,IAC9C,IAAA0sB,EAAAnyB,MAAAoyB,EAAAD,EAAAlyB,KAAAC,MAA4BkyB,EAAAjyB,MACQq5C,mBAC3BnwC,OACG,SAAAd,GAAC,OAAIA,EAAEsvC,eACHtvC,EAAEsvC,cAAcC,YAAYh/C,OAAS,IAC7B8B,QAChB,SAAAoF,GAAC,OAAIA,EAAE63C,cAAc8e,sBAPiB,MAAA39D,GAAAm5B,EAAA5xB,EAAAvH,GAAA,QAAAm5B,EAAA3xB,MAL/B,MAAAxH,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,MA4BmBhC,KAAK,MAArC,gBCDd,IAQe+G,eARS,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAM+B,gBAAgByG,SAC/B,MAAO,CACHsrD,eAAgBzN,GAAc3jD,EAAO1C,GACrC2K,aAAcjI,EAAMM,UAAU2H,aAAahV,KAIX,KAAzB8M,CAxCf,SAA4BzC,GACxB,IAAI+zD,EAAgB,eAOpB,OANI/zD,EAAM8zD,iBACNC,GAAiB,aAMjBtvD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAACizD,GAAD,CACE7xD,gBAAiBnC,EAAMmC,gBACvBJ,gBAAiB/B,EAAM+B,kBACzB/B,EAAM+B,gBAAgB4I,aACjBpE,OAAO,SAAArJ,GAAC,OAAKA,EAAEm0D,UACf97D,IACD,SAACsN,EAAazK,GAAd,OACJqM,EAAAtK,EAAA4G,cAACkzD,GAAD,CAAsB77D,EAAGA,EAAG2J,gBAAiB/B,EAAM+B,gBAAiBc,YAAaA,MAClF7C,EAAM+B,gBAAgB4I,aAChBpE,OAAO,SAAArJ,GAAC,OAAIA,EAAEm0D,UACd97D,IACD,SAACsN,EAAazK,GAAd,OACJqM,EAAAtK,EAAA4G,cAACkzD,GAAD,CAAsB77D,EAAGA,EAAG2J,gBAAiB/B,EAAM+B,gBAAiBc,YAAaA,MAC/E4B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWqzD,GAChBtvD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,0BAAf,YCOZ,IAkBe+B,eAlBS,SAAAC,GACpB,IAAIoT,EAAYpT,EAAMqmB,YAAYjT,UAClC,MAAO,CACH2uC,oBAA8BxvD,IAAd6gB,EAA0BA,EAAUtc,WAAQvE,EAC5DyvD,kBAA4BzvD,IAAd6gB,EAA0BA,EAAU6uC,SAAM1vD,EACxD2vD,aAAcliD,EAAMqmB,YAAY67B,aAChChqB,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SAIN,SAAA/9C,GACxB,MAAO,CACH6hD,4BAA6B,SAACC,GAAD,OAAgB9hD,EAAS6hD,YAA4BC,KAClFC,wBAAyB,SAACxrD,EAAOmrD,GAAR,OAAgB1hD,EAAS+hD,YAAwBxrD,EAAOmrD,KACjFM,2BAA4B,SAACzwC,GAAD,OAAcvR,EAASgiD,YAA2BzwC,OAGvE/R,CA5Cf,SAA4BzC,GACxB,QAA6B/K,IAAzB+K,EAAMykD,eACN,MAAO,GAEV,IAAIj7C,EAAQ,CACT6E,KAAM0yC,YAAY/gD,EAAMykD,eAAgBzkD,EAAM46B,WAAY56B,EAAMghD,QAChEnxC,MAAOkxC,YAAY/gD,EAAM0kD,aAAe1kD,EAAMykD,eAAgBzkD,EAAM46B,WAAY56B,EAAMghD,SAGtFtgD,EAAY,qBAIhB,OAHIV,EAAM4kD,eACNlkD,GAAa,YAGb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWA,EAAW8I,MAAOA,eCmT3B/G,eAXS,SAACC,EAAO1C,GAC5B,IAAI2qD,EAAYjoD,EAAMqmB,YAAY4hC,UAAUhJ,IAAgBhsD,IACxDu+D,EAAqBvJ,EAAYA,EAAUxK,KAAiB,GAChE,MAAO,CACH/4C,WAAYi/C,GAAc3jD,EAAO1C,GACjCm0D,eAAkCl/D,IAAvBi/D,EAAmC,EAAIA,EAAmBl+D,OACrE4kC,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,SAnBP,SAAC/9C,EAAUjD,GAClC,MAAO,CACHixD,gBAAiB,SAAA/lD,GAAC,OAAIjI,EAASiuD,YAA2BhmD,KAC1DkgD,kBAAmB,SAAC1D,GAAD,OAAYzkD,EAC3B+gD,aAA6B0D,KACjC5C,4BAA6B,SAACC,GAAD,OAAgB9hD,EACzC6hD,YAA4BC,KAChCuH,mBAAoB,SAACtd,GAAD,OAAU/rC,EAC1B+lC,YAAyBgG,OAetBvsC,CAlTmB,SAACzC,GAC/B,IAAM8wC,EAAW,WACb,OAAO9wC,EAAM+B,gBAAgBklB,MAAM6pB,YAGjCuW,EAAY,WACd,IAAIsD,EAAY7Z,IAAW/nB,YAAY4hC,UAAUhJ,IAAgBhsD,IACjE,OAAOg1D,GAAYA,EAAUxK,MAAuB,IAGjDsH,EAAez8C,aAAU,CAC5B1F,IAAKtF,EAAM+qD,WACXnwB,WAAY56B,EAAM46B,WAClBomB,OAAQhhD,EAAMghD,OACd0G,OAAQL,IACRtlD,gBAAiB/B,EAAM+B,gBACvBqyD,eAAgB,MANb3M,YASD0C,EAAoB5kD,kBAAO,GAC3BssD,EAAgBtsD,sBAAOtQ,GACvBynC,EAAWn3B,sBAAOtQ,GAClBo/D,EAAmB9uD,sBAAOtQ,GAC1Bq/D,EAAe/uD,sBAAOtQ,GACtBs/D,EAAiBhvD,sBAAOtQ,GACxBmxD,EAAY7gD,sBAAOtQ,GAsBnBmS,EAAa,SAAC0zC,GAChB,YAA4B7lD,IAArBqsD,UAC4BrsD,IAA/BqsD,IAAiBxG,EAAMnlD,KAGzB2rD,EAAiB,WAEnB,OADYxQ,IACC/nB,YAAYu4B,gBAGvBN,EAAS,WACX,OAAOlQ,IAAW/nB,YAAYi4B,QAG5B34C,EAAMrI,EAAM+B,gBAAgBsG,IAE5BmG,EAAY,SAAC/Q,GACf,QAAUxI,IAANwI,EAAiB,CACjB,IAAI+2D,GAAmB,IAAIv5C,MAAOC,eAEJjmB,IAA1B48D,EAAc3jD,SACdsmD,EAAmB3C,EAAc3jD,QAvElB,KLOxB,SAAiC7F,EAAK4e,GACzC,IAAIvkB,EAAQukB,EAAM6pB,WACdlW,EAAal4B,EAAMM,UAAUswD,kBAC7B9M,EAAaiL,GAAcxqC,GAC3BwtC,EAAU,IAAIC,MAAkB,EAAM95B,GAC1C65B,EAAQpgD,KAAOmyC,EAEf,IAAImO,EAAM,GACN3T,EAASt+C,EAAMqmB,YAAYi4B,OAC3BA,EAAS,GACT2T,GAAO,EACA3T,EAAS,KAChB2T,GAAO,GAEXtsD,EAAIpF,SAAS2xD,YAAgBH,EAASE,EAAM/5B,EAAWA,aACvD3T,EAAMhkB,SAAS+gD,aAA6B,CAACyQ,EAAQI,mBKkDzCC,CAAwBzsD,EAAKrI,EAAM+B,gBAAgBklB,OAEvD4qC,EAAc3jD,QAASsmD,EAE3B93B,EAASxuB,aAAUjZ,EACnBo/D,EAAiBnmD,aAAUjZ,EAC3Bk1D,EAAkBj8C,SAAU,EAC5BomD,EAAapmD,aAAUjZ,EACvBs/D,EAAermD,aAAUjZ,GAGvBi1B,EAAa,WACf,OAAOlqB,EAAM+qD,WAAW78C,QAAQgc,YAG9B6qC,EAAwBjxD,sBAAY,SAACrG,GACvC,IAAIgI,EAAIhI,EAAEutB,MAAQd,IAMlB,OALWu7B,YACPhgD,EACAzF,EAAM46B,gBACN3lC,EACA+rD,MAEL,CAAChhD,EAAM46B,aAEJnsB,EAAc3K,sBAAY,SAACrG,GAC7B,GAAIi/B,EAASxuB,SAAWomD,EAAapmD,SAAWi8C,EAAkBj8C,QAAS,CACvE,IAAIzI,EAAIhI,EAAEutB,MAAQd,IACd7V,EAAOoxC,YACPhgD,EACAzF,EAAM46B,gBACN3lC,EACA+rD,KACAgU,EAAe3gD,EAKnB,GAFAA,GADgBA,GADC,GAAKrU,EAAM46B,WAAWA,YAInC05B,EAAapmD,QAAS,CACtB,IAAI+mD,EAAgB7Q,EAChB4Q,EAAeT,EAAermD,QAAS,GAAKlO,EAAM46B,WAAWA,YACjEvyB,EAAIpF,SAASiyD,YAAcZ,EAAapmD,QAAS+mD,SAC9C,GAAIv4B,EAASxuB,QAAS,CACzB,IAAIinD,EACA9gD,GAAQggD,EAAiBnmD,QAAQmG,KAAOggD,EAAiBnmD,QAAQiN,UArHvE,UAuHMirC,EAAUl4C,QAENknD,EAAqB/gD,EAAMqoB,EAASxuB,QAASmmD,EAAiBnmD,UAC9DmnD,EAAwBhhD,EAAMqoB,EAASxuB,QAASmmD,EAAiBnmD,SACjE7F,EAAIitD,mBACA54B,EAASxuB,QAASmmD,EAAiBnmD,QA5HjD,QA4HiEvS,KAAKC,MAAMu5D,KAElEz4B,EAASxuB,aAASjZ,EAClBo/D,EAAiBnmD,aAASjZ,GAG1BsgE,EAAoBlhD,EAAMqoB,EAASxuB,UACnCsnD,EAAuBnhD,EAAMqoB,EAASxuB,QAASmmD,EAAiBnmD,SAChE7F,EAAIitD,mBACA54B,EAASxuB,QAASmmD,EAAiBnmD,QAnIlD,OAmIiEvS,KAAKC,MAAMyY,KAEjEqoB,EAASxuB,aAAUjZ,EACnBo/D,EAAiBnmD,aAASjZ,QAG/B,GAAIk1D,EAAkBj8C,QAAS,CAClC,IAAI4H,EAAYg7B,IAAW/nB,YAAYm9B,cAAcvE,IAAgBhsD,IACrE,QAAkBV,IAAd6gB,EAAyB,CACzBA,EAAU6uC,IAAMtwC,EAChB,IAAI0wC,EAAa,GACjBA,EAAWpD,IAAgBhsD,IAAMmgB,EACjC9V,EAAM8kD,4BAA4BC,OAI/C,IAEGwQ,EAAsB,SAACE,EAAc3a,GACvC,IAAIwX,EAAgBjqD,EAAIkqD,iBAAiBzX,GACrC0X,EAAWnqD,EAAI8pD,aAAarX,GAEhC,YAAsB7lD,IAAlBq9D,GAA+BmD,EAAenD,EAAcj+C,aAC3Cpf,IAAbu9D,GAA0BiD,EAAejD,EAASn+C,OAOxDmhD,EAAyB,SAACC,EAAc3a,EAAO4a,GACjD,IAAIpD,EAAgBxX,EAAM6a,oBAAoBD,GAC1ClD,EAAW1X,EAAM8a,gBAAgBF,GAErC,YAAsBzgE,IAAlBq9D,GAA+BmD,EAAenD,EAAcj+C,aAC3Cpf,IAAbu9D,GAA0BiD,EAAejD,EAASn+C,OAOxD+gD,EAAuB,SAACK,EAAc3a,EAAO4a,GAC/C,IAAIxD,EAAY7pD,EAAI8pD,aAAarX,GAGjC,GAFoBzyC,EAAIkqD,iBAAiBzX,GAErCoX,EAAW,CACX,IAAIE,EAAgB/pD,EAAI8pD,aAAaD,GACrC,QAAsBj9D,IAAlBm9D,GACAqD,EAAerD,EAAc/9C,KAC7B,OAAO,EAGf,OAAO,GAGLghD,EAA0B,SAACI,EAAc3a,EAAO4a,GAClD,GAAID,EAAeC,EAASrhD,KACxB,OAAO,EAEX,IAAI69C,EAAYpX,EAAM8a,gBAAgBF,GAGtC,GAFoB5a,EAAM6a,oBAAoBD,QAE5BzgE,IAAdi9D,EACA,OAAO,EAGX,IAAIE,EAAgBtX,EAAM8a,gBAAgB1D,GAC1C,YAAsBj9D,IAAlBm9D,GACAqD,EAAerD,EAAc/9C,MAM/BvF,EAAc,SAACgsC,EAAO4a,EAAU1D,GAClCt1B,EAASxuB,QAAU4sC,EACnBuZ,EAAiBnmD,QAAUwnD,EAC3BtP,EAAUl4C,QAAU8jD,GAuBpBkC,GAFQpjB,IAEauW,KACrB6L,EAAe,QACOj+D,IAAtBwyD,EAAYjuD,QACZ05D,EACIgB,EAAmBtsD,MAAM6/C,EAAYjuD,MAAOiuD,EAAY9C,IAAM,IAGtE,IAAIjkD,EAAY,wBACZV,EAAMoH,aACN1G,GAAa,aAGjB,IAAI8I,EAAQ,CACRqG,MAAO7P,EAAM6P,OAGjB,OACIpL,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPvI,QAtCY,WACdjB,EAAMixD,gBAAgB,CAACtP,IAAgBhsD,KACvCqK,EAAMssD,wBAAmBr3D,IAqCvBwZ,YAAaA,EACbK,YAlCuB,SAACrR,GAC1B,IAAI4W,EAAO0gD,EAAsBt3D,GACjC0sD,EAAkBj8C,SAAS,EAC3B,IAAIg4C,EAAgB,GACpBA,EAAcvE,IAAgBhsD,IAAM,CAChC6D,MAAO6a,EACPswC,IAAKtwC,GAETrU,EAAM8kD,4BAA4BoB,IA2BhC13C,UAAW,SAAC/Q,GAAD,OAAO+Q,OAAUvZ,IAC5BoM,aAAcmN,EACd9N,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAC6qD,GAAD,CAAcj2D,GAAIgsD,IAAgBhsD,KAClC8O,EAAAtK,EAAA4G,cAACmoD,GAAD,CAAarmD,YAAa8+C,MAC1Bl9C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB8I,MAAO,CAACqG,MAAO43C,EAAYM,YAC1DmL,EACC3sD,OAAO,SAAA9I,GAAC,YAAUxI,IAANwI,IACZlI,IACG,SAACulD,EAAO1iD,GAAR,IAAAy9D,EAAA,OACIpxD,EAAAtK,EAAA4G,cAAC+0D,GAADD,EAAA,CACE70D,IAAK85C,EAAMnlD,GACXiR,KAAMu5C,IACN4B,WAAY/hD,EAAM+hD,WAClBnnB,WAAY56B,EAAM46B,WAClBqmB,OAAQ7oD,IAAM87D,EAAmBl+D,OAAS,EAC1C4rD,QAAe,IAANxpD,EACTkP,YAAa,SAAC7J,KACd4iD,SAAU,SAACvF,EAAO4a,EAAUj4D,GAAlB,OA5OV,SAACq9C,EAAO4a,EAAUj4D,GAC/B,GAAI2J,EAAWsuD,GACX11D,EAAMorD,uBAAkBn2D,OACrB,CACH+K,EAAM8kD,4BAA4B,IAClC,IAAIxD,EAAiB,GACrBA,EAAeoU,EAAS//D,IAAM+/D,EAC9B11D,EAAMorD,kBAAkB9J,GAE5BiT,EAAermD,QAAU6mD,EAAsBt3D,GAAKq9C,EAAMzmC,KAC1DigD,EAAapmD,QAAS4sC,EAkOyBuF,CAASvF,EAAO4a,EAAUj4D,IAC5D+Q,UAAW,SAAC/Q,GAAD,OAAO+Q,EAAUssC,IAC5B+G,eAAgB,SAAC/G,EAAO4a,GAAR,OAAqBlnD,EAAUssC,IAC/CoF,iBAAkB,SAACpF,EAAO4a,GAAR,OAAqB5mD,EAAYgsC,EAAO4a,EArRjE,UAsRO5T,cAAe,SAAChH,EAAO4a,GAAR,OAAqBlnD,EAAUssC,IAC9CsF,gBAAiB,SAACtF,EAAO4a,GAAR,OAAqB5mD,EAAYgsC,EAAO4a,EArRjE,UAwQMrhE,OAAA0hE,GAAA,EAAA1hE,CAAAwhE,EAAA,aAcc71D,EAAM+hD,YAdpB1tD,OAAA0hE,GAAA,EAAA1hE,CAAAwhE,EAAA,kBAemB71D,EAAM+B,iBAfzB1N,OAAA0hE,GAAA,EAAA1hE,CAAAwhE,EAAA,QAgBS/a,GAhBT+a,SC5QbG,GAAuBtW,eAAK,SAAA1lD,GAa5B,IAZFioD,EAYEjoD,EAZFioD,WACAnzC,EAWE9U,EAXF8U,YACAN,EAUExU,EAVFwU,UACAC,EASEzU,EATFyU,YACA1M,EAQE/H,EARF+H,gBACA64B,EAOE5gC,EAPF4gC,WACAqlB,EAMEjmD,EANFimD,qBACA8B,EAKE/nD,EALF+nD,WACAwF,EAIEvtD,EAJFutD,YACAvG,EAGEhnD,EAHFgnD,OACAiG,EAEEjtD,EAFFitD,qBACA0B,EACE3uD,EADF2uD,iBAEIrjD,EAAMC,sBAAOtQ,GACbsxD,EAAShhD,iBAAO,GAChB0wD,EAAa1wD,iBAAO,GACpBiE,EAAQ,CACRoG,OAAQs3C,GAAUnlD,EAAiBkgD,IAGnCpyC,EAAQkxC,YAAY,GAAGwG,EAAa3sB,EAAYomB,GAEpD38C,oBAAU,WAGN,OAFAiB,EAAI4I,QAAQL,iBAAiB,aAAc4J,EAAc,CAAC4qB,SAAS,IAE5D,kBAAM/8B,EAAI4I,QAAU5I,EAAI4I,QAAQJ,oBAAoB,aAAc2J,GAAgB,IAC1F,CAACupC,EAAQpmB,EAAY2sB,IAExB,IAAM9vC,EAAe3T,sBAAY,SAACrG,GAC9B,GAAIA,EAAEqa,QAAS,CACXra,EAAEqK,iBACFrK,EAAE+J,kBAEF,IAAIyhD,EAAUjI,EAAoB,IAAXvjD,EAAEka,OACzB,GAAIopC,YAAY,GAAGwG,EAAa3sB,EAAYquB,GAAWr7C,OAAO40B,WAAa,IAEvE,OAGJwkB,GAAQ,CACJvhD,EAAG8gD,EAAOr4C,QACV+4C,uBACAhH,qBAAsB36C,EACtBkhD,WAAYyP,EAAW/nD,QACvB0sB,aACAomB,OAAQiI,QAET,CACH,IAAIp5C,EAAQkxC,YAAY,EAAGnmB,EAAYomB,GACnCkV,GAAez4D,EAAE2Q,QApDJ,IAoDqC9I,EAAI4I,QAAQgc,YAAcra,EAChF02C,EAAOr4C,QAAUzQ,EAAE2Q,QACnB6nD,EAAW/nD,QAAUgoD,IAE1B,CAAClV,EAAQpmB,EAAY2sB,IAExB,OACI9iD,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLkE,MAAOA,EACP9I,UAAU,wBACVoO,YAAa,SAACrR,GAAD,OAAOqR,EAAYrR,IAChC4D,aAAc,kBAAMmN,KACpBC,YAAa,SAAChR,GACV,IAAIoS,EAAQkxC,YAAY,EAAGnmB,EAAYomB,GACnCkV,GAAez4D,EAAE2Q,QAnEN,IAmEuC9I,EAAI4I,QAAQgc,YAAcra,EAChF02C,EAAOr4C,QAAUzQ,EAAE2Q,QACnB6nD,EAAW/nD,QAAUgoD,EACrBznD,EAAYhR,IAEhB+Q,UAAW,SAAC/Q,GAAD,OAAO+Q,EAAU/Q,KAE5BgH,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,oBACV+D,EAAAtK,EAAA4G,cAACo1D,GAAD,CAAoBp0D,gBAAiBA,IACvC0C,EAAAtK,EAAA4G,cAACq1D,GAAD,CACExmD,OAAQpG,EAAMoG,OACdqwC,qBAAsB36C,EACtBqjD,iBAAkBA,EAClB5mD,gBAAiBA,EACjB0iD,oBAAgBxvD,EAChByvD,kBAAczvD,EACd2lC,WAAYA,GAEZn2B,EAAAtK,EAAA4G,cAACs1D,GAAD,CACEpW,qBAAsBA,EACtBl+C,gBAAiBA,KAGnB0C,EAAAtK,EAAA4G,cAACu1D,GAAD,CACErW,qBAAsBA,EACtBl+C,gBAAiBA,IAErB0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,0BACZqB,EAAgB4I,aACZpE,OAAO,SAAArJ,GAAC,OAAKA,EAAEm0D,UACf97D,IACD,SAACsT,EAAKzQ,GAAN,OACIqM,EAAAtK,EAAA4G,cAACw1D,GAAD,CACEv1D,IAAK,mBAAqB6H,EAAIlT,GAAK,IAAMyC,EACzCA,EAAGA,EACH2yD,WAAYzlD,EACZuK,MAAOA,EACP9N,gBAAiBA,EACjB4mD,iBAAkBA,EAClBn6C,UAAW,SAAA/Q,GAAC,OAAI+Q,EAAU/Q,IAC1BoF,YAAagG,MACtB9G,EAAgB4I,aACZpE,OAAO,SAAArJ,GAAC,OAAIA,EAAEm0D,UACd97D,IACD,SAACsT,EAAKzQ,GAAN,OACIqM,EAAAtK,EAAA4G,cAACw1D,GAAD,CACEv1D,IAAK,mBAAqB6H,EAAIlT,GAC9Bo1D,WAAYzlD,EACZuK,MAAOA,EACP84C,iBAAkBA,EAClB5mD,gBAAiBA,EACjByM,UAAW,SAAA/Q,GAAC,OAAI+Q,EAAU/Q,IAC1BoF,YAAagG,OAEvBpE,EAAAtK,EAAA4G,cAACy1D,GAAD,CACE3mD,MAAOA,EACPkyC,WAAYA,EACZgJ,WAAYzlD,EACZzC,YAAa8+C,IACb5/C,gBAAiBA,IAErB0C,EAAAtK,EAAA4G,cAACq1D,GAAD,CACEr0D,gBAAiBA,EACjBkmD,gBAAgB,EAChBU,iBAAkBA,EAClB1I,qBAAsB36C,EACtBqhD,UAAU,EACVlC,oBAAgBxvD,EAChByvD,kBAAczvD,EACd2lC,WAAYA,IAEbn2B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBAuBX+B,eAjBS,SAACC,EAAO1C,GAC5B,MAAO,CACHiiD,WAAYv/C,EAAMqmB,YAAYk5B,WAC9BsF,YAAa7kD,EAAMqmB,YAAYw+B,YAC/BvG,OAAQt+C,EAAMqmB,YAAYi4B,OAC1B1kB,UAAWt8B,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAO3M,SAIrD,SAACiN,EAAUjD,GAClC,MAAO,CACHinD,qBAAsB,SAACjG,GAAD,OAAY/9C,EAC9BgkD,YAAqBjG,OAKlBv+C,CAA6CuzD,wdCjI5D,IAIMS,4CACF,SAAAA,EAAYz2D,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAkiE,IACf5hE,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACTu9C,0BAAsBhrD,GAG1B2Y,OAAOwN,WAAa,IACpBvmB,EAAK6hE,UAAY,GAEjB7hE,EAAK2R,UAAY3R,EAAK2R,UAAUge,KAAfnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IACjBA,EAAK8hE,+BAA4B1hE,EAEjCJ,EAAK+hE,SAAW,GAGhB/hE,EAAKyQ,IAAMuU,IAAMiO,eAAU7yB,GAhBZJ,uDAmBnB,WACI+Y,OAAOC,iBAAiB,UAAWtZ,KAAKiS,WACxCjS,KAAKyL,MAAM+B,gBAAgB64B,WAAaiqB,IAExCtwD,KAAKsiE,mDAGT,WAEItiE,KAAKyL,MAAM+B,gBAAgB4I,aAAapE,OACpC,SAAArJ,GAAC,OAAIA,EAAEm0D,UACNv5D,QAAQ,SAAAoF,GAAC,OAAIA,EAAEyF,OAAO,GAAG6vC,oDAGlC,WACIj+C,KAAKyL,MAAM+B,gBAAgB64B,WAAaiqB,IACxCj3C,OAAOE,oBAAoB,UAAWvZ,KAAKiS,6CAG/C,WACI,OAAIjS,KAAKoiE,0BACEpiE,KAAKoiE,2BAEhBpiE,KAAKoiE,0BAA4B7sC,SAC5BqjB,uBAAuB,yBAAyB,GAErD54C,KAAKmpB,SAAS,CACVuiC,qBAAsB1rD,KAAKoiE,4BAGxBpiE,KAAKoiE,oDAIhB,SAAU7b,EAAO/4C,GACbyE,EAAUs0C,EAAOvmD,KAAKyL,MAAM+B,iBAEV,MAAd+4C,EAAM95C,MAAgB85C,EAAMroC,SAAWqoC,EAAMhjC,UAC7CvjB,KAAKuiE,OAES,MAAdhc,EAAM95C,MAAgB85C,EAAMroC,SAAWqoC,EAAMhjC,UAC7CvjB,KAAKwiE,QAES,MAAdjc,EAAM95C,MAAgB85C,EAAMroC,SAAWqoC,EAAMhjC,WAC7CgjC,EAAMtzC,kBACNjT,KAAKyiE,aAES,MAAdlc,EAAM95C,MAAgB85C,EAAMhjC,SAAWgjC,EAAMroC,WAC7CqoC,EAAMhzC,iBACNgzC,EAAMtzC,kBACNjT,KAAK0iE,+CAMb,SAAgBnc,EAAO4a,GACnBnhE,KAAKmoC,SAAWoe,EAChBvmD,KAAK8/D,iBAAmBvZ,EACxBvmD,KAAK6xD,UAjFA,uCAsFT,SAAiBtL,EAAO4a,GACpBnhE,KAAKmoC,SAAWoe,EAChBvmD,KAAK8/D,iBAAmBvZ,EACxBvmD,KAAK6xD,UA1FC,oCA6FV,WACI7xD,KAAKyL,MAAMyoD,0BAAqBxzD,GAChCV,KAAKyL,MAAM0oD,8BAAyBzzD,GACpCV,KAAKmoC,cAAWznC,sBAGpB,WACI,OAAOV,KAAKu8C,WAAWkQ,kCAG3B,SAAYlG,GACR,IAAIyL,OAAmBtxD,IAAV6lD,GAAuBvmD,KAAKmoC,cACrCznC,EACA6lD,EAAM9vB,MAAQz2B,KAAK0rD,qBAAqB/1B,WAC5C31B,KAAKyL,MAAMk3D,cAAcpc,EAAM9vB,OAC/B,IAEIiqC,EAAgB7Q,EAFTqB,YAAoBc,EAAQhyD,KAAKyL,MAAM46B,gBAAY3lC,EAAWV,KAAKyL,MAAMghD,QACjE,GAAKzsD,KAAKyL,MAAM46B,WAAa,GACK,QAE/B3lC,IAAlBggE,IACA1gE,KAAKyL,MAAM0oD,yBAAyBuM,GACpC1gE,KAAKyL,MAAMyoD,qBAAqBlC,6BAMxC,SAAUzL,GACFvmD,KAAK4iE,WACL5iE,KAAK6iE,yBAGT,IAAI7Q,OAAmBtxD,IAAV6lD,GAAuBvmD,KAAKmoC,cACrCznC,EACA6lD,EAAM9vB,MAAQz2B,KAAK0rD,qBAAqB/1B,WAKxC+qC,EAAgB7Q,EAFTqB,YAAoBc,EAAQhyD,KAAKyL,MAAM46B,gBAAY3lC,EAAWV,KAAKyL,MAAMghD,QACjE,GAAKzsD,KAAKyL,MAAM46B,WAAa,GACK,GAIrD,QAAe3lC,KAHfsxD,EAASuG,IACL/L,YAAYkU,EAAe1gE,KAAKyL,MAAM46B,WAAYrmC,KAAKysD,UAE/BiU,IAAkB1gE,KAAKiyD,YAC3C1L,EAAM7vB,MAAQ,IAAM6vB,EAAM7vB,MAAQ,GAAI,CAEjC12B,KAAKyL,MAAM+B,gBAAgB8S,QAMhC,IAAID,EAAYrgB,KAAK8iE,6BAA6B9Q,GAClDhyD,KAAKyL,MAAM+B,gBAAgB0kD,gBAAgB7xC,GAInDrgB,KAAKmoC,cAAWznC,EAChBV,KAAK8/D,sBAAmBp/D,EACxBV,KAAK4iE,WAAY,EAEjB5iE,KAAKyL,MAAMwsD,mCAA8Bv3D,+CAG7C,SAA6BwQ,GACzB,IAAI4O,EAAOoxC,YAAoBhgD,EAAGlR,KAAKyL,MAAM46B,WAAYrmC,KAAKyL,MAAMghD,QAIpE,OADA3sC,GADgBA,GADC,GAAK9f,KAAKyL,MAAM46B,WAAWA,uCAMhD,SAAYn9B,GACR,GAAIlJ,KAAKmoC,SAAU,CACPj/B,EAAEutB,MAAQz2B,KAAK0rD,qBAAqB/1B,WAA5C,IACI7V,EAAOoxC,YAAoBhoD,EAAEutB,MAAQz2B,KAAK0rD,qBAAqB/1B,WAAY31B,KAAKyL,MAAM46B,YAG1FvmB,GADgBA,GADC,GAAK9f,KAAKyL,MAAM46B,WAAWA,YAG5C,IAAIu6B,EAAa5gE,KAAK8/D,iBAClBhgD,GAAQ9f,KAAK8/D,iBAAiBhgD,KAAO9f,KAAK8/D,iBAAiBl5C,UAC3D9G,GAAQ9f,KAAKmoC,SAASroB,KAAO9f,KAAKmoC,SAASvhB,UAE3C5mB,KAAKmoC,SAAS46B,YAAchX,IAhL9B,UAiLM/rD,KAAK6xD,UACL7xD,KAAKwtD,WAAWwV,YACZhjE,KAAKmoC,SAAU/gC,KAAKC,MAAMu5D,KAE9B5gE,KAAKmoC,SAASroB,KAAO1Y,KAAKC,MAAMyY,GAChC9f,KAAKwtD,WAAWsQ,sBAEb99D,KAAKmoC,SAAS46B,YAAcnX,MAxLrC,UAyLM5rD,KAAK6xD,UACL7xD,KAAKwtD,WAAWuT,mBACZ/gE,KAAKmoC,SAAUnoC,KAAK8/D,iBA3L9B,QA2LuD14D,KAAKC,MAAMu5D,IAE5D5gE,KAAKwtD,WAAWuT,mBACZ/gE,KAAKmoC,SAAUnoC,KAAK8/D,iBA7L/B,OA6LuD14D,KAAKC,MAAMyY,wCAM3E,WACI9f,KAAKwtD,WAAWsQ,6CAGpB,WACI,OAAO99D,KAAKyL,MAAM+B,gBAAgBklB,MAAM6pB,WAAW/nB,6CAGvD,WACI,YAAqC9zB,IAA9BV,KAAKu8C,WAAWh7B,eACnB7gB,EACAV,KAAKu8C,WAAWh7B,UAAUtc,qCAGlC,WACI,YAAqCvE,IAA9BV,KAAKu8C,WAAWh7B,eACnB7gB,EACAV,KAAKu8C,WAAWh7B,UAAU6uC,4BAGlC,WACI,OAAOpwD,KAAKu8C,WAAW0V,iDAG3B,WACI,IAAIgR,EAAWjjE,KAAKkjE,oBAChBC,EAASnjE,KAAKojE,kBAEdjQ,EAAS,GACb,IAAK,IAAItvD,KAAK7D,KAAKyL,MAAM4qD,oBAAqB,CAC1C,IAAI9P,EAAQvmD,KAAKyL,MAAM4qD,oBAAoBxyD,GACvC0iD,EAAMzmC,MAAQmjD,GACd1c,EAAMzmC,KAAOymC,EAAM3/B,UAAYu8C,GAC/BhQ,EAAO3xD,KAAK+kD,mCAWxB,SAAgBA,EAAO4a,GAQnB,OAAO,sBAGX,WACInhE,KAAKqiE,SAAWE,YAAKviE,KAAKu8C,qCAG9B,WACIkmB,YAAUziE,KAAKyL,MAAM+B,sCAGzB,WACIg1D,YAAMxiE,KAAKyL,MAAM+B,gBAAiBxN,KAAKqiE,sCAG3C,WACI,IAAIviD,EAAO9f,KAAKiyD,WAChB,IAAK,IAAIpuD,KAAK7D,KAAKioC,aAAc,CAC7B,IAAI7mC,EAAKpB,KAAKioC,aAAapkC,GACvByK,EAActO,KAAKyL,MAAM+B,gBAAgBolD,eAAexxD,GAC5D,GAAKkN,EAAYwuD,QAAjB,CAGA,IACI5wC,EADQ5d,EAAYF,OAAO,GACX0/C,SAAS5jD,KACzB,SAAAyM,GAAC,OAAIA,EAAE0sD,aAAavjD,KACxB,QAAgBpf,IAAZwrB,EAGA,OAFAxd,iBAAShO,EAAW4iE,YAAsBp3C,EAAQtY,MAAOsY,EAASpM,SAClE9f,KAAK8M,uCAMjB,SAAO6iD,GACH,OAAIA,IAAkBvC,IAAgBhsD,GAC3BpB,KAAKyL,MAAM+B,gBAAgBsG,IAE/B9T,KAAKyL,MAAM+B,gBACbolD,eAAejD,GACf77C,qCAGT,WACI,OAAO9T,KAAKu8C,WAAWwQ,+CAG3B,WACI,OAAO/sD,KAAKu8C,WAAWoV,wCAG3B,WACI,OAAO3xD,KAAKu8C,WAAWtU,qCAG3B,WACI,OAAOjoC,KAAKyL,MAAM+B,gBAAgBsG,qBAGtC,WACI,OAAO9T,KAAKyL,MAAM+B,gBAAgBggD,WAAW15C,gCAGjD,WACI,OAAO,qCAGX,SAAkB5K,mCAGlB,WACIlJ,KAAKyL,MAAMy8B,8BAA6B,GACxCloC,KAAKyL,MAAM0sD,mCAA8Bz3D,yBAG7C,WAAS,IAAA6B,EAAAvC,KACDiV,EAAQ,GAKZ,OAHIjV,KAAKyL,MAAMgqC,aACXxgC,EAAMoG,OAAShC,OAAO60B,YAAcluC,KAAKyL,MAAMu8B,aAAe,IAG9D93B,EAAAtK,EAAA4G,cAAA,OACEyN,UAAW,SAAC/Q,GAAD,OAAO3G,EAAKghE,mBACvBrpD,YAAa,SAAChR,GAAD,OAAO3G,EAAKihE,kBAAkBt6D,IAC3CiD,UAAU,oBACV+D,EAAAtK,EAAA4G,cAACi3D,EAAD,CAAqBj2D,gBAAiBxN,KAAKyL,MAAM+B,kBACjD0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAK/Q,KAAK+Q,IACVkE,MAAOA,EACP9I,UAAU,8BACZ+D,EAAAtK,EAAA4G,cAACk3D,GAAD,CACE91D,gBAAiB5N,KAAK+Q,IACtB+sD,mBAAoB,kBAAMv7D,EAAKu7D,sBAC/BxvD,YAAa8+C,IACb5/C,gBAAiBxN,KAAKyL,MAAM+B,kBAE9B0C,EAAAtK,EAAA4G,cAACm3D,GAAD,CACEvP,iBAAkBp0D,KAAK+Q,IACvBwJ,YAAa,SAACrR,GAAD,OAAO3G,EAAKgY,YAAYrR,IACrC4D,aAAc,kBAAMvK,EAAKuK,gBACzBoN,YAAa,SAAChR,GAAD,OAAO3G,EAAK2X,YAAYhR,IACrCskD,WAAYxtD,KAAKwtD,WACjB9B,qBAAsB1rD,KAAKmO,MAAMu9C,qBACjCrlB,WAAYrmC,KAAKyL,MAAM46B,WACvBtzB,YAAa,SAAC7J,EAAGq9C,GAAJ,OAAchkD,EAAKg7D,mBAAmBr0D,EAAGq9C,IACtDuF,SAAU,SAACvF,EAAO4a,GAAR,MAAqB,IAC/BlnD,UAAW,SAACssC,EAAO4a,GAAR,OAAqB5+D,EAAK0X,UAAUssC,EAAO4a,IACtDxV,iBAAkB,SAACpF,EAAO4a,GAAR,OAAqB5+D,EAAKopD,iBAAiBpF,EAAO4a,IACpEtV,gBAAiB,SAACtF,EAAO4a,GAAR,OAAqB5+D,EAAKspD,gBAAgBtF,EAAO4a,IAClE3zD,gBAAiBxN,KAAKyL,MAAM+B,oBAI/B0C,EAAAtK,EAAA4G,cAACo3D,EAAD,CAAmBp2D,gBAAiBxN,KAAKyL,MAAM+B,0BAxWhCS,aAuZfC,gBAbS,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAM+B,gBAAgByG,SAC3BK,EAAM7I,EAAM+B,gBAAgBwG,mBAChC,MAAO,CACHqyB,WAAYiqB,IACZ7D,OAAQt+C,EAAMqmB,YAAYi4B,OAC1Br2C,aAAcjI,EAAMM,UAAU2H,aAAahV,IAAO,GAClD4mC,aAAc75B,EAAMqmB,YAAYwT,aAChCyN,WAAatnC,EAAMqmB,YAAYi5B,iBAAmBt/C,EAAMqmB,YAAYk5B,WAAWp5C,EAAIlT,KAC5E+M,EAAMqmB,YAAYD,aAAejE,MA7BrB,SAAA5hB,GACvB,MAAO,CACHm1D,QAAS,kBAAMn1D,EAASo1D,cAAgB,KACxC5P,qBAAsB,SAAClC,GAAD,OAAYtjD,EAASwlD,YAAqBlC,KAChE2Q,cAAe,SAAC3Q,GAAD,OAAYtjD,EAASq1D,YAAyB/R,KAC7D0K,gBAAiB,SAAA/lD,GAAC,OAAIjI,EAASiuD,YAA2BhmD,KAC1DimD,+BAAgC,kBAAMluD,EAAS+gD,kBAA6B/uD,KAC5EwnC,6BAA8B,SAACC,GAAD,OAC1Bz5B,EAASw5B,YAA6BC,KAC1CwT,2BAA4B,SAACtgC,GAAD,OACxB3M,EAASitC,YAA2BtgC,KACxC84C,yBAA0B,SAACjjD,GAAD,OAAOxC,EAC7BylD,YAAyBjjD,KAC7B+mD,8BAA+B,SAAC/mD,GAAD,OAAOxC,EAClCupD,YAA8B/mD,KAClCinD,8BAA+B,SAACjnD,GAAD,OAAOxC,EAClCypD,YAA8BjnD,OAiB3BhD,CAA6Cg0D,8HC1ctD9kD,EAAS,IAAI1J,IA6CJxF,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHu4D,oBAAqB71D,EAAM8Z,QAAQ+7C,sBAId,SAACt1D,GAC1B,MAAO,CACH20B,kBAAmB,SAAAnyB,GAAC,OAAIxC,EAAS20B,aAAkBnyB,OAI1ChD,CA3Ca,SAAAzI,GAA8C,IAA5Cu+D,EAA4Cv+D,EAA5Cu+D,oBAAqB3gC,EAAuB59B,EAAvB49B,kBAC3CC,EAAYtyB,iBAAO,IAAIy0B,IAAUw+B,IAAKC,OAAOzmD,UADqBzO,EAExCC,wBAASvO,GAF+BwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEjEiR,EAFiE/Q,EAAA,GAEvDsR,EAFuDtR,EAAA,GAIhE20B,EAAYt0B,sBAAY,SAACgY,GAC3B+b,EAAU3pB,QAAQqtB,UAAUzf,EAAOwf,aACnCzD,EAAU3pB,QAAQkqB,UAAU,GAC5BrjB,EAAYwjD,EAAoBlgE,QAAQyjB,KACzC,CAACy8C,EAAqBxjD,IAEzB,OAAmC,IAA/BwjD,EAAoBviE,OACb,GAGPyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACd63D,EAAoBhjE,IACjB,SAACumB,EAAQ1jB,GAAT,OACAqM,EAAAtK,EAAA4G,cAAA,OACEgH,WAAW,EACXF,WAAY,SAAApK,GAAC,OAAIA,EAAEqK,kBACnBR,YAAa,kBAAMswB,EAAkB9b,IACrC7a,QAAS,SAACwE,GAAD,OAAO2yB,EAAUtc,IAC1Bpb,UAAWtI,IAAMoc,EAAW,wBAA0B,gBACtD/P,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACkJ,gBAAiBf,EAAOmB,gBAAgBgJ,EAAO6X,WACvDjzB,UAAU,iBACZ+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAeob,EAAOlmB,8CCoCpC6M,cAZS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHy1D,iBAAkB,SAAAjzD,GAAC,OAAIxC,EAASy1D,aAAiBjzD,KACjD8jC,eAAgB,SAAAJ,GAAC,OAAIlmC,EAASsmC,aAAeJ,OAIpC1mC,CA/DM,SAAAzI,GAKf,IAJFuvC,EAIEvvC,EAJFuvC,eACAxnC,EAGE/H,EAHF+H,gBACA42D,EAEE3+D,EAFF2+D,OACAD,EACE1+D,EADF0+D,iBACEn1D,EACkCC,mBAAS,IAD3CC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACGq1D,EADHn1D,EAAA,GACgBo1D,EADhBp1D,EAAA,GAAAuG,EAE8BxG,wBAASvO,GAFvCgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEG+R,EAFH9R,EAAA,GAEc6uD,EAFd7uD,EAAA,GAAAG,EAG0B5G,mBAAS,IAHnC6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGG2uD,EAHH1uD,EAAA,GAGY2uD,EAHZ3uD,EAAA,GAKFhG,oBAAU,WACNzE,IAAK2K,QAAQouD,EAAOM,SAAS,GAAGC,mBAAmB/jE,KAC/C,SAAAkH,GACIw8D,EAAex8D,EAAKu8D,aACpBE,EAAaz8D,EAAK88D,SAG1Bj+D,IAAS63B,MAAMC,YAAY2lC,EAAOI,SAAS5jE,KAAK6jE,IACjD,CAACA,EAAYL,EAAQE,EAAgBC,IAExC,IAAMM,EAAat1D,sBAAY,WAC3BlE,IAAK2K,QAAQouD,EAAOM,SAAS,GAAGI,mBAAmBlkE,KAC/C,SAAAkH,GACI,IAAIqwB,EAAI3qB,EAAgBwG,mBAAmB+wD,cAAc,EAAE,EAAE,YAC7D5sC,EAAE5F,OACF4F,EAAE6sC,eAAel9D,GAAM,GAAO,GAAM,GACpCqwB,EAAEisC,OAASA,EAEX,IAAIa,EAAgBz3D,EAAgBW,MAAM+2D,QAAQD,eAAiB,GACnEd,EAAgB,GAAAjyD,OAAApS,OAAA2R,EAAA,EAAA3R,CAAMmlE,GAAN,CAAqB9sC,KACrC6c,GAAe,MAExB,CAACovB,IACJ,OACIl0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZqb,GAAatX,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAKyZ,IACxBtX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAai4D,EAAO/iE,MACnC6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgBq4D,KAGnCt0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBAAsBk4D,GACrCn0D,EAAAtK,EAAA4G,cAAA,OACEE,QAASm4D,EACT14D,UAAU,wBAFZ,kBCvBK+B,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAvBK,SAAAzI,GAAuB,IAArB+H,EAAqB/H,EAArB+H,gBAAqBwB,EACXC,mBAAS,IADEC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAClCk2D,EADkCh2D,EAAA,GACzBi2D,EADyBj2D,EAAA,GAOvC,OALAY,oBAAU,WACNs1D,cAAaxkE,KAAKukE,IACnB,CAACA,IAEJljE,QAAQC,IAAI,WAAYgjE,GAEpBh1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZ+4D,EAAQlkE,IAAI,SAAAojE,GAAM,OAAIl0D,EAAAtK,EAAA4G,cAAC64D,EAAD,CAAcjB,OAAQA,EAAQ52D,gBAAiBA,SCqBjEU,uBAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHsmC,eAAgB,SAAAJ,GAAC,OAAIlmC,EAASsmC,aAAeJ,OAIpC1mC,CA3BO,SAAAzI,GAAuC,IAArC+H,EAAqC/H,EAArC+H,gBAAiBwnC,EAAoBvvC,EAApBuvC,eACrC,OACI9kC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMsoC,GAAe,IAC9B7oC,UAAU,iCACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAEjB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe4B,IAAI,qBAClCmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAf,YAEF+D,EAAAtK,EAAA4G,cAAC84D,EAAD,CAAa93D,gBAAiBA,oCCsGlCm3C,EAAQ,SAAC77C,GACX,OAAO1B,KAAKu9C,MAAY,IAAN77C,GAAW,KAoBlBoF,cAjBS,SAACC,EAAO1C,GAC5B,IAAI85D,EAAa95D,EAAMmI,MAAMpG,gBAAgB+3D,YAC7C,MAAO,CACHA,cACAC,mBAAoB/5D,EAAMmI,MAAM4xD,mBAChCnlD,UAAWklD,EAAc95D,EAAMmI,MAAMpG,gBAAgB6S,UAAY,IAI9C,SAAC3R,GAC1B,MAAO,CACDuf,sBAAuB,SAAAnP,GAAM,OAAIpQ,EAASuf,aAAsBnP,KAElE2mD,yBAA0B,SAAA3mD,GAAM,OAAIpQ,EAAS+2D,aAAyB3mD,OAI7D5Q,CAxII,SAAAzI,GAUb,IATFggE,EASEhgE,EATFggE,yBACAD,EAQE//D,EARF+/D,mBACAD,EAOE9/D,EAPF8/D,YACAllD,EAME5a,EANF4a,UACAzM,EAKEnO,EALFmO,MACAT,EAIE1N,EAJF0N,WAIEuyD,EAAAjgE,EAHFkgE,eAGE,IAAAD,KAFFz3C,EAEExoB,EAFFwoB,sBACApb,EACEpN,EADFoN,WAEI9B,EAAMC,sBAAOtQ,GADfsO,EAEsBC,oBAAS,GAF/BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEG42D,EAFH12D,EAAA,GAEU22D,EAFV32D,EAAA,GAGI42D,EAAoBv2D,sBAAY,SAACoH,GACnC,OAAKA,EAGW,OAAZA,EAAE7U,MACK8R,EAAM8c,UAAU/Z,EAAEtV,KAAKsC,cAAgB,aAAa7B,MAExD6U,EAAE7U,MALE,GAMZ,CAAC8R,IAXF6B,EAasBxG,mBAAS62D,EAAkB3yD,EAAW,GAAIS,IAbhE8B,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAaG3M,EAbH4M,EAAA,GAaUtG,EAbVsG,EAAA,GAAAG,EAc0B5G,oBAAS,GAdnC6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAcGkwD,EAdHjwD,EAAA,GAcYkwD,EAdZlwD,EAAA,GAgBFhG,oBAAU,WAIN,OAHAuJ,OAAOC,iBAAiB,UAAWW,GACnCZ,OAAOC,iBAAiB,YAAaY,GAE9B,WACHb,OAAOE,oBAAoB,UAAWU,GACtCZ,OAAOE,oBAAoB,YAAaW,KAE7C,CAAC/G,EAAY6yD,EAAYD,EAAS32D,EAAUyD,IAE/C/C,oBAAU,WACNV,EAAS02D,EAAkB3yD,EAAW,IAAKS,IAC5C,CAACkyD,EAAkB3yD,EAAW,GAAIS,GAAQxE,EAAUwE,IAEvD,IAAMsG,EAAc3K,sBAAY,SAAArG,GAC5B,GAAI68D,EAAS,KACJ7uD,EAAa6uD,EAAb7uD,EAAG3J,EAAUw4D,EAAVx4D,OAEJ04D,EAAQ/uD,EADEhO,EAATwtB,MAEDwtB,EAAQ98C,KAAK2tB,IAAIkxC,EAAQ/uD,EAAG,GAC5B+uD,EAAQ,IACR/hB,IAAU,GAEd,IAAIzwC,EAAYN,EAAW,GACvB0M,EAAMpM,EAAUoM,IAChBD,EAAMnM,EAAUmM,IACG,aAAnBnM,EAAUpS,MACVwe,EAAM,EACND,EAAM,KACoB,aAAnBnM,EAAUpS,OACjBue,EAAM,MAEV,IAAIsmD,EAAUhiB,GAAOrkC,GAAOD,EAAI,OAAUrS,EAC1C24D,EAAU9+D,KAAKyY,IAAID,EAAKxY,KAAKwY,IAAIC,EAAKqmD,IAClCP,IACAO,EAAU9+D,KAAKu9C,MAAMuhB,IAErBA,IAAYJ,EAAkBryD,EAAWG,KACzCT,EAAW5P,QAAQ,SAAAoT,GAAC,OAAIA,EAAE/G,IAAIs2D,KAC9B92D,EAAS82D,IAEbj4C,EAAsB9a,KAE3B,CAACA,EAAYoyD,EAAaS,EAAYD,EAAS32D,EAAUwE,IAEtDqG,EAAY1K,sBAAY,SAAArG,GACtB68D,GACAC,GAAW,GAGf/3C,EAAsB,KACvB,CAAC+3C,EAAYD,IAEZ55D,EAAY,kBAIhB,OAHI0G,IACA1G,GAAa,aAGb+D,EAAAtK,EAAA4G,cAAA,OAAKG,YAAa,kBAAMk5D,GAAS,IAAO/4D,aAAc,kBAAM+4D,GAAS,IAAQ15D,UAAWA,IACpFy5D,GAASG,IAAYR,GACtBr1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACb+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CAACqG,MAAe+E,EAAYzM,EAAMsY,QAAQzqB,SAAjC,IAA6CmS,EAAMsY,QAAQzqB,SAAY,MACvF0K,UAAW45D,EAAU,6BAA+B,wBAG3D71D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACHwJ,YAAa,SAACrR,GACV88D,EAAW,CAACz4D,OAAQu4D,EAAkB3yD,EAAW,GAAIS,GAAQsD,EAAGhO,EAAEwtB,QAClE+uC,EAAyBtyD,EAAW,GAAG9R,OAE7C8K,UAAU,cACTgH,EAAW,GAAKA,EAAW,GAAG9R,KAAO,IAEtC6O,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,SAACrR,GACV88D,EAAW,CAACz4D,OAAQu4D,EAAkB3yD,EAAW,GAAIS,GAAQsD,EAAGhO,EAAEwtB,QAClE+uC,EAAyBtyD,EAAW,GAAG9R,OAE3C8K,UAAU,eACTy5D,GAASL,IAAgBQ,GAAWP,GAAsBryD,EAAW,GACrEwxC,EAAM6gB,EAAmBryD,EAAW,GAAG9R,KAAKsC,cAAgB,aAAa7B,OAClE6iD,EAAM77C,gBC5GpBsU,EAAS,IAAI1J,IAEbyyD,EAAS,CAAC,YAAa,WAAY,WAAY,SAAU,WA4DhDj4D,cAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH+5B,SAAU/5B,EAAMmI,MAAM4xB,SACtB1jB,cAAe3T,EAAMoxC,SAASrJ,uBAC9BkwB,sBAAuBj4D,EAAMk4D,QAAQD,wBAIhB,SAAC13D,GAC1B,MAAO,IAKMR,CA1DS,SAAAzI,GAA6D,IAA3DmO,EAA2DnO,EAA3DmO,MAAO4xB,EAAoD//B,EAApD+/B,SAAU1jB,EAA0Crc,EAA1Cqc,cAAeskD,EAA2B3gE,EAA3B2gE,sBACtD,GAAIxyD,EAAM0yD,aACN,MAAO,GAEX,GAAI9gC,EACA,OAAQt1B,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAC+5D,EAAA,EAAD,CACE3yD,MAAOA,EACP+kD,WAAYv7C,EAAOiB,iBAAiBzK,GACpC4yD,eAAe,IAEhB5yD,EAAMwU,iBAAmBC,KAAgBnY,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAACi6D,EAAA,EAAD,CAAe7yD,MAAOA,MAOhF,IAAIoQ,EAAUlC,EACV/C,MAAM/O,KAAK,IAAIgP,IAAI8C,EAAc9gB,IAAI,SAAA2H,GAAC,OAAIA,GAAKA,EAAEwb,QAAOnS,OAAO,SAAArJ,GAAC,OAAIA,MAD1C,GAE9B,OAAQuH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACZg6D,EAAOnlE,IACJ,SAAAwe,GAAK,OACDtP,EAAAtK,EAAA4G,cAACk6D,EAAD,CACE7zD,WAAYuzD,GAAyB5mD,IAAU4mD,EAAsBziE,cACrEgiE,QAAmB,cAAVnmD,EACT5L,MAAOA,EACPT,WAAY2O,GAAiBA,EAAcrgB,OAAS,EAExCqgB,EAAc9P,OAAO,SAAAd,GAAC,OAAIA,IAAGlQ,IAAI,SAAAkQ,GAAC,OAAIA,EAAEsO,EAAQ,eAChD5L,GAASA,EAAM8c,UAAY,CAAC9c,EAAM8c,UAAUlR,EAAQ,cAAgB,OAE3FsC,GAAiBA,EAAcrgB,OAAS,GACvCyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,SACA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAmB2V,EAAcrgB,SAEhDuiB,EAAOhjB,IAAI,SAAAmjB,GAAK,OAAIjU,EAAAtK,EAAA4G,cAAC8yC,EAAA,EAAD,CACE1rC,MAAOA,EACPnH,IAAK0X,EAAM/iB,GAAIoM,gBAAiBoG,EAAMpG,gBAAiB2W,MAAOA,iFClC7F/G,EAAS,IAAI1J,IA0DJxF,cAfS,SAACC,EAAO1C,GAC9B,MAAO,CACHrK,GAAIqK,EAAMmI,MAAMxS,GAChBC,KAAMoK,EAAMmI,MAAMwQ,YAAc3Y,EAAMmI,MAAMvS,KAC5CmkC,SAAU/5B,EAAMmI,MAAM4xB,WAID,SAAC92B,GAC1B,MAAO,CACH9B,kBAAmB,SAAC+B,EAASslC,GAAV,OAAkBvlC,EAAS9B,aAAkB+B,EAASslC,KACzErJ,mBAAoB,SAAC/oB,GAAD,OAASnT,EAASk8B,aAAmB/oB,OAIhD3T,CAxDU,SAAAzI,GAA8D,IAA5DmO,EAA4DnO,EAA5DmO,MAAO4xB,EAAqD//B,EAArD+/B,SAAU54B,EAA2CnH,EAA3CmH,kBAAmBg+B,EAAwBnlC,EAAxBmlC,mBAGtDpF,GACuBpoB,EAAOiB,iBAAiBzK,GAEpD,IAAIzH,EAAY,oBAOhB,OANKyH,EAAM2T,SACPpb,GAAa,qBAEbyH,EAAMwU,iBAAmBu+C,MACzBx6D,GAAa,gBAGb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWA,GACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OACEG,YAAa,kBAAMC,EAAkBg6D,MACrC95D,aAAc,kBAAMF,OAAkBlM,IACtCgM,QAAS,kBAAMkH,EAAMuqC,oBAAoBhyC,UAAU,aACpDyH,EAAM8J,WAAaxN,EAAAtK,EAAA4G,cAACq6D,EAAA,EAAD,CAAgBjzD,MAAOA,IAC1C1D,EAAAtK,EAAA4G,cAACy6B,EAAA,EAAD,CACCC,iBAAkB,kBAAM0D,EAAmBh3B,IAC1CkzD,UAAU,EAAMlzD,MAAOA,IAC1B1D,EAAAtK,EAAA4G,cAAA,OACEG,YAAa,kBAAMC,EAAkBm6D,MACrCj6D,aAAc,kBAAMF,OAAkBlM,IACtCgM,QAAS,kBAAMkH,EAAMsqC,gBAAgB/xC,UAAU,gBAEnD+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAYyH,EAAM2T,QAAW3T,EAAM2T,OAAOvd,KAAsC,aAA/B,8BAA8CvG,YAAKmQ,EAAMvS,MAAQuS,EAAMwQ,YAAcxQ,EAAM0K,YACjJpO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZyH,EAAM2T,QAAU3T,EAAM2T,OAAOvd,MAAQ4J,EAAM2T,OAAOvd,KAAKhJ,IACpD,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAa+E,OAG1C0C,EAAM2T,OAASrX,EAAAtK,EAAA4G,cAAC+xC,EAAA,EAAD,CAAgBlsC,KAAMm1B,IAAa5J,YAAahqB,EAAM2T,OAAOI,UAC5E/T,EAAM0pB,QAAUptB,EAAAtK,EAAA4G,cAAC+xC,EAAA,EAAD,CAAgBlsC,KAAMkuB,IAAc3C,YAAahqB,EAAM0pB,OAAOM,oCCJxE1vB,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhDU,SAAAzI,GAA2B,IAAzBmO,EAAyBnO,EAAzBmO,MAAOmgB,EAAkBtuB,EAAlBsuB,aAC1ByiC,EAAaxlD,mBAMjB,OAAI4C,EAAM8J,aAAe9J,EAAM4xB,SAEvBt1B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACZ66D,YAAuBpzD,EAAOmgB,IAI7B7jB,EAAAtK,EAAA4G,cAAA,OAAML,UAAU,mBACd+D,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKylD,EAAYrqD,UAAU,kBAC9B+D,EAAAtK,EAAA4G,cAACq5B,EAAA,EAAYA,YAAb,CACEvqB,MAAOjC,OAAO40B,WAAa,IAAM,GACjC9vB,gBAAgB,cAChB8oD,IAAKzQ,EACL0Q,OAAO,EACPphC,gBAAgB,EAChBC,cAAc,EACdC,eAAe,EACfC,SAAU,iBAAM,IAChBC,eAAgBtyB,EAAMpG,gBAAgB04B,eACtCC,WAAYvyB,EAAMpG,gBAAgB44B,KAClC7xB,YAAaX,EAAMW,YACnB8xB,WAAYzyB,EAAMpG,gBAAgB64B,WAClChrB,OAAQ,IACR7N,gBAAiBoG,EAAMpG,gBACvBg5B,IAAK5yB,EAAMpG,gBAAgBg5B,IAC3B5yB,MAAOA,gBCDd1F,uBAfS,SAACC,EAAO1C,GAC9B,IAAIygC,EAAmB/9B,EAAMg+B,QAAQD,iBACrC,MAAO,CACH7qC,KAAMoK,EAAMq9B,QAAQznC,KACpBu2C,OAAQ1L,GACJ/9B,EAAMy6B,QAAQu+B,4BAA4B17D,EAAMq9B,QAAQ1nC,KACxD+M,EAAMy6B,QAAQC,gBAAgBp9B,EAAMq9B,QAAQ1nC,MAI3B,SAACsN,GAC1B,MAAO,IAIMR,CAhCY,SAAAzI,GAAuB,IAArBqjC,EAAqBrjC,EAArBqjC,QAAS8O,EAAYnyC,EAAZmyC,OAC9B7pC,EAAuB,YAAjB+6B,EAAQznC,KAAqB,sBAAuB,qBAI9D,OAHIynC,EAAQs7B,SACRr2D,EAAM,oBAEFmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,0CACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2BAA2B4B,IAAKA,IAC/CmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ28B,EAAQs7B,OAASt7B,EAAQs7B,OAAO/iE,KAAOynC,EAAQznC,KAC/Cu2C,GAAU1nC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACZyrC,EAAO1mC,EADV,KACe0mC,EAAO1gC,gBCkClChJ,cAfS,SAACC,EAAO1C,GAC9B,IAAIygC,EAAmB/9B,EAAMg+B,QAAQD,iBACrC,MAAO,CACH75B,KAAM5G,EAAM27D,SAAS/0D,KACrBulC,OAAQ1L,GACJ/9B,EAAMy6B,QAAQu+B,4BAA4B17D,EAAM27D,SAAShmE,KACzD+M,EAAMy6B,QAAQC,gBAAgBp9B,EAAM27D,SAAShmE,MAI5B,SAACsN,GAC1B,MAAO,IAIMR,CA5Ca,SAAAzI,GAA8BA,EAA5B2hE,SAA4B,IAAlB/0D,EAAkB5M,EAAlB4M,KAAMulC,EAAYnyC,EAAZmyC,OACtC7pC,EAAM,GACN1M,EAAO,GACX,OAAQgR,GACR,KAAKg1D,IACDt5D,EAAM,qBACN1M,EAAO,OACP,MACJ,KAAK4pC,IACDl9B,EAAM,qBACN1M,EAAO,SACP,MACJ,QACI0M,EAAM,sBACN1M,EAAO,UAGX,OACI6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,2CACb+D,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAKA,IACVmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ9K,EACAu2C,GAAU1nC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACZyrC,EAAO1mC,EADV,KACe0mC,EAAO1gC,OCN9BhJ,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAlBQ,SAACzC,GACpB,OAAQyE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAAA,OAAKuB,IAAI,oBADX,2BCyCGG,cAXS,SAACC,EAAO1C,GAC9B,MAAO,CACH67D,QAAS77D,EAAM+D,OAAO+3D,SAID,SAAC74D,GAC1B,MAAO,IAIMR,CAxCW,SAAAzI,GAAuB,IAArB+J,EAAqB/J,EAArB+J,OAAQ83D,EAAa7hE,EAAb6hE,QAC5B1zD,EAAQ4zD,YAAeh4D,GADkBR,EAGnBC,mBAASq4D,GAHUp4D,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGxCu4D,EAHwCr4D,EAAA,GAGhCu4D,EAHgCv4D,EAAA,GAKvCw4D,EAAan4D,sBAAY,WAC3BC,EAAOm4D,MAAQJ,EACfE,GAAWF,IACZ,CAAC/3D,EAAQ+3D,EAAQE,IAMpB,OAJA33D,oBAAU,WACN23D,EAAUH,IACX,CAACA,EAASG,IAGTv3D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yCACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACZqD,EAAOo4D,kBAAoBC,IAAW,WACtCr4D,EAAOo4D,kBAAoBE,IAAU,UACrC,WAEH53D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAeqD,EAAOnO,MACrC6O,EAAAtK,EAAA4G,cAAA,OACEE,QAASg7D,EACT35D,IAAKw5D,EAAS,sBAAuB,sBAAuBp7D,UAAU,gBACvEyH,GAAS1D,EAAAtK,EAAA4G,cAACy6B,EAAA,EAAD,CAAgB6/B,UAAU,EAAMlzD,MAAOA,OCU5C1F,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhCW,SAAAzI,GAAc,IAAZsiE,EAAYtiE,EAAZsiE,OACxB,OAAKA,GAAWA,EAAOxd,eAInBwd,EAAOC,kBACPD,EAASA,EAAOC,iBAEhBD,EAAOxd,kBAAoBh6B,IACnBrgB,EAAAtK,EAAA4G,cAACy7D,EAAD,CAAkBr0D,MAAOm0D,IAC1BA,EAAOxd,kBAAoB2d,IAC1Bh4D,EAAAtK,EAAA4G,cAAC27D,EAAD,CAAgBC,IAAKL,IACtBA,EAAOxd,kBAAoB8d,IAC1Bn4D,EAAAtK,EAAA4G,cAAC87D,EAAD,CAAoBx/B,QAASi/B,IAC9BA,EAAOxd,kBAAoBge,IAC1Br4D,EAAAtK,EAAA4G,cAACg8D,EAAD,CAAqBpB,SAAUW,IAChCA,EAAOxd,kBAAoBke,IAC1Bv4D,EAAAtK,EAAA4G,cAACk8D,EAAD,CAAmBl5D,OAAQu4D,IAE/B73D,EAAAtK,EAAA4G,cAAA,aAjBG,eCeA0B,uBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CApBD,SAACzC,GACX,OACIyE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,SAGA+D,EAAAtK,EAAA4G,cAAC6nB,EAAA,EAAD,CAAqB7mB,gBAAiB/B,EAAM+B,iDCwCvCU,wBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA/CO,SAAAzI,GAAe,IAAbqjC,EAAarjC,EAAbqjC,QAChB6/B,EAAO1wD,aAAI6wB,EAAQznC,MACvB,IAAKsnE,EAAKC,cACN,MAAO,GAEX,IAAIC,EAAiBF,EAAKC,gBAC1B,OAAQ14D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,cAGD08D,EAAe7nE,IACZ,SAAAK,GAAI,OACJ6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZ9K,GAEH6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACZw8D,EAAKC,cAAcvnE,GAAMgjE,cAG9Bn0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZrM,OAAOsE,KAAKukE,EAAKC,cAAcvnE,GAAMyd,QAAQ9d,IAC1C,SAAA8nE,GAAS,OAAI54D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZ28D,GAEH54D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACZw8D,EAAKC,cAAcvnE,GAAMyd,OAAOgqD,eCJ3D56D,wBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1BO,SAAAzI,GAAe,IAAbqjC,EAAarjC,EAAbqjC,QAAa95B,EACXC,mBAAS65B,EAAQmD,KAAK,IADX/8B,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC5B3N,EAD4B6N,EAAA,GACtBmqB,EADsBnqB,EAAA,GAG3BoB,EAAWf,sBAAY,SAACrG,GAC1B,IAAIolB,EAAMplB,EAAEoJ,OAAOxJ,MAAMigE,WAAW,IAAK,KACzCjgC,EAAQ8J,KAAO,YAActkB,EAC7B+K,EAAQ/K,IACT,CAACwa,EAASzP,IACb,OACInpB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,QACA+D,EAAAtK,EAAA4G,cAAA,SAAO1D,MAAOzH,EAAMiP,SAAUA,EAAU+B,KAAK,OAAOlG,UAAU,gCCYzD+B,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAxBQ,SAAAzI,GAAwB,IAAtBujE,EAAsBvjE,EAAtBujE,QAASlgC,EAAarjC,EAAbqjC,QAC9B,OACI54B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,WACD68D,EAAQhoE,IACL,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAAAxD,GAAC,OAAI4/B,EAAQmgC,cAAc/3D,IACpC/E,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACd+E,mCCyCdg4D,GAAS,SAAAnjE,GAAgG,IAA9F+iC,EAA8F/iC,EAA9F+iC,QAASqgC,EAAqFpjE,EAArFojE,gBAAiBC,EAAoErjE,EAApEqjE,aAAcvlE,EAAsDkC,EAAtDlC,EAAG4jD,EAAmD1hD,EAAnD0hD,MAAO4hB,EAA4CtjE,EAA5CsjE,SAAUC,EAAkCvjE,EAAlCujE,KAAMxgE,EAA4B/C,EAA5B+C,MAAOygE,EAAqBxjE,EAArBwjE,SAAUt0D,EAAWlP,EAAXkP,MAC5FlE,EAAMC,sBAAOtQ,GAD0FwlB,EAEvFjX,oBAAU,EAAE7H,KAAK6B,IAAIk2C,WAAWr2C,KAFuDqd,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAEtGtG,EAFsGuG,EAAA,GAEjGs+B,EAFiGt+B,EAAA,GAAAuT,EAGvFzqB,mBAAS,EAAE7H,KAAK6B,IAAIk2C,WAAWr2C,KAHwD6wB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAGtG7Z,EAHsG8Z,EAAA,GAGjG+qB,EAHiG/qB,EAAA,GAK3G7pB,oBAAU,WACFjM,IAAM4jD,GACNhhC,WAAW,WACP1V,EAAI4I,QAAQ8tC,SACb,KAER,CAAC5jD,EAAG4jD,IAEP,IAAM+hB,EAAcj6D,sBAAY,SAACrG,GAC7B,IAAI0pC,EAAO1pC,EAAEoJ,OAAOxJ,MAChB4gC,EAAM5pC,OAAAsa,GAAA,EAAAta,CAAA,GAAQmV,UACXy0B,EAAO4/B,GACd5/B,EAAOkJ,GAAQ9pC,EACf4gC,EAAO,IAAM,GACb6/B,EAAS7/B,IACV,CAACz0B,EAAOs0D,EAAUD,EAAMxgE,IAErB2gE,EAAel6D,sBAAY,SAACrG,EAAGwgE,GACjC,IAAI92B,EAAO1pC,EAAEoJ,OAAOxJ,MAChBxD,aAASstC,KACTA,EAAOuM,WAAWvM,IAEtB,IAAIlJ,EAAM5pC,OAAAsa,GAAA,EAAAta,CAAA,GAAQmV,GAClBy0B,EAAO4/B,GAAQ12B,EACf22B,EAASzpE,OAAAsa,GAAA,EAAAta,CAAA,GAAK4pC,IACdZ,EAAQgH,aAAaw5B,EAAM12B,GACd,IAATA,IACAA,EAAO,GAEP82B,IACAjlB,GAAQ,EAAEr9C,KAAK6B,IAAIk2C,WAAWvM,KAC9B8R,EAAO,EAAEt9C,KAAK6B,IAAIk2C,WAAWvM,OAElC,CAAC39B,EAAOs0D,EAAUD,EAAM5kB,EAAQD,IAEnC,GAAa,KAAT6kB,EACA,MAAO,GAGX,IAAIK,EAAQ,GAkCZ,OA/BIA,EAFiB,mBAAV7gE,EAGHoH,EAAAtK,EAAA4G,cAAA,SACEL,UAAU,mBACVkG,KAAK,WACL/B,SAAU,SAACpH,GAAD,OAAOugE,EAAc,CAACn3D,OAAQ,CAACxJ,OAAQA,MACjDy7C,QAASz7C,IAGRxD,aAASwD,GAEZoH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAACo9D,GAAA,EAAD,CACEC,YAAY,EACZrlB,QAAS,CAACslB,WAAY,GAAIjqD,MAAKD,OAAMtP,SAAU,SAACY,GAAD,OAAOu4D,EAAc,CAACn3D,OAAQ,CAACxJ,MAAOoI,MAAM3D,OAAQzE,EAAO67C,OAAO,IACnHz0C,EAAAtK,EAAA4G,cAAA,SACEL,UAAU,oBACVrD,MAAOA,EACPuJ,KAAK,OACL/B,SAAU,SAACpH,GAAD,OAAOugE,EAAcvgE,GAAG,OAKtCgH,EAAAtK,EAAA4G,cAAA,SACEL,UAAU,oBACVrD,MAAOA,EACPuJ,KAAK,OACL/B,SAAUm5D,IAKhBv5D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,UACL,4BAAPm9D,EACAp5D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAf,cACa+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAoB4B,IAAI,4BAAmCmC,EAAAtK,EAAA4G,cAAA,SACtFu9D,UAAQ,EACRC,QAAS,kBAAMX,EAASxlE,IACxBkN,IAAKA,EAAKjI,MAAOwgE,EAAMj3D,KAAK,OAAO/B,SAAUk5D,IAC/Ct5D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,KACGm9D,GAAQA,EAAK9kE,SAAS,UAAcsE,GAASA,EAAMmhE,YAAcnhE,EAAMmhE,WAAW,KACpF/5D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMy8D,GAAiBC,IAChCn0D,MAAO,CAACkJ,gBAAiBrV,GAAQqD,UAAU,cAC1Ci9D,GAAgBl5D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO,CAACmX,OAAQ,SAAU1f,QAAS,SAAAxD,GAAC,OAAIA,EAAE+J,oBAC/D/C,EAAAtK,EAAA4G,cAAC2gC,GAAA,EAAD,CAAc78B,SAAU,SAACY,GAAD,OAAOu4D,EAAc,CAC1Cn3D,OAAQ,CAACxJ,MAAOoI,EAAE47B,QAAQ1uB,MAAO,CAAC0uB,IAAKhkC,OAEpC,GACT6gE,IAiBIz7D,eAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHw7D,iBAAkB,SAAC9oE,EAAI+oE,GAAL,OAAiBz7D,EAASw7D,aAAiB9oE,EAAI+oE,OAIxDj8D,CA/Ja,SAAAzI,GAAiC,IAA/BqjC,EAA+BrjC,EAA/BqjC,QAASohC,EAAsBzkE,EAAtBykE,iBAAsBl7D,EACjCC,mBAAS65B,EAAQghC,YAAc,CAACM,GAAI,KADHl7D,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACpDiG,EADoD/F,EAAA,GAC7Cq6D,EAD6Cr6D,EAAA,GAErDm7D,EAAYr5D,iBAAO83B,GAFkCrzB,EAGjCxG,wBAASvO,GAHwBgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAGpDgyC,EAHoD/xC,EAAA,GAG7C2zD,EAH6C3zD,EAAA,GAKzD5F,oBAAU,WACNu6D,EAAU1wD,QAAUmvB,GACrB,CAACA,IAEJh5B,oBAAU,WACNy5D,EAASzgC,EAAQghC,YAAc,CAACM,GAAI,MACrC,CAACthC,EAASygC,IAEbz5D,oBAAU,WACNu6D,EAAU1wD,QAAQmwD,WAAlBhqE,OAAAsa,GAAA,EAAAta,CAAA,GAAoCmV,GAC/B6zB,EAAQt7B,gBAAgB88D,WACzBJ,EAAiBG,EAAU1wD,QAAQvY,GAAnBtB,OAAAsa,GAAA,EAAAta,CAAA,GAA4BmV,KAEjD,CAACA,IAlBqD,IAAAY,EAoBnB5G,wBAASvO,GApBUoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAoBpDuzD,EApBoDtzD,EAAA,GAoBtCqzD,EApBsCrzD,EAAA,GAsBzD,OACI5F,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,cAGCrM,OAAOsE,KAAK6Q,GAAOjD,OAAO,SAAAd,GAAC,MAAS,KAANA,IAAUlQ,IACtC,SAACyL,EAAK5I,GAAN,OACAqM,EAAAtK,EAAA4G,cAAC+9D,GAAD,CACEnB,aAAcA,IAAiBvlE,EAC/B4I,IAAK5I,EACLylE,KAAM78D,EACNwI,MAAOA,EACP6zB,QAASA,EACTqgC,gBAAiB,SAACj4D,GAAD,OAAOi4D,GAAsB,IAANj4D,OAAcxQ,EAAYmD,IAClEwlE,SAAUA,EACVxlE,EAAGA,EACH4jD,MAAOA,EACP3+C,MAAOmM,EAAMxI,GACb88D,SAAUA,mBC0DVr7D,uBAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHk8B,mBAAoB,SAAA15B,GAAC,OAAIxC,EAASk8B,aAAmB15B,OAI5ChD,CAnGS,SAAAzI,GAA6C,IAA3CqjC,EAA2CrjC,EAA3CqjC,QAAS0hC,EAAkC/kE,EAAlC+kE,SAAU5/B,EAAwBnlC,EAAxBmlC,mBAAwB57B,EACzCC,wBAASvO,GADgCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACrDI,GADqDF,EAAA,GAAAA,EAAA,IAG3Du7D,EAAgBl7D,sBAAY,SAACw4D,GAAkC,IAA1B2C,EAA0B7lE,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAApB,QAAS8lE,EAAW9lE,UAAApD,OAAA,EAAAoD,UAAA,QAAAnE,EAE7DkqE,EAAQ9hC,EAAQx6B,YAAYk8B,SAAStgC,KAAK,SAAAgH,GAAC,OAAIA,EAAE7P,OAAS0mE,IACzD6C,IAGOA,EAFO,QAAX7C,EACwC,IAApCj/B,EAAQx6B,YAAYyU,KAAKthB,OACjBqnC,EAAQx6B,YAAYu8D,YAEpB/hC,EAAQx6B,YAAYyU,KAAK,GAG7B+lB,EAAQx6B,YAAYy2D,mBACxBrkE,OACAA,EACAqnE,IAIZ,IAAI+C,EAAahiC,EACb6hC,GAAUA,KAAU7hC,EAAQiiC,UAE5BD,EADOH,GAAU7hC,EAAQt5B,QAAUm7D,KAAU7hC,EAAQt5B,OAAOu7D,QAC/CjiC,EAAQt5B,OAERs5B,EAAQt5B,QAAU1P,OAAOsE,KAAK0kC,EAAQt5B,OAAOu7D,SAAS,GAC/DjiC,EAAQt5B,OACRs5B,GAGR,IAAIjnB,EAAM+oD,EACNA,EAAMp7D,QAAUk7D,KAASE,EAAMp7D,OAAOw7D,SACtCJ,EAAQA,EAAMp7D,QAGlBo7D,EAAMK,aACFP,EACAI,EACAH,GACI7qE,OAAOsE,KAAK0kC,EAAQiiC,SAAS,IAC5BjiC,EAAQt5B,QACR1P,OAAOsE,KAAK0kC,EAAQt5B,OAAOu7D,SAAS,IAE7C37D,EAAS24D,GACTn9B,EAAmB/oB,IACpB,CAACinB,EAAS0hC,EAAUp7D,IAElB2P,MAAM80B,QAAQ22B,KACfA,EAAW,CAACA,IAGhB,IAAMjyD,EAAchJ,sBAAY,SAACw4D,EAAQ2C,EAAOC,GAC5C,IAAII,EAAOjrE,OAAAsa,GAAA,EAAAta,CAAA,GACHgpC,EAAQiiC,QACPjiC,EAAQt5B,OAASs5B,EAAQt5B,OAAOu7D,QAAU,IAE/CG,EAAUP,EAASI,EAAQJ,GAAUI,EAAQjrE,OAAOsE,KAAK2mE,GAAS,IACtE,GAAIG,EACA,OAAOA,EAAQC,YAAYlhE,KACvB,SAAAiH,GAAC,OAAIA,EAAEk6D,SAAS/pE,OAAS0mE,GAAsB,QAAXA,GAAoB72D,EAAEk6D,SAASC,SAE5E,CAACviC,IAEJ,OACI54B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAf,0BAGDq+D,EAASxpE,IACN,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM+9D,EAAcv5D,EAAE62D,OAAQ72D,EAAEw5D,MAAOx5D,EAAEy5D,SAClDx+D,UAAWoM,EAAYrH,EAAE62D,OAAQ72D,EAAEw5D,MAAOx5D,EAAEy5D,QAAU,4BAA8B,kBACvFz6D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBAAqB4B,IAAI,4BACxCmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ+E,EAAE62D,QAEL73D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZ+E,EAAEw5D,OAELx6D,EAAAtK,EAAA4G,cAACkxC,GAAA,EAAD,CACEvxC,UAAU,mBACVgB,UAAWoL,EAAYrH,EAAE62D,OAAQ72D,EAAEw5D,MAAOx5D,EAAEy5D,iBC4DjDz8D,eAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHpK,KAAMoK,EAAMq9B,QAAQznC,KACpBiqE,UAAWn9D,EAAMg+B,QAAQo/B,mBAIJ,SAAC78D,GAC1B,MAAO,IAIMR,CA3IM,SAAAzI,GAAgC,IAA9BqjC,EAA8BrjC,EAA9BqjC,QAA8BrjC,EAArBpE,KAAqBoE,EAAf6lE,UAC9BxiC,EAAQk/B,kBACRl/B,EAAUA,EAAQk/B,iBAF2B,IAAAh5D,EAIzBC,qBAJyBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAIrCI,GAJqCF,EAAA,GAAAA,EAAA,IAK3CxC,EAAU6C,sBAAY,SAACi8D,GACzB1iC,EAAQ8J,KAAO44B,EACfp8D,EAASo8D,IACV,CAAC1iC,EAAS15B,IAMPq8D,GAJWl8D,sBAAY,WACzBu5B,EAAQ4iC,QACT,CAAC5iC,IAEqBv5B,sBAAY,SAACo8D,EAAW1/B,GAE7C,IAAIm7B,EAAWt+B,EAAQx6B,YAAYwgC,oBAC/BpuC,OACAA,OACAA,OACAA,OACAA,EACAirE,EAAY,IAAM1/B,EAAKjrC,IAAI,SAAAkQ,GAAC,OAAI,IAAG9O,KAAK,MAE5C0mC,EAAQmiC,aAAa,QAAS7D,EAAUtnE,OAAOsE,KAAKgjE,EAAS2D,SAAS,KACvE,CAACjiC,KAEJ,IAAKA,EAAQznC,MAAyB,KAAjBynC,EAAQznC,KAAa,CACtC,IAAI2I,EAAOiO,aAAI,GAEf,OADanY,OAAOsE,KAAK4F,GAAMjC,OACjB/G,IACV,SAAAoE,GAAG,OACC8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAY/G,GAC3B8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZnC,EAAK5E,GAAK2C,OAAO/G,IACd,SAAAujB,GAAM,OACFrU,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMA,EAAQ6X,IAASpY,UAAU,cAC7C+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAaoY,GAC5BrU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe8L,aAAIsM,GAAQ8/C,oBAKpE,IAAIz5D,EAAIqN,aAAI6wB,EAAQznC,MACpB,GAAIuJ,EAAG,CACH,IAAIxF,EAAMwF,EAAEZ,KACR+U,MAAM80B,QAAQzuC,GACdA,EAAMA,EAAI,GACFA,IACRA,EAAM,UAGN0jC,EAAQs7B,SACRh/D,EAAM,UAGV,IAAI0Z,EAAMhf,OAAAsa,GAAA,EAAAta,CAAA,GAAQ8K,EAAEkU,QAChBC,MAAM80B,QAAQjpC,EAAEogE,UAChBlsD,EAAS,GACTlU,EAAEogE,OAAOznE,QACL,SAAAmnE,GAAK,OAAI5rD,EAAO4rD,GAAS9/D,EAAEkU,OAAO4rD,IAAU,MAEpD,IAAIkB,EAAU9rE,OAAAsa,GAAA,EAAAta,CAAA,GAAQ8K,EAAEghE,YAGxB,OADc9rE,OAAOsE,KAAK0kC,EAAQkgC,SAE9B94D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,6BAEb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAY/G,GAC3B8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAa28B,EAAQs7B,OAASt7B,EAAQs7B,OAAO/iE,KAAOynC,EAAQznC,MAC3E6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe28B,EAAQs7B,OAAS,GAAKx5D,EAAEy5D,aACtDn0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZrM,OAAOsE,KAAK0a,GAAQ9d,IACjB,SAAA8nE,GAAS,OACT54D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB4B,IAAI,wBACpCmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZ28D,GAEH54D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACZ2S,EAAOgqD,WAMpBhgC,EAAQs7B,QAA2B,aAAjBt7B,EAAQznC,MAAuB6O,EAAAtK,EAAA4G,cAACq/D,GAAD,CAAe/iC,QAASA,IAC1E8iC,GAAc9rE,OAAOsE,KAAKwnE,GAAYnqE,OAAS,GAChDyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAf,aAEE+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBAAf,qBAIDrM,OAAOsE,KAAKwnE,GAAYnqE,OAAS,GAAKyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACpD+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZrM,OAAOsE,KAAKwnE,GAAY55D,OACrB,SAAA25D,GAAS,OAAIA,EAAUA,IAAcA,EAAUA,GAAWx4D,aAC5DnS,IACI,SAAA2qE,GAAS,OACXz7D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAiB4B,IAAI,wBACpCmC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,6BACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM++D,EAAiBE,EAAWC,EAAWD,GAAWx4D,aAAahH,UAAU,iBAAiBw/D,GAAiBC,EAAWD,GAAWx4D,WAAWnS,IAAI,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,iBAAiB+E,MAE5MhB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZy/D,EAAWD,GAAWtH,oBAOtCz5D,EAAE4/D,UAAYt6D,EAAAtK,EAAA4G,cAACs/D,GAAD,CAAiBhjC,QAASA,EAAS0hC,SAAU5/D,EAAE4/D,WAC9Dt6D,EAAAtK,EAAA4G,cAACu/D,GAAD,CAAqBjjC,QAASA,IAE9B54B,EAAAtK,EAAA4G,cAACw/D,GAAD,CAAeljC,QAASA,KAGlC,OAAQ54B,EAAAtK,EAAA4G,cAAA,6BClHG0B,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAfS,SAAAzI,GAAW,IAAT2iE,EAAS3iE,EAAT2iE,IACtB,OACIl4D,EAAAtK,EAAA4G,cAACy/D,GAAA,EAAD,CAAcC,SAAS,EAAOC,YAAY,EAAMC,YAAY,EAAMx4D,MAAOw0D,eCiBlEl6D,wBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAjBS,SAAAzI,GAAW,IAAT2iE,EAAS3iE,EAAT2iE,IACtB,OACIl4D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAC6/D,GAAA,EAAD,CAAe/wD,MAAO,IAAK8sD,IAAKA,kBCJpCkE,GAAQ,CAAC,IAAK,IAAK,IAAK,KAmCfp+D,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAlCS,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MAClB/C,EAAQ+C,EAAMpG,gBAAgBqD,MAAMA,MACxC,OACGX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,SAGD+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZyH,EAAM24D,yBAAyBv6D,OAC5B,SAACd,EAAErN,GAAH,OAASgN,EAAMhN,KAAOgN,EAAMhN,GAAGukE,MAAKpnE,IACtC,SAAC+N,EAAMlL,GAAP,OACIqM,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAACggE,GAAA,EAAD,CACEh/D,gBAAiBoG,EAAMpG,gBACvBoS,KAAM,GAAInM,UAAW1E,IACvBmB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACZmgE,GAAMzoE,sBCEZqK,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CApBa,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MAC1B,OACI1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,aAGA+D,EAAAtK,EAAA4G,cAACkY,GAAA,EAAD,CAAiB9Q,MAAOA,iBCqCnB1F,eAbS,SAACC,EAAO1C,GAC9B,MAAO,CACH+6B,IAAK/6B,EAAMmI,MAAMpG,gBAAgBg5B,IACjCimC,WAAYhhE,EAAMqoC,KAAOroC,EAAMqoC,KAAK24B,WAAa,EACjDC,WAAYjhE,EAAMqoC,KAAOroC,EAAMqoC,KAAK44B,WAAY,IAI3B,SAACh+D,GAC1B,MAAO,IAIMR,CA3CE,SAAAzI,GAAgDA,EAA9CmO,MAA8C,IAAvCkgC,EAAuCruC,EAAvCquC,KAAMtN,EAAiC/gC,EAAjC+gC,IAAKimC,EAA4BhnE,EAA5BgnE,WAAYC,EAAgBjnE,EAAhBinE,WACzCC,EAAgBvlE,KAAKu9C,MAAOne,EAAMimC,EAAY,IAAI,GAEhDr9D,EAAWG,sBAAY,SAACzG,GAC1B,IAAI2jE,EAAajmC,EAAM19B,EACvBgrC,EAAK84B,oBAAoBh9D,IAAI68D,GAAY,IAC1C,CAAC34B,EAAMtN,IAEJqmC,EAAOt9D,sBAAY,WACrBukC,EAAKg5B,oBAAoBl9D,IAAiB,EAAb88D,GAAgB,IAC9C,CAACA,EAAY54B,IAEVi5B,EAAKx9D,sBAAY,WACnBukC,EAAKg5B,oBAAoBl9D,IAAI88D,EAAa,GAAG,IAC9C,CAACA,EAAY54B,IAd6Ck5B,ECFlC,SAAAvnE,GAAiC,IAA/Bma,EAA+Bna,EAA/Bma,IAAKC,EAA0Bpa,EAA1Boa,IAAKzQ,EAAqB3J,EAArB2J,SAAUtG,EAAWrD,EAAXqD,MAAWkG,EAChCC,oBAAS,GADuBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACvD+2D,EADuD72D,EAAA,GAC9C82D,EAD8C92D,EAAA,GAG5DY,oBAAU,WAIN,OAHAuJ,OAAOC,iBAAiB,YAAaY,GACrCb,OAAOC,iBAAiB,UAAWW,GAE5B,WACHZ,OAAOE,oBAAoB,YAAaW,GACxCb,OAAOE,oBAAoB,UAAWU,KAE3C,CAAC8rD,EAASnmD,EAAKC,EAAKzQ,EAAUtG,IAEjC,IAAMoR,EAAc3K,sBAAY,SAACrG,GAC7B,GAAI68D,EAAS,CACT9jE,QAAQC,IAAI,WADH,IAEJgV,EAAa6uD,EAAb7uD,EAAG3J,EAAUw4D,EAAVx4D,OAEJ04D,EAAQ/uD,EADEhO,EAATwtB,MAEDwtB,EAAQ98C,KAAK2tB,IAAIkxC,EAAQ/uD,EAAG,GAC5B+uD,EAAQ,IACR/hB,IAAU,GAEd,IAAIgiB,EAAUhiB,GAAOrkC,GAAOD,EAAI,OAAUrS,EAC1CtL,QAAQC,IAAI,YAAagkE,IACzBA,EAAU9+D,KAAKyY,IAAID,EAAKxY,KAAKwY,IAAIC,EAAKqmD,OACtBp9D,GACZsG,EAAS82D,KAGlB,CAACtmD,EAAKmmD,EAASlmD,EAAK/W,EAAOsG,IAExB6K,EAAY1K,sBAAY,WAC1By2D,GAAW,IACZ,CAACA,IAEEzrD,EAAchL,sBAAY,SAACrG,GAC7B88D,EAAW,CAACz4D,OAAQzE,EAAOoO,EAAGhO,EAAEwtB,SACjC,CAACsvC,EAAYl9D,IAEhB,MAAO,CACHi9D,UACAxrD,eDxB2B0yD,CAAgB,CAACrtD,IAAK,GAAIC,IAAK,IAAKzQ,WAAUtG,MAAO6jE,IAA7EpyD,EAhBsDyyD,EAgBtDzyD,YAAawrD,EAhByCiH,EAgBzCjH,QAEpB,MAAO,CACH71D,EAAAtK,EAAA4G,cAAA,OAAK+N,YAAaA,EAAapO,UAAW45D,EAAU,oBAAsB,aACxE71D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,cAAcwgE,GADhC,QAGAz8D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAW,eACd+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASqgE,EAAI5gE,UAAU,aAC5B+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgB,EAAIugE,EAAnC,KACAx8D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASmgE,EAAM1gE,UAAU,6BE0ClC+gE,YAAU,SAACt5D,GACb,OAAOA,EAAMO,YAAYtF,QAAQ3E,KAAK,SAAAgH,GAAC,MAAe,SAAXA,EAAE7P,SAkClC6M,eA/BS,SAACC,EAAO1C,GAC5B,IAAIkkD,EAAgBlkD,EAAMmI,MAAMtF,YAAYlN,GACxCmmE,GAAS,OACO7mE,IAAhB+K,EAAMmI,QAGN2zD,IAFuBp5D,EAAMC,OAAO++D,kBAAkB1hE,EAAMmI,MAAMtF,YAAYlN,KAAO,IACrDqK,EAAMmI,MAAMW,cAAgB,IAC1C9I,EAAMmI,MAAMrF,kBAAmB,GAGrD,MAAO,CACHg5D,SACA/hC,SAAU/5B,EAAMmI,MAAM4xB,SACtB4nC,OAAQj/D,EAAMU,QAAQu+D,OAAO3hE,EAAMmI,MAAMxS,IACzCiW,KAAMlJ,EAAMg+B,QAAQkhC,oBACpBl5D,YAAa1I,EAAMmI,MAAMO,YAAYtF,QAAQpN,OAC7C6rE,SAAUn/D,EAAMC,OAAOm/D,WAAW5d,IAC9BxhD,EAAMC,OAAOm/D,WAAW5d,GAAelkD,EAAMmI,MAAMW,eAIpC,SAAC7F,EAAUjD,GACpC,MAAO,CACH+hE,iBAAkB,SAAA54B,GAAC,OAAIlmC,EAAS8+D,aAAiB54B,KACjDgW,QAAS,SAAA15C,GAAC,OAAIxC,EAAS++D,aAAuBv8D,KAC9Cw8D,oBAAqB,SAACr7D,GAAD,OACf3D,EACI+F,aACIhJ,EAAMmI,MAAMtF,YAAYlN,GAAIqK,EAAMmI,MAAMxS,QAAIV,EAAW2R,OAAM3R,OAIlEwN,CA1Fc,SAAAzI,GAUvB,IATF+/B,EASE//B,EATF+/B,SACA+hC,EAQE9hE,EARF8hE,OACA3zD,EAOEnO,EAPFmO,MACA05D,EAME7nE,EANF6nE,SACAj2D,EAKE5R,EALF4R,KACAuzC,EAIEnlD,EAJFmlD,QACA8iB,EAGEjoE,EAHFioE,oBACAF,EAEE/nE,EAFF+nE,iBACAJ,EACE3nE,EADF2nE,OAEIr8D,EAAMC,mBAGJ28D,GAFW38D,mBAEJzB,sBAAY,WACrBq7C,GAASvzC,IACV,CAACA,EAAMuzC,KAEV96C,oBAAU,WACFuH,IACAq2D,EAAoB7F,KACpB6F,EAAoB5F,OAEzB,CAACzwD,IAEe9H,sBAAY,WAC3B,IAAIq+D,EAAgBh6D,EAAMzF,MAAMU,QAAQ++D,eAAiB,GACzDJ,EAAgB,GAAAt7D,OAAApS,OAAA2R,EAAA,EAAA3R,CAAM8tE,GAAN,CAAqBR,MACtC,CAACx5D,EAAOw5D,IAEX,OACIl9D,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAU,oBACvB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,cAGA+D,EAAAtK,EAAA4G,cAACqhE,GAAA,EAAD,CACE7/D,cAAeu5D,EACfG,WAAY,kBAAM9zD,EAAMk6D,wBACxBtoC,GACDt1B,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM84B,EAAW5xB,EAAMm6D,WAAaC,YAAep6D,IAC5DzH,UAAWq5B,EAAW,6BAA+B,uBACrDt1B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc4B,IAAI,qBAHnC,IAGyDy3B,EAAW,WAAa,UAElFt1B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACf+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAASihE,EAAMxhE,UAAWkL,EAAO,kCAAoC,8BACvEzD,EAAM8J,WAAa9J,EAAM0K,UAAW,WAEpC1K,EAAM2T,QAAUrX,EAAAtK,EAAA4G,cAACyhE,GAAA,EAAD,CAAYr6D,MAAOA,IACnC05D,GAAYp9D,EAAAtK,EAAA4G,cAAC0hE,GAAD,CAAUp6B,KAAMo5B,GAAQt5D,GAAQA,MAAOA,oBCtCjD1F,YAXS,SAACC,EAAO1C,GAC9B,MAAO,CACHoD,QAASpD,EAAMmI,OAASnI,EAAMmI,MAAM/E,QAAUpD,EAAMmI,MAAM/E,QAAQpN,OAAS,IAItD,SAACiN,GAC1B,MAAO,IAIMR,CAtBW,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MACxB,OAAOA,GAASA,EAAM/E,SAClBqB,EAAAtK,EAAA4G,cAACy/D,GAAA,EAAD,CACEC,SAAS,EACTC,YAAY,EACZC,YAAY,EACZx4D,MAAOA,0CCgDF1F,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAnDO,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MAAW5E,EACTC,oBAAS,GADAC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC1BqI,EAD0BnI,EAAA,GACpB07C,EADoB17C,EAAA,GAE/B,OACIgB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMk+C,GAAQ,IAAOz+C,UAAWkL,EAAO,yBAA2B,kBAAhF,MAEFnH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZkL,GAAQnH,EAAAtK,EAAA4G,cAAA,OACPE,QAAS,SAACxD,GACNA,EAAE+J,kBACF23C,GAAQ,IAEHz+C,UAAU,cALZ,KAMT+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QAAf,OAGCkL,GAAQnH,EAAAtK,EAAA4G,cAAA,WACT0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,UAGA+D,EAAAtK,EAAA4G,cAAC2hE,GAAA,EAAD,CAAkB3gE,gBAAiBoG,EAAMpG,gBAAiBoG,MAAOA,IACjE1D,EAAAtK,EAAA4G,cAAC4hE,GAAA,EAAD,CAAmB/sE,KAAK,mBAAmBoS,UAAWG,EAAMy6D,0BAC3Dz6D,EAAMwU,iBAAmBwd,KACzB11B,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAM4hE,YAAmB16D,IAAQzH,UAAU,4BAAzD,iCAGAyH,EAAMwU,iBAAmBwd,KACzBhyB,EAAM26D,cAAc,IACpB36D,EAAM26D,cAAc,GAAGC,iBACvBt+D,EAAAtK,EAAA4G,cAACmT,GAAA,EAAD,CAAuBlM,UAAWG,EAAM26D,cAAc,GAAGC,gBACzDntE,KAAK,SACLue,KAAM,IACNC,IAAK,IACkBC,KAAM,GAC7BtS,gBAAiBoG,EAAMpG,sBCnC5B4P,GAAS,IAAI1J,QA+BJxF,YAXS,SAACC,EAAO1C,GAC9B,MAAO,CACH+5B,SAAU/5B,EAAMmI,MAAM4xB,WAID,SAAC92B,GAC1B,MAAO,IAIMR,CA7BM,SAAAzI,GAAuB,IAArB+/B,EAAqB//B,EAArB+/B,SAAU5xB,EAAWnO,EAAXmO,MAC7B,OACI1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,SAAf,UAGCq5B,EACAt1B,EAAAtK,EAAA4G,cAAC+5D,EAAA,EAAD,CACE3yD,MAAOA,EACP+kD,WAAYv7C,GAAOiB,iBAAiBzK,GACpC4yD,eAAe,IACjBt2D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMshE,YAAep6D,IAAQzH,UAAU,iBAArD,4BCqBI+B,eAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHrK,GAAIqK,EAAMmI,MAAMxS,GAChBC,KAAMoK,EAAMmI,MAAMvS,OAIG,SAACqN,GAC1B,MAAO,IAIMR,CA5BW,SAAAzI,GAAa,IAAXmO,EAAWnO,EAAXmO,MACxB,OACI1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACb+D,EAAAtK,EAAA4G,cAACiiE,EAAD,CAAiB76D,MAAOA,IAExB1D,EAAAtK,EAAA4G,cAACkiE,GAAD,CAAsB96D,MAAOA,IAG7B1D,EAAAtK,EAAA4G,cAACmiE,GAAD,CAAqB/6D,MAAOA,IAC3B1D,EAAAtK,EAAA4G,cAACoiE,GAAD,CAAiBh7D,MAAOA,IAEzB1D,EAAAtK,EAAA4G,cAACqiE,GAAD,CAAej7D,MAAOA,kBCIjB1F,wBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CArBO,SAAAzI,GAAgB,IAAd2hE,EAAc3hE,EAAd2hE,SAChB0H,EAAQ,GAOZ,OANI1H,EAAS/0D,OAAS44B,KAClB6jC,EAAMttE,KAAK0O,EAAAtK,EAAA4G,cAACuiE,GAAA,EAAD,CAAkBtiE,IAAK,EAAG+3C,QAAS4iB,KAGlD0H,EAAMttE,KAAK0O,EAAAtK,EAAA4G,cAACu/D,GAAD,CAAqBjjC,QAASs+B,KAElC0H,yBC6CI5gE,eAlBS,SAACC,EAAO1C,GAC5B,MAAO,CACHwU,SAAU9R,EAAM6gE,MAAM1xD,mBAAmB7R,EAAM+D,OAAOpO,IACtD6tE,mBAAoB9gE,EAAM6gE,MAAMC,mBAAmBxjE,EAAM+D,OAAOpO,IAChE8tE,YAAa/gE,EAAM6gE,MAAME,YAAYzjE,EAAM+D,OAAOpO,IAClD+tE,aAAchhE,EAAM6gE,MAAMI,WAAW3jE,EAAM+D,OAAOpO,MAI/B,SAACsN,EAAUjD,GACpC,MAAO,CACD4jE,gBAAiB,SAAAn+D,GAAC,OAAIxC,EAAS4gE,aAAoB7jE,EAAM+D,OAAOpO,GAAI8P,KACpEq+D,eAAgB,SAAAr+D,GAAC,OAAIxC,EAAS8gE,aAAqB/jE,EAAM+D,OAAOpO,GAAI8P,KACpEsP,YAAa,SAAAtP,GAAC,OAAIxC,EAAS+gE,aAA4BhkE,EAAM+D,OAAOpO,GAAI8P,KACxEw+D,sBAAuB,SAAAx+D,GAAC,OAAIxC,EAASihE,aAA4BlkE,EAAM+D,OAAOpO,GAAI8P,OAI3EhD,CAlDI,SAAAzI,GAUb,IATF+J,EASE/J,EATF+J,OAEA+/D,GAOE9pE,EARF4pE,gBAQE5pE,EAPF8pE,gBACA/uD,EAME/a,EANF+a,YACAkvD,EAKEjqE,EALFiqE,sBAKEE,EAAAnqE,EAJFwa,gBAIE,IAAA2vD,EAJO,GAIPA,EAHFX,EAGExpE,EAHFwpE,mBACAC,EAEEzpE,EAFFypE,YACAC,EACE1pE,EADF0pE,aAEA,OACIj/D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAACqjE,GAAA,EAAD/vE,OAAA0hE,GAAA,EAAA1hE,CAAA,CACEgwE,iBAAkB,kBAAM,GACxBZ,YAAaA,EACbK,eAAgBA,EAChBQ,aAAcZ,EACd3uD,YAAaA,EACb4jC,UAAU,EACV6qB,mBAAoBA,EACpBS,sBAAuBA,EACvBzvD,SAAUA,EACVzQ,OAAQA,GAVV,cAWegR,QCFZtS,wBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA5BK,SAAAzI,GAAc,IAAZ+J,EAAY/J,EAAZ+J,OACdiO,EAAU,GACd,OAAQjO,EAAOnO,MACf,IAAK,mBACDoc,EAAWvN,EAAAtK,EAAA4G,cAACwjE,GAAD,CAAYxgE,OAAQA,IAGnC,OACIU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZqD,EAAOygE,eACP//D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACZqD,EAAOygE,eAEVxyD,MC6BIvP,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAtCM,SAAAzI,GAA+B,IAA7BsiE,EAA6BtiE,EAA7BsiE,OACf4B,GAD4ClkE,EAArB+H,gBACf,IACZ,IAAKu6D,EAAOxd,cACR,MAAO,GAEX,OAAQwd,EAAOxd,iBACf,KAAKh6B,IACDo5C,EAAQz5D,EAAAtK,EAAA4G,cAAC0jE,GAAD,CAAmBt8D,MAAOm0D,IAClC,MACJ,KAAKG,IACDyB,EAAQz5D,EAAAtK,EAAA4G,cAAC2jE,GAAD,CAAiB/H,IAAKL,IAC9B,MACJ,KAAKQ,IACDoB,EAAQz5D,EAAAtK,EAAA4G,cAAC4jE,GAAD,CAAehJ,SAAUW,IACjC,MACJ,KAAKM,IACDsB,EAAQz5D,EAAAtK,EAAA4G,cAAC6jE,GAAD,CAAcvnC,QAASi/B,IAC/B,MACJ,KAAKU,IACDkB,EAAQz5D,EAAAtK,EAAA4G,cAAC8jE,GAAD,CAAa9gE,OAAQu4D,IAGjC,OACI73D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACZw9D,wBCwGIz7D,gBAtBS,SAACC,EAAO1C,GAE5B,MAAO,CACHy+B,gBAFW/7B,EAAM26B,QAAQoB,gBAGzB7yB,KAAMlJ,EAAMg+B,QAAQokC,gBACpBzuD,cAAe3T,EAAMoxC,SAASrJ,uBAC9Bm3B,oBAAqBl/D,EAAMg+B,QAAQkhC,oBACnCmD,iBAAkBriE,EAAM26B,QAAQ0nC,iBAChCjsD,OAAQpW,EAAM8zB,SAASwuC,mBACvBC,YAAaviE,EAAM+2D,QAAQwL,YAC3B/8D,cAAelI,EAAM+B,iBAAmB/B,EAAM+B,gBAAgB4mC,qBAI3C,SAAC1lC,GAC1B,MAAO,CACH8V,UAAW,SAAAtT,GAAC,OAAIxC,EAASiiE,aAAsBz/D,KAC/C05B,mBAAoB,SAAA15B,GAAC,OAAIxC,EAASk8B,aAAmB15B,KACrDu8D,uBAAwB,SAAAv8D,GAAC,OAAIxC,EAAS++D,aAAuBv8D,OAIpDhD,CArHM,SAAAzI,GAcf,IAbFmlC,EAaEnlC,EAbFmlC,mBACA6iC,EAYEhoE,EAZFgoE,uBACA+C,EAWE/qE,EAXF+qE,iBACAn5D,EAUE5R,EAVF4R,KACA7J,EASE/H,EATF+H,gBAEA08B,GAOEzkC,EARF68B,SAQE78B,EAPFykC,iBACAv2B,EAMElO,EANFkO,cACAmO,EAKErc,EALFqc,cACA0C,EAIE/e,EAJF+e,UACAD,EAGE9e,EAHF8e,OACAmsD,EAEEjrE,EAFFirE,YACArD,EACE5nE,EADF4nE,oBAEIt8D,EAAMC,mBAEVlB,oBAAU,WACFgS,GAAiBA,EAAcrgB,OAAS,GACxC+iB,EAAU,UAEf,CAACA,EAAW1C,IAEfhS,oBAAU,WACFo6B,GAAmBA,EAAgB1E,UACnChhB,EAAU,UAEf,CAACA,EAAW0lB,IAEfp6B,oBAAU,WACDo6B,GACDujC,OAAuB/sE,IAE5B,CAACwpC,IAEJp6B,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWs3D,GAC5B,kBAAMv3D,OAAOE,oBAAoB,UAAWq3D,KACpD,CAACpsD,EAAWD,IAEf,IAAMqsD,EAAQrhE,sBAAY,SAACrG,GACE,UAArBA,EAAEoJ,OAAO2P,SACY,aAArB/Y,EAAEoJ,OAAO2P,SAIC,QAAV/Y,EAAEuD,KAAiBvD,EAAE2nE,UACrBrsD,EAAqB,UAAXD,EAAqB,WAAa,UAEjD,CAACC,EAAWD,IAEf,IAAKlN,EACD,MAAO,GAIX,IAAIlL,EAAY+9B,EAAkB,iBAAmB3lB,EAAS,gBAC9D,OAAImsD,EAEIxgE,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAWA,GACxB+D,EAAAtK,EAAA4G,cAACskE,EAAD,CAAetjE,gBAAiBA,KAInC,CACH6/D,GAAuBnjC,GAAmBA,EAAgBqgB,kBAAoBh6B,KAC1ErgB,EAAAtK,EAAA4G,cAACukE,EAAD,CAAkBn9D,MAAOs2B,IAC7Bh6B,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAK5E,UAAWA,GACvB+9B,GAAmBh6B,EAAAtK,EAAA4G,cAACwkE,GAAA,EAAD,CACEloC,QAASoB,EACTmgB,SAAqB,aAAX9lC,EACVA,OAAQA,EAAQC,UAAWA,EAC3BpU,QACE85B,GAAmBA,EAAgB1E,SAC7B,CAAC,SACL,CAAC,QAAS,cACnC0E,GAAmBh6B,EAAAtK,EAAA4G,cAACykE,EAAD,CAAmBlJ,OAAQ79B,IAC9C18B,IAAoB08B,GAAmBh6B,EAAAtK,EAAA4G,cAACw+C,EAAA,EAAD,CAAoBx9C,gBAAiBA,IAC5E08B,GAA8B,UAAX3lB,EAAqBrU,EAAAtK,EAAA4G,cAAC0kE,GAAD,CAAcnJ,OAAQ79B,EAAiB18B,gBAAiBA,IAC9F08B,GAAmBh6B,EAAAtK,EAAA4G,cAAC2kE,GAAA,EAAD,CAAiBpJ,OAAQ79B,EAAiB18B,gBAAiBA,IACjF0C,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMk+B,EAAmBj3B,IAClCxH,UAAU,0BAA0BqB,IAAoB08B,GAAmBv2B,GAC5EzD,EAAAtK,EAAA4G,cAACy7D,EAAD,CAAkBr0D,MAAOD,KAEzBnG,IAAoB08B,GACjBh6B,EAAAtK,EAAA4G,cAAC4kE,EAAD,CAAqB5jE,gBAAiBA,IACzCA,IAAoB08B,GAAmB18B,EAAgBY,QACvDZ,EAAgBY,OAAO3M,OAAS,GAAKyO,EAAAtK,EAAA4G,cAAC6kE,EAAD,CAAO7jE,gBAAiBA,IAC7DgjE,GAAoBtgE,EAAAtK,EAAA4G,cAACykE,EAAD,CAAmBlJ,OAAQyI,IACjDA,GAA+B,UAAXjsD,EAAqBrU,EAAAtK,EAAA4G,cAAC0kE,GAAD,CAAcnJ,OAAQyI,EAAkBhjE,gBAAiBA,IAAsB,4qBCzF3H8jE,0CACF,SAAAA,EAAY7lE,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAsxE,IACfhxE,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAEDukB,cAAgB1vB,EAAK0vB,cAAcC,KAAnBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IACrBA,EAAKk1C,MAAQl1C,EAAKk1C,MAAMvlB,KAAXnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IAJEA,2CAOnB,WACIN,KAAKyL,MAAMkpC,iBAAgB,GAC3B30C,KAAKyL,MAAMopC,mBAAmB08B,kCAGlC,SAAchtD,GACVvkB,KAAKw1C,QACDjxB,IAAWgtD,KACXvxE,KAAKyL,MAAMkpC,iBAAgB,GAG/B30C,KAAKyL,MAAMopC,mBAAmBtwB,oCAGlC,WACI,OAAOvkB,KAAKyL,MAAM+lE,sCAGtB,WAAS,IAAAjvE,EAAAvC,KACD45C,EAAiB55C,KAAKyxE,oBAC1B,OACIvhE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAACklE,EAAD,CACE/kE,YAAa,kBAAMpK,EAAKkJ,MAAMmB,kBAAkB+kE,MAChD7kE,aAAc,kBAAMvK,EAAKkJ,MAAMmB,uBAAkBlM,IACjDkxE,QAAS5xE,KAAKw1C,MACd9oC,QAAS1M,KAAKgwB,cACd6hD,cAAe7xE,KAAKyL,MAAMomE,cAC1BttD,OAAQgtD,IACR33B,eAAgBA,IAAmB23B,KAAUvxE,KAAKyL,MAAMqmE,iBAAmBP,SAAS7wE,EACpFW,KAAK,WACP6O,EAAAtK,EAAA4G,cAACklE,EAAD,CACE/kE,YAAa,kBAAMpK,EAAKkJ,MAAMmB,kBAAkBmlE,MAChDjlE,aAAc,kBAAMvK,EAAKkJ,MAAMmB,uBAAkBlM,IACjDkxE,QAAS5xE,KAAKw1C,MACd9oC,QAAS1M,KAAKgwB,cACd6hD,cAAe7xE,KAAKyL,MAAMomE,cAC1BttD,OAAQytD,IAAap4B,eAAgBA,EAAgBv4C,KAAK,gBAC9D6O,EAAAtK,EAAA4G,cAACklE,EAAD,CACI/kE,YAAa,kBAAMpK,EAAKkJ,MAAMmB,kBAAkBqlE,MAChDnlE,aAAc,kBAAMvK,EAAKkJ,MAAMmB,uBAAkBlM,IACjDkxE,QAAS5xE,KAAKw1C,MACd9oC,QAAS1M,KAAKgwB,cACd6hD,cAAe7xE,KAAKyL,MAAMomE,cAC1BttD,OAAQkqC,IAAW7U,eAAgBA,EAAgBv4C,KAAK,aAC5D6O,EAAAtK,EAAA4G,cAACklE,EAAD,CACI/kE,YAAa,kBAAMpK,EAAKkJ,MAAMmB,kBAAkBqlE,MAChDnlE,aAAc,kBAAMvK,EAAKkJ,MAAMmB,uBAAkBlM,IACjDkxE,QAAS5xE,KAAKw1C,MACd9oC,QAAS1M,KAAKgwB,cACd6hD,cAAe7xE,KAAKyL,MAAMomE,cAC1BttD,OAAQ2tD,IAAOt4B,eAAgBA,EAAgBv4C,KAAK,kBA3D3C4M,aAiEnBkkE,wJACF,WACI,OAAOnyE,KAAKyL,MAAMmuC,iBACd55C,KAAKyL,MAAM8Y,8BAGnB,WACQvkB,KAAK6S,aACL7S,KAAKyL,MAAMmmE,UAEX5xE,KAAKyL,MAAMiB,QAAQ1M,KAAKyL,MAAM8Y,8BAGtC,WAAS,IAAA3hB,EAAA5C,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEG,YAAa3M,KAAKyL,MAAMkB,YACxBG,aAAc9M,KAAKyL,MAAMqB,aACzBJ,QAAS,kBAAM9J,EAAK8J,WACpBP,UAAWnM,KAAK6S,aAAe,sBAAwB,cACtD7S,KAAKyL,MAAMpK,KACXrB,KAAK6S,eAAiB7S,KAAKyL,MAAMomE,cAAgB3hE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBAA2B,WArBlF8B,aA2CTC,cARS,SAAAC,GACpB,MAAO,CACH2jE,iBAAkB3jE,EAAMM,UAAUqjE,iBAClCN,gBAAiBrjE,EAAMM,UAAU+iE,kBAXd,SAAA9iE,GACvB,MAAO,CACHimC,gBAAiB,SAAAC,GAAC,OAAIlmC,EAASimC,aAAgBC,KAC/CC,mBAAoB,SAAAD,GAAC,OAAIlmC,EAASmmC,aAAmBD,KACrDhoC,kBAAmB,SAAAgoC,GAAC,OAAIlmC,EAAS9B,aAAkBgoC,OAY5C1mC,CAA6CojE,ufCO7Cc,0CAjIX,SAAAA,EAAY3mE,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAoyE,IACf9xE,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACTkkE,aAAa,EACbC,cAAe,GACfC,aAAc,GACdC,YAAY,GAPDlyE,wFAWnB,SAAAwF,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACIzG,KAAKmpB,SAAS,CACVkpD,aAAa,IAFrB,wBAAA9rE,EAAA2B,SAAApC,EAAA9F,yFAMA,WACI,GAAIA,KAAKmO,MAAMqkE,WACXxyE,KAAKyL,MAAM9E,SAASsyB,OAAOw5C,yBACvBzyE,KAAKyL,MAAM6xB,OAAOl8B,SAEvB,IAAK,IAAIyC,KAAK7D,KAAKmO,MAAMokE,aAAc,CAClC,IAAInsE,EAASpG,KAAKmO,MAAMokE,aAAa1uE,GAAGuC,OACpCssE,EAAW1yE,KAAKyL,MAAM6xB,OAAOl8B,GACjCpB,KAAKyL,MAAMyxB,QAAQy1C,YACfD,EAAUtsE,GAItBpG,KAAKw1C,QACLx1C,KAAKyL,MAAMmnE,+BAGf,WACI5yE,KAAKmpB,SAAS,CACVkpD,aAAa,EACbE,aAAc,GACdD,cAAe,GACfE,YAAY,gCAIpB,SAAajrE,GACTvH,KAAKmpB,SAAS,CAACopD,aAAcvyE,KAAKmO,MAAMokE,aAAargE,OAAO,CAAC3K,oCAGjE,WACI,IAAI6I,EAAU,GACd,IAAK,IAAIvM,KAAK7D,KAAKmO,MAAMmkE,cAAe,CACpC,IAAI/qE,EAAOvH,KAAKmO,MAAMmkE,cAAczuE,GACpCuM,EAAQ5O,KAAK,CAACT,MAAOwG,EAAK42B,SAAUr1B,MAAOvB,IAG/C,OAAO6I,2BAGX,WACIpQ,KAAKw1C,QACLx1C,KAAKyL,MAAMmnE,8CAGf,SAAqBtkD,GACjBtuB,KAAKmpB,SAAS,CAACqpD,YAAaxyE,KAAKmO,MAAMqkE,mCAG3C,WAAS,IAAAjwE,EAAAvC,KACDqB,OAA6BX,IAAtBV,KAAKyL,MAAM6xB,OAAuBt9B,KAAKyL,MAAM6xB,OAAOj8B,KAAO,GACtE,OAAIrB,KAAKmO,MAAMkkE,YAEPniE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAD,CAAOC,gBAAgB,eAAe1zC,KAAMrX,KAAKyL,MAAM4L,KAAMwvC,OAAQ7mD,KAAKyL,MAAMmnE,SAClF1iE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAM+nB,OAAP,CAAcC,aAAW,GACvB5iE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMioB,MAAP,KAAc1xE,IAEhB6O,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMkoB,KAAP,KACE9iE,EAAAtK,EAAA4G,cAAC2D,EAAAvK,EAAD,CACIuG,UAAU,GACViE,QAASpQ,KAAKizE,iBACd3iE,SAAU,SAAC6nB,GAAD,OAAO51B,EAAK2wE,aAAa/6C,EAAErvB,QACrCA,WAAOpI,EACP6P,YAAY,qBAEbvQ,KAAKmO,MAAMokE,aAAavxE,IAAI,SAAAuG,GAAI,OAAI2I,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,KAAQhmB,EAAK42B,YAChDjuB,EAAAtK,EAAA4G,cAAA,YACA0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gCACb+D,EAAAtK,EAAA4G,cAAA,aACE0D,EAAAtK,EAAA4G,cAAA,SACO6F,KAAK,WACLvJ,MAAM,QACNy7C,QAASvkD,KAAKmO,MAAMqkE,WACpBliE,SAAU,SAACpH,GAAD,OAAO3G,EAAK4wE,qBAAqBjqE,EAAEoJ,OAAOxJ,UAL7D,mCAWRoH,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMsoB,OAAP,KACEljE,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAQ8lD,QAAQ,YAAY3mE,QAAS,kBAAMnK,EAAK+wE,iBAAhD,OAGIpjE,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAQ8lD,QAAQ,UAAU3mE,QAAS,kBAAMnK,EAAKgxE,cAA9C,QAQRrjE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAD,CAAOC,gBAAgB,eAAe1zC,KAAMrX,KAAKyL,MAAM4L,KAAMwvC,OAAQ7mD,KAAKyL,MAAMmnE,SAC9E1iE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAM+nB,OAAP,CAAcC,aAAW,GACvB5iE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMioB,MAAP,KAAc1xE,IAEhB6O,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMkoB,KAAP,4EACA9iE,EAAAtK,EAAA4G,cAACs+C,EAAA,EAAMsoB,OAAP,KACEljE,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAQ8lD,QAAQ,YAAY3mE,QAAS1M,KAAKyL,MAAM+nE,YAAhD,OAGAtjE,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAQ8lD,QAAQ,UAAU3mE,QAAS1M,KAAKyL,MAAM8nE,WAA9C,MAGArjE,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAQ8lD,QAAQ,UAAU3mE,QAAS,kBAAMnK,EAAKkxE,iBAA9C,kBAzHUxlE,qeCapBylE,0CACF,SAAAA,EAAYjoE,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA0zE,GAAA3qD,EAAAC,KAAAhpB,KACVyL,mDAGV,WACIzL,KAAKyL,MAAM+B,gBAAgBmmE,sDAG/B,WACI3zE,KAAKyL,MAAM+B,gBAAgBqoC,wDAG/B,WACI71C,KAAKyL,MAAM+B,gBAAgBuoC,6DAG/B,WACI/1C,KAAKyL,MAAM+B,gBAAgBomE,mDAG/B,WACI5zE,KAAKyL,MAAM+B,gBAAgBqmE,gDAG/B,WACI7zE,KAAKyL,MAAM+B,gBAAgBsmE,sDAG/B,WACI9zE,KAAKyL,MAAM+B,gBAAgBumE,oDAG/B,WACI/zE,KAAKyL,MAAM+B,gBAAgBsoC,oDAG/B,SAAYzjC,QACK3R,IAAT2R,GAGJrS,KAAKyL,MAAMuoE,0BAA0B3hE,yBAGzC,WAAS,IAAA/R,EAAAN,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAACynE,EAAD,CACE5hE,KAAM2V,IACPjV,YAAa,SAACV,GAAD,OAAU/R,EAAKyS,YAAYV,IACvC1F,YAAa,kBAAMrM,EAAKmL,MAAMmB,kBAAkBsnE,MAChDpnE,aAAc,kBAAMxM,EAAKmL,MAAMmB,uBAAkBlM,IACjDgM,QAAS,kBAAMpM,EAAK6zE,uBACpB9yE,KAAK,uBAER6O,EAAAtK,EAAA4G,cAACynE,EAAD,CACElhE,YAAa,SAACV,GAAD,OAAU/R,EAAKyS,YAAYV,IACvCA,KAAM0V,IACNpb,YAAa,kBAAMrM,EAAKmL,MAAMmB,kBAAkBwnE,MAChDtnE,aAAc,kBAAMxM,EAAKmL,MAAMmB,uBAAkBlM,IACjDgM,QAAS,kBAAMpM,EAAK+zE,qBACpBhzE,KAAK,UACR6O,EAAAtK,EAAA4G,cAACynE,EAAD,CACElhE,YAAa,SAACV,GAAD,OAAU/R,EAAKyS,YAAYV,IACvC1F,YAAa,kBACXrM,EAAKmL,MAAMmB,kBAAkB0nE,MAC/B5nE,QAAS,kBAAMpM,EAAKi0E,6BACpBznE,aAAc,kBACZxM,EAAKmL,MAAMmB,uBAAkBlM,IAC/BW,KAAK,wBACR6O,EAAAtK,EAAA4G,cAACynE,EAAD,CACElhE,YAAa,SAACV,GAAD,OAAU/R,EAAKyS,YAAYV,IACvC1F,YAAa,kBACXrM,EAAKmL,MAAMmB,kBAAkB0nE,MAC/B5nE,QAAS,kBAAMpM,EAAKk0E,yBACpB1nE,aAAc,kBACZxM,EAAKmL,MAAMmB,uBAAkBlM,IAC/BW,KAAK,4BA7ES4M,aAkFxBwmE,oJACF,WAAS,IAAAlyE,EAAAvC,KACL,OACIkQ,EAAAtK,EAAA4G,cAAA,OACEgH,WAAS,EACTF,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBR,YAAa,kBAAMxQ,EAAKkJ,MAAMsH,YAAYxQ,EAAKkJ,MAAM4G,OACrD1F,YAAa3M,KAAKyL,MAAMkB,YACxBG,aAAc9M,KAAKyL,MAAMqB,aACzBX,UAAU,qBACV+D,EAAAtK,EAAA4G,cAAA,QACEE,QAAS1M,KAAKyL,MAAMiB,QACpBP,UAAU,0BACTnM,KAAKyL,MAAMpK,cAbG4M,aA2BhBC,cAAQ,KAPI,SAAAQ,GACvB,MAAO,CACH9B,kBAAmB,SAAC8nE,GAAD,OAAUhmE,EAAS9B,aAAkB8nE,KACxDV,0BAA2B,SAAC3hE,GAAD,OAAU3D,EAASslE,aAA0B3hE,OAIjEnE,CAAkCwlE,0DCzDlCxlE,cAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH2mC,WAAYjkC,EAAM+lC,SAASC,mBAC3B7W,OAAQ7xB,EAAMq9B,SAAWr9B,EAAMq9B,QAAQxL,OACvCj8B,KAAMoK,EAAMq9B,SAAWr9B,EAAMq9B,QAAQznC,OAIhB,SAACqN,GAC1B,MAAO,CACHimE,qBAAsB,SAAAzjE,GAAC,OAAIxC,EAASimE,aAAqBzjE,OAIhDhD,CA9DQ,SAAAzI,GAAiD,IAA/CqjC,EAA+CrjC,EAA/CqjC,QAAS6rC,EAAsClvE,EAAtCkvE,qBAAsBviC,EAAgB3sC,EAAhB2sC,WAC9CsY,EAAan7C,sBAAY,WAC3BolE,EAAqB7rC,IACtB,CAACA,IAEC8rC,EAAyB9rC,EAAzB8rC,UAAWC,EAAc/rC,EAAd+rC,WAKhB,OAJI/rC,EAAQt5B,SACRolE,GAAa9rC,EAAQt5B,OAAOolE,UAC5BC,GAAc/rC,EAAQt5B,OAAOqlE,YAG7B3kE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACZ28B,EAAQz2B,OAAS44B,KACjB/6B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAkB+D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,UAAhB,WAEnC+D,EAAAtK,EAAA4G,cAACuiE,EAAA,EAAD,CAAkBvqB,QAAS1b,KAG7BA,EAAQgsC,UACR5kE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAkB+D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,UAAU28B,EAAQznC,OAErE6O,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,WACWyoE,GAEX1kE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,YACY0oE,GAEZ3kE,EAAAtK,EAAA4G,cAAA,OACEE,QAASg+C,EACT38C,IAAI,mBAAmB5B,UAAU,sBAGvC28B,EAAQuiC,OAASn7D,EAAAtK,EAAA4G,cAACuoE,EAAA,EAAD,CAAU3M,IAAKt/B,KAC7BA,EAAQuiC,OAASviC,EAAQz2B,OAAS44B,KACpC/6B,EAAAtK,EAAA4G,cAACg0B,EAAA,EAAD,CACEw0C,YAAa,GACblsC,QAASA,EACTlM,QAASkM,EAAQxL,OACjB8U,WAAYA,EACZ//B,KAAMy2B,EAAQhhB,4fCbXmtD,0CAlCX,SAAAA,EAAYxpE,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAi1E,IACf30E,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IACD0C,MAAQ,GAGb7N,EAAK40E,YALU50E,qFAQnB,SAAAwF,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAG,GACI1G,KADJuG,EAAAE,KAAA,EAEsBE,IAASwuE,UAF/B,OAAA5uE,EAAA6uE,GAAA7uE,EAAAM,KAAAN,EAAA8uE,GAAA,CAEQjvE,OAFRG,EAAA6uE,IAAA7uE,EAAAG,GACSyiB,SADTH,KAAAziB,EAAAG,GAAAH,EAAA8uE,IAAA,wBAAA9uE,EAAA2B,SAAApC,EAAA9F,mFAMA,WACI,QAA0BU,IAAtBV,KAAKmO,MAAM/H,OACX,OAAQ8J,EAAAtK,EAAA4G,cAAA,YAGZ,IACIi5C,EAAW,CACXrkD,GAFcpB,KAAKyL,MAAM+B,gBAAgBgoD,iBAK7C,OACItlD,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAACw4C,EAAA,EAAD,CACE5+C,OAAQpG,KAAKmO,MAAM/H,OACnBq/C,SAAUA,YA7BGx3C,gECDzBi1B,GAAQ,EAqCGh1B,eAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CApCI,SAAAzI,GAAgB,IAAd6K,EAAc7K,EAAd6K,SAActB,EACLC,mBAAS,IADJC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxBlG,EADwBoG,EAAA,GACjBE,EADiBF,EAAA,GAGzBomE,EAAY/lE,sBAAY,SAACrG,GAC3B,IAAIqsE,EAAQrsE,EAAEoJ,OAAOxJ,MACrBsG,EAASmmE,GACT,IAAItxC,IAAcf,GAClBzc,WAAW,WACHwd,IAAaf,IACjB5yB,EAASilE,IACV,MACJ,CAACnmE,EAAUkB,IAERklC,EAAQjmC,sBAAY,WACtBH,EAAS,IACTkB,EAAS,KACV,CAACA,EAAUlB,IAEd,OACIc,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,yBACb+D,EAAAtK,EAAA4G,cAAA,SAAO+D,YAAY,iBAAiBD,SAAUglE,EAAWjjE,KAAK,OAAOlG,UAAU,cAAcrD,MAAOA,IACpGoH,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS8oC,EAAOrpC,UAAU,aAA/B,soCCXV,IAgJe+B,eAtBS,SAACC,EAAO1C,GAC5B,IACImI,EADkBzF,EAAMM,UAAUjB,gBACT4mC,mBACzBvhC,EAAa1E,EAAMqnE,MAAMC,eAAiBhqE,EAAMtF,KACpD,MAAO,CACHuvE,UAAWvnE,EAAMqnE,MAAMG,YACnBxnE,EAAMqnE,MAAMG,WAAW7uE,WAAa2E,EAAMtF,KAAKW,SACnD8uE,cAAehiE,GAASA,EAAM0pB,OAC9BzqB,aACAgjE,mBAAoBhjE,EAAa1E,EAAM+lC,SAAS2hC,wBAAqBn1E,IAIlD,SAACgO,GAC1B,MAAO,CACHonE,cAAe,SAAA5kE,GAAC,OAAIxC,EAASonE,aAAc5kE,KAC3C6kE,gBAAiB,SAAA7kE,GAAC,OAAIxC,EAASqnE,aAAgB7kE,KAC/C2xC,mBAAoB,SAAA3xC,GAAC,OAAIxC,EAASm0C,aAAmB3xC,KACrD8kE,sBAAuB,SAAA9kE,GAAC,OAAIxC,EAASsnE,aAAsB9kE,OAIlDhD,CAhJK,SAAAzI,GAed,IAdF+H,EAcE/H,EAdF+H,gBACArH,EAaEV,EAbFU,KACA08C,EAYEp9C,EAZFo9C,mBACAkzB,EAWEtwE,EAXFswE,gBACAjuE,EAUErC,EAVFqC,KACAmN,EASExP,EATFwP,MACA6gE,EAQErwE,EARFqwE,cACAJ,EAOEjwE,EAPFiwE,UACAv3C,EAME14B,EANF04B,SACAtrB,EAKEpN,EALFoN,WACA+iE,EAIEnwE,EAJFmwE,cACAC,EAGEpwE,EAHFowE,mBACAG,EAEEvwE,EAFFuwE,sBACAtoC,EACEjoC,EADFioC,UAGI38B,EAAMC,sBAAOtQ,GAFfsO,EAG0BC,wBAASvO,GAHnCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAGGiZ,EAHH/Y,EAAA,GAGYw0B,EAHZx0B,EAAA,GAAAuG,EAI0BxG,wBAASvO,GAJnCgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAIGynB,EAJHxnB,EAAA,GAIY+7B,EAJZ/7B,EAAA,GAMFyuC,aAAY,CAACpzC,MAAK28B,YAAWvoB,UAAWtS,EAAYykC,UAAW,MAE/D,IAAM2+B,EAAa1mE,sBAAY,WAC3B/B,EAAgBwG,mBAAmBkiE,eAAepuE,EAAKsgE,IAAKtgE,EAAK8pC,KAClE,CAAC9pC,IAEEquE,EAAc5mE,sBAAY,WAC5BumE,EAAch2E,OAAAsa,EAAA,EAAAta,CAAA,GACNgI,EACA3B,EAFK,CAGT8hB,UACAiV,cAEL,CAACp1B,EAAMo1B,EAASjV,EAAS9hB,IAE5B2J,oBAAU,WACN,GAAKhI,EAAL,CACA,IAFYsyB,EAER+c,EAAW,GACXi/B,EAAW,GAHH/7C,EAAA3xB,GAIGZ,EAAKmgB,SAJR,IAIZ,IAAAoS,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAA6B,KAApBzH,EAAoBg5B,EAAAtxB,MACzB,KAAI3C,EAAKkwE,iBACLlwE,EAAKkwE,gBAAgB50E,OAAS,IAC7B0E,EAAKkwE,gBAAgB7xE,SAASpD,GAFnC,CAKA,IAAImmB,EAAS,IAAIsb,KAAOzhC,GACxBg1E,EAAS50E,KAAK+lB,EAAOub,QACrBqU,EAAS31C,KAAK+lB,KAZN,MAAA5lB,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAiBZ,GAHA5I,QAAQ+1E,IAAIF,GAAUx1E,KAClB,SAAAsQ,GAAC,OAAIwyB,EAAWyT,KAEhBrvC,EAAKo1B,QAAS,CACd,IAAIq5C,EAAWzuE,EAAKo1B,QAChB/2B,EAAKkwE,iBAAmBlwE,EAAKkwE,gBAAgB50E,OAAS,IACtD80E,EAAWA,EAASvkE,OAChB,SAAA2E,GAAC,OAAIxQ,EAAKkwE,gBAAgB7xE,SAASmS,MAE3C6/D,aAAeD,GACV31E,KAAK6wC,MAEf,CAAC3pC,EAAM3B,IAEV,IAAIgG,EAAY,uBACZupE,IACAvpE,GAAa,YAEb0G,IACA1G,GAAa,aAGjB2D,oBAAU,WACNimE,EAAgB5vE,IACjB,IAEH,IAAIswE,EAAoBb,GAAiBA,EAAch4C,YACvD,OACI1tB,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLgC,YACI,kBACI8vC,EAAmB56B,IAE3B1N,YAAa,kBAAMw7D,EAAgB5vE,IACnCqN,WAAW,EACXyB,MAAOA,EACP9I,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,gBAAgBhG,EAAK9F,QAEpD6P,EAAAtK,EAAA4G,cAAA,OAAKE,QAASypE,EAAahqE,UAAU,iBAArC,OAGA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZrE,EAAKuK,OAAS61D,KAAMh4D,EAAAtK,EAAA4G,cAAA,OACEE,QAASupE,EACT9pE,UAAU,aAFZ,gBAE6C,GAChE8b,EAKDA,EAAQjnB,IACJ,SAACkQ,EAAGrN,GAAJ,OAAUqM,EAAAtK,EAAA4G,cAACkqE,GAAA,EAAD,CACEC,aAAc,kBAAMX,EAAsBnyE,IAC1CshB,UAAW0wD,EAAqB5tD,EAAQxmB,SAAWoC,EAAG6xE,WAAW,EAAOnuD,OAAQrW,MARrFhB,EAAAtK,EAAA4G,cAACgyC,GAAA54C,EAAD,CACE64C,SAAU,KACVt3C,KAAM,GACNiX,MAAO,YAMpB8e,EACAA,EAAQl8B,IAAI,SAAAkQ,GAAC,OAAIhB,EAAAtK,EAAA4G,cAACkqE,GAAA,EAAD,CACEvxD,UAAWjU,EAAE0sB,cAAgB64C,EAAmBf,WAAW,EAAOp4C,OAAQpsB,MAAQ,IAEvGpJ,GAA6B,KAArBA,EAAKu8D,YACbn0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZrE,EAAKu8D,aACC,GACTn0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZgyB,MCxHR/gB,GAAS,IAAI1J,KA0EJxF,eAZS,SAACC,EAAO1C,GAE5B,MAAO,CACHoH,WAFa1E,EAAMqnE,MAAMC,eAAiBhqE,EAAMtF,OAM7B,SAACuI,GAC1B,MAAO,IAIMR,CAxEI,SAAAzI,GAAoD,IAAlDU,EAAkDV,EAAlDU,KAAM0M,EAA4CpN,EAA5CoN,WAAY66B,EAAgCjoC,EAAhCioC,UAAWlgC,EAAqB/H,EAArB+H,gBAC1CuD,EAAMC,sBAAOtQ,GADkDsO,EAErCC,mBAAS,IAF4BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAE9DmvB,EAF8DjvB,EAAA,GAEpDkvB,EAFoDlvB,EAAA,GAAAuG,EAG7CxG,wBAASvO,GAHoCgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAG9D3N,EAH8D4N,EAAA,GAGxDkhE,EAHwDlhE,EAAA,GAAAG,EAIvC5G,oBAAS,GAJ8B6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAI9Do3B,EAJ8Dn3B,EAAA,GAIrDo3B,EAJqDp3B,EAAA,GAMnEquC,aAAY,CAACzW,YAAW38B,MAAKoU,UAAWtS,EAAYykC,UAAW,MAE/DxnC,oBAAU,WACNnJ,IAAS63B,MAAMC,YAAYt4B,EAAKoB,MAAM3G,KAAKw9B,GAC3C/yB,KAAK2K,QAAQ7P,EAAKW,UAAUlG,KAAKg2E,IAClC,IAEH,IAAI3hE,EAAQ,CACRkJ,gBAAiBf,GAAOmB,gBAAgBpY,EAAK9F,QAGjDyP,oBAAU,WAMN,OALI+C,EACAwG,OAAOC,iBAAiB,UAAWrH,GAEnCoH,OAAOE,oBAAoB,UAAWtH,GAEnC,kBAAMoH,OAAOE,oBAAoB,UAAWtH,KACpD,CAACi7B,EAAYr6B,EAAYo6B,IAE5B,IAAMh7B,EAAY1C,sBAAY,SAACrG,GACb,UAAVA,EAAEuD,MAAoBwgC,GAAWp6B,GACjCq6B,GAAW,IAEhB,CAACr6B,EAAYo6B,EAASC,IAUzB,OARAp9B,oBAAU,WACF3J,EAAKkwE,gBACLnpC,GAAW,GAEXA,GAAW,IAEhB,CAAC/mC,EAAM+mC,IAEND,EAEI/8B,EAAAtK,EAAA4G,cAACqqE,GAAD,CACErpE,gBAAiBA,EACjBkgC,UAAWA,EAAWz4B,MAAOA,EAAO9O,KAAMA,EAAM2B,KAAMA,EAAMq2B,SAAUA,IAI5EjuB,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAKkE,MAAOA,EAAOvI,QAAS,kBAAMwgC,GAAW,IAClD/gC,UAAW0G,EAAa,uBAAyB,eACpD3C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACb+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,cAAcgyB,IAE7CjuB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAoBhG,EAAK9F,qBCoCrC6N,eAfS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,aAChCytC,aAActnE,EAAMqnE,MAAMC,eAIL,SAAC/mE,GAC1B,MAAO,CACHqnE,gBAAiB,SAAA7kE,GAAC,OAAIxC,EAASqnE,aAAgB7kE,KAC/C8kE,sBAAuB,SAAA9kE,GAAC,OAAIxC,EAASsnE,aAAsB9kE,OAIlDhD,CA3FO,SAAAzI,GAOhB,IANF+H,EAME/H,EANF+H,gBACAwoE,EAKEvwE,EALFuwE,sBACAD,EAIEtwE,EAJFswE,gBACAN,EAGEhwE,EAHFgwE,aACAhhD,EAEEhvB,EAFFgvB,cACAuT,EACEviC,EADFuiC,aACEh5B,EACkCC,mBAAS,IAD3CC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACK1H,EADL4H,EAAA,GACiB4nE,EADjB5nE,EAAA,GAAAuG,EAEwBxG,mBAAS,IAFjCyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEK+/D,EAFL9/D,EAAA,GAEYqhE,EAFZrhE,EAAA,GAAAG,EAGwC5G,wBAASvO,GAHjDoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAGKmhE,EAHLlhE,EAAA,GAGoBmhE,EAHpBnhE,EAAA,GAIE/E,EAAMC,sBAAOtQ,GAEjBoP,oBAAU,WACa,KAAfxI,EACA4vE,aAAY5vE,GAAY1G,KACpB,SAAC40E,GACGyB,EAAiBzB,KAGzByB,OAAiBv2E,IAEtB,CAAC4G,EAAY2vE,EAAkBzB,IAElC1lE,oBAAU,WACNqnE,eAAWv2E,KAAK,SAAC40E,GACbuB,EAASvB,MAEd,IAEH1lE,oBAAU,WACN,OAAO,kBAAMimE,OAAgBr1E,KAC9B,IAEH,IAAIuU,EAAQ,CACR81B,UAAW1xB,OAAO60B,YAAc,KAEhCzZ,IACAxf,EAAM81B,WAAa/C,EAAe,KAGtCl4B,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWrH,GAC5B,kBAAMoH,OAAOE,oBAAoB,UAAWtH,KACpD,CAACwjE,EAAcD,IAElB,IAAMvjE,EAAY1C,sBAAY,SAACrG,GAC3B,IAAIkuE,EAASJ,GAAiBxB,EAC9B,GAAc,cAAVtsE,EAAEuD,IAAqB,CACvB,IAAIgS,EAAQ24D,EAAOtzE,QAAQ2xE,GAC3BM,EAAgBqB,EAAOhwE,KAAKyY,IAAI,EAAEpB,EAAQ,KAC1Cu3D,EAAsB,QACnB,GAAc,eAAV9sE,EAAEuD,IAAsB,CAC/B,IAAIgS,EAAQ24D,EAAOtzE,QAAQ2xE,GAC3BM,EAAgBqB,EAAOhwE,KAAKwY,IAAIw3D,EAAO31E,OAAS,EAAGgd,EAAQ,KAC3Du3D,EAAsB,KAE3B,CAACP,EAAcD,EAAOwB,IAEzB,OACI9mE,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,4BACV+D,EAAAtK,EAAA4G,cAAC6qE,GAAD,CAAY/mE,SAAUwmE,IACtB5mE,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPlE,IAAKA,EACL5E,UAAU,eACR6qE,GAAiBxB,GAAOx0E,IACtB,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAAC8qE,GAAD,CAAY9pE,gBAAiBA,EAAiBf,IAAKyE,EAAEpK,SAAU4mC,UAAW38B,EAAK5K,KAAM+K,UClD1FhD,ICGAA,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA9BK,SAAAzI,GAAkB,IAAhB8xE,EAAgB9xE,EAAhB8xE,WAAgBvoE,EACVC,mBAAS,IADCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC7BlG,EAD6BoG,EAAA,GACtBE,EADsBF,EAAA,GAE5BowB,EAAO/vB,sBAAY,SAACrG,GACtBquE,GAAW,IACZ,CAACzuE,EAAOyuE,IACX,OACIrnE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,SAAO1D,MAAOA,EAAOwH,SAAU,SAAApH,GAAC,OAAIkG,EAASlG,EAAEoJ,OAAOxJ,QAAQyH,YAAY,eAE5EL,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBAAf,iCAGA+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS4yB,EAAMnzB,UAAU,iBAA9B,mBDcK+B,YAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACH8oE,mBAAoB,SAACtmE,GAAD,OAAOxC,EAAS8oE,aAAmBtmE,OAI9ChD,CAvBQ,SAAAzI,GAA2C,IAAzC+xE,EAAyC/xE,EAAzC+xE,mBAAoBhqE,EAAqB/H,EAArB+H,gBAC1C,OACK0C,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM8qE,GAAmB,IAClCrrE,UAAU,gBAFZ,qBAKA+D,EAAAtK,EAAA4G,cAACirE,GAAD,CAAejqE,gBAAiBA,sdEyC1C,IAAM0vB,GAAUv2B,IAASu2B,QAEzB7jB,OAAOi+B,UAAY,EACnBj+B,OAAOyiC,cAAgB,QAEjB47B,4CACF,SAAAA,EAAYjsE,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA03E,IACfp3E,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACTixD,cAAc,EACduY,iBAAiB,GAGrBr3E,EAAKs3E,mBAAqBt3E,EAAKs3E,mBAAmB3nD,KAAxBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IAC1BA,EAAKu3E,aAAev3E,EAAKu3E,aAAa5nD,KAAlBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IACpBA,EAAKw3E,gBAAkBx3E,EAAKw3E,gBAAgB7nD,KAArBnwB,OAAAowB,EAAA,EAAApwB,CAAAQ,IAVRA,gDAanB,WACI,YAA+BI,IAA3BV,KAAKyL,MAAMssE,aAIPj4E,OAAOsE,KAAKpE,KAAKyL,MAAMssE,aAC1Bt2E,OAAS,wBAKlB,WACI,IAAI0M,EAAQnO,KAAKyL,MAAM+B,gBAAgBW,MACnCyE,EAAiBzE,EAAMM,UAAUmE,gBACjCzE,EAAMU,QAAQmpE,mBAClB,GAAIplE,EAAgB,CAChB,IAAIg7D,EAAa,GAAA17D,OAAApS,OAAA2R,EAAA,EAAA3R,CAAOqO,EAAMU,QAAQ++D,eAArB,CAAoCh7D,EAAepD,SACpExP,KAAKyL,MAAM+hE,iBAAiBI,GAG5B5tE,KAAKyL,MAAMwsE,2BAAsBv3E,GACjCV,KAAKyL,MAAMysE,uBAAkBx3E,GAEjCV,KAAKyL,MAAM0sE,uBAAkBz3E,GAC7BV,KAAKyL,MAAM43B,uBAAkB3iC,GAC7BV,KAAKyL,MAAMuoE,+BAA0BtzE,GACrCV,KAAKyL,MAAM0nC,0BAAqBzyC,iCAGpC,WACIV,KAAKmpB,SAAS,CAACi2C,cAAep/D,KAAKmO,MAAMixD,4CAG7C,WACI,OAAOp/D,KAAKyL,MAAM+B,8EAKtB,SAAA1H,EAAeyhB,EAAQ6wD,EAAW/kE,EAAOglE,EAAaC,GAAtD,IAAA3kE,EAAA,OAAAhO,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OACmBzG,KAAKwN,gBAAgBY,OAAO3M,OACxC22E,GAAap4E,KAAKwN,gBAAgBY,OAAO3M,OAAS,GAC7CkS,EAAqD,MAArC3T,KAAKwN,gBAAgB4e,OAAOxY,MAC5C,EAAI5T,KAAKwN,gBAAgB4e,OAAOxY,MACpC5T,KAAKwN,gBAAgB+qE,SAAShxD,EAAQ5T,OAAejT,EAAW43E,IAEhEt4E,KAAKwN,gBAAgB+qE,SAAShxD,OAAQ7mB,EAAW2S,EAAOilE,GAPhE,wBAAA/xE,EAAA2B,SAAApC,EAAA9F,mGAWA,SAAcunB,GACV,IAAI5T,EAAqD,MAArC3T,KAAKwN,gBAAgB4e,OAAOxY,MAC5C,EAAI5T,KAAKwN,gBAAgB4e,OAAOxY,MAEpC5T,KAAKwN,gBAAgBqzB,cAActZ,EAAQ5T,GAC3C3T,KAAKyL,MAAM+sE,qBAAqBjxD,yCAKpC,WACIvnB,KAAKyL,MAAMkpC,iBAAgB,GAC3B30C,KAAKyL,MAAMopC,mBAAmB08B,wCAGlC,WACI,OAAIvxE,KAAKyL,MAAMo8B,mBAGR7nC,KAAKyL,MAAMqmE,kBACd9xE,KAAKyL,MAAM+lE,kBAAoBD,kCAGvC,WACIvxE,KAAKyL,MAAMopC,mBAAmB4Z,iCAGlC,WACIzuD,KAAKyL,MAAMopC,mBAAmB4jC,gCAGlC,WACIz4E,KAAKyL,MAAMopC,mBAAmB2Z,6CAGlC,WACIxuD,KAAKyL,MAAMopC,mBAAmBm9B,+CAGlC,WAEIhyE,KAAKwN,gBAAgBmoC,gBACrB31C,KAAKmpB,SAASnpB,KAAKmO,qCAGvB,WACInO,KAAKyL,MAAMitE,qBAAqB14E,KAAKyL,MAAMo8B,8CAG/C,SAAavK,GACTt9B,KAAKmpB,SAAS,CAACwuD,iBAAiB,EAAMgB,aAAcr7C,kCAGxD,SAAe8rB,GACXppD,KAAKmpB,SAAS,CAACwuD,iBAAiB,EAAMiB,aAAcxvB,sCAGxD,WACIppD,KAAKmpB,SAAS,CAACwuD,iBAAiB,gCAGpC,WAAe,IAAAp1E,EAAAvC,KACXA,KAAKmpB,SAAS,CAACwuD,iBAAiB,IAC5B33E,KAAKmO,MAAMwqE,aACX34E,KAAKyL,MAAM+B,gBAAgBmkC,WACvB3xC,KAAKmO,MAAMwqE,cAAc,GAE7B34E,KAAKmO,MAAMyqE,aAAaC,cAAct1E,QAClC,SAAA2qD,GAAI,OACA3rD,EAAKkJ,MAAM+B,gBAAgBmkC,WACvBuc,GAAM,oCAI1B,WAAkB,IAAAtrD,EAAA5C,KACdA,KAAKmpB,SAAS,CAACwuD,iBAAiB,IAE5B33E,KAAKmO,MAAMwqE,aACX34E,KAAKyL,MAAM+B,gBAAgBmkC,WACvB3xC,KAAKmO,MAAMwqE,cAAc,GAE7B34E,KAAKmO,MAAMyqE,aAAaC,cAAct1E,QAClC,SAAA2qD,GAAI,OACAtrD,EAAK6I,MAAM+B,gBAAgBmkC,WACvBuc,GAAM,iCAI1B,WAEI,QAAqCxtD,IADzBV,KAAKyL,MAAM+B,gBAAgBklB,MAAM6pB,WACnC1tC,QAAQ6B,eAIlB,OAAO1Q,KAAKyL,MAAM+B,gBAAgBkD,mCAGtC,WACI,OAAO1Q,KAAKyL,MAAM+B,gBAAgB4e,kCAGtC,WACI,OAAOpsB,KAAKyL,MAAM+B,gBAAgBY,OAAOpO,KAAKosB,OAAOxY,6BAGzD,WAAS,IAAA+d,EAAA3xB,KACD84E,EAAgB94E,KAAKyL,MAAMq8B,WAAavB,KACxCvmC,KAAKyL,MAAMq8B,WAAaixC,IAExBC,EAA0B,GAC1Bh5E,KAAKyL,MAAM+lE,kBAAoBD,KAAUvxE,KAAKyL,MAAMqmE,mBACpDkH,EACI9oE,EAAAtK,EAAA4G,cAACysE,EAAA,EAAD,CACEC,iBAAkBl5E,KAAKyL,MAAMytE,iBAC7B1rE,gBAAiBxN,KAAKwN,gBACtB2rE,WAAY,SAAC5xD,GAAD,OAAYoK,EAAKkP,cAActZ,IAC3C6xD,WAAY,SAAC7xD,EAAQ6wD,EAAW/kE,EAAOglE,EAAaC,GAAxC,OAAkD3mD,EAAK4mD,SAAShxD,EAAQ6wD,EAAW/kE,EAAOglE,EAAaC,OAKzHt4E,KAAKyL,MAAM+lE,kBAAoBU,MAC/B8G,EACI9oE,EAAAtK,EAAA4G,cAAC6sE,GAAD,CAAgB7rE,gBAAiBxN,KAAKwN,mBAI9C,IAAI8rE,EAAuB,GACvBt5E,KAAKyL,MAAM+lE,kBAAoBQ,MAC/BsH,EACIppE,EAAAtK,EAAA4G,cAAC+sE,EAAD,CAAiB/rE,gBAAiBxN,KAAKwN,mBAG/C,IAAIgsE,EAAqB,GACrBx5E,KAAKyL,MAAM+lE,kBAAoB/iB,MAC/B+qB,EACItpE,EAAAtK,EAAA4G,cAACitE,EAAA,EAAD,CAAWjsE,gBAAiBxN,KAAKwN,mBAGzC,IAAIksE,EAAmB,GACnB15E,KAAKyL,MAAM+lE,kBAAoBhjB,MAC/BkrB,EACIxpE,EAAAtK,EAAA4G,cAACmtE,EAAA,EAAD,CAASnsE,gBAAiBxN,KAAKwN,mBAGvC,IAAIosE,EAAiB,GACjB55E,KAAKyL,MAAM+lE,kBAAoBqI,MAC/BD,EACI1pE,EAAAtK,EAAA4G,cAACstE,EAAD,CAAgBtsE,gBAAiBxN,KAAKwN,mBAK1CpG,KAAK2yE,MAAM1gE,OAAO60B,YAFC,KADL,KAQFluC,KAAKg6E,uBAAwB3gE,OAAOi+B,UACjCt3C,KAAKg6E,uBAAwB3gE,OAAOyiC,aAEnD97C,KAAKyL,MAAMwuE,aACC,IAIUj6E,KAAKyL,MAAMyuE,WAArC,IAGIC,EAAmBn6E,KAAKyL,MAAMo8B,iBAC9B,wBACA7nC,KAAKg6E,sBAAwB,cAAgB,mBAE7Ch6E,KAAKg6E,uBAAyBh6E,KAAKyL,MAAMwuE,cAAej6E,KAAKyL,MAAMq8B,SAAavB,KAGhFvmC,KAAKyL,MAAMgpB,cAGXz0B,KAAKyL,MAAM2uE,kBAIf,IAAInlE,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAI7BluC,KAAKyL,MAAMgpB,gBACXxf,EAAMoG,QAAUrb,KAAKyL,MAAMu8B,aAAe,IAI1ChoC,KAAKyL,MAAMq8B,WAAaixC,MACxB9jE,EAAMoG,OAAShC,OAAO60B,YAAc,IAGxC,IAAIhE,EAAkBlqC,KAAKyL,MAAMy+B,iBAC5BlqC,KAAKyL,MAAMogC,oBACX7rC,KAAKyL,MAAMogC,mBAAmB,IAC9B7rC,KAAKyL,MAAMogC,mBAAmB,GAAGN,QAElC8uC,EACAnqE,EAAAtK,EAAA4G,cAAA,OACEyI,MAAKnV,OAAAsa,EAAA,EAAAta,CAAA,GACGmV,EADH,CAEDoG,OAAQpG,EAAMoG,OAAS,KAE3BlP,UAAU,mBACRmtE,EACAI,EACAF,EACAR,EACAY,EACF1pE,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,WAAYnN,KAAKg6E,uBACrC9pE,EAAAtK,EAAA4G,cAAC8tE,EAAD,MACApqE,EAAAtK,EAAA4G,cAACw+C,EAAA,EAAD,CAAoB9gB,qBAAiBxpC,EAAW8M,gBAAiBxN,KAAKwN,kBACrE08B,EACAh6B,EAAAtK,EAAA4G,cAAC+tE,EAAD,CAAgBzxC,QAASoB,IAC1Bh6B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACXnM,KAAKyL,MAAM4oC,mBAAuBr0C,KAAKyL,MAAM2mC,YAAwC,KAA1BpyC,KAAKyL,MAAM2mC,WAIjE,GAHNliC,EAAAtK,EAAA4G,cAACmxC,EAAA,EAAD,CACElV,aAAczoC,KAAKyL,MAAMwuE,YACzBzsE,gBAAiBxN,KAAKwN,kBAEzB0C,EAAAtK,EAAA4G,cAACy+C,EAAA,EAAD,CAAgBz9C,gBAAiBxN,KAAKwN,mBAEtCxN,KAAKyL,MAAM4oC,mBAAuBr0C,KAAKyL,MAAM2mC,YAAwC,KAA1BpyC,KAAKyL,MAAM2mC,WAErE,GADFliC,EAAAtK,EAAA4G,cAAC+tC,EAAA,EAAD,CAAgB/sC,gBAAiBxN,KAAKwN,mBAIxC0C,EAAAtK,EAAA4G,cAACguE,EAAD,CACE7zE,SAAUA,IACVu2B,QAASA,GACTI,OAAQt9B,KAAKmO,MAAMwqE,aACnBthE,KAAMrX,KAAKmO,MAAMwpE,gBACjB/E,QAAS5yE,KAAK43E,mBACdpE,WAAYxzE,KAAK63E,aACjBtE,UAAWvzE,KAAK83E,oBAqBvB2C,EACAvqE,EAAAtK,EAAA4G,cAAA,OAAKwG,OAAQ,kBAAK2e,EAAK3e,UAAU7G,UAAU,+BACzC+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAWguE,GAC9BjqE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMilB,EAAKk9B,kBACpB1iD,UAAU,mBACTnM,KAAKyL,MAAMo8B,iBACR33B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACf+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBAGxB+D,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,WAAYnN,KAAKyL,MAAMo8B,kBAC3C33B,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWnN,KAAKg6E,uBACpC9pE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAC8tE,EAAD,QAGHD,KAQR,GAHIr6E,KAAKyL,MAAMivE,oBACY,wBAEvB5B,EACA,MAAO,GAGH94E,KAAKyL,MAAMo8B,kBACX7nC,KAAKg6E,sBAET,OACI9pE,EAAAtK,EAAA4G,cAAA,WAEGiuE,UAzWYxsE,aA4ZhBC,gBAzBS,SAACC,EAAO1C,GAC5B,MAAO,CACHq8B,SAAU35B,EAAMM,UAAUq5B,SAC1BgqC,iBAAkB3jE,EAAMM,UAAUqjE,iBAClCjqC,iBAAkB15B,EAAM+lC,SAASrM,iBACjC2pC,gBAAiBrjE,EAAMM,UAAU+iE,gBACjCmJ,oBAAiDj6E,IAAjCyN,EAAMM,UAAUmsE,aAChCC,YAAa1sE,EAAMM,UAAUosE,YAC7BX,WAAY/rE,EAAMM,UAAUyrE,WAC5BvmE,cAAexF,EAAM2F,IAAIH,cACzBokE,YAAa5pE,EAAMoxC,SAASw4B,YAC5BtjD,cAAetmB,EAAMM,UAAUgmB,cAC/B/jB,eAAgBvC,EAAMU,QAAQ6B,eAC9BoqE,iBAAkB3sE,EAAMC,OAAO2sE,iBAAiB5sE,EAAM2F,IAAIH,eAC1DqnE,eAAgB7sE,EAAMU,QAAQmsE,eAC9BhzC,aAAc75B,EAAMqmB,YAAYwT,aAChCoK,WAAYjkC,EAAM+lC,SAASC,mBAC3BE,kBAAmBlmC,EAAM+lC,SAASG,kBAClCqmC,mBAAoBvsE,EAAMU,QAAQ6rE,mBAElC7uC,mBAAoB19B,EAAM26B,QAAQ+C,qBAvCf,SAAAn9B,GACvB,MAAO,CACH+qB,cAAgB,SAAAD,GAAU,OAAI9qB,EAAS+qB,aAAcD,KACrDyhD,cAAgB,SAAAzhD,GAAU,OAAI9qB,EAASusE,YAAczhD,KACrDmb,gBAAiB,SAAAC,GAAC,OAAIlmC,EAASimC,aAAgBC,KAC/CC,mBAAoB,SAAAD,GAAC,OAAIlmC,EAASmmC,aAAmBD,KACrD8jC,oBAAqB,SAAA9jC,GAAC,OAAIlmC,EAASgqE,aAAoB9jC,KACvD4jC,qBAAsB,SAAA7vE,GAAC,OAAI+F,EAAS8pE,aAAqB7vE,KACzDiE,kBAAmB,SAAAjE,GAAC,OAAI+F,EAAS9B,aAAkBjE,KACnDqrE,0BAA2B,SAAAp/B,GAAC,OAAIlmC,EAASslE,aAA0Bp/B,KACnEujC,kBAAmB,SAAAvjC,GAAC,OAAIlmC,EAASypE,aAAkBvjC,KACnDvR,kBAAmB,SAAAuR,GAAC,OAAIlmC,EAAS20B,aAAkBuR,KACnDzB,qBAAsB,SAAAyB,GAAC,OAAIlmC,EAASykC,aAAqByB,KACzD44B,iBAAkB,SAAAtkE,GAAC,OAAIwF,EAAS8+D,aAAiBtkE,KACjDgvE,kBAAmB,SAAAtmC,GAAE,OAAIljC,EAASoE,YAAW8+B,KAC7CqmC,sBAAuB,SAAArmC,GAAE,OAAIljC,EAASupE,aAAsBrmC,OA6BrD1jC,CAA6CwpE,kECzd/CwD,WAAmB,SAACtnE,EAAOunE,GAChCvnE,EAAMuQ,QAAUg3D,GAIPvnE,EAAMpG,gBAAgBwW,OAC5B2G,WAAW/W,EAAOunE,4BCHhBC,EAAa,SAAA31E,GAAoB,IAAlBse,EAAkBte,EAAlBse,aAAkB/U,EACdC,mBAAS8U,EAAalV,SADRK,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACrCH,EADqCK,EAAA,GAC5BkmC,EAD4BlmC,EAAA,GAW1C,MAAO,CAACqC,eARehC,sBAAY,SAACC,GAChC4lC,EAAWt1C,OAAA2R,EAAA,EAAA3R,CAAKikB,EAAalV,UAE7B,IAAIyF,EAAMyP,EAAazV,YACvByV,EAAavW,gBAAgBkB,SACzB+F,aAAqBH,EAAIlT,GAAI2iB,EAAa3iB,QAAIV,EAAW,gBAAYA,KAC1E,CAACqjB,EAAcqxB,IAEMvmC,2nCCN5B,IAAMwsE,EAAoB,SAAC7tE,GAGvB,IAFA,IAAIorD,EAAcprD,EAAgBY,OAAO,GAAG0/C,SAASrsD,OACjD65E,EAAiB,GACZz3E,EAAE,EAAGA,EAAI+0D,EAAa/0D,IAC3B2J,EAAgBgrD,gBAAgB30D,GAChCy3E,EAAe95E,KAAKgM,EAAgB/L,QAExC,OAAO65E,GAGEC,EAAqB,eAAA91E,EAAA3F,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAC,EAAOqe,GAAP,IAAA3W,EAAAorD,EAAA0iB,EAAAv0C,EAAAy0C,EAAAC,EAAAC,EAAAC,EAAA/nE,EAAA/P,EAAA6rC,EAAA,OAAA/pC,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAC5B+G,EAAmB2W,EAAnB3W,iBACWklB,MAAMhkB,SAASktE,aAAe,8BAFbr1E,EAAAE,KAAA,EAG3Bo1E,YAAM,KAHqB,cAIjC13D,EAAM3W,gBAAgBtF,OAElB0wD,EAAcz0C,EAAM/V,OAAO,GAAG0/C,SAASrsD,OACvC65E,EAAiBD,EAAkB7tE,GACvCA,EAAgBgrD,gBAAgB,GARCjyD,EAAAE,KAAA,GAUTq1E,YAAoB33D,EAAM3W,gBAAiB2W,GAVlC,eAU7B4iB,EAV6BxgC,EAAAM,KAAAN,EAAAE,KAAA,GAWbs1E,YAAe53D,EAAM3W,gBAAiBu5B,EAAa6xB,EAAaz0C,EAAM/V,QAXzD,QAW7BotE,EAX6Bj1E,EAAAM,KAAA40E,EAcCO,EAAa73D,GAA1Cu3D,EAd4BD,EAc5BC,YAAaC,EAdeF,EAcfE,aAElBnuE,EAAgByuE,YAAY93D,GAExBvQ,EAAQpG,EAAgB0uE,sBACnBr4E,EAAE+P,EAAMk6C,SAASrsD,OAnBO,aAmBCoC,EAAI+0D,GAnBL,CAAAryD,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,GAoBvBmN,EAAMuoE,YAAW,GApBM,QAmBkBt4E,IAnBlB0C,EAAAE,KAAA,iBA2BjC,IAJAmN,EAAMwoE,OAAOZ,GAAS,GACtB5nE,EAAM8nE,YAAcA,EACpB9nE,EAAM+nE,aAAeA,EAEZ93E,EAAE,EAAGA,EAAI+0D,EAAa/0D,IAC3B2J,EAAgBgrD,gBAAgB30D,GAChC+P,EAAMrF,eAAiB1K,EACvB+P,EAAMsY,QAAQmwD,aAAaf,EAAez3E,IAC1C+P,EAAMyxB,cAAc,GAAG/kB,QAAUzc,EAGrC2J,EAAgBgrD,gBAAgB,GAChChrD,EAAgBgrD,gBAAgBhrD,EAAgBe,gBAChDf,EAAgBwW,OAAOA,OAAOzgB,QAC1B,SAAA4gB,GAAK,OAAIA,EAAM02C,gBAKnBrtD,EAAgBklB,MAAMhkB,SAASktE,kBAAel7E,IA1Cb,yBAAA6F,EAAA2B,SAAApC,MAAH,gBAAAqC,GAAA,OAAA1C,EAAA4C,MAAArI,KAAA6E,YAAA,GA6C5Bm3E,EAAe,SAAC73D,GAClB,IAD4BiW,EACxBshD,EAAcv3D,EAAMnO,UACpB2lE,EAAe,GAFSthD,EAAA3xB,EAGVyb,EAAM/V,QAHI,IAG5B,IAAAisB,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAgC,KAAvB+K,EAAuBwmB,EAAAtxB,MAC5B6yE,EAAan6E,KAAK86E,YAAa1oE,KAJP,MAAAjS,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAO5B,MAAO,CAACuyE,cAAaC,iCC1BVztE,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAvCM,SAAAzI,GAAa,IAAX0e,EAAW1e,EAAX0e,MAAWnV,EACFC,oBAAS,GADPC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACzBw9B,EADyBt9B,EAAA,GAChBu9B,EADgBv9B,EAAA,GAGxBqtE,EAAchtE,sBAAY,WAC5BgsE,EAAsBp3D,IACvB,CAACA,IAEJ,OACIjU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACX+D,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACEphB,UAAU,gBACVkL,KAAMm1B,EAAU,OAAS,QACzBI,OAAQJ,EACRh0B,OAAQ,kBAAMi0B,GAAYD,KAC1Bt8B,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CAAgBpmB,KAAK,KAAK0lC,OAAK,EAACzuB,MAAM,WACpClO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,qBAAqB4B,IAAI,mCAE1CmC,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,KACErd,EAAAtK,EAAA4G,cAAC+gB,EAAA,EAAD,CACE7gB,QAAS6vE,EACT9vE,IAAI,GACJtF,KAAK,MAHP,uDCwBhB,SAASq1E,EAAexwD,GAAwB,IAAhBpM,EAAgB/a,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,IAAX,GACjC,OAAQmnB,EAASpM,KAD2B/a,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAH,GACV+a,GAInC,IAWe1R,cAXS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACD+tE,uBAAwB,SAAAhpE,GAAS,OAAI/E,EAAS+tE,aAAuBhpE,OAI9DvF,CAzDM,SAAAzI,GAAwD,IAAtDmO,EAAsDnO,EAAtDmO,MAAOoY,EAA+CvmB,EAA/CumB,OAAQQ,EAAuC/mB,EAAvC+mB,UAAWiwD,EAA4Bh3E,EAA5Bg3E,uBACvCxiE,EAAY1K,sBAAY,WAE1B,GADAktE,OAAuB/7E,GAClBkT,EAAL,CAGA,IAAIH,EAAYG,EAAM8oE,gBAClBjpE,IACAA,EAAUsnC,WAAW4hC,WACrBlpE,EAAU+sC,cAAcm8B,cAE7B,CAAC/oE,IAEEqZ,EAAiB1d,sBAAY,SAAC+e,GAChC,IAAIsuD,EAsBZ,SAA4B14B,GAA8B,IAAvBtkC,EAAuB/a,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,IAAlB,GAAIgb,EAAchb,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAV,EACxCg4E,GADkDh4E,UAAApD,OAAA,GAAAoD,UAAA,GACtCuC,KAAK2tB,IAAImvB,EAAO,KAChC,OAAOtkC,GAAOC,EAAMD,GAAOi9D,EAxBbC,CAAmBxuD,GAC7B9B,EAAUowD,IACX,CAACpwD,EAAW5Y,IAEf,OACI1D,EAAAtK,EAAA4G,cAAA,OACE+N,YAAa,kBAAMkiE,EAAuB7oE,GAASA,EAAM8oE,kBACzDziE,UAAWA,EAAW9N,UAAU,qBAChC+D,EAAAtK,EAAA4G,cAACsgB,EAAAlnB,EAAD,CACEmnB,OAAO,SACPjkB,MAAO1B,KAAK2tB,IAAIynD,EAAexwD,GAAS,GACxCgB,OAAQ,SAAC9jB,GAAD,OAAO+jB,EAAe/jB,EAAEoJ,OAAOxJ,QACvCgX,KAAM,IACND,IAAK,EACLD,IAAK,EACLvH,YAAY,WACZ6U,UAAU,IAEbtZ,EAAQ1D,EAAAtK,EAAA4G,cAACuwE,EAAA,EAAD,CAAYC,MAAOppE,EAAM0W,aAAgB,MC3BpDlN,EAAS,IAAI1J,IA+FJxF,cArBS,SAACC,EAAO1C,GAC9B,MAAO,CACHugB,OAAQ7d,EAAMC,OAAOqf,aAAahiB,EAAM0Y,MAAM3P,aAC9Cw9B,YAAa7jC,EAAM2F,IAAImpE,eAAexxE,EAAM0Y,MAAM7V,YAAYlN,KAC1D+M,EAAM2F,IAAImpE,eAAexxE,EAAM0Y,MAAM7V,YAAYlN,IAAIqK,EAAM0Y,MAAM3P,aACrEb,cAAexF,EAAM2F,IAAIH,cACzBE,cAAe1F,EAAM2F,IAAID,cACzBnD,oBAA+BhQ,IAAf+K,EAAM0Y,OAAsBhW,EAAM2F,IAAI+P,qBAAqBpY,EAAM0Y,MAAM7V,YAAYlN,KAC/F+M,EAAM2F,IAAI+P,qBAAqBpY,EAAM0Y,MAAM7V,YAAYlN,IAAIqK,EAAM0Y,MAAM/iB,MAItD,SAACsN,EAAUjD,GACpC,MAAO,CACHyxE,kBAAmB,SAACvuB,GAAD,OAAejgD,EAASwuE,aACvCzxE,EAAM0Y,MAAM7V,YAAYlN,GACxBqK,EAAM0Y,MAAM3P,YACZm6C,OAIKzgD,CA7FY,SAAAzI,GAQrB,IAPF0e,EAOE1e,EAPF0e,MACA6H,EAMEvmB,EANFumB,OACAgmB,EAKEvsC,EALFusC,YACAkrC,EAIEz3E,EAJFy3E,kBAEArpE,GAEEpO,EAHFkO,cAGElO,EAFFoO,eACAnD,EACEjL,EADFiL,eAEK8D,EAAe2P,EAAf3P,YADH2oE,EAGgC/B,EAAW,CAACr3D,aAAcI,IAArD5S,EAHL4rE,EAGK5rE,eAAgB1C,EAHrBsuE,EAGqBtuE,QACjBuP,EAAQhB,EAAOiB,iBAAiB8F,EAAM/V,OAAO,IAC7Coe,EAAYjd,sBAAY,SAAA6tE,GAC1Bj5D,EAAMqI,UAAU4wD,IACjB,CAACj5D,IAEAlP,EAAQ,GAERooE,EAAY,GAGZxpE,IAAkBsQ,EAAM3P,aACxB6oE,EAAUl/D,gBAAkBC,EAC5Bi/D,EAAUj/D,MAAQ,QAClBnJ,EAAMqoE,YAAc,QACpBroE,EAAM8tB,YAAc3kB,IAEpBnJ,EAAM8tB,YAAc3kB,EACpBnJ,EAAMkJ,gBAAkB,QACxBlJ,EAAMguB,gBAAkB,QACxBhuB,EAAMqoE,YAAc,QACpBD,EAAUj/D,MAAQ,SAGtB,IAAIjS,EAAY,uBAKhB,OAJIuE,IACAvE,GAAa,YAIb+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACP9I,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOooE,EAAWlxE,UAAU,cAC/B+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAf,SACSqI,EAAc,GAEvBtE,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMwwE,GAAmBlrC,IAClC7lC,UAAU,mBACT6lC,EAAc9hC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAiB+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBAGjEuE,EACAR,EAAAtK,EAAA4G,cAAC4E,EAAA,EAAD,CACEG,eAAgBA,EAChB/D,gBAAiB2W,EAAM3W,gBACvB2W,MAAOA,EACPpP,SAAS,EACTvF,OAAQkB,EACS3B,UAAMrO,IACzBwP,EAAAtK,EAAA4G,cAAC+wE,EAAD,CAAcvxD,OAAQA,EAAQQ,UAAWA,IAC1Ctc,EAAAtK,EAAA4G,cAACgxE,EAAD,CAAcr5D,MAAOA,IACnBA,EAAM3W,gBAAgB2D,aAAagc,gBAElC,GADFjd,EAAAtK,EAAA4G,cAAC4gB,EAAA,EAAD,CAAsB/d,QAAS8U,IAEhCjU,EAAAtK,EAAA4G,cAACy/D,EAAA,EAAD,CAAcp9D,QAASA,EAAS+E,MAAOuQ,6CC7BlCjW,cAXS,SAACC,EAAO1C,GAC9B,MAAO,CACHmnB,QAASzkB,EAAMC,OAAOqvE,cAAchyE,EAAMmI,MAAMxS,KAAO,IAIlC,SAACsN,GAC1B,MAAO,IAIMR,CA/CC,SAAAzI,GAAuC,IAArCmO,EAAqCnO,EAArCmO,MAAOgf,EAA8BntB,EAA9BmtB,QAAShlB,EAAqBnI,EAArBmI,gBACxB0C,EAAWf,sBAAY,SAAC6tE,GAC1B7nD,SAASmoD,cAAcC,OACvB/pE,EAAMgqE,WAAWR,IAClB,CAACxpE,IAEJ,OACI1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YACb+D,EAAAtK,EAAA4G,cAACqxE,EAAA,EAAD,CACEjwE,gBAAiBA,EACjBzG,KAAM,GACN22E,YAAa,IACbC,WAAY,IACZj1E,MAAO8pB,EACPorD,aAAcprD,EACd9S,KAAM,IACNF,KAAM,EACNC,IAAK,EACLvP,SAAUA,GAEVJ,EAAAtK,EAAA4G,cAACqxE,EAAA,EAAD,CACEI,SAAU,EACV7/D,MAAO,UACP8/D,WAAW,YAEbhuE,EAAAtK,EAAA4G,cAACqxE,EAAA,EAAD,CACEviE,MAAO,EACPD,OAAQ,GACR8iE,OAAQ,EACR9rE,KAAK,OACL+L,MAAO,gCC5BfkuD,EAAQ,CAAC,IAAK,IAAK,IAAK,IAAK,KAkDpBp+D,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAhDO,SAAAzI,GAAyB,IAAvBmO,EAAuBnO,EAAvBmO,MACdhG,GADqCnI,EAAhBoN,WACH7B,sBAAOtQ,IAC/BoP,oBAAU,WACN,IAAIsuE,EAAO7oD,SAASC,eAAe,cACnC5nB,EAAgB+L,QAAUykE,GAC3B,IAEiB7uE,sBAAY,aAC7B,IAEqBA,sBAAY,aACjC,IAGH,OACIW,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACZyB,EAAkBsC,EAAAtK,EAAA4G,cAAC6xE,EAAD,CAASzwE,gBAAiBA,EAAiBgG,MAAOA,IAAW,GAChF1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAf,SAGA+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cACZyH,EAAM24D,yBAAyBvrE,IAC5B,SAAC+N,EAAMlL,GAAP,OACIqM,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO,CAACqpE,UAAWz6E,EAAI,IAAM,EAAI,GAAK,GAAIsI,UAAU,aAC5DyB,EACAsC,EAAAtK,EAAA4G,cAACggE,EAAA,EAAD,CACEh/D,gBAAiBoG,EAAMpG,gBACvBI,gBAAiBA,EAAiBgS,KAAM,GAAInM,UAAW1E,IACvD,GACGmB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACZmgE,EAAMzoE,QAIrBqM,EAAAtK,EAAA4G,cAAC+xE,EAAA,EAAD,CAAiBpyE,UAAU,kBAAkByH,MAAOA,qCCpBxDwJ,EAAS,IAAI1J,IA4Gb8qE,EAAe,SAAAn9E,GACjB,YAAaX,IAATW,EACO,IAGPA,EAAKI,OAAS,KACdJ,EAAOA,EAAKgS,MAAM,EAAG,IAAM,OAExBhS,IAiCI6M,cA9BS,SAACC,EAAO1C,GAC5B,IAAImI,EAAQnI,EAAMmI,MACdA,GAASA,EAAMxF,QAAUwF,EAAMxF,OAAO,KACtCwF,EAAQA,EAAMxF,OAAO,GAAGwF,OAG5B,IAAIG,EAAQH,GAASA,EAAMtF,YAAYlN,GACvC,MAAO,CACHA,QAAcV,IAAVkT,EAAsB,OACLlT,IAAjBkT,EAAM2T,aAAiD7mB,IAAzBkT,EAAM2T,OAAOI,QAC3C/T,EAAM2T,OAAOI,QAAU/T,EAAMwQ,YAAcxQ,EAAM0K,UACrD0N,OAAQvgB,EAAMmI,MAAM8oE,gBAAgB56E,MACpC6jB,MAAOxX,EAAMC,OAAOob,WAAW/d,EAAMmI,MAAMW,aAC3C1B,WAAY1E,EAAM2F,IAAIH,gBAAkBlI,EAAMmI,MAAMW,kBACpB7T,IAA5ByN,EAAM2F,IAAID,cACd6W,cAAevc,EAAM2F,IAAI4W,cACzBha,oBAA0BhQ,IAAVkT,GAAuBzF,EAAM2F,IAAI+P,qBAAqB9P,IAClE5F,EAAM2F,IAAI+P,qBAAqB9P,GAAOH,EAAMxS,IAChDq9E,wBAA8B/9E,IAAVkT,GAAuBzF,EAAM2F,IAAIM,yBAAyBL,IAC1E5F,EAAM2F,IAAIM,yBAAyBL,GAAOH,EAAMxS,MAIjC,SAACsN,GAC1B,MAAO,CACH6d,iBAAkB,SAACsK,GAAD,OAAOnoB,EAAS6d,aAAiBsK,KACnD6nD,oBAAqB,SAAC3sE,GAAD,OAAOrD,EAASgwE,aAAoB3sE,OAIhD7D,CAnJD,SAAAzI,GAYR,IAXFmO,EAWEnO,EAXFmO,MAEAoY,GASEvmB,EAVF0e,MAUE1e,EATFumB,QACArG,EAQElgB,EARFkgB,MACAg5D,EAOEl5E,EAPFk5E,QACA9rE,EAMEpN,EANFoN,WACA0Z,EAKE9mB,EALF8mB,iBACAmyD,EAIEj5E,EAJFi5E,oBACAh0D,EAGEjlB,EAHFilB,cACAha,EAEEjL,EAFFiL,eACA+tE,EACEh5E,EADFg5E,mBAEIj3D,EAAY5T,EAAM2T,QAAU3T,EAAM2T,OAAOE,eACzCrJ,EAAQhB,EAAOiB,iBAAiBzK,GAChCqB,EAAQ,CACRkJ,gBAAiBC,GAGjBoJ,IACAvS,EAAMguB,gBAAkB,OAASzb,EAAY,KAR/C,IAAA21D,EAWgC/B,EAAW,CAACr3D,aAAcnQ,IAArDrC,EAXL4rE,EAWK5rE,eAAgB1C,EAXrBsuE,EAWqBtuE,QAEnB1C,EAAYwyE,EAAU,oBAAsB,cAE5CC,EAAa,GAEb/rE,IACA1G,GAAa,YACbyyE,EAAWC,UAAY,mBAAqBzgE,GAGhD,IAAI0gE,EAAiB,kBACjBn5D,IACAm5D,GAAkB,UAGtB,IAAMC,EAAaxvE,sBAAY,WAC3BqE,EAAM2S,MAAMZ,IACb,CAACA,EAAO/R,IAELyY,EAAc9c,sBAAY,SAACrG,GAC7BA,EAAE+J,kBACFsZ,OAAiB7rB,GACjBkT,EAAMpG,gBAAgB6e,YAAYzY,EAAMW,cACzC,CAACX,IAEEZ,EAASzD,sBAAY,SAACrG,GACxBA,EAAE+J,kBACEW,IAAU8W,GACVwwD,EAAiBxwD,EAAe9W,EAAMuQ,QAE3C,CAACvQ,EAAO8W,IAEP9C,EAAYo3D,YAAkBprE,GAIlC,OAHIlD,GAAkB+tE,KAClBtyE,GAAa,oBAGb+D,EAAAtK,EAAA4G,cAAA,OACEwG,OAAQA,EACRQ,WAAW,EACXT,YAAa,kBAAM2rE,EAAoB9qE,IACvCqB,MAAO2pE,EACPtrE,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBgH,YAAa8R,EACblgB,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOpC,EAAa,CAACsL,gBAAiBC,GAAS,GAC/CjS,UAAU,cACTyH,EAAMW,YAAc,EAHvB,IAG2BiqE,EAAa5qE,EAAMwQ,YAAcxQ,EAAM0K,WAAa,UAE9E5N,EACAR,EAAAtK,EAAA4G,cAAC4E,EAAA,EAAD,CACE5D,gBAAiBoG,EAAMpG,gBACvB+D,eAAgBA,EAChBqC,MAAOA,EACPmB,SAAS,EACTvF,OAAQkB,EACR3B,UAAMrO,IACR+9E,EACAvuE,EAAAtK,EAAA4G,cAACyyE,EAAA,EAAD,CACEzxE,gBAAiBoG,EAAMpG,gBACvBgC,OAAQivE,EACR7qE,MAAOA,EACPmB,SAAS,IAEX7E,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAC+wE,EAAD,CAAc3pE,MAAOA,EAAOoY,OAAQA,EAAQQ,UAAW,SAAC4wD,GAAD,OAAOxpE,EAAM4Y,UAAU4wD,MAC9EltE,EAAAtK,EAAA4G,cAAA,OACEE,QAASqyE,EACT9pE,MAAOA,EAAO9I,UAAW2yE,QACVp+E,IAAd8mB,EAA0BI,EAAY,IAEzC1X,EAAAtK,EAAA4G,cAAC0yE,EAAA,EAAD,CAAc9gE,MAAOA,EAAOxK,MAAOA,IACnC1D,EAAAtK,EAAA4G,cAAC2yE,EAAD,CAAetsE,WAAYA,EAAYe,MAAOA,KAGjD1D,EAAAtK,EAAA4G,cAACy/D,EAAA,EAAD,CAAcp9D,QAASA,EAAS+E,MAAOA,OCnH3CwJ,EAAS,IAAI1J,IAwEJxF,cAhBS,SAACC,EAAO1C,GAC9B,MAAO,CACHumC,YAAa7jC,EAAM2F,IAAImpE,eAAexxE,EAAM0Y,MAAM7V,YAAYlN,KAC1D+M,EAAM2F,IAAImpE,eAAexxE,EAAM0Y,MAAM7V,YAAYlN,IAAIqK,EAAM0Y,MAAM3P,aACrEwW,gBAAiB7c,EAAM2F,IAAID,gBAAkBpI,EAAM0Y,MAAM3P,YACzDkW,cAAevc,EAAM2F,IAAI4W,cACzBpG,YAAanW,EAAMC,OAAOkW,YAAY7Y,EAAM0Y,MAAM/iB,MAI7B,SAACsN,GAC1B,MAAO,CACH6d,iBAAkB,SAACsK,GAAD,OAAOnoB,EAAS6d,aAAiBsK,OAI1C3oB,CAtED,SAAAzI,GAOR,IANF0e,EAME1e,EANF0e,MACA6tB,EAKEvsC,EALFusC,YACAzlB,EAIE9mB,EAJF8mB,iBACAvB,EAGEvlB,EAHFulB,gBACAN,EAEEjlB,EAFFilB,cAGItc,GADF3I,EADF6e,YAEaH,EAAM/V,QACfgxE,EAAiB,kBACfhhE,EAAQhB,EAAOiB,iBAAiB8F,EAAM/V,OAAO,IAC/C6G,EAAQ,CACRkJ,gBAAiBC,GAGjBmuC,EAAY,GAEZvhC,IACAo0D,GAAkB,YAClB7yB,EAAUsyB,UAAY,mBAAqBzgE,GAG/C,IAAMpL,EAASzD,sBAAY,SAACrG,GACxBA,EAAE+J,kBACEyX,GACAwwD,EAAiBxwD,EAAevG,IAErC,CAACuG,EAAevG,IAEb5J,EAAchL,sBAAY,WAC5Bgd,EAAiBpI,EAAM3P,cACxB,CAAC2P,EAAOoI,IAEX,OACIrc,EAAAtK,EAAA4G,cAAA,OACEwG,OAAQA,EACRuH,YAAaA,EACbtF,MAAOs3C,EACPpgD,UAAWizE,GACXlvE,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,cAC7B+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACb+D,EAAAtK,EAAA4G,cAAC6yE,EAAD,CAAoBl7D,MAAOA,IAC3BjU,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,sBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZ6lC,EACD,GACC5jC,EAAOpN,IAAI,SAAA4S,GAAK,OAAI1D,EAAAtK,EAAA4G,cAAC8yE,EAAD,CAAO1rE,MAAOA,oBC5BpC1F,gBAZS,SAACC,EAAO1C,GAC9B,OAAO3L,OAAAsa,EAAA,EAAAta,CAAA,GACCqO,EAAMC,OAAOkW,YADrB,CAEItQ,mBAAoB7F,EAAMM,UAAUuF,mBAAmBvI,EAAM+B,gBAAgByG,aAIxD,SAACvF,GAC1B,MAAO,IAIMR,CAvBY,SAAAzI,GAA2C,IAAzC+H,EAAyC/H,EAAzC+H,gBACrBwW,GAD8Dve,EAAxBuO,mBAC7BxG,EAAgBwW,OAAOA,QACpC,OACI9T,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACZ6X,EAAOhjB,IACJ,SAAAkQ,GAAC,OACDhB,EAAAtK,EAAA4G,cAAC+yE,EAAD,CAAO9yE,IAAKyE,EAAE9P,GAAI+iB,MAAOjT,wJCRjCxH,EAAU,YAAI7J,GA2CLqO,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAzCM,SAAAzI,GAAsC,IAApC8hB,EAAoC9hB,EAApC8hB,OAAQi4D,EAA4B/5E,EAA5B+5E,cAAez6E,EAAaU,EAAbV,QAAaiK,EAC3BC,mBAAS,IADkBC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAClDqoB,EADkDnoB,EAAA,GACzCuwE,EADyCvwE,EAAA,GAEvDY,oBAAU,WACNpG,EAAQuyB,cAAc1U,EAAOlmB,KAAKgC,QAAQ,OAAQ,IAAIA,QAAQ,QAAS,KAClEzC,KAAK,SAACub,GACHsjE,EAAWtjE,MAEpB,CAACoL,EAAQk4D,EAAYD,IAExB,IAAMlgD,EAAO/vB,sBAAY,WACrBgY,EAAOoT,WAAW51B,GAClBy6E,GAAc,IACf,CAACj4D,EAAQi4D,EAAez6E,IAE3B,OACImL,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACZkrB,EAAQ51B,OAAS,EACjByO,EAAAtK,EAAA4G,cAACkzE,EAAA,EAAD,CAAYnoD,UAAU,EAAOhQ,OAAQA,EAAQ7d,QAASA,EAAS2tB,QAASA,IACxE,mBACDnnB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZkrB,EAAQ51B,OAAS,EAClByO,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS4yB,EAAMnzB,UAAU,YAA9B,gBAES,GACT+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aAAaO,QAAS,kBAAM8yE,GAAc,KAAzD,0JCGN9iD,EAAO,SAAA32B,GAAsC,IAApCwH,EAAoCxH,EAApCwH,OAAQovB,EAA4B52B,EAA5B42B,OAAQjwB,EAAoB3G,EAApB2G,QAAS0R,EAAWrY,EAAXqY,MAEhCjS,EAAY,OACZoB,GAAUovB,IACVxwB,GAAa,YAGjB,IAAI8I,EAAQ,CACRmJ,MAAOA,GAGX,OACIlO,EAAAtK,EAAA4G,cAAA,OACEyI,MAAOA,EACPvI,QAAS,kBAAMA,EAAQa,IACvBpB,UAAWA,GACX+D,EAAAtK,EAAA4G,cAAA,2BAcK0B,YAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1DA,SAAAzI,GAAoC,IAAlCm3B,EAAkCn3B,EAAlCm3B,QAASxe,EAAyB3Y,EAAzB2Y,MAAOuhE,EAAkBl6E,EAAlBk6E,aAAkB3wE,EACnBC,mBAAS0wE,GADUzwE,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACxC2tB,EADwCztB,EAAA,GAChC2tB,EADgC3tB,EAAA,GAIzCxC,EAAU6C,sBAAY,SAAC4M,GACzB0gB,EAAU1gB,GACVxV,IAASm2B,OAAOC,UAAUH,EAASzgB,EAAGqrB,MACvC,CAAC3K,EAAWD,IAEX3nB,EAAQ,GAMZ,OAHe,IAAX0nB,IACA1nB,EAAMgW,QAAU,IAGhB/a,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAO9I,UAAU,UAdtB,CAAC,EAAG,EAAG,EAAG,EAAG,GAeZnL,IACF,SAAAkQ,GAAC,OACGhB,EAAAtK,EAAA4G,cAACywB,EAAD,CACE7e,MAAOA,EACP1R,QAASA,EACTa,OAAQ2D,EACRyrB,OAAQA,+DCatBvf,EAAS,IAAI1J,IA4UbmX,EAAW,SAACxpB,GAAD,IAAOu+E,EAAP/6E,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,GAAAA,UAAA,GAAW,GAAX,OAAkBxD,EAAKI,OAASm+E,EAAMv+E,EAAKgS,MAAM,EAAGusE,EAAM,GAAK,MAAQv+E,EAAKgS,MAAMhS,EAAKI,OAAS,GAAKJ,GAWvG6M,cAAQ,KATI,SAACQ,GAAD,MAAe,CACtC20B,kBAAmB,SAAA9b,GAAM,OAAI7Y,EAAS20B,aAAkB9b,KACxD+sB,cAAe,SAAApjC,GAAC,OAAIxC,EAAS6lC,aAAsBrjC,KACnD2jC,mBAAoB,SAAAD,GAAC,OAAIlmC,EAASmmC,aAAmBD,KACrDirC,mBAAoB,SAAAjrC,GAAC,OAAIlmC,EAASmxE,aAAmBjrC,KACrDohC,sBAAuB,SAAAphC,GAAC,OAAIlmC,EAASsnE,aAAsBphC,KAC3D4iC,mBAAoB,SAAA5iC,GAAC,OAAIlmC,EAAS8oE,aAAmB5iC,OAG1C1mC,CApVM,SAAAzI,GAgBf,IAfF0f,EAeE1f,EAfF0f,UACA26D,EAcEr6E,EAdFq6E,OACA9J,EAaEvwE,EAbFuwE,sBACA+J,EAYEt6E,EAZFs6E,gBACAxyE,EAWE9H,EAXF8H,OACAsyE,EAUEp6E,EAVFo6E,mBACAhrC,EASEpvC,EATFovC,mBACAh0C,EAQE4E,EARF5E,OACA6sC,EAOEjoC,EAPFioC,UACAlgC,EAME/H,EANF+H,gBACA61B,EAKE59B,EALF49B,kBACA28C,EAIEv6E,EAJFu6E,OACA1rC,EAGE7uC,EAHF6uC,cAGE2rC,EAAAx6E,EAFFy6E,gBAEE,IAAAD,KACEz9C,GADF/8B,EADF+xE,mBAEcxmE,kBAAO,IACjBmvE,EAAanvE,kBAAO,GACpBovE,EAAQpvE,kBAAO,GACfoiC,EAAUpiC,kBAAO,GACjBD,EAAMC,sBAAOtQ,GALfsO,EAMoCC,wBAASvO,GAN7CwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAAAyG,GAAAvG,EAAA,GAAAA,EAAA,GAOkCD,wBAASvO,IAP3CgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAOG4qE,EAPH3qE,EAAA,GAOgB4qE,EAPhB5qE,EAAA,GAQE6qE,EAAUvvE,kBAAO,GACjBwvE,GAAWxvE,kBAAO,GATpB6E,GAUgC5G,oBAAS,GAVzC6G,GAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,GAAA,GAUG4qE,GAVH3qE,GAAA,GAUe0pE,GAVf1pE,GAAA,GAAAoQ,GAWkCjX,wBAASvO,GAX3CylB,GAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,GAAA,GAWGjF,GAXHkF,GAAA,GAWgBjF,GAXhBiF,GAAA,GAAAuT,GAY8BzqB,oBAAS,GAZvC0qB,GAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,GAAA,GAYcgnD,IAZd/mD,GAAA,GAAAA,GAAA,IAAAG,GAawB7qB,wBAASvO,GAbjCq5B,GAAAj6B,OAAAqP,EAAA,EAAArP,CAAAg6B,GAAA,GAaGvS,GAbHwS,GAAA,GAaW4mD,GAbX5mD,GAAA,GAAA6mD,GAcgC3xE,oBAAS,GAdzC4xE,GAAA/gF,OAAAqP,EAAA,EAAArP,CAAA8gF,GAAA,GAcGE,GAdHD,GAAA,GAceE,GAdfF,GAAA,GAAAG,GAeoC/xE,mBAAS,IAf7CgyE,GAAAnhF,OAAAqP,EAAA,EAAArP,CAAAkhF,GAAA,GAeGE,GAfHD,GAAA,GAeiBE,GAfjBF,GAAA,GAAAG,GAgBsCnyE,wBAASvO,GAhB/C2gF,GAAAvhF,OAAAqP,EAAA,EAAArP,CAAAshF,GAAA,GAgBGE,GAhBHD,GAAA,GAgBkBE,GAhBlBF,GAAA,GAAAG,GAiB8BvyE,wBAASvO,GAjBvC+gF,GAAA3hF,OAAAqP,EAAA,EAAArP,CAAA0hF,GAAA,GAiBGE,GAjBHD,GAAA,GAiBcE,GAjBdF,GAAA,GAAAG,GAkBkCC,YAAa,CAACxvE,KAAMm1B,IAAa5J,YAAarW,IAAUA,GAAOI,UAA9Fm6D,GAlBHF,GAkBGE,eAAgBC,GAlBnBH,GAkBmBG,YAlBnBC,GAmB8B/yE,wBAASvO,GAnBvCuhF,GAAAniF,OAAAqP,EAAA,EAAArP,CAAAkiF,GAAA,GAmBGE,GAnBHD,GAAA,GAmBcE,GAnBdF,GAAA,GAqBFnyE,oBAAU,WACFjP,EAAOkE,SACP4B,IAASsyB,OAAOmpD,aAAavhF,EAAOkE,SAC/BnE,KACGuhF,KAEb,CAACthF,IAEJ,IAAIyiC,GAAYtyB,sBAAOtQ,GACjB2hF,GAAa96D,IAAUA,GAAOvd,MAAQud,GAAOvd,KAAKlG,QAAQ,cAAgB,EAC5E1C,GAAMihF,IAAcnB,GAAaz/E,OAAS,EAC1Cy/E,GAAaA,GAAaz/E,OAAS,GAAGwU,YACtC+pE,EACQ5+E,IAAMgc,EAAOmB,gBAAgBnd,IAMzC0O,oBAAU,WACFgwE,GACAwC,MAEL,CAACxC,IAEJhwE,oBAAU,WACFqV,GACAo7D,EAAQ5mE,SAAU,EACd0mE,EACA/8C,GAAU3pB,QAAQkqB,UAAU,IAE5B68C,IAAa,GACTttC,EAAQz5B,QACRwmE,EAAWxmE,SAAU,EAErB2oE,IAAW,MAInB/B,EAAQ5mE,SAAU,EACd2pB,GAAU3pB,SACV2pB,GAAU3pB,QAAQmqB,YAEtB69C,IAAa,KAElB,CAACx8D,EAAWm7D,EAAgB/4D,GAAQo6D,KAEvCx9B,YAAY,CAACpzC,MAAK28B,YAAWvoB,cAE7BrV,oBAAU,WAMN,OALIqV,EACA9L,OAAOC,iBAAiB,UAAWrH,IAEnCoH,OAAOE,oBAAoB,UAAWtH,IAEnC,kBAAMoH,OAAOE,oBAAoB,UAAWtH,MACpD,CAACyvE,GAAWC,GAAcx8D,EAAWoC,GAAQu5D,GAAYtzE,EAAiB8zE,GAAeP,KAE5F,IAAM9uE,GAAY1C,sBAAY,SAACrG,GAC3B,GAAc,UAAVA,EAAEuD,KAAoB2zE,EAAMzmE,QAazB,GAAc,cAAVzQ,EAAEuD,IAAqB,CAC9B,GAAIi1E,GAAa,OACbp+C,GAAU3pB,SACV2pB,GAAU3pB,QAAQmqB,gBAEL,MAAV56B,EAAEuD,MAAgBvD,EAAEqa,SAAWra,EAAEgV,SACxCyjE,IAAcD,IACG,MAAVx4E,EAAEuD,MAAgBvD,EAAEqa,SAAWra,EAAEgV,UACxC4jE,GAAe54E,OArBsB,CACrC,GAAIw4E,GAAa,OACjBtB,EAAMzmE,SAAQ,EACd,IAAIhG,EAAgBnG,EAAgB4mC,mBAChCzgC,IAAkBzK,EAAEqa,SAAWra,EAAEgV,SACjCvK,EAAc4uE,YAAYh7D,IAE1Bi7D,IAAU,GAGVl/C,GAAU3pB,SACV2pB,GAAU3pB,QAAQmqB,cAY3B,CAAC49C,GAAWC,GAAcx8D,EAAWoC,GAAQu5D,GAAYtzE,EAAiB8zE,GAAeP,KAE5FjxE,oBAAU,WACFowE,GAAY34D,KACZ+6D,KACAvB,IAAc,KAEnB,CAACx5D,GAAQ24D,EAAUI,EAAgBS,KAEtCjxE,oBAAU,WACN,IAAIyX,EAAS,IAAIsb,IAAOhiC,EAAOu+B,UAC/B7X,EAAOub,MAAK,GACPliC,KAAK,kBAAM+/E,GAAUp5D,MAC3B,CAAC1mB,EAAQ8/E,GAAWr9C,KAEvBxzB,oBAAU,WACN4vC,YAAgB7+C,EAAOu+B,UAClBx+B,KAAKugF,KACX,CAACA,GAAiBtgF,IAErBiP,oBAAU,WACN,OAAO,WACCwzB,GAAU3pB,SACV2pB,GAAU3pB,QAAQ+rB,UAElBne,IACAA,GAAOme,UAEX86C,GAAS7mE,SAAU,IAExB,IAEH,IAKM6oE,GAAYjzE,sBAAY,SAACkzE,EAAOv5E,GAC9BA,GAAKA,EAAEqa,UAGPk/D,EACAj1E,EAAgB+qE,SAAShxD,QAAQ7mB,EAAW4gF,IAAiB,CAACA,MAE9DP,IAAc,GACT3tC,EAAQz5B,QAEF2pB,GAAU3pB,SACjB2pB,GAAU3pB,QAAQkqB,UAAU,EAAG,GAF/By+C,IAAW,MAKpB,CAAC/6D,GAAQu5D,GAAYtzE,EAAiB8zE,GAAeP,KAElDuB,GAAa/yE,sBAAY,WAAgB,IAAfikB,EAAe3uB,UAAApD,OAAA,QAAAf,IAAAmE,UAAA,IAAAA,UAAA,IACvC0iB,IAAWA,GAAOwf,aAAgBqM,EAAQz5B,UAC1Cy5B,EAAQz5B,SAAU,EAClB4N,GAAOm7D,aACF9hF,KAAK,SAAAsQ,GACF,IAAIsvE,GAAS7mE,QAAb,CACA,IAAIgpE,EAAa,IAAIl9C,IAAUw+B,IAAKxmD,SACpC21B,EAAQz5B,SAAU,EAClBgpE,EAAW37C,UAAU91B,EAAE61B,aACvBzD,GAAU3pB,QAAUgpE,GAChBnvD,GAAQ2sD,EAAWxmE,WACd4mE,EAAQ5mE,SACTgpE,EAAW9+C,UAAU,IAG7By8C,GAAe,QAG7B,CAACA,EAAgB/4D,KAEbq7D,GAAUrzE,sBAAWzP,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAC,SAAAC,IAAA,OAAAH,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACxB+7B,EAAQ7oB,SAAU,EADMpT,EAAAE,KAAA,EAElBo1E,YApMa,KAkMK,UAGnBr5C,EAAQ7oB,QAHW,CAAApT,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,iBAMxB63E,KANwB,wBAAA/7E,EAAA2B,SAAApC,MAOzB,CAACyhB,GAAQu5D,GAAYR,IAKlBt/D,IAHiBzR,sBAAY,aAChC,CAACgY,KAEkBhY,sBAAY,SAACrG,GAC/BA,EAAE+J,kBACF,IAAI/B,EAAIhI,EAAE2Q,QAAU9I,EAAI4I,QAAQC,wBAAwBE,KACpD5C,EAAIhO,EAAE6Q,QAAUhJ,EAAI4I,QAAQC,wBAAwBI,IACpD9I,EAAI,MACJA,GAAK,KAETgQ,GAAe,CAAChQ,IAAEgG,MAClBhO,EAAEqK,kBACH,CAAC2N,MAGE3G,GAAchL,sBAAY,SAACrG,GAC9B8sE,EAAsBzoE,IACtB,CAACA,IAEApB,GAAY,gBAKhB,OAJIgZ,IACAhZ,IAAa,YAIb+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLiQ,cAAeA,GACfzG,YAAaA,GACb5N,YAAai2E,GACbpvE,WAAW,EACXF,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBR,YAAa,SAAC7J,GACNo6B,GAAU3pB,SACV2pB,GAAU3pB,QAAQmqB,YAEtBy8C,EAAQ5mE,SAAU,EAElB0pB,EAAkB9b,KAEtBza,aAAc,kBAAM01B,EAAQ7oB,SAAU,GACtCxN,UAAWA,IACZ+D,EAAAtK,EAAA4G,cAACq2E,EAAA,EAAD,CACG5hE,YAAaA,GACbC,eAAgBA,GAChBygE,aAAcA,GACfnC,cAAeA,GACdsD,aAAa,EACblmD,QAASrV,GACTw4D,gBAAiBA,EACjBniD,YAAarW,IAAUA,GAAOI,UACjCzX,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACZ+D,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACZ41E,GAAc7xE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAsB,GACpD+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAOs5E,QAAU9hF,EAAWwI,IACrCiD,UAAU,eAAe0e,EAASpnB,YAAK5C,EAAOR,SAC/C6hF,GAAYhyE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc+1E,IAAmB,GAC5DhyE,EAAAtK,EAAA4G,cAACgyC,EAAA54C,EAAD,CACE64C,SAAU,KACVxpC,MAAO,CAAC8tE,OAAQ,EAAGC,WAAY,QAC/B77E,KAAM,EACNiX,MAAO,QACPg1B,QAASA,EAAQz5B,UAEpBzJ,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACZob,IAAUA,GAAOiuD,OAASjuD,GAAOiuD,MAAMx0E,IACpC,SAAAmF,GAAI,OAAI+J,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO,CAACkJ,gBAAiBf,EAAOmB,gBAAgBpY,IAAQgG,UAAU,kBAEpF+0E,GAAa,GACbhxE,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBA3HH6I,EA2HqB2rE,GAAa,GA1HnDrB,EAAmB//E,OAAAsa,EAAA,EAAAta,CAAA,GAAKyV,EAAN,CAAe0tE,MAAO,WACxCpuC,EAAmB4Z,KAFH,IAACl5C,GA4HNpJ,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,YACG00E,GAAaz/E,SAGlB,GACDyO,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAQotE,IAAsC,IAAxBnB,GAAaz/E,OAAiC,GAAlB,CAACmrD,SAAU,KAAWzgD,UAAU,gBACnFu1E,IAAan6D,IAAUA,GAAOvd,MAAQud,GAAOvd,KAC7ChJ,IACE,SAAAoE,GAAG,OACC8K,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYtnC,IAAKrH,EAAKuJ,QAASu0E,IAAejvC,IAAK7uC,GACjD8K,EAAAtK,EAAA4G,cAAA,OACEyI,MAAO,CACH8tB,YAAa3lB,EAAOmB,gBAAgBnZ,GACpCgZ,MAAOhB,EAAOmB,gBAAgBnZ,IAElCsH,QAAS,SAACxD,GACNA,EAAE+J,kBACFqhC,EAAclvC,IAElB+G,UAAU,cACT0e,EAASzlB,EAAK,QAI1BmiB,IAAUA,GAAOhjB,KAAO2L,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAeob,GAAOhjB,MAAc,KAG/Eu8E,GACA5wE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACZk0E,EACAnwE,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAASw0E,MACnBjzE,EAAAtK,EAAA4G,cAAC26B,EAAA,EAAD,CACEqpB,WAAY,GACZ4yB,cAAe7B,GACfn6C,OAAQ9D,GAAU3pB,QAAQytB,OAC1B/rB,OAAQ,GACRC,MAAO,IACPgoB,UAAWA,GAAU3pB,QACrB4N,OAAQA,GACRnmB,GAAImmB,GAAO6X,SACX5xB,gBAAiBA,KAGnB,IACG,GACRk0E,GAAYxxE,EAAAtK,EAAA4G,cAAC6zB,EAAA,EAAD,CAAWzD,QAASrV,KAAY,GAC5Ck5D,GAAavwE,EAAAtK,EAAA4G,cAAC62E,EAAD,CAAc7D,cAAeA,GAAej4D,OAAQA,GAAQxiB,QAASlE,EAAOkE,UAAc,iBCpWhHqY,EAAS,IAAI1J,IAqIJxF,cAjBS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,aAChC6tC,mBAAoB1nE,EAAM+lC,SAAS2hC,qBAMd,SAACnnE,GAC1B,MAAO,CACHsnE,sBAAuB,SAAAphC,GAAC,OAAIlmC,EAASsnE,aAAsBphC,KAC3D0uC,oBAAqB,SAAA1uC,GAAC,OAAIlmC,EAAS40E,aAAoB1uC,OAI9C1mC,CAnIO,SAAAzI,GAqBhB,IApBFuwE,EAoBEvwE,EApBFuwE,sBACAsN,EAmBE79E,EAnBF69E,oBACAtD,EAkBEv6E,EAlBFu6E,OAkBEuD,EAAA99E,EAjBF+9E,sBAiBE,IAAAD,EAjBa,EAiBbA,EAhBF/1E,EAgBE/H,EAhBF+H,gBACAo5C,EAeEnhD,EAfFmhD,IACA68B,EAcEh+E,EAdFg+E,MACAC,EAaEj+E,EAbFi+E,YAEAjvD,GAWEhvB,EAZF5B,EAYE4B,EAXFgvB,eACAiZ,EAUEjoC,EAVFioC,UACA1F,EASEviC,EATFuiC,aACA27C,EAQEl+E,EARFk+E,OACAt+E,EAOEI,EAPFJ,aACAy9E,EAMEr9E,EANFq9E,YACAhM,EAKErxE,EALFqxE,cACAjB,EAIEpwE,EAJFowE,mBACA1wE,EAGEM,EAHFN,eACAy+E,EAEEn+E,EAFFm+E,eACA7D,EACEt6E,EADFs6E,gBAEKh2E,EAAuCi2E,EAAvCj2E,aAAchI,EAAyBi+E,EAAzBj+E,QAASkE,EAAgB+5E,EAAhB/5E,QAASb,EAAO46E,EAAP56E,IADnC4J,EAE0BC,mBAAS,IAFnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAAAyG,GAAAvG,EAAA,GAAAA,EAAA,GAG4BD,mBAASw0E,GAASG,IAH9CluE,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAGGyqE,EAHHxqE,EAAA,GAGamuE,EAHbnuE,EAAA,GAIE3E,EAAMC,sBAAOtQ,GACZyG,EAAQsP,YAAU1F,EAAK,EAAG0yE,OAAO/iF,OAAWA,OAAWA,EAAWyE,GAAlEgC,KAEL2I,oBAAU,aACP,CAAC3I,IAEJ2I,oBAAU,WAEN,OADAwzE,GAAoB,GACb,WACHtN,OAAsBt1E,GACtB4iF,GAAoB,KAEzB,IAEH,IAAIruE,EAAQ,IAEP9P,GAAkB4E,EACnBkL,EAAMguB,gBAAkB,OAAS53B,IAAK02B,WAAWh4B,GAAgB,KACzD5E,GAAkBc,EAC1BgP,EAAMguB,gBAAkB,kCAAyCh9B,EAAU,UACpEb,IAOP6P,EAAMkJ,gBAAkBf,EAAOmB,gBAAgBnZ,IAGnD,IAAI0+E,EAAiB,uBACjB1+E,IACA0+E,GAAkB,cAGtB,IAAI33E,EAAY,iBACZy6C,IACAz6C,GAAa,QAEbs3E,IACAt3E,GAAa,UAQjB,IAAIogD,EAAY,GAEZk3B,IACAl3B,EAAUlxC,OAAQhC,OAAO60B,YAAc,KAExCzZ,IACC83B,EAAUlxC,QAAU2sB,EAAe,KAEvC,IAAIlQ,EAAc/1B,EAAQ,GAAG+1B,YACzBE,EAAaj2B,EAAQ,GAAGi2B,WAE5B,OACI9nB,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOs3C,EACPx7C,IAAKA,EACL5E,UAAWA,GACd+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMm3E,GAAY,IAC3B13E,UAAW23E,EAAgB7uE,MAAOA,GAClC/E,EAAAtK,EAAA4G,cAAA,YAAOpH,IAET8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACXhH,GAAkB2yB,EAAc5nB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAgB6rB,EAA/B,MAA8CF,GAAqB,GACpG/1B,EAAQsR,MAAM,OAAmB3S,IAAhBgjF,EAA4BA,EAAcv8E,GAAMnG,IAC9D,SAACkQ,EAAErN,GAAH,OACIqM,EAAAtK,EAAA4G,cAACu3E,EAAD,CACEjB,YAAaA,EACb/C,gBAAiBA,EACjBryC,UAAWA,EACXvoB,YAAa9f,GAAgBs+E,IAAWH,EAAiB3/E,IAAMgyE,EAC/DiK,OAAQ0D,EAAiB3/E,IAAMgyE,EAAqB,EACpDtoE,OAAQi2E,EAAiB3/E,EACzBizE,cAAeA,EACfoJ,SAAUA,EACVF,OAAQj2E,GAAgB9D,GAAWb,EACnCoI,gBAAiBA,EACjBf,IAAK5I,EACLhD,OAAQqQ,oBC9FfhD,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CAtBM,SAAAzI,GAA+B,IAA7Bu6E,EAA6Bv6E,EAA7Bu6E,OAAQxyE,EAAqB/H,EAArB+H,gBAC3B,OACI0C,EAAAtK,EAAA4G,cAAA,WACE0D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBAAf,2BAGA+D,EAAAtK,EAAA4G,cAACi7B,EAAA,EAAD,CAAepwB,MAAM,EAAM4Q,QAAS+3D,EAAOj+E,UAC3CmO,EAAAtK,EAAA4G,cAACw3E,EAAD,CAAeP,OAAO,EAAMj2E,gBAAiBA,EAAiBwyE,OAAQA,kCCqGjE9xE,sBAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,aAChC6tC,mBAAoB1nE,EAAM+lC,SAAS2hC,qBAId,SAACnnE,GAC1B,MAAO,IAIMR,CA1GI,SAAAzI,GAA8F,IAA5Fs6E,EAA4Ft6E,EAA5Fs6E,gBAAiB9gD,EAA2Ex5B,EAA3Ew5B,IAAKzxB,EAAsE/H,EAAtE+H,gBAA8CqoE,GAAwBpwE,EAArDgvB,cAAqDhvB,EAAtCuiC,aAAsCviC,EAAxBowE,oBAChFnsE,EAA4Cu1B,EAA5Cv1B,QAASzB,EAAmCg3B,EAAnCh3B,YAAa2B,EAAsBq1B,EAAtBr1B,QAASC,EAAao1B,EAAbp1B,UADyEmF,EAEvFC,wBAASvO,GAF8EwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAElGg1C,GAFkG90C,EAAA,GAAAA,EAAA,IAI7GY,oBAAU,WACN6uB,YAAa12B,GAAarH,KACtBojD,IACL,CAAC/7C,IAEJ,IAAI8I,EAAMC,sBAAOtQ,GAEZyG,EAAQsP,YAAU1F,EAAMsI,OAAO60B,YAAc,IAAS,IAAI,OAAMxtC,OAAWA,OAAWA,OAAWA,EAAWm1E,GAA5G1uE,KAED88E,EAAmB,GACvB,IAAK,IAAI7+E,KAAOyE,EACZo6E,EAAgB,GAAA/xE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQmkF,GAARnkF,OAAA2R,EAAA,EAAA3R,CAA8B+J,EAAUzE,KAE5D,IAAIvB,EAAE,EACFqgF,EAAe,EACfC,EAAO,GACX,IAAK,IAAIp6E,KAAgBL,EAAS,CAC9B,IAAIg6E,EAAcv8E,EAAO+8E,EAGrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEp9B,MAAO/iD,EAAI,IAAM,EACjB4I,IAAK5I,EACL2/E,eAAgBU,EAChBnE,gBAAiBA,EACjBryC,UAAW38B,EACX2yE,YAAaA,EACbl2E,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS2H,EAAQK,GAAeA,mBAE/Cm6E,GAAgB98E,KAAKwY,IAAI8jE,EAAah6E,EAAQK,GAActI,SAGpE,IAAK,IAAIwE,KAAW2D,EAAS,CACzB,IAAI85E,EAAcv8E,EAAO+8E,EACrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEp9B,MAAO/iD,EAAI,IAAM,EACjB4I,IAAK5I,EACL6pC,UAAW38B,EACXgvE,gBAAiBA,EACjByD,eAAgBU,EAChBR,YAAaA,EACbl2E,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS6H,EAAQ3D,GAAUA,cAE1Ci+E,GAAgB98E,KAAKwY,IAAI8jE,EAAa95E,EAAQ3D,GAASxE,SAK/D,IAAK,IAAI2D,KAAOyE,EAAW,CACvB,IAAI65E,EAAcv8E,EAAO+8E,EACrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEp9B,MAAO/iD,EAAI,IAAM,EACjB4I,IAAK5I,EACLk8E,gBAAiBA,EACjBryC,UAAW38B,EACX2yE,YAAaA,EACbZ,aAAa,EACbU,eAAgBU,EAChB12E,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS8H,EAAUzE,GAAMA,IAAKA,MAC7C8+E,GAAgB98E,KAAKwY,IAAI8jE,EAAa75E,EAAUzE,GAAK3D,SAI7D,IAAIwT,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAEjC,OACIh+B,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOlE,IAAKA,EAAK5E,UAAU,eACrC+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACZg4E,uiCCnFb,IAAM/mE,EAAS,IAAI1J,IAgJJxF,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,eAIX,SAACt5B,GAC1B,MAAO,IAIMR,CAhIK,SAAAzI,GAadA,EAZFgvB,cAYEhvB,EAXFuiC,aAWE,IAAA5N,EAVFr4B,EAUE0D,EAVF1D,QACA4hF,EASEl+E,EATFk+E,OACAn2E,EAQE/H,EARF+H,gBAEAspE,GAMErxE,EAPF6B,WAOE7B,EANFqxE,eACA3xE,EAKEM,EALFN,eACAE,EAIEI,EAJFJ,aACA06E,EAGEt6E,EAHFs6E,gBACA6D,EAEEn+E,EAFFm+E,eACAl2C,EACEjoC,EADFioC,UAEI38B,EAAMC,sBAAOtQ,GACbyjF,EAAO,GACNh9E,EAAQsP,YAAUi3B,EAAW,IAAI,GAAjCvmC,KACDtD,EAAE,EACFqgF,EAAe,EACfE,EAAW,GANb/pD,EAAA3xB,EAOc3G,GAPd,IAOF,IAAAs4B,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAAyB,KAAhBo2B,EAAgB7E,EAAAtxB,MAChBY,EAAqCu1B,EAArCv1B,QAAeE,GAAsBq1B,EAA5BL,KAA4BK,EAAtBr1B,SAASC,EAAao1B,EAAbp1B,UACzBo6E,EAAmB,GACvB,IAAK,IAAI7+E,KAAOyE,EACZo6E,EAAgB,GAAA/xE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQmkF,GAARnkF,OAAA2R,EAAA,EAAA3R,CAA8B+J,EAAUzE,KAG5D,IAAK,IAAI2E,KAAgBL,EAAS,CAC9B,IAAIg6E,EAAcv8E,EAAO+8E,EACrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACER,eAAgBU,EAChB7+E,aAAcA,EACds+E,OAAQA,EACRC,eAAgBA,EAChBl2C,UAAWA,EACXvoC,eAAgBA,EAChByhD,MAAO/iD,EAAI,IAAM,EACjBk8E,gBAAiBA,EACjBjJ,cAAeA,EACfrqE,IAAK5I,EACL6/E,YAAaA,EACbl2E,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS2H,EAAQK,GAAeA,mBAE/Cm6E,GAAgB98E,KAAKwY,IAAI8jE,EAAah6E,EAAQK,GAActI,SAEhE2iF,EAAQ,GAAAlyE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQskF,GAARtkF,OAAA2R,EAAA,EAAA3R,CAAqB4J,EAAQK,KAEzC,IAAK,IAAI9D,KAAW2D,EAAS,CACzB,IAAI85E,EAAcv8E,EAAO+8E,EACrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEp9B,MAAO/iD,EAAI,IAAM,EACjB6pC,UAAWA,EACX81C,eAAgBU,EAChBnE,gBAAiBA,EACjB16E,aAAcA,EACds+E,OAAQA,EACRC,eAAgBA,EAChBn3E,IAAK5I,EACLsB,eAAgBA,EAChBu+E,YAAaA,EACb5M,cAAeA,EACftpE,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS6H,EAAQ3D,GAAUA,cAE1Ci+E,GAAgB98E,KAAKwY,IAAI8jE,EAAa95E,EAAQ3D,GAASxE,SAE3D2iF,EAAQ,GAAAlyE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQskF,GAARtkF,OAAA2R,EAAA,EAAA3R,CAAqB8J,EAAQ3D,KAGzC,IAAK,IAAIb,KAAOyE,EAAW,CACvB,IAAI65E,EAAcv8E,EAAO+8E,EACrBR,EAAc,IACdS,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEp9B,MAAO/iD,EAAI,IAAM,EACjB6pC,UAAWA,EACXqyC,gBAAiBA,EACjB6D,eAAgBA,EAChBn3E,IAAK5I,EACLwB,aAAcA,EACds+E,OAAQA,EACRH,eAAgBU,EAChBpN,cAAeA,EACf4M,YAAaA,EACbv+E,eAAgBA,EAChBqI,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAAS8H,EAAUzE,GAAMA,IAAKA,MAE7C8+E,GAAgB98E,KAAKwY,IAAI8jE,EAAa75E,EAAUzE,GAAK3D,SAEzD2iF,EAAQ,GAAAlyE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQskF,GAARtkF,OAAA2R,EAAA,EAAA3R,CAAqB+J,EAAUzE,OAlF7C,MAAAzD,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAsFF,IAAI2uB,EAAcssD,EAAS,IAAMA,EAAS,GAAGtsD,YACzCE,EAAaosD,EAAS,IAAMA,EAAS,GAAGpsD,WAExC7rB,EAAY,eAIhB,OAHIw3E,GAAWx+E,GAAkB2yB,KAC7B3rB,GAAa,mBAGb+D,EAAAtK,EAAA4G,cAAA,OAAMuE,IAAKA,EAAK5E,UAAWA,GACtBhH,GAAkB2yB,EAAc5nB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBAAuB6rB,EAAtC,MAAqDF,GAAqB,GAC5G6rD,EAASzzE,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,uBACP+D,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAO,CAACkJ,gBAAiBf,EAAOmB,gBAAgBlZ,EAAahF,QAAS8L,UAAU,eACpF9G,EAAahF,OAAe,GAC9C8jF,qCC4BIj2E,eAdS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/B4vD,iBAAkBl2E,EAAM+lC,SAASmwC,iBACjCr8C,aAAc75B,EAAMqmB,YAAYwT,eAIX,SAACt5B,GAC1B,MAAO,CACDi1C,oBAAqB,SAACh7C,GAAD,OAAO+F,EAASi1C,aAAoBh7C,OAIlDuF,CAjJG,SAAAzI,GAkBZ,IAjBFmvD,EAiBEnvD,EAjBFmvD,SACApnD,EAgBE/H,EAhBF+H,gBACAo1C,EAeEn9C,EAfFm9C,cACAgB,EAcEn+C,EAdFm+C,WACAt8C,EAaE7B,EAbF6B,WACAg9E,EAYE7+E,EAZF6+E,cACA7vD,EAWEhvB,EAXFgvB,cACAsrD,EAUEt6E,EAVFs6E,gBACA16E,EASEI,EATFJ,aACA2iC,EAQEviC,EARFuiC,aACAjjC,EAOEU,EAPFV,QACAC,EAMES,EANFT,QACAu/E,EAKE9+E,EALF8+E,eACA5gC,EAIEl+C,EAJFk+C,oBACA0gC,EAGE5+E,EAHF4+E,iBACAn/E,EAEEO,EAFFP,gBACAy9C,EACEl9C,EADFk9C,kBACE3zC,EAC0BC,mBAAS,IADnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACGjN,EADHmN,EAAA,GACYsP,EADZtP,EAAA,GAAAuG,EAEsBxG,mBAAS,GAF/ByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEGxQ,EAFHyQ,EAAA,GAEU6tB,EAFV7tB,EAAA,GAGE8uE,EAAYxzE,iBAAO,IAHrB6E,EAI8B5G,oBAAS,GAJvC6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAIGy0D,EAJHx0D,EAAA,GAIc4qE,EAJd5qE,EAAA,GAKE/E,EAAMC,sBAAOtQ,GACbkE,EAAWI,EAAWqU,OAAO60B,YAAc,IAAS,GAAK,GAN3Du2C,EAO2BhuE,YACzB1F,EACe,KAAfzJ,EAAoBF,KAAKu9C,MAAOtrC,OAAO60B,YAAc,IAAS,IAAM9mC,KAAKu9C,MAAM//C,IAC/E,EACA0C,EACAtC,OACAtE,EACA2jF,GAPCl9E,EAPHs9E,EAOGt9E,KAAMu9E,EAPTD,EAOSC,eASX50E,oBAAU,YACDy0E,GAAkBxzE,EAAI4I,SACvB5I,EAAI4I,QAAQ0qB,SAAS,EAAGqgD,EAAe/qE,UAE5C,CAAC4qE,IAEJz0E,oBAAU,WACN,IAAItN,EAAQ8E,EAAWvC,EAAQC,EAAQC,EAAMC,EAC7C,GAAI1C,IAAUgiF,EAAU7qE,QAAxB,CAGc,IAAV1U,GACAy7E,GAAa,GAEjB8D,EAAU7qE,QAAUnX,EAEpB,IAAIoC,EAAWI,EAAWqU,OAAO60B,YAAc,IAAS,GAAK,GAC7DvpC,aACIC,EACA0C,EAAYvC,EAASC,EAASC,EAAOC,GACpCtE,KAAK,SAAAub,GACuB,GAArB/U,KAAKC,MAAMpC,IACXuZ,EAAWrC,GACXwnC,EAAoB,IACbv8C,KAAKC,MAAMpC,GAAS,GAAKkX,EAAE1a,OAAS,GAC3C+c,EAAU,GAAAtM,OAAApS,OAAA2R,EAAA,EAAA3R,CAAMiC,GAANjC,OAAA2R,EAAA,EAAA3R,CAAkBqc,KAGhCukE,GAAa,OAEtB,CAACliE,EAAYhR,EAAiBkzE,EAAcz7E,EAAOlD,EAASmD,EAAiBoC,IAEhFwI,oBAAU,WACNyzB,EAAS,GACT/kB,EAAW,KACZ,CAACzZ,EAASC,EAASsC,EAAYi8B,EAAU/kB,IAE5C1O,oBAAU,WACN,IAAIq+B,EAAQvpC,EACZ2+B,EAASn8B,KAAKyY,IAAI,EAAG1Y,EAAOgnC,KAC7B,CAAChnC,EAAMo8B,IAEV,IAAItuB,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAEzBzZ,IACAxf,EAAMoG,QAAU2sB,EAAe,KAGvC,IAAI28C,OAAcjkF,EAClB,GAAI4jF,IAAkBM,IAAM,CACxB,GAAIta,EACA,OAAQp6D,EAAAtK,EAAA4G,cAACmmC,GAAA,EAAD,CAAoBC,KAAK,qBAErC+xC,EACIz0E,EAAAtK,EAAA4G,cAACq4E,EAAD,CACE9E,gBAAiBA,EACjB16E,aAAcA,EACdqoC,UAAW38B,EACXzJ,WAAYA,EACZvF,QAASA,EACTyL,gBAAiBA,IAG3B,OACI0C,EAAAtK,EAAA4G,cAAA,WACG+3E,EAAiBr0E,EAAAtK,EAAA4G,cAAA,WACGooD,EACA2vB,GACK,GAC1Br0E,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOlE,IAAKA,EAAK3P,GAAG,aAAa+K,UAAWo4E,EAAiB,4BAA8B,wBACpG3vB,EACC0V,GAAgC,IAAnBvoE,EAAQN,OAAoE,GAArDyO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAf,oBACrCm+D,EACAp6D,EAAAtK,EAAA4G,cAACmmC,GAAA,EAAD,CAAoBC,KAAK,qBACzB+xC,GACA5iF,EAAQsR,MAAM,EAAGlM,GAAMnG,IACnB,SAAC6iD,EAAYhgD,GAAb,OACIqM,EAAAtK,EAAA4G,cAACs4E,GAAA,EAAD,CACEr4E,IAAK,OAAS5I,EACdqB,gBAAiBA,EACjB66E,gBAAiBA,EACjBryC,UAAW38B,EACXxD,OAAQ1J,EACRshB,WAAY9f,GAAgBg/E,IAAqBxgF,EACjD++C,cAAeA,EACft7C,WAAYA,EACZq7C,kBAAmBA,EACnB39C,QAASA,EACT4+C,WAAYA,EACZ7hD,QAAS8hD,UCtEjB31C,gDAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,aAChCjjC,QAASoJ,EAAM8qB,OAAOC,cAAgB/qB,EAAM8qB,OAAOC,cAAcn0B,QAAU,IAItD,SAAC2J,GAC1B,MAAO,IAIMR,CAjEQ,SAAAzI,GAOjB,IANFgvB,EAMEhvB,EANFgvB,cACAuT,EAKEviC,EALFuiC,aACA7iC,EAIEM,EAJFN,eACA46E,EAGEt6E,EAHFs6E,gBACAvyE,EAEE/H,EAFF+H,gBACAzI,EACEU,EADFV,QAEIgM,EAAMC,sBAAOtQ,GADfsO,EAE0BC,mBAAS,IAFnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEGjN,EAFHmN,EAAA,GAEYsP,EAFZtP,EAAA,GAGFY,oBAAU,WACNnL,aACI,GAAI,GAAII,EAASggF,IAAK,GAAG,EAAO5/E,GAC/BvE,KAAK,SAACub,GACCA,EAAE1a,OAAS,EACX+c,EAAWrC,GAKXsK,WAAW,WACP9hB,aACI,GACA,GAAII,EAASggF,IAAK,GAAG,EAAO5/E,GAC3BvE,KAAK4d,IACX,QAGhB,CAACrZ,EAAgBqZ,IAEpB,IAAIvJ,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAOjC,OAJIzZ,IACAxf,EAAMoG,QAAU2sB,EAAe,KAI/B93B,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAKkE,MAAOA,EAAO9I,UAAU,4BACrC+D,EAAAtK,EAAA4G,cAACq4E,EAAD,CACE9E,gBAAiBA,EACjBryC,UAAW38B,EACX5L,eAAgBA,EAChBgC,KAAM,IACNG,WAAY,GACZvF,QAASA,EACTyL,gBAAiBA,QCkBdU,eAbS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,aAChCjjC,QAASoJ,EAAM8qB,OAAOC,cAAgB/qB,EAAM8qB,OAAOC,cAAcn0B,QAAU,IAItD,SAAC2J,GAC1B,MAAO,IAIMR,CAjEM,SAAAzI,GAOf,IANFgvB,EAMEhvB,EANFgvB,cACAuT,EAKEviC,EALFuiC,aACA3iC,EAIEI,EAJFJ,aACAmI,EAGE/H,EAHF+H,gBACAuyE,EAEEt6E,EAFFs6E,gBACAh7E,EACEU,EADFV,QAEIgM,EAAMC,sBAAOtQ,GADfsO,EAE0BC,mBAAS,IAFnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEGjN,EAFHmN,EAAA,GAEYsP,EAFZtP,EAAA,GAGFY,oBAAU,WACNnL,aACI,GAAI,GAAII,EAASggF,IAAK,GAAG,OAAOrkF,OAAWA,EAAW2E,GACrDzE,KAAK,SAACub,GACCA,EAAE1a,OAAS,EACX+c,EAAWrC,GAKXsK,WAAW,WACP9hB,aACI,GACA,GAAII,EAASggF,IAAK,GAAG,OAAOrkF,OAAWA,EAAW2E,GACjDzE,KAAK4d,IACX,QAGhB,CAACnZ,EAAcmZ,IAClB,IAAIvJ,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAOjC,OAJIzZ,IACAxf,EAAMoG,QAAU2sB,EAAe,KAI/B93B,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAKkE,MAAOA,EAAO9I,UAAU,4BACrC+D,EAAAtK,EAAA4G,cAACq4E,EAAD,CACE9E,gBAAiBA,EACjBryC,UAAW38B,EACX1L,aAAcA,EACds+E,QAAQ,EACRx8E,KAAM,IACNG,WAAY,GACZvF,QAASA,EACTyL,gBAAiBA,OCoIdU,gBAbS,SAACC,EAAO1C,GAC9B,MAAO,CAEH1G,QAASoJ,EAAM8qB,OAAOC,cAAgB/qB,EAAM8qB,OAAOC,cAAcn0B,QAAU,IAItD,SAAC2J,GAC1B,MAAO,CACH4lC,cAAe,SAAApjC,GAAC,OAAIxC,EAAS6lC,aAAsBrjC,OAI1ChD,CAvKE,SAAAzI,GAAuF,IAAAu/E,EAAAv/E,EAArFw/E,sBAAqF,IAAAD,EAAtED,IAAsEC,EAAjEx3E,EAAiE/H,EAAjE+H,gBAAiBzI,EAAgDU,EAAhDV,QAASovC,EAAuC1uC,EAAvC0uC,mBAAoBG,EAAmB7uC,EAAnB6uC,cAAmBtlC,EAC1EC,mBAAS,IADiEC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAAAyG,GAAAvG,EAAA,GAAAA,EAAA,GAE9DD,oBAAS,IAAIyX,MAAOqY,aAF0CrpB,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAAAI,GAAAH,EAAA,GAAAA,EAAA,GAGhFzG,wBAASvO,IAHuEoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG/FopB,EAH+FnpB,EAAA,GAG1FovE,EAH0FpvE,EAAA,GAAAoQ,EAI5DjX,mBAASk2E,KAJmDh/D,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAI/Fo+D,EAJ+Fn+D,EAAA,GAIhFi/D,EAJgFj/D,EAAA,GAAAuT,EAKxEzqB,mBAASg2E,GAL+DtrD,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAK/F10B,EAL+F20B,EAAA,GAKtF0rD,EALsF1rD,EAAA,GAAAG,EAM1E7qB,wBAASvO,GANiEq5B,EAAAj6B,OAAAqP,EAAA,EAAArP,CAAAg6B,EAAA,GAM/FkmD,EAN+FjmD,EAAA,GAMvFurD,EANuFvrD,EAAA,GAAA6mD,EAO1D3xE,wBAASvO,GAPiDmgF,EAAA/gF,OAAAqP,EAAA,EAAArP,CAAA8gF,EAAA,GAO/Fz7E,EAP+F07E,EAAA,GAO/El+B,EAP+Ek+B,EAAA,GAAAG,EAQ9D/xE,wBAASvO,GARqDugF,EAAAnhF,OAAAqP,EAAA,EAAArP,CAAAkhF,EAAA,GAQ/F37E,EAR+F47E,EAAA,GAQjFlB,EARiFkB,EAAA,GAAAG,EASlEnyE,mBAASklC,GATyDktC,EAAAvhF,OAAAqP,EAAA,EAAArP,CAAAshF,EAAA,GAS/F95E,EAT+F+5E,EAAA,GASnFvK,EATmFuK,EAAA,GAAAG,EAUxDvyE,oBAAS,GAV+CwyE,EAAA3hF,OAAAqP,EAAA,EAAArP,CAAA0hF,EAAA,GAU/Ft8E,EAV+Fu8E,EAAA,GAU9E8D,EAV8E9D,EAAA,GAAAO,EAW9D/yE,wBAASvO,GAXqDuhF,EAAAniF,OAAAqP,EAAA,EAAArP,CAAAkiF,EAAA,GAW/FwD,EAX+FvD,EAAA,GAWjFwD,GAXiFxD,EAAA,GAapGnyE,oBAAU,WAEN,OADAuJ,OAAOC,iBAAiB,UAAWrH,IAC5B,kBAAMoH,OAAOE,oBAAoB,UAAWtH,MACpD,CAACizE,EAAQI,EAAWG,GAAiB9iC,EAAmByiC,EAAkBd,IAE7E,IAAMryE,GAAY1C,sBAAY,SAACrG,GACf,cAARA,EAAEuD,IACFi5E,KACOx8E,EAAEuD,KAOd,CAACy4E,EAAQI,EAAWG,GAAiB9iC,EAAmByiC,EAAkBd,IAE7Ex0E,oBAAU,WACN6yC,OAAkBjiD,GAClBq/E,OAAgBr/E,IACjB,CAAC4G,EAAY+9E,EAAY1iC,EAAmBo9B,IAE/CjwE,oBAAU,WACa,KAAfxI,GAAsBpC,GACtBkgF,EAAiBD,MAEtB,CAAC79E,EAAYpC,EAAiBkgF,IAGjC,IAAMxiC,GAAgBrzC,sBAAY,SAACrG,EAAG82E,GAClC,GAAI92E,EAAEgV,QAGF,OAFAgnE,OAAOxkF,QACP+kF,GAAgBzF,GAGpBkF,OAAOxkF,GACP4kF,EAAUtF,IACX,CAACkF,EAAQI,IAEN1hC,GAAar0C,sBAAY,SAAC0vB,EAAK75B,GACjCkgF,OAAU5kF,GACVwkF,EAAOjmD,IACR,CAAC63C,EAAewO,EAAWJ,EAAQlgF,IAElCjD,QAAUrB,EACVilF,GAAa,GACbC,IAAU,EAERF,GAASn2E,sBAAY,WACvB21E,OAAOxkF,GACP4kF,OAAU5kF,GACV+kF,QAAgB/kF,GAChBiiD,OAAkBjiD,GAClBq/E,OAAgBr/E,IACjB,CAACwkF,EAAQI,EAAWG,GAAiB9iC,EAAmBo9B,KAEvD9gD,GAAO+gD,GAAUwF,GAAgBrgF,GAAkBE,KACnDugF,IAAU,EACVD,GACKz1E,EAAAtK,EAAA4G,cAAA,OACEE,QAASg5E,GACTv5E,UAAU,yBAEbpK,GADAyjF,EACWt1E,EAAAtK,EAAA4G,cAACq5E,EAAD,CAAcr4E,gBAAiBA,EAAiBwyE,OAAQwF,IAC5DrgF,EACG+K,EAAAtK,EAAA4G,cAACs5E,GAAD,CACE/F,gBAAiBA,EACjB56E,eAAgBA,EAChBqI,gBAAiBA,IACtBnI,EACG6K,EAAAtK,EAAA4G,cAACu5E,GAAD,CACEhG,gBAAiBA,EACjB16E,aAAcA,EAAcmI,gBAAiBA,IAGrDwyE,EAAS9vE,EAAAtK,EAAA4G,cAACw3E,EAAD,CACEjE,gBAAiBA,EACjB0D,OAAO,EAAMj2E,gBAAiBA,EAAiBwyE,OAAQA,IACtE9vE,EAAAtK,EAAA4G,cAACw5E,EAAD,CAAYjG,gBAAiBA,EAAiBvyE,gBAAiBA,EAAiByxB,IAAKA,KAI7FnvB,oBAAU,WAEFgnE,EAAc3iC,GACdmxC,OAAU5kF,GACVwkF,OAAOxkF,IAGZ,CAACyzC,EAAoB2iC,EAAesO,EAAkBE,EAAWJ,IAEpEp1E,oBAAU,WACNo1E,OAAOxkF,GACP4kF,OAAU5kF,IACX,CAAC4jF,IAEJ,IAAMh0E,GAAWf,sBAAY,SAAC5G,GAC1Bu8E,OAAOxkF,GACP4kF,OAAU5kF,GACViiD,OAAkBjiD,GAClBo2E,EAAcnuE,GACd2rC,EAAc3rC,IACf,CAACmuE,EAAeoO,EAAQI,EAAW3iC,IAMtC,OAJA7yC,oBAAU,WACNQ,GAAS6jC,IACV,CAACpvC,EAAS+xE,EAAeoO,EAAQI,EAAW3iC,IAG3CzyC,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWy5E,GAAU,wBAA0B,gBACjD11E,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAACy5E,GAAD,CACEjhF,QAASA,EACT+6E,gBAAiBA,EACjB16E,aAAcA,EACdi/E,cAAeA,EACfh9E,WAAYA,EACZpC,gBAAiBA,EACjBy9C,kBAAmBA,EACnBC,cAAeA,GACfgB,WAAYA,GACZ7+C,QAASA,EACTw/E,eAAgBxiF,GAChByL,gBAAiBA,GACjB0C,EAAAtK,EAAA4G,cAAC05E,EAAA,EAAD,CACE/gF,eAAgBA,EAChBigF,iBAAkBA,EAClBd,cAAeA,EACft/E,QAASA,EACTqgF,WAAYA,EACZ/0E,SAAUA,GACVi1E,mBAAoBA,EACpBrgF,gBAAiBA,GACjBgL,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAmBw5E,gGC5J7CvoE,EAAS,UAAI1J,GA+CJxF,cAZS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,CACHypE,kBAAmB,SAACjnE,GAAD,OAAOxC,EAASypE,aAAkBjnE,KACrD0qE,eAAgB,SAAC1qE,GAAD,OAAOxC,EAASktE,aAAe1qE,OAItChD,CA7CM,SAAAzI,GAAkE,IAAhE+H,EAAgE/H,EAAhE+H,gBAAiB8vB,EAA+C73B,EAA/C63B,OAAQ66C,EAAuC1yE,EAAvC0yE,kBAAmByD,EAAoBn2E,EAApBm2E,eAC3DuK,EAAW,CACXhoE,gBAAiBf,EAAOmB,gBAAgB0kC,IAAwB3lB,EAAOnzB,kBAS3E,OACI+F,EAAAtK,EAAA4G,cAAA,OACEgH,WAAW,EACXF,WAAY,SAACpK,GAAD,OAAOA,EAAEqK,kBACrBR,YAAa,kBAAMolE,EAAkB76C,IACrCnxB,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,OAAKE,QAZK,WACZkvE,EAAe,mBAAqBt+C,EAAOj9B,MAAQ,KACnDmN,EAAgBmkC,WACZrU,GAAQ,GACP18B,KAAK,SAAA+H,GAAC,OAAIizE,OAAel7E,MAQLyL,UAAU,MAAM8I,MAAOkxE,IAC9Cj2E,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,iBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAemxB,EAAOj9B,OACrC6P,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOkxE,EAAUh6E,UAAU,mBAC7B82C,IAAwB3lB,EAAOnzB,iBAEjCmzB,EAAOtzB,KAAKhJ,IAAI,SAAAoE,GAAG,OAAI8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc/G,MAEvD8K,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,4BCJZ+B,cAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA7BO,SAAAzI,GASb,IARLu6E,EAQKv6E,EARLu6E,OACAxyE,EAOK/H,EAPL+H,gBAOK/H,EANLmhD,IAMKnhD,EALLg+E,MAKKh+E,EAJLi+E,YAIKj+E,EAHL5B,EAGK4B,EAFLgvB,cAEKhvB,EADLuiC,aAEI,OACI93B,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iCACX6zE,EAAOj+E,QAAQf,IACZ,SAACkQ,GAAD,OAAOhB,EAAAtK,EAAA4G,cAAC45E,EAAD,CAAc54E,gBAAiBA,EAAiB8vB,OAAQpsB,6CC8CpEhD,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,eAIX,SAACt5B,GAC1B,MAAO,IAIMR,CAzDI,SAAAzI,GAAyD,IAAvDw5B,EAAuDx5B,EAAvDw5B,IAAKzxB,EAAkD/H,EAAlD+H,gBAClBuD,GADoEtL,EAAjCgvB,cAAiChvB,EAAlBuiC,aAC5Ch3B,sBAAOtQ,IAEZmJ,EAA0Bo1B,EAA1Bp1B,UAAW5B,EAAeg3B,EAAfh3B,YACXd,EAAQsP,YAAU1F,EAAK,IAAI,GAA3B5J,KAJmE6H,EAKlDC,wBAASvO,GALyCwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAKnE4vB,EALmE1vB,EAAA,GAK7D80C,EAL6D90C,EAAA,GAOxEY,oBAAU,WACN6uB,YAAa12B,GAAarH,KACtBojD,IACL,CAAC/7C,IAEJ,IAAIg8E,EAAmB,GACvB,IAAK,IAAI7+E,KAAOyE,EACZo6E,EAAgB,GAAA/xE,OAAApS,OAAA2R,EAAA,EAAA3R,CAAQmkF,GAARnkF,OAAA2R,EAAA,EAAA3R,CAA8B+J,EAAUzE,KAE5D,IAAI6P,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAG7BrqC,EAAE,EAEFsgF,EAAO,GACPT,EAAcv8E,EAFC,EAenB,OAXIu8E,EAAc,GAAKO,EAAiBxiF,OAAS,GAC7C0iF,EAAK3iF,KACD0O,EAAAtK,EAAA4G,cAAC65E,EAAD,CACEz/B,MAAO/iD,EAAI,IAAM,EACjB4I,IAAK5I,EACL6/E,YAAaA,EACbl2E,gBAAiBA,EACjBwyE,OAAQ,CAACj+E,QAASkiF,EAAkB7+E,IAAK,gBAK/C8K,EAAAtK,EAAA4G,cAAA,OAAKyI,MAAOA,EAAOlE,IAAKA,EAAK5E,UAAU,eACrC+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YAAYyyB,EAAOqlB,YAAWrlB,GAAQ,IACpDulD,yBCzCT/iF,EAAK,EA8DM8M,cAZS,SAACC,EAAO1C,GAC9B,MAAO,CACHgpB,cAAetmB,EAAMM,UAAUgmB,cAC/BuT,aAAc75B,EAAMqmB,YAAYwT,eAIX,SAACt5B,GAC1B,MAAO,IAIMR,CA5DK,SAAAzI,GAQd,IAPFm9C,EAOEn9C,EAPFm9C,cACAt7C,EAME7B,EANF6B,WACAs8C,EAKEn+C,EALFm+C,WACA0iC,EAIE7gF,EAJF6gF,WAEA7xD,GAEEhvB,EAHFX,YAGEW,EAFFgvB,eACAuT,EACEviC,EADFuiC,aACEh5B,EAC0BC,mBAAS,IADnCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACGjN,EADHmN,EAAA,GACYsP,EADZtP,EAAA,GAAAuG,EAE8BxG,oBAAS,GAFvCyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAEG60D,EAFH50D,EAAA,GAEcgrE,EAFdhrE,EAAA,GAGE3E,EAAMC,sBAAOtQ,GACZyG,EAAQsP,YAAU1F,EAAK,IAAI,GAA3B5J,KAEL2I,oBAAU,WACN,IAAIy2E,IAAQnlF,EACZs/E,GAAa,GACb4F,EAAWh/E,GACN1G,KAAK,SAAAub,GACEoqE,IAAQnlF,IACRod,EAAWrC,GACXukE,GAAa,OAG1B,CAACp5E,EAAYkX,EAAYkiE,IAG5B,IAAIzrE,EAAQ,CACRoG,OAAQhC,OAAO60B,YAAc,KAMjC,OAJIzZ,IACAxf,EAAMoG,QAAU2sB,EAAe,KAI/B93B,EAAAtK,EAAA4G,cAAA,OAAKuE,IAAKA,EAAKkE,MAAOA,EAAO9I,UAAU,cACpCm+D,EACAp6D,EAAAtK,EAAA4G,cAACmmC,EAAA,EAAD,CAAoBC,KAAK,cACzB7wC,EAAQsR,MAAM,EAAGlM,GAAMnG,IACnB,SAAC6iD,EAAYhgD,GAAb,OACIqM,EAAAtK,EAAA4G,cAACs4E,EAAA,EAAD,CACEr4E,IAAK,OAAS5I,EACd++C,cAAeA,EACfgB,WAAYA,EACZ7hD,QAAS8hD,2nCCtC9B,IAAM7iB,EAAW,IAAIwlD,IAERC,EAAU,eAAAhhF,EAAA3F,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAC,EAAOwB,GAAP,IAAA9E,EAAAT,EAAA80C,EAAA6vC,EAAA/8E,EAAAg9E,EAAAt9E,EAAAkB,EAAA,OAAA5E,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACjBjE,EAAQ,IAAI++B,IAAaP,EAASt8B,iBAClCsL,KAAK42E,KACLnlD,OAAO,QACPA,OAAO,iBACPA,OAAO,eACPA,OAAO,uBACPA,OAAO,aACPA,OAAO,WACPsX,MAAM,UAAW,GATAxyC,EAAAG,GAWFmgF,IAXEtgF,EAAAE,KAAA,EAWmBjE,EAAMm/B,eAXzB,cAAAp7B,EAAA6uE,GAAA7uE,EAAAM,KAAAN,EAAAE,KAAA,KAAAF,EAAAG,IAAAH,EAAA6uE,GAWyC,GAXzC,cAWlBrzE,EAXkBwE,EAAAM,KAYlBgwC,EAAM90C,EAAQf,IAAI,SAAAkQ,GAAC,OAAIA,EAAE0sB,cAZPr3B,EAAAE,KAAA,GAaIqgF,EAAcjwC,GAblB,eAalB6vC,EAbkBngF,EAAAM,KAAAN,EAAAE,KAAA,GAcMsgF,EAAyBlwC,GAd/B,eAclBltC,EAdkBpD,EAAAM,KAelB8/E,EAAWK,EAAWjlF,EAAS2kF,EAAe/8E,GAC9CN,EAAQf,YAAS2+E,EAAoB3/E,EAAYq/E,IACjDp8E,EAAiBnB,YAAkBC,EAAO/B,GAjBxBf,EAAAE,KAAA,GAkBT2D,YAAmBG,GAlBV,eAAAhE,EAAAkE,OAAA,SAAAlE,EAAAM,MAAA,yBAAAN,EAAA2B,SAAApC,MAAH,gBAAAqC,GAAA,OAAA1C,EAAA4C,MAAArI,KAAA6E,YAAA,GAqBjBiiF,EAAa,eAAA/gF,EAAAjG,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAg1B,EAAOglB,GAAP,IAAAr9C,EAAAT,EAAAiI,EAAAqwB,EAAAD,EAAAv5B,EAAA4L,EAAA,OAAA9G,EAAAC,EAAAU,KAAA,SAAA00B,GAAA,cAAAA,EAAAx0B,KAAAw0B,EAAAv0B,MAAA,cACdjE,EAAQ,IAAI++B,IAAaP,EAASt8B,iBACjCsL,KAAKk3E,KACLzlD,OAAO,eACPA,OAAO,OACPC,QAAQ,cAAeme,GALV7kB,EAAAv0B,KAAA,EAOEjE,EAAMm/B,eAPR,OAOd5/B,EAPci5B,EAAAn0B,KAQdmD,EAAO,GAROqwB,EAAA3xB,EASC3G,GATD,IASlB,IAAAs4B,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,OAAShI,EAAmBu5B,EAAAtxB,OACX80B,eAAe5zB,IACxBA,EAAKnJ,EAAO+8B,aAAe,IAE/B5zB,EAAKnJ,EAAO+8B,aAAap8B,KAAKX,EAAOuE,KAbvB,MAAAzD,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IAgBlB,IAASsD,KAAOzC,EACZA,EAAKyC,GAAOsS,MAAM/O,KAAK,IAAIgP,IAAIhV,EAAKyC,KAjBtB,OAAAuuB,EAAAvwB,OAAA,SAmBXT,GAnBW,wBAAAgxB,EAAA9yB,SAAA2yB,MAAH,gBAAAzyB,GAAA,OAAArC,EAAAsC,MAAArI,KAAA6E,YAAA,GAsBbkiF,EAAwB,eAAAxrD,EAAAz7B,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAm+B,EAAO6b,GAAP,IAAAr9C,EAAA,OAAAmD,EAAAC,EAAAU,KAAA,SAAA69B,GAAA,cAAAA,EAAA39B,KAAA29B,EAAA19B,MAAA,cACzBjE,EAAQ,IAAI++B,IAAaP,EAASt8B,iBACjCsL,KAAKm3E,KACL1lD,OAAO,eACPA,OAAO,kBACPC,QAAQ,cAAeme,GALC1b,EAAA19B,KAAA,EAOfjE,EAAMm/B,eAPS,cAAAwC,EAAA15B,OAAA,SAAA05B,EAAAt9B,MAAA,wBAAAs9B,EAAAj8B,SAAA87B,MAAH,gBAAAI,GAAA,OAAA7I,EAAAlzB,MAAArI,KAAA6E,YAAA,GAUxBmiF,EAAa,SAACjlF,EAASiI,EAAML,GAC/B,IADmDoxB,EAC/C4rD,EAAW,GADoC7rD,EAAApyB,EAEhC3G,GAFgC,IAEnD,IAAA+4B,EAAAnyB,MAAAoyB,EAAAD,EAAAlyB,KAAAC,MAA4B,KAAnBhI,EAAmBk6B,EAAAjyB,MACxB69E,EAAS9lF,EAAO+8B,aAAhB99B,OAAAsa,EAAA,EAAAta,CAAA,GACQe,EADR,CAEImJ,KAAMA,EAAKnJ,EAAO+8B,cAAgB,MALS,MAAAj8B,GAAAm5B,EAAA5xB,EAAAvH,GAAA,QAAAm5B,EAAA3xB,IAAA,IAAAi+E,EAAAC,EAAA3+E,EAShCiB,GATgC,IASnD,IAAA09E,EAAA1+E,MAAAy+E,EAAAC,EAAAz+E,KAAAC,MAAoC,KAA3BhI,EAA2BumF,EAAAt+E,MAChC69E,EAAS9lF,EAAO+8B,aAAhB99B,OAAAsa,EAAA,EAAAta,CAAA,GACQ6mF,EAAS9lF,EAAO+8B,aAChB/8B,IAZuC,MAAAc,GAAA0lF,EAAAn+E,EAAAvH,GAAA,QAAA0lF,EAAAl+E,IAgBnD,IAhBmDm+E,EAgB/CnrE,EAAI,GAhB2CorE,EAAA7+E,EAiBhC3G,GAjBgC,IAiBnD,IAAAwlF,EAAA5+E,MAAA2+E,EAAAC,EAAA3+E,KAAAC,MAA4B,KAAnBhI,EAAmBymF,EAAAx+E,MACxBqT,EAAE3a,KAAKmlF,EAAS9lF,EAAO+8B,eAlBwB,MAAAj8B,GAAA4lF,EAAAr+E,EAAAvH,GAAA,QAAA4lF,EAAAp+E,IAoBnD,OAAOgT,GAGL8qE,EAAsB,SAACniF,EAAa/C,GACtC,MAAoB,KAAhB+C,EACO/C,GAGX+C,EAAcA,EAAYnB,cAEnB5B,EAAQiQ,OACX,SAAAmK,GAAC,OAAIA,EAAEnS,KAAKC,KAAK,SAAA7E,GAAG,OAAIA,EAAIzB,cAAca,SAASM,MAC/CqX,EAAE9b,MAAMsD,cAAca,SAASM,OCnB5BoJ,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA1EC,SAAAzI,GAAuB,IAArB+H,EAAqB/H,EAArB+H,gBAAqBwB,EACfC,wBAASvO,GADMwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC9BiwB,EAD8B/vB,EAAA,GACzBg2E,EADyBh2E,EAAA,GAAAuG,EAETxG,wBAASvO,GAFAgV,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAE9BuqE,EAF8BtqE,EAAA,GAEtB4vE,EAFsB5vE,EAAA,GAAAG,EAGD5G,mBAAS,IAHR6G,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG9BvO,EAH8BwO,EAAA,GAGlBghE,EAHkBhhE,EAAA,GAAAoQ,EAICjX,oBAAS,GAJVkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAI9BwX,EAJ8BvX,EAAA,GAIjBqhE,EAJiBrhE,EAAA,GAAAuT,EAKLzqB,oBAAS,GALJ0qB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAK9B+D,EAL8B9D,EAAA,GAKpB8tD,EALoB9tD,EAAA,GAO/BgsD,EAAa,GACb5jF,EAAU,IACVk9B,GAAO+gD,KACP2F,EACKz1E,EAAAtK,EAAA4G,cAAA,OACCE,QAAS,WAAOw4E,OAAOxkF,GAAa4kF,OAAU5kF,IAC7CyL,UAAU,yBACjBpK,EACIi+E,EAAS9vE,EAAAtK,EAAA4G,cAAC65E,EAAD,CAAe5C,OAAO,EAAMj2E,gBAAiBA,EAAiBwyE,OAAQA,IACnF9vE,EAAAtK,EAAA4G,cAACk7E,EAAD,CAAYl6E,gBAAiBA,EAAiByxB,IAAKA,IACnDl9B,EACI,CAAEmO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,oBAGA+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM86E,GAAgB9pD,IAC/BvxB,UAAWuxB,EAAc,0BAA4B,kBAFvD,MAGAxtB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM+6E,GAAahqD,IAC5BtxB,UAAWsxB,EAAW,0BAA4B,kBAFpD,SAIH17B,IAIT,IAAMuO,EAAWf,sBAAY,SAAC5G,GAC1Bu8E,OAAOxkF,GACP4kF,OAAU5kF,GACVo2E,EAAcnuE,IACf,CAACmuE,IAEEl0B,EAAgBrzC,sBAAY,SAACywE,GAC/BkF,OAAOxkF,GACP4kF,EAAUtF,IACX,CAACkF,EAAQI,IAEN1hC,EAAar0C,sBAAY,SAAC0vB,GAC5BqmD,OAAU5kF,GACVwkF,EAAOjmD,IACR,CAACqmD,EAAWJ,IAEf,OACIh1E,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,wBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,mBAAmBw5E,EAAlC,IAA8Cz1E,EAAAtK,EAAA4G,cAAC05E,EAAA,EAAD,CAAc51E,SAAUA,KACvEvO,GACAmO,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,kBACb+D,EAAAtK,EAAA4G,cAACm7E,EAAD,CACE/kC,cAAeA,EACfgB,WAAYA,EACZ0iC,WAAYG,EACZn/E,WAAYA,EACZkG,gBAAiBA,2GCpDjBo6E,EAAkB,SAACx+C,EAAU96B,EAAad,EAAiBy7B,EAASD,GA4C7El5B,oBAAU,WACN2W,WAAW,YA5CA,WACX,IAAItf,EAAO8hC,EAAQtvB,QADFkuE,EAEOC,YAAiB1+C,GAApC2+C,EAFYF,EAEZE,OAAQC,EAFIH,EAEJG,QAFIC,EAGOC,YAAiB9+C,GAApC++C,EAHYF,EAGZE,OAAQC,EAHIH,EAGJG,QAKb,GAHAL,GAAU,IACVC,GAAW,IAEPx6E,EAAiB,KAAA66E,EACe76E,EAAgBW,MAAMg+B,QAAjDm8C,EADYD,EACZC,UAAWC,EADCF,EACDE,aAEZC,EAAU,CACVltE,MAAO8sE,EAAUJ,EACjB3sE,OAAQ8sE,EAAUJ,GAGlBS,EAAQltE,QAAUgtE,EAAUhtE,OAC5BktE,EAAQntE,SAAWitE,EAAUjtE,QAC7B7N,EAAgBkB,SACZ+5E,aAAaD,EAAQltE,MAAQ,IAAKktE,EAAQntE,OAAS,MAGtDktE,EAAar3E,IAAM82E,GAAWO,EAAarxE,IAAM6wE,GAClDv6E,EAAgBkB,SACZg6E,aAAgBV,EACAD,IAI5B,GAAIK,EAAUjhF,EAAKmU,OACf6sE,EAAShhF,EAAKkU,OAAQ,CACtB,KAAM+sE,EAAUjhF,EAAKmU,OAAS6sE,EAAShhF,EAAKkU,QACxC,OAEJ,IAAI8yB,EAAQ,CACR7yB,MAAOlU,KAAKyY,IAAI1Y,EAAKmU,MAAO8sE,GAC5B/sE,OAAQjU,KAAKyY,IAAI1Y,EAAKkU,OAAQ8sE,IAElCl/C,EAAQtvB,QAAUw0B,EAClBnF,EAAQmF,IAMRw6C,IACD,MACJ,6ECvDPtvE,OAAOuvE,IAAM,GACb,IA0Pe16E,cAvBS,SAACC,EAAO1C,GAC5B,MAAO,CACHtE,KAAMgH,EAAMy6B,QAAQigD,YAAYp9E,EAAM6C,YAAYlN,IAClD0nF,cAAe36E,EAAMg+B,QAAQ28C,cAC7BvY,gBAAiBpiE,EAAMg+B,QAAQokC,gBAC/BwY,gBAAiB56E,EAAM26B,QAAQ+C,mBAAmBpqC,OAAS,EAC3DunF,cAAe76E,EAAMg+B,QAAQ68C,cAC7BT,aAAcp6E,EAAMg+B,QAAQo8C,aAC5BD,UAAWn6E,EAAMg+B,QAAQm8C,UACzBW,iBAAkB96E,EAAMg+B,QAAQ88C,iBAChCC,SAAU/6E,EAAM26B,QAAQogD,WAIL,SAACx6E,EAAUjD,GACpC,MAAO,CACH09E,iBAAkB,SAACj4E,EAAEgG,GAAH,OAAQxI,EACtBy6E,aAAiBj4E,EAAEgG,KACrB8xB,QAAS,SAAA93B,GAAC,OAAIxC,EACV0+B,aAAc3hC,EAAM6C,YAAYlN,GAAI8P,OAIjChD,CAxPK,SAAAzI,GAkBd,IAjBF2jF,EAiBE3jF,EAjBF2jF,UACAD,EAgBE1jF,EAhBF0jF,iBACAD,EAeEzjF,EAfFyjF,SACAX,EAcE9iF,EAdF8iF,aACAS,EAaEvjF,EAbFujF,cACAD,EAYEtjF,EAZFsjF,gBACAxY,EAWE9qE,EAXF8qE,gBACAuY,EAUErjF,EAVFqjF,cACA3hF,EASE1B,EATF0B,KACA6hC,EAQEvjC,EARFujC,QACAC,EAOExjC,EAPFwjC,QACAlV,EAMEtuB,EANFsuB,aACAs1D,EAKE5jF,EALF4jF,UACA16B,EAIElpD,EAJFkpD,UACAs6B,EAGExjF,EAHFwjF,iBACAK,EAEE7jF,EAFF6jF,SACAhB,EACE7iF,EADF6iF,UACEt5E,EAC8BC,mBAAS9H,GADvC+H,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GACG2+B,EADHz+B,EAAA,GACc0+B,EADd1+B,EAAA,GAEEq6E,EAAWv4E,sBAAOtQ,GAClB8oF,EAAoBx4E,sBAAOtQ,GAC3B+oF,EAAkBz4E,sBAAOtQ,GACzBgpF,EAAW14E,sBAAOtQ,GAEtBoP,oBAAU,WACFs5E,EAAUzvE,UACNsvE,GACAG,EAAUzvE,QAAQ1E,MAAM00E,WAAa,MACrCP,EAAUzvE,QAAQ1E,MAAM20E,YAAc,QAEtCR,EAAUzvE,QAAQ1E,MAAM00E,WAAYX,EAAc9xE,EAAI,KACtDkyE,EAAUzvE,QAAQ1E,MAAM20E,YAAaZ,EAAc93E,EAAI,QAGhE,CAAC+3E,EAAkBD,IAEtBl5E,oBAAU,WACFw5E,EAAS3vE,UACT2vE,EAAS3vE,QAAQ1E,MAAMqG,MAAQgtE,EAAUhtE,MAAO,KAChDguE,EAAS3vE,QAAQ1E,MAAMoG,OAASitE,EAAUjtE,OAAS,KACnDiuE,EAAS3vE,QAAQ1E,MAAMs+C,SAAW+0B,EAAUhtE,MAAO,KACnDguE,EAAS3vE,QAAQ1E,MAAM40E,UAAYvB,EAAUjtE,OAAS,KACtDiuE,EAAS3vE,QAAQ1E,MAAM6E,KAAOyuE,EAAar3E,EAC3Co4E,EAAS3vE,QAAQ1E,MAAM+E,IAAMuuE,EAAarxE,IAE/C,CAACqxE,EAAcD,IAElBx4E,oBAAU,WACN89B,EAAazmC,IACd,CAACA,EAAMymC,IAEV99B,oBAAU,WACN,OAAKg5E,GAAkBA,EAAcnvE,SAGrCmvE,EAAcnvE,QAAQL,iBAAiB,aAAcu0B,EAAS,CAACC,SAAS,IACxEg7C,EAAcnvE,QAAQL,iBAAiB,YAAaY,GAC7C,WACC4uE,GAAiBA,EAAcnvE,UAC/BmvE,EAAcnvE,QAAQJ,oBAAoB,aAAcs0B,EAAS,CAACC,SAAS,IAC3Eg7C,EAAcnvE,QAAQJ,oBAAoB,YAAaW,MAPpD,kBAAM,IAUlB,CAAC8uB,EACAkgD,EACAF,EACAD,EAAiBD,EAAevY,EAAiB5iC,EAAWC,IAEhE,IAAM1zB,EAAc,SAAChR,GACbwgF,EAAS/vE,SACT+vE,EAAS/vE,QAAQzI,EAAIhI,EAAE2Q,QACvB6vE,EAAS/vE,QAAQzC,EAAIhO,EAAE6Q,SAEvB2vE,EAAS/vE,QAAU,CACfzI,EAAGhI,EAAE2Q,QACL3C,EAAGhO,EAAE6Q,UAKX8zB,EAAUt+B,sBAAY,SAACrG,GACzB,GAAImQ,OAAOywE,eAAiBZ,EACxBhgF,EAAEqK,qBADN,CAKA,IAAKu1E,IAAkBA,EAAcnvE,QACjC,OAAO,EAKX,GAFAzQ,EAAEqK,iBAEGw2E,EAAY7gF,GAAjB,CAZ+B,IAAA8gF,EAgBDlB,EAAcnvE,QAAvCic,EAhB0Bo0D,EAgB1Bp0D,UAAWD,EAhBeq0D,EAgBfr0D,WAEXxS,EAAkBja,EAAlBia,OAAQC,EAAUla,EAAVka,OAWTlS,EAAIykB,EAAaxS,EACjBjM,EAAI0e,EAAYxS,EAOhB6mE,EAAK1Z,EAAkB,IAAQ,EAC/B2Z,EAAK3Z,EAAkB,GAAK,EAE5B4Z,EAASx8C,EAAYA,EAAUryB,MAAQ,IACvC8uE,EAAUz8C,EAAYA,EAAUtyB,OAAS,IAO7C,MALAlU,EAAO,CACHmU,MAAOlU,KAAKyY,IAAIsqE,EAAQ9wE,OAAO40B,WAAag8C,GAC5C5uE,OAAQjU,KAAKyY,IAAIuqE,EAAS/wE,OAAO60B,YAAcg8C,KAG1C5uE,MAAQ,KAAOnU,EAAKkU,OAAS,KAAtC,CAGA,IAAI8yB,EAAQ,CAAC7yB,MAAO6H,EAAShc,EAAKmU,MAAOD,OAAQ+H,EAASjc,EAAKkU,QAE/D,GAAInK,EAAI,GAAKgG,EAAI,EAAG,CAChB,IAAI/O,EAAI6gF,EAAc93E,EAAIiS,EACtBknE,EAAIrB,EAAc9xE,EAAIkM,EAC1B+lE,EAAiBhhF,EAAIkiF,GASzB,OANAt2D,EAAapa,QAAQ1E,MAAMqG,MAAQ6yB,EAAM7yB,MAAMjC,OAAOuvE,IAAI,KAC1D70D,EAAapa,QAAQ1E,MAAMoG,OAAS8yB,EAAM9yB,OAAOhC,OAAOuvE,IAAI,KAC5Dh7C,EAAaO,GACblF,EAAQtvB,QAAUw0B,EAClB26C,EAAcnvE,QAAQ0qB,SAASnzB,EAAEgG,GACjCmC,OAAO00B,gBAAiB,IAAIrnB,MAAOC,WAC5B,MACT,CACEqiE,EACAE,EACAv7C,EACAC,EACAm7C,EACAxY,EACAuY,IAGEiB,EAAcx6E,sBAAY,SAACrG,GAAM,IAC/Bia,EAA4Cja,EAA5Cia,OAAQC,EAAoCla,EAApCka,OAAqBC,GAAena,EAA5Boa,YAA4Bpa,EAAfma,aACjC,GAAIjc,KAAKyY,IAAIzY,KAAK6B,IAAIka,GAAS/b,KAAK6B,IAAIma,IAAW,IAAMhc,KAAK6B,IAAIoa,GAAe,IAAM,CACnF,IAAIL,EAAQ3J,OAAOmK,QAAU,EACzBA,EAAO,EAOX,GALIA,EADAH,EAAc,EACJL,EAAQK,EAAc,IAEvBjc,KAAK6B,IAAI+Z,GAASK,EAAc,MAE7ChK,OAAOmK,OAASpc,KAAKyY,IAzKf,GAyK8BzY,KAAKwY,IAAI,EAAG4D,KAC3C+lE,EAAS5vE,UAAW,IAAI+M,MAAOC,UAAY4iE,EAAS5vE,QAAU,IAAK,CACpE,IAAID,EAAOqa,EAAapa,QAAQC,wBADoC0wE,EAEtCxB,EAAcnvE,QAAvCgc,EAF+D20D,EAE/D30D,WAAYC,EAFmD00D,EAEnD10D,UACjB4zD,EAAkB7vE,QAAU,CACxBzI,GAAKw4E,EAAS/vE,QAAQzI,EAAIwI,EAAKI,MAASkJ,EACxC9L,GAAKwyE,EAAS/vE,QAAQzC,EAAIwC,EAAKM,KAAQgJ,GAE3CymE,EAAgB9vE,QAAU,CACtBzI,EAAGykB,EAAa3S,EAChB9L,EAAG0e,EAAY5S,GAKfwmE,EAAkB7vE,QAAQzI,EAC1Bs4E,EAAkB7vE,QAAQzC,EACzBuyE,EAAgB9vE,QAAQzI,EACxBu4E,EAAgB9vE,QAAQzC,EAIdmC,OAAOmK,OACPnK,OAAOmK,OAE1B+lE,EAAS5vE,SAAU,IAAI+M,MAAOC,UAER,IAAlBtN,OAAOmK,OACPuQ,EAAapa,QAAQ1E,MAAMwO,UAAY,OAEvCsQ,EAAapa,QAAQ1E,MAAMwO,UAAY,SAAWpK,OAAOmK,OAAS,IAtCa,IAAA+mE,EAyCpDzB,EAAcnvE,QAM7C,OA/CmF4wE,EAyC9E50D,WAzC8E40D,EAyClE30D,WAMV,EAEP,OAAO,GAEZ,CAACkzD,IAYJ,OAVAh5E,oBAAU,WACFu5E,GAAa16B,EACb56B,EAAapa,QAAQ1E,MAAQ,GACtB04B,IACP5Z,EAAapa,QAAQ1E,MAAMqG,MAAQqyB,EAAUryB,MAAMjC,OAAOuvE,IAAI,KAC9D70D,EAAapa,QAAQ1E,MAAMoG,OAASsyB,EAAUtyB,OAAOhC,OAAOuvE,IAAI,OAErE,CAACj6B,EAAW06B,EAAW17C,IAGnB,0LCpMLjqB,WAAoBynC,eAAK,SAAA1lD,GA0BzB,IAzBFgoC,EAyBEhoC,EAzBFgoC,eACA47C,EAwBE5jF,EAxBF4jF,UAEAn9C,GAsBEzmC,EAvBF6kE,UAuBE7kE,EAtBFymC,kBACAs+C,EAqBE/kF,EArBF+kF,YACAC,EAoBEhlF,EApBFglF,SACA71B,EAmBEnvD,EAnBFmvD,SACA00B,EAkBE7jF,EAlBF6jF,SACA5oE,EAiBEjb,EAjBFib,aACAuC,EAgBExd,EAhBFwd,SACA+lB,EAeEvjC,EAfFujC,QAOA16B,GAQE7I,EAdFke,YAcEle,EAbFmoE,cAaEnoE,EAZF+nE,iBAYE/nE,EAXFilF,0BAWEjlF,EAVF+mC,QAUE/mC,EATF6mB,iBASE7mB,EARF6I,aACAqgD,EAOElpD,EAPFkpD,UACApkB,EAME9kC,EANF8kC,SAGAvnB,GAGEvd,EALFmlC,mBAKEnlC,EAJF8b,UAIE9b,EAHFud,OACAomB,EAEE3jC,EAFF2jC,SACAggD,EACE3jF,EADF2jF,UACEl4C,EAEuCC,YAAW,CAACpgC,IAAK05E,IAAnDxhD,EAFLiI,EAEKjI,QAASC,EAFdgI,EAEchI,SAAUC,EAFxB+H,EAEwB/H,YAE1By+C,EAAgBx+C,EAAU96B,EAAaA,EAAYd,gBAAiBy7B,EAASD,GAJ3E,IAQGnuB,EAAS8vE,YAAmB,CAAC52D,aAAc02D,EAAUznE,UAArDnI,MAGC+vE,GAFeC,YAAa,CAACzhD,aAA9B3nB,aAEkBlS,sBAAY,SAACrG,GAAM,IAAAkT,EAC1BvB,EAAM3R,GAAbgI,EADiCkL,EACjClL,EAAEgG,EAD+BkF,EAC/BlF,EACPhO,EAAE+J,kBACF/J,EAAEqK,iBACFjF,EAAYy2D,cAAc7zD,EAAEgG,IAC7B,CAAC5I,KAEAw8E,EAAgBv8C,YAAeq8C,GAlBjCG,EAuBgBz8E,EAAbF,cAvBH,IAAA28E,EAuBU,GAvBVA,EAwBF38E,EAASA,EAAO4D,OAAO,SAAAd,GAAC,OAAIm4E,QAAuB3oF,IAAVwQ,EAAEk3D,MAE3C,IAAMrD,EAAex1D,sBAAY,SAAC2B,EAAEgG,EAAE7E,GAC7BnB,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/B5I,EAAYy2D,cAAc7zD,EAAEgG,EAAG7E,IAChC,CAAC/D,IAEEwgC,EAAiBv/B,sBAAY,SAAC2B,EAAEgG,GAC7BhG,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/B5I,EAAYwgC,eAAe59B,EAAEgG,IAC9B,CAAC5I,IAEE08E,EAAgBz7E,sBAAY,SAAC2B,EAAEgG,GAC5BhG,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/B5I,EAAYwgC,eAAe59B,EAAEgG,EAAG+zB,MACjC,CAAC38B,IAEE28E,EAAe17E,sBAAY,SAAC2B,EAAEgG,GAC3BhG,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/B5I,EAAYwgC,eAAe59B,EAAEgG,EAAGmwD,MACjC,CAAC/4D,IAEE48E,EAAe37E,sBAAY,SAAC2B,EAAEgG,GAC3BhG,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/B5I,EAAYy2D,cAAc7zD,EAAEgG,EAAG,WAChC,CAAC5I,IAEEu8D,EAAYt7D,sBAAY,SAAC2B,EAAEgG,GAC7B,IAAIkxD,EAAM95D,EAAYu8D,YACjB35D,GAAMgG,IACPhG,EAAIu8B,EAAe9zB,QAAQzI,EAC3BgG,EAAIu2B,EAAe9zB,QAAQzC,GAE/BkxD,EAAIl3D,EAAIA,EACRk3D,EAAIlxD,EAAIA,GACT,CAAC5I,IAEE0E,GCpImB,SAAAvN,GAA8I,IAA5I6I,EAA4I7I,EAA5I6I,YAAaoS,EAA+Hjb,EAA/Hib,aAAc7F,EAAiHpV,EAAjHoV,MAAOqwE,EAA0GzlF,EAA1GylF,aAAcC,EAA4F1lF,EAA5F0lF,gBAAiBtgB,EAA2EplE,EAA3EolE,UAAW9F,EAAgEt/D,EAAhEs/D,cAAej2B,EAAiDrpC,EAAjDqpC,eAAgBk8C,EAAiCvlF,EAAjCulF,cAAeC,EAAkBxlF,EAAlBwlF,aAwFrJ,OAvFe17E,sBAAY,SAACrG,GAAM,IAAAkT,EAClBvB,EAAM3R,GAAbgI,EADyBkL,EACzBlL,EAAEgG,EADuBkF,EACvBlF,EACF1J,EAAmBc,EAAnBd,gBACAW,EAASX,EAATW,MAEAi9E,GADiBj9E,EAAMC,OAAvBsc,cACuBvc,EAAM26B,QAA7BsiD,qBACL,GAAIA,EAAqB,CACrB,OAAOA,GACP,IAAK,UACDrmB,EAAc7zD,EAAEgG,GAChB,MACJ,IAAK,WACD43B,EAAe59B,EAAEgG,GACjB,MACJ,IAAK,OACD2zD,EAAU35D,EAAEgG,GACZ,MACJ,IAAK,UACD+zE,EAAa/5E,EAAEgG,GACf,MACJ,IAAK,UACDg0E,EAAah6E,EAAEgG,GACf,MACJ,IAAK,UACD8zE,EAAc95E,EAAEgG,GAChB,MACJ,IAAK,YACDi0E,EAAgBj6E,EAAEgG,GAClB,MACJ,IAAK,WACD6tD,EAAc7zD,EAAEgG,EAAG,WACnB,MACJ,QACI,IAAIm0E,EAASD,EAAoBjpF,MAAM,KACnCoL,EAAS/H,SAAS6lF,EAAO,IACzBzd,EAAgBpgE,EAAgBW,MAAMU,QAAQ++D,cAC9Cv7D,OAAO3R,EACX,GAAkB,oBAAd2qF,EAAO,GAA0B,CAEjC,IAAI39E,EAAWY,EAAYb,UAAUvD,KAAK,SAAAgH,GAAC,OAAIA,EAAE3D,SAAWA,IAC5DtL,QAAQC,IAAI,aAAcwL,GAC1B2E,EAAO,CACHA,KAAM,kBACNjR,GAAIsM,EAAStM,GACbkqF,QAAS59E,EAASH,OAClBmQ,WAAYhQ,OAEb,CAEH,IAAIL,EAAMiB,EAAYlB,KAAKlD,KACvB,SAAAnE,GAAA,OAAAA,EAAEsH,IAAaE,SAAWA,IAC9B8E,EAAO,CACHA,KAAM,MACNjR,GAAIiM,EAAIjM,GACRoO,OAAQnC,EACRqQ,WAAYrQ,GAGpBG,EAAgBkB,SAAS+8B,aACrBp5B,EAAKjR,GAAI,CAAC8P,IAAEgG,OAChB1J,EAAgBkB,SACZ8+D,aAAgB,GAAAt7D,OAAApS,OAAA2R,EAAA,EAAA3R,CAAM8tE,GAAN,CAAqBv7D,MAG7C7E,EAAgBkB,SAAS68E,kBAAuB7qF,IAC5CggB,GACAA,OAAahgB,KAmBtB,CAAC4N,ID8CWk9E,CAAc,CAACl9E,cAAa48E,eAAcrgB,YAAW9F,gBAAej2B,iBAAgBm8C,eAAcD,gBAAenwE,QAAO6F,iBAkBvI,GAhBA5Q,oBAAU,WAON,OANIs5E,EAAUzvE,QACVyvE,EAAUzvE,QAAQL,iBAAiB,OAAQtG,IAE3Cy3E,EAAS9wE,QAAQL,iBAAiB,OAAQtG,IAGvC,WACCo2E,EAAUzvE,QACVyvE,EAAUzvE,QAAQJ,oBAAoB,OAAQvG,IACvCy3E,EAAS9wE,SAChB8wE,EAAS9wE,QAAQJ,oBAAoB,OAAQvG,MAGtD,KAEE1E,IAAgBA,EAAYF,SAAWo8E,EACxC,MAAO,GAINjgD,IACDA,EAAWj8B,EAAYk8B,UAG3B,IAAIm/B,GACAz5D,EAAAtK,EAAA4G,cAAA,WACC0D,EAAAtK,EAAA4G,cAACi/E,EAAA,EAAD,CACGzoE,MAAOA,EACPimB,QAASA,EACTD,QAASA,EACTE,SAAUA,EACVC,YAAaA,EACbuiD,UAAU,EACVtiD,SAAUA,EACVrV,aAAc02D,EACdkB,WAAW,EACXn+E,gBAAiBc,EAAYd,gBAC7Bc,YAAaA,IACf4B,EAAAtK,EAAA4G,cAACo/E,EAAA,EAAD,CAAgBt9E,YAAaA,IAC7B4B,EAAAtK,EAAA4G,cAACq/E,EAAA,EAAD,CAAqBv9E,YAAaA,KAChC+6E,GAAa9+C,EAASvpC,IACpB,SAAA6gB,GAAG,OAAI3R,EAAAtK,EAAA4G,cAACs9B,EAAA,EAAD,CACEr9B,IAAKoV,EAAIzgB,GACT4hB,MAAOA,EACPxV,gBAAiBc,EAAYd,gBAC7B07B,SAAUA,EACVC,YAAaA,EACbH,QAASA,EACTC,QAASA,EACTG,SAAUA,EACVrV,aAAc02D,EACd3hD,QAASjnB,OAE9BwnE,GAAa/6E,EAAYo8B,UAAU1pC,IACvB,SAAA6gB,GAAG,OAAI3R,EAAAtK,EAAA4G,cAACs/E,EAAA,EAAD,CACEr/E,IAAKoV,EAAIzgB,GACT4hB,MAAOA,EACPxV,gBAAiBc,EAAYd,gBAC7B07B,SAAUA,EACVC,YAAaA,EACbH,QAASA,EACTC,QAASA,EACTG,SAAUA,EACVrV,aAAc02D,EACdrjB,SAAUvlD,OAEvBwnE,GAAa/6E,EAAYF,OAAOpN,IAC5B,SAAA4S,GAAK,OACD1D,EAAAtK,EAAA4G,cAACu/E,EAAA,EAAD,CACE/oE,MAAOA,EACPkmB,SAAUA,EACVC,YAAaA,EACbH,QAASA,EACTC,QAASA,EACTG,SAAUA,EACVrV,aAAc02D,EACd72E,MAAOA,OACfy1E,GAAa/6E,EAAYk8B,SAASx4B,OAAO,SAAAd,GAAC,MAAe,QAAXA,EAAE7P,OAChD2Q,OAAO,SAAAd,GAAC,OAAIA,EAAE1B,OAAO44D,MACrBpnE,IAAI,SAAAkQ,GAAC,OAAIA,EAAE1B,OAAO44D,MAClBp2D,OAAO,SAAAo2D,GAAG,OAAIA,EAAI4jB,aAClBhrF,IACE,SAAAonE,GAAG,OACCl4D,EAAAtK,EAAA4G,cAACy/E,EAAA,EAAD,CACEjpE,MAAOA,EACPkmB,SAAUA,EACVC,YAAaA,EACbH,QAASA,EACTC,QAASA,EACTG,SAAUA,EACVrV,aAAc02D,EACdriB,IAAKA,OACbihB,GAAa/6E,EAAY49E,WAAWlrF,IAClC,SAAAyN,GAAS,OACLyB,EAAAtK,EAAA4G,cAAC2/E,EAAA,EAAD,CACEjjD,SAAUA,EACVC,YAAaA,EACbv7B,gBAAiB68E,EACjBznE,MAAOA,EACPgmB,QAASA,EACTC,QAASA,EACTG,SAAUA,EACV36B,UAAWA,OAGvBtC,GAAYwiD,EAAY,kBAAoB,sBAIhD,OAHIziB,IACA//B,IAAa,sBAGb+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS48E,GAAYA,EAAS3vE,QAAU,kBAAM,GAAImxE,EAClD3+E,UAAWA,IACX+D,EAAAtK,EAAA4G,cAAC4/E,EAAA,EAAD,CAAS99E,YAAaA,IACtB4B,EAAAtK,EAAA4G,cAAC6/E,EAADvsF,OAAA0hE,EAAA,EAAA1hE,CAAA,CACEkjB,MAAOA,EACPC,SAAUA,EACVqmE,SAAUA,EACVh7E,YAAaA,EACb86E,UAAWA,EACXpgD,QAASA,EACTC,QAASA,EACTogD,UAAWA,EACX16B,UAAWA,EACX56B,aAAc02D,GAVhB,cAWen8E,IACf4B,EAAAtK,EAAA4G,cAAA,OACEuE,IAAK05E,EACLt+E,UAAU,eACTyoD,EACAjG,EAAYz+C,EAAAtK,EAAA4G,cAAC8/E,EAAA,EAAD,CAAYh+E,YAAaA,IAAkBq7D,QA+BrDz7D,gBAzBS,SAACC,EAAO1C,GAC5B,MAAO,CACHygC,iBAAkB/9B,EAAMg+B,QAAQD,iBAChCs+C,YAAar8E,EAAMM,UAAU89E,sBAC7B3e,cAAez/D,EAAMU,QAAQ++D,cAC7B4e,iBAAkBr+E,EAAM4U,KAAKmpE,WAC7BnkD,UAAWt8B,EAAM6C,YAAYF,QAAU3C,EAAM6C,YAAYF,OAAO3M,OAChEktD,UAAWxgD,EAAM4U,KAAKD,iBAAiBrX,EAAM6C,YAAYlN,IACzDmpC,SAAUp8B,EAAM26B,QAAQyB,SAAS9+B,EAAM6C,YAAYlN,IACnDqpC,UAAWt8B,EAAM26B,QAAQ2B,UAAUh/B,EAAM6C,YAAYlN,MAIlC,SAACsN,EAAUjD,GAClC,MAAO,CACH+hE,iBAAkB,SAAAt8D,GAAC,OAAIxC,EAAS8+D,aAAiBt8D,KACjDw5E,0BAA2B,SAAAx5E,GAAC,OAAIxC,EAC5Bg8E,aAA0Bx5E,KAC9B05B,mBAAoB,SAAA15B,GAAC,OAAIxC,EACrBk8B,aAAmB15B,KACvB83B,QAAS,SAAA93B,GAAC,OAAIxC,EACV0+B,aAAc3hC,EAAM6C,YAAYlN,GAAI8P,OAIjChD,CAA6CwV,yJE5N7CxV,cAbS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,EAAUjD,GACpC,MAAO,CACH2gC,qBAAsB,SAAAl7B,GAAC,OAAIxC,EAAS09B,aAAqBl7B,KACzDu6B,kBAAmB,SAAAv6B,GAAC,OAAIxC,EAAS+8B,aAAkBhgC,EAAMq9B,QAAQzvB,OAAOjY,GAAI8P,KAC5E63B,oBAAqB,SAAA73B,GAAC,OAAIxC,EAASq6B,aAAoB73B,OAI9ChD,CAtEY,SAAAzI,GAOrB,IANFsjC,EAMEtjC,EANFsjC,oBACA9nB,EAKExb,EALFwb,YACA6nB,EAIErjC,EAJFqjC,QACA5nB,EAGEzb,EAHFyb,eACAkrB,EAEE3mC,EAFF2mC,qBACAX,EACEhmC,EADFgmC,kBAEOghD,EAAaC,YAAa,CAAC5jD,UAAS5nB,mBAApCurE,UACAE,EAAcC,YAAc,CAAC9jD,UAAS5nB,mBAAtCyrE,WAEDlqB,EAAYlzD,sBAAY,WAC1Bu5B,EAAQ25B,YACRvhD,OAAexgB,IAChB,CAACwgB,IAEE2rE,EAAat9E,sBAAY,WAC3B68B,EAAqBtD,GACrB5nB,OAAexgB,IAChB,CAACwgB,IAEE4rE,EAAev9E,sBAAY,WAAM,IAC9Bs6B,EAAoBf,EAAQ36B,MAAM26B,QAAlCe,iBACL4B,EAAkB,CAACv6B,EAAG,IAAKgG,EAAG,MAC9B6xB,EAAmB,GAAA72B,OAAApS,OAAA2R,EAAA,EAAA3R,CAAM+pC,GAAN,CAAwBf,MAC5C,CAACA,EAASC,IAEPgkD,EAAgBx9E,sBAAY,WAC9Bu5B,EAAQlc,UACT,CAACkc,IAEJ,OACI54B,EAAAtK,EAAA4G,cAACkkC,EAAA,EAAD,CAAazvB,YAAaA,EAAaC,eAAgBA,GACrDhR,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAasyE,GAAvB,cAGA38E,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAauyE,GAAvB,kBAGA58E,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAakoD,GAAvB,aACYvyD,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBAAf,YAEZ+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,YACf+D,EAAAtK,EAAA4G,cAACwgF,EAAA,EAAD,CAAS3rF,KAAK,cACZ6O,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAaoyE,GAAvB,QAGAz8E,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAakyE,GAAvB,oBAIFv8E,EAAAtK,EAAA4G,cAACmkC,EAAA,EAAD,CAAUp2B,YAAawyE,GAAvB,aC2BK7+E,cAfS,SAACC,EAAO1C,GAC5B,IAAIrK,EAAKqK,EAAMq9B,QAAQ1nC,GACvB,MAAO,CACH6rF,OAAQ9+E,EAAMg+B,QAAQ+gD,cAAc9rF,GACpCmmE,OAAQp5D,EAAMg+B,QAAQghD,cAAc/rF,KAIjB,SAACsN,GAC1B,MAAO,CACH0+E,gBAAiB,SAAChsF,EAAI8P,GAAL,OAAWxC,EAAS0+E,aAAgBhsF,EAAI8P,KACzDm8E,gBAAiB,SAACjsF,EAAI8P,GAAL,OAAWxC,EAAS2+E,aAAgBjsF,EAAI8P,OAIhDhD,CAlFM,SAAAzI,GAWf,IAVFolC,EAUEplC,EAVFolC,kBACAoiD,EASExnF,EATFwnF,OACA1lB,EAQE9hE,EARF8hE,OACA6lB,EAOE3nF,EAPF2nF,gBACAC,EAME5nF,EANF4nF,gBACAlhF,EAKE1G,EALF0G,UACAy+C,EAIEnlD,EAJFmlD,QACAhgB,EAGEnlC,EAHFmlC,mBACAvzB,EAEE5R,EAFF4R,KACAyxB,EACErjC,EADFqjC,QAGI/3B,EAAMC,mBAFR8P,EAGmDC,YAAe,CAAChQ,MAAKu8E,QAAQ,IAA3EtsE,EAHLF,EAGKE,cAAeC,EAHpBH,EAGoBG,YAAaC,EAHjCJ,EAGiCI,eAWnC,OATApR,oBAAU,WACFmR,GACA2pB,EAAmB9B,IAExB,CAAC7nB,EAAa6nB,IAEb7nB,IACA9U,GAAa,yBAGf+D,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACLw8E,YAAa,SAAArkF,GAAC,OAAIA,EAAEqK,kBACpBC,WAAW,EACXT,YAAa,SAAC7J,GACVA,EAAE8hC,aAAawiD,cAAgB,OAC/BtkF,EAAE8hC,aAAax1B,QAAQ,YAAaszB,EAAQ1nC,IAC5CypC,EAAkB/B,IAEtBx1B,WAAY,SAAApK,GAAC,OAAIA,EAAEqK,kBACnByN,cAAeA,EACf7U,UAAWA,GACV8U,GACA/Q,EAAAtK,EAAA4G,cAACihF,EAAD,CACExsE,YAAaA,EACbC,eAAgBA,EAChB4nB,QAASA,IAEZ54B,EAAAtK,EAAA4G,cAAA,OAAKE,QAAS,kBAAMk+C,GAASvzC,IAAOlL,UAAU,mBAC5C+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWkL,EAAO,aAAe,iBAExCnH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,cAAc4B,IAAI,uBACjCmC,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMk+B,EAAmB9B,IAClC38B,UAAU,gBACV+D,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,eAAe28B,EAAQznC,MACvC6O,EAAAtK,EAAA4G,cAAA,QAAML,UAAU,cAAyC,kBAApB28B,EAAQmD,KAAK,IAAmBnD,EAAQmD,KAAK,KAEpF/7B,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM2gF,EAAgBvkD,EAAQ1nC,IAAK6rF,IAC5C9gF,UAAW8gF,EAAS,aAAe,MACnCl/E,IAAKk/E,EAAS,sBAAwB,iBAExC/8E,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM0gF,EAAgBtkD,EAAQ1nC,IAAKmmE,IAC5Cp7D,UAAU,cACV4B,IAAKw5D,EAAS,0BAA4B,iCC8BrCp8B,IAhGO,SAAhBA,EAAgB1lC,GAGhB,IAFFolC,EAEEplC,EAFFolC,kBACAD,EACEnlC,EADFmlC,mBAAoBV,EAClBzkC,EADkBykC,gBAAiBpB,EACnCrjC,EADmCqjC,QAASxhC,EAC5C7B,EAD4C6B,WAE1CyJ,EAAIC,mBADNhC,EAEgCC,oBAAS,GAFzCC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEG0+E,EAFHx+E,EAAA,GAAAuG,GAAAvG,EAAA,GAGoBD,oBAAS,IAH7ByG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAGG4B,EAHH3B,EAAA,GAGSk1C,EAHTl1C,EAAA,GAIEvJ,EAAU,iBAcd,GAbI28B,IAAYoB,IACZ/9B,GAAa,aAGF28B,EAAQt5B,QAAUs5B,EAAQt5B,OAAOg7B,WAE5Cr+B,GAAa,WAGjB2D,oBAAU,WACN86C,EAAuB,KAAftjD,IACT,CAACA,EAAYsjD,IAEG,KAAftjD,EAEA,GADAA,EAAaA,EAAW3D,cACpBmlC,EAAQt5B,QAAUs5B,EAAQt5B,OAAOg7B,UACjC,GAAI1B,EAAQysC,MAAM5xE,cAAca,SAAS8C,GACrCA,EAAa,QAGb,IADaqmF,YAAiB7kD,EAAQt5B,QACzBvF,KACT,SAAAkuB,GAAC,MAAuB,kBAAZA,EAAEo9C,OACVp9C,EAAEo9C,MAAM5xE,cAAca,SAAS8C,KACnC,MAAO,QAIf,GAA6B,kBAAlBwhC,EAAQysC,QAAuBzsC,EAAQysC,MAAM5xE,cAAca,SAAS8C,GAC3E,MAAO,GAKnB,IAAM0L,EAASzD,sBAAY,WAEvB,GADAwB,EAAI4I,QAAQm2B,aAAa,cAAe,GACpChH,EAAQt5B,QAAUs5B,EAAQt5B,OAAOg7B,SAAU,CAC3C,IAAIG,EAAiB7B,EAAQ36B,MAAM26B,QAAQ6B,eAE3C7B,EAAQt5B,OAAOo+E,eAAejjD,KAEnC,CAAC7B,IAEA+kD,EAAY,UAIhB,OAHIH,IACAG,GAAc,gBAGd39E,EAAAtK,EAAA4G,cAAA,OACEuE,IAAKA,EACL+8E,YAAa,SAAA5kF,GACTA,EAAEqK,iBACEu1B,EAAQt5B,QAAUs5B,EAAQt5B,OAAOg7B,UACjCz5B,EAAI4I,QAAQm2B,aAAa,cAAe,IAGhDx8B,WAAY,SAAApK,GAAC,OAAI,WACbA,EAAEqK,mBAENP,OAAQA,EACRu6E,YAAa,SAAArkF,GACTjH,QAAQC,IAAI,iBACZ6O,EAAI4I,QAAQm2B,aAAa,cAAe,IAE5C3jC,UAAW0hF,GACX39E,EAAAtK,EAAA4G,cAACuhF,EAAD,CACEljD,kBAAmBA,EACnB1+B,UAAWA,EACXy+C,QAASA,EACTvzC,KAAMA,EACNyxB,QAASA,EACT8B,mBAAoBA,IAErBvzB,GAAQyxB,EAAQt5B,QAAUs5B,EAAQt5B,OAAOg7B,UACzCt6B,EAAAtK,EAAA4G,cAAA,OACE+gF,YAAa,SAAArkF,GAAC,OAAIA,EAAEqK,kBACpBpH,UAAU,gBACT28B,EAAQt5B,OAAOg7B,SAASxpC,IACrB,SAAA6gB,GAAG,OAAI3R,EAAAtK,EAAA4G,cAAC2+B,EAAD,CACEN,kBAAmBA,EACnBp+B,IAAKoV,EAAIzgB,GACT0nC,QAASjnB,EACTva,WAAYA,EACZsjC,mBAAoBA,EACpBV,gBAAiBA,wEC1F9B8jD,EAAa,CACtB,CAACllF,MAPkB,UAOF/H,MAAO,WACxB,CAAC+H,MAPgB,QAOF/H,MAAO,SACtB,CAAC+H,MALkB,UAKF/H,MAAO,WACxB,CAAC+H,MARmB,WAQF/H,MAAO,YACzB,CAAC+H,MARqB,aAQF/H,MAAO,oDCL3BmiC,EAAQ,EA4HGh1B,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA3HO,SAAAzI,GAA4C,IAA1C8hB,EAA0C9hB,EAA1C8hB,OAA0CqZ,EAAAn7B,EAAlCwiB,eAAkC,IAAA2Y,EAA1B,CAACrZ,GAAyBqZ,EAAAqtD,EAAAxoF,EAAhB4R,YAAgB,IAAA42E,KAC9D1mE,EAASU,EAAQ,GAD6C,IAAAjZ,EAE5BC,wBAASvO,GAFmBwO,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAEzDgpB,EAFyD9oB,EAAA,GAE7CkqB,EAF6ClqB,EAAA,GAAAuG,EAGpBxG,oBAAS,GAHWyG,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAGzDy4E,EAHyDx4E,EAAA,GAGzCy4E,EAHyCz4E,EAAA,GAAAG,EAI5B5G,wBAASvO,GAJmBoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAIzDu4E,EAJyDt4E,EAAA,GAI7Cu4E,EAJ6Cv4E,EAAA,GAAAoQ,EAKhCjX,mBAASoI,GALuB8O,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAKzDooE,EALyDnoE,EAAA,GAK/CooE,EAL+CpoE,EAAA,GAAAuT,EAMhCzqB,mBDZb,SCM6C0qB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAMzD80D,EANyD70D,EAAA,GAM/C80D,EAN+C90D,EAAA,GAAAG,EAO1B7qB,mBAAS,IAPiB8qB,EAAAj6B,OAAAqP,EAAA,EAAArP,CAAAg6B,EAAA,GAOzD40D,EAPyD30D,EAAA,GAO5C40D,EAP4C50D,EAAA,GAAA6mD,EAQxB3xE,mBAAS,IARe4xE,EAAA/gF,OAAAqP,EAAA,EAAArP,CAAA8gF,EAAA,GAQzDgO,EARyD/N,EAAA,GAQ3CgO,EAR2ChO,EAAA,GAU9D/wE,oBAAU,WACNq+E,GAAkB,GAClBW,YAAmBvnE,EAAO6X,UAAUx+B,KAChC,SAAAM,GACIk4B,EAAcl4B,GACVA,EACA6tF,YAAc7tF,GAAKN,KACf,SAAAouF,GAAI,OAAIX,EAAcW,KAE1BX,OAAc3tF,MAG3B,CAAC6mB,EAAQ6R,EAAei1D,EAAeF,IAE1C,IAAMc,EAAiB1/E,sBAAY,WAC/B0Y,EAAQ1kB,QACJ,SAAAoF,GAAC,OACGumF,YAAkBR,EAAa/lF,EAAEy2B,YACpC8uD,GACDiB,YAAcT,EAAaF,EAAUI,GAEzCP,EAAc,CACVr2D,WAAY02D,EACZU,KAAMR,EACNJ,aAEJp1D,EAAcs1D,GACdH,GAAY,GACZJ,GAAkB,IACnB,CACCO,EACAP,EACAS,EACAJ,EACAH,EACAE,EACAtmE,EACAimE,IAEEmB,EAAqB9/E,sBAAY,SAACrG,GACpCilF,GAAkB,GAClB,IAAI/Q,EAAIl0E,EAAEoJ,OAAOxJ,MACb1H,IAAM8hC,EACVzc,WAAW,WACHrlB,IAAO8hC,GACP6rD,YAAc3R,GAAGx8E,KACb,SAAAM,GACImtF,EAAcntF,GACVA,IACAutF,EAAYvtF,EAAIstF,UAChBK,EAAgB3tF,EAAIkuF,MACpBjB,GAAkB,OAInC,KACHQ,EAAevR,IAChB,CAACuR,EAAgBE,EAAiBV,EAAmBM,IAExD,OAAIH,EAEIp+E,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,SACEL,UAAU,oBACVoE,YAAY,cAAczH,MAAO4lF,EAAar8E,KAAK,OAAO/B,SAAU++E,IACtEn/E,EAAAtK,EAAA4G,cAAC2D,EAAAvK,EAAD,CACEwK,QAAS49E,EACT19E,SAAU,SAAC6nB,GAAD,OAAOs2D,EAAYt2D,EAAErvB,QAC/BA,MAAOklF,EAAW9jF,KAAK,SAAAgH,GAAC,OAAIA,EAAEpI,QAAU0lF,IACxCj+E,YAAY,iBAEdL,EAAAtK,EAAA4G,cAAA,SACEL,UAAU,oBACVoE,YAAY,UAAUzH,MAAO8lF,EAAcv8E,KAAK,OAAO/B,SAAU,SAACpH,GAAD,OAAO2lF,EAAgB3lF,EAAEoJ,OAAOxJ,UACnGoH,EAAAtK,EAAA4G,cAAA,OACEE,QAASuiF,EACT9iF,UAAU,sBAFZ,SASL6rB,EAOD9nB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eACZ6rB,EACA9nB,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,eAAe6rB,GAC9B9nB,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAM6hF,GAAY,IAC3BpiF,UAAU,uBAFZ,0BAMAiiF,EAAal+E,EAAAtK,EAAA4G,cAAA,KAAG8F,OAAO,SAASg9E,KAAMlB,EAAWgB,MAAOhB,EAAWgB,MAAY,IAd9El/E,EAAAtK,EAAA4G,cAAA,4oCCnGL,IAAM+iF,EAAqB,eAAA9pF,EAAA3F,OAAA4F,EAAA,EAAA5F,CAAA6F,EAAAC,EAAAC,KAAG,SAAAC,EAAO0H,EAAiB+Z,EAAQhS,EAASw4C,GAAzC,IAAAjmD,EAAA0nF,EAAAlhF,EAAAiG,EAAA,OAAA5O,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAF,EAAAE,KAAA,EAChB4E,IAAK2K,QAAQT,EAAQU,aADL,UAC7BnO,EAD6BvB,EAAAM,KAAA2oF,EAIAC,EAAe3nF,EAAMyf,EAAO6X,UAAxD9wB,EAJ4BkhF,EAI5BlhF,YAAaiG,EAJei7E,EAIfj7E,YAElBtS,QAAQC,IAAI,4CAA6CoM,EAAaiG,IACjD,IAAjBjG,IAAuC,IAAjBiG,EAPO,CAAAhO,EAAAE,KAAA,eAAAF,EAAAkE,OAAA,wBAAAlE,EAAAkE,OAAA,SAY1BilF,EAAYliF,EAAiB1F,EAAMwG,EAAaiG,EAAaw5C,IAZnC,wBAAAxnD,EAAA2B,SAAApC,MAAH,gBAAAqC,EAAAC,EAAAg8B,EAAA8S,GAAA,OAAAzxC,EAAA4C,MAAArI,KAAA6E,YAAA,GAe5B4qF,EAAiB,SAAC3uF,EAAMshC,GAAa,IAAAhI,EAAAC,EAAA3xB,EAEf5H,EAAKsV,cAFU,IAEvC,IAAAikB,EAAA1xB,MAAAyxB,EAAAC,EAAAzxB,KAAAC,MAA2C,KAAlCyF,EAAkC8rB,EAAAtxB,MACvC,IAAK,IAAIyL,KAAejG,EAAYqhF,WAAY,CAC5C,IAAI/7E,EAAQtF,EAAYqhF,WAAWp7E,GACnC,GAAmB,YAAfX,EAAMvB,MAEN,GADgBvS,OAAOsE,KAAKwP,EAAM8yB,UACpB5iC,QAAQs+B,IAAa,EAE/B,MAAO,CACH9zB,YAAaA,EAAYlN,GACzBmT,oBAGL,GAAmB,oBAAfX,EAAMvB,KAA4B,CACzC,IADyC0oB,EAAAD,EAAApyB,EAC5B4F,EAAYqhF,WAAWp7E,GAAanG,QADR,QAAAwhF,EAAA,eAGjClpD,EAHiC3L,EAAAjyB,MAGf8K,MAAM8J,WAAWgpB,SACvC,GAAI5mC,OAAOsE,KAAKsiC,GAAUx8B,KAAK,SAAAgH,GAAC,OAAIw1B,EAASx1B,GAAGkxB,WAAaA,IACzD,OAAAg7C,EAAO,CACH9uE,YAAaA,EAAYlN,GACzBmT,iBALZ,IAAAumB,EAAAnyB,MAAAoyB,EAAAD,EAAAlyB,KAAAC,MAA2B,KAAAgnF,EAAAD,IAAA,qBAAAC,EAAA,OAAAA,EAAAzS,GAFc,MAAAz7E,GAAAm5B,EAAA5xB,EAAAvH,GAAA,QAAAm5B,EAAA3xB,QAdd,MAAAxH,GAAA04B,EAAAnxB,EAAAvH,GAAA,QAAA04B,EAAAlxB,IA4BvC,MAAO,CACHwmD,eAAgB,EAChBp7C,aAAc,IAKhBm7E,EAAc,SAACliF,EAAiB1M,EAAMwN,EAAaiG,EAAaw5C,GAElE,IAAI9pC,GADJ3V,EAAcxN,EAAKsV,aAAalM,KAAK,SAAAgH,GAAC,OAAIA,EAAE9P,KAAOkN,KAC1BF,OAAOmG,GAChC,QAAsB7T,IAAlBqtD,EAEA,IAAK,IAAIp3C,KADTo3C,EAAgB,EACF9pC,EAIV,IAFA,IAAI6rE,EAAW7rE,EAAOtN,GAClBxP,EAAO2oF,EAAS3oF,KACXtD,EAAE,EAAGA,EAAIsD,EAAMtD,IAAK,CACzB,IAAIksF,EAAiBD,EAASjsF,GAC9B,IAAK,IAAIqxB,KAAO66D,EACZ,GAAIA,EAAe76D,GAAKmjC,GAAI,CACxBtK,EAAgBvoD,SAASmR,GACzB,OAMpB,IAAIm5E,EAAW7rE,EAAO8pC,GAClBn6C,EAAQpG,EAAgB4mC,mBACxBloB,EAAUtY,EAAMk6C,SAASl6C,EAAMrF,gBAE/BpH,EAAO2oF,EAAS3oF,KACpB+kB,EAAQmwD,aAAal1E,GAAM,GAC3B+kB,EAAQspB,QAER,IAAK,IAAI9oB,EAAE,EAAGA,EAAIvlB,EAAMulB,IACpB,GAAMA,KAAKojE,EAAX,CAIA,IAAIE,EAAa9jE,EAAQ+jE,YAAYvjE,GACjCqjE,EAAiBD,EAASpjE,GAM9B,IAAK,IAAIjgB,KAAOsjF,EAAgB,CAC5B,IAAItvE,EAAWuvE,EAAWttE,MAAMjW,IAAQ,IAAIyjF,IAC5CzvE,EAAS7M,MAAQA,EACjB6M,EAAS23C,WAAa1rC,EACtBjM,EAAS0vE,WACLJ,EAAetjF,GAAMmH,EAAM/E,QAAS+E,EAAOA,EAAMO,YAAYtF,SACjEmhF,EAAWttE,MAAMjW,GAAOgU,GAIhCyL,EAAQkkE,qBAAgB1vF,GAAW,GACnCkT,EAAMqqC,cAEN,IAAIoyC,EAAa/hF,EAAYqhF,WAAWp7E,GAGxC,GAFAX,EAAMk+B,SAASu+C,GAES,YAApBA,EAAWh+E,MACc,YAAzBuB,EAAMwU,eAA8B,CACpC,IAAIqe,EAAU7yB,EAAM26D,cAAc,GAClC,IAAK,IAAIntE,KAAMivF,EAAW3pD,SAAU,CAChC,IACI4pD,EADWD,EAAW3pD,SAAStlC,GACbkvF,OACtB7pD,EAAQpzB,MAAM,EAAGi9E,EAAO,GAAGC,UAAWD,EAAO,GAAGE,SAHhB,IAAApJ,EAAAC,EAAA3+E,EAIhC4nF,EAASA,EAAOj9E,MAAM,IAJU,IAKhC,IAAAg0E,EAAA1+E,MAAAy+E,EAAAC,EAAAz+E,KAAAC,MAA0B,KAAjBwK,EAAiB+zE,EAAAt+E,MACtB29B,EAAQgqD,SAASp9E,EAAMk9E,UAAWl9E,EAAMm9E,UANZ,MAAA7uF,GAAA0lF,EAAAn+E,EAAAvH,GAAA,QAAA0lF,EAAAl+E,UAST,oBAApBknF,EAAWh+E,MACXuB,EAAMwU,eAKjB,IAAIsoE,EAAepiF,EAAYqiF,kBAAkBp8E,GAIjD,OAHAX,EAAMO,YAAYtF,QAAU,GAC5B+E,EAAMO,YAAY29B,SAAS4+C,GAEpBzsE,EAAOxiB,0BChEHyM,gBAVS,SAACC,EAAO1C,GAC9B,MAAO,IAIkB,SAACiD,GAC1B,MAAO,IAIMR,CA9DI,SAAAzI,GAAkD,IAAhD8hB,EAAgD9hB,EAAhD8hB,OAAQ/Z,EAAwC/H,EAAxC+H,gBAAwCojF,EAAAnrF,EAAvBorF,mBAAuB,IAAAD,KAAA5hF,EACnCC,mBAAS,IAD0BC,EAAApP,OAAAqP,EAAA,EAAArP,CAAAkP,EAAA,GAC5DuH,EAD4DrH,EAAA,GAClDsH,EADkDtH,EAAA,GAAAuG,EAE3CxG,mBAAS4hF,GAFkCn7E,EAAA5V,OAAAqP,EAAA,EAAArP,CAAA2V,EAAA,GAE5D4B,EAF4D3B,EAAA,GAEtDk1C,EAFsDl1C,EAAA,GAAAG,EAGrB5G,wBAASvO,GAHYoV,EAAAhW,OAAAqP,EAAA,EAAArP,CAAA+V,EAAA,GAG5Di7E,EAH4Dh7E,EAAA,GAG3Ci7E,EAH2Cj7E,EAAA,GAAAoQ,EAI7BjX,mBAAS,GAJoBkX,EAAArmB,OAAAqP,EAAA,EAAArP,CAAAomB,EAAA,GAI5D0yC,EAJ4DzyC,EAAA,GAI/C6qE,EAJ+C7qE,EAAA,GAAAuT,EAKrBzqB,mBAAS,GALY0qB,EAAA75B,OAAAqP,EAAA,EAAArP,CAAA45B,EAAA,GAK5Du3D,EAL4Dt3D,EAAA,GAK3Cu3D,EAL2Cv3D,EAAA,GAOjE7pB,oBAAU,WACN4vC,YAAgBn4B,EAAO6X,UAAUx+B,KAAK4V,IACvC,CAACA,EAAa+Q,IAEjB,IAAM4pE,EAAiB5hF,sBAAY,SAACrG,EAAGqM,EAASw4C,GAC5C7kD,EAAE+J,kBACF89E,EAAmBx7E,GACnBg6E,EAAsB/hF,EAAiB+Z,EAAQhS,EAASw4C,GACnDntD,KAAKowF,GACVE,EAAmBnjC,GAAiB,IACrC,CAACgjC,EAAoBxpE,EAAQypE,EAAgBE,IAEhD,OACIhhF,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACX0kF,EAGQ,GAFT3gF,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,QAAf,WACWoK,EAAS9U,OADpB,IAC4ByO,EAAAtK,EAAA4G,cAAA,QAAME,QAAS,kBAAMk+C,GAASvzC,IAAOlL,UAAWkL,EAAO,uBAAyB,gBAAhF,aAE5BA,EACAnH,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZoK,EAASvV,IACN,SAAAuU,GAAO,OACHrF,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAOioF,EAAejoF,EAAGqM,IAClCpJ,UAAWoJ,IAAYu7E,EAAkB,0BAA4B,kBACpEv7E,EAAQlV,MACRywF,IAAoBv7E,EACpBrF,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,oBACb+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAAf,YAGC4S,MAAM65C,GAAa5hD,KAAK,GAAGhW,IACxB,SAACkQ,EAAGrN,GAAJ,OACIqM,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAOioF,EAAejoF,EAAGqM,EAAS1R,IAC3CsI,UAAW8kF,IAAoBptF,EAAI,uBAAyB,eAC3DA,EAAE,MAEP,OAGrB,+GCqCIqK,cApBS,SAACC,EAAO1C,GAC5B,IACIwd,GADa9a,EAAMC,OAAOouD,eAAe/wD,EAAMmI,MAAMtF,YAAYlN,KAAO,IACjDqK,EAAMmI,MAAMxS,IAEvC,MAAO,CACH6nB,eAA0BvoB,IAAduoB,GAAkCA,EAC9C0tC,gBAHkBxoD,EAAM2F,IAAIH,gBAAkBlI,EAAMmI,MAAMW,YAI1DixB,SAAU/5B,EAAMmI,MAAM4xB,WAIH,SAAC92B,EAAUjD,GACpC,MAAO,CACH2lF,eAAgB,SAAC/5E,GAAD,OAAU3I,EAAS2iF,aAAoB5lF,EAAMmI,MAAMW,YAAa8C,KAChFm9B,iBAAkB,SAACn9B,GAAD,OAAU3I,EAAS8lC,aAAiBn9B,KACtDi6E,cAAe,SAAA9xE,GAAK,OAAI9Q,EAAS6iF,aAA4B9lF,EAAMmI,MAAMxS,GAAIoe,KAC7Ei1B,yBAA0B,SAAAgG,GAAI,OAAI/rC,EAAS+lC,YAAyBgG,OAI3DvsC,CA7EO,SAAAzI,GAWhB,IAVFmO,EAUEnO,EAVFmO,MACAqV,EASExjB,EATFwjB,UACAuc,EAQE//B,EARF+/B,SACAmxB,EAOElxD,EAPFkxD,gBACAliB,EAMEhvC,EANFgvC,yBACAD,EAKE/uC,EALF+uC,iBACA48C,EAIE3rF,EAJF2rF,eACA52C,EAGE/0C,EAHF+0C,SACA82C,EAEE7rF,EAFF6rF,cACA72C,EACEh1C,EADFg1C,KAEItuC,EAAY,iBACZwqD,IACAxqD,GAAa,aAHf,IAMKqlF,EAAkBC,YAAmB,CACxC79E,QACA+iD,kBACAnpD,gBAAiBoG,EAAMpG,gBACvBinC,2BACAD,mBACAiG,SANG+2C,eASD7kF,EAAc4C,sBAAY,WACxBqE,EAAMpG,gBAAgBW,MAAMoxC,SAASvxB,aACrCpa,EAAMsV,iBAEX,CAACtV,IAEJ,OACI1D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAWA,GACd+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,gBACZyH,EAAMW,YAAc,GAEvBrE,EAAAtK,EAAA4G,cAACy6B,EAAA,EAAD,CACEyqD,eAAgBl3C,EAChBtT,iBAAkB,WACdkqD,GAAe,GACfE,GAAc,GACd19E,EAAMpG,gBAAgB6e,YAAYzY,EAAMW,aACxCi9E,KAEJ59E,MAAOA,IACT4xB,EAOC,GANFt1B,EAAAtK,EAAA4G,cAACunC,EAAA,EAAD,CAAYplC,QAASgjF,MACnBzhF,EAAAtK,EAAA4G,cAAA,OACEG,YAAaA,EACb4N,YAAa,kBAAM3G,EAAMsV,iBACzB/c,UAAW8c,EAAY,cAAgB,YClBrC/a,gBAdS,SAACC,EAAO1C,GAC9B,MAAO,CACH2C,OAAQ3C,EAAM+B,gBAAgBY,OAC9B25B,UAAWt8B,EAAM+B,gBAAgBY,QAAU3C,EAAM+B,gBAAgBY,OAAO3M,SAInD,SAACiN,GAC1B,MAAO,CACH2O,UAAW,SAACu3B,GAAD,OACPlmC,EAAS2O,YAAUu3B,OAId1mC,CArCQ,SAAAzI,GAAkD,IAAhD+H,EAAgD/H,EAAhD+H,gBAAiB6P,EAA+B5X,EAA/B4X,UAAWo9B,EAAoBh1C,EAApBg1C,KAAMD,EAAc/0C,EAAd+0C,SAClDpsC,EAAUZ,EAAVY,OACL,OAAKA,GAA4B,IAAlBA,EAAO3M,OAIlByO,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAOA,EAAE+J,mBAClBsH,YAAa,kBAAM8C,GAAU,IAC7BpD,UAAW,kBAAMoD,GAAU,IAC3BvQ,aAAc,kBAAMuQ,GAAU,IAC9BlR,UAAU,mBACTiC,EAAOpN,IACJ,SAAA4S,GAAK,OACD1D,EAAAtK,EAAA4G,cAAColF,EAAD,CACEp3C,SAAUA,EACV/tC,IAAKmH,EAAMxS,GACXq5C,KAAMA,EACN7mC,MAAOA,OAfX1D,EAAAtK,EAAA4G,cAAA,unBCPhB,IAEMqlF,0CACF,SAAAA,EAAYpmF,GAAQ,OAAA3L,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAA6xF,GAAA9oE,EAAAC,KAAAhpB,KACVyL,8CAIV,WACI,IAAI6wC,GAAM,IAAI51B,MAAOC,eACCjmB,IAAlBV,KAAK8xF,UAA0Bx1C,EAAMt8C,KAAK8xF,SAAW,KAErD9xF,KAAKyL,MAAM89C,aAAavpD,KAAKyL,MAAMyiD,MAEvCluD,KAAK8xF,SAAWx1C,EAChBt8C,KAAKyL,MAAMsmF,kBAAkB/xF,KAAKyL,MAAMyiD,gCAG5C,SAAWhlD,GACPA,EAAEqK,4CAGN,SAAYrK,GACRlJ,KAAKyL,MAAM0sE,kBAAkBn4E,KAAKyL,MAAMyiD,wBAG5C,WACI,OAAIluD,KAAKyL,MAAMyiD,KAAK7sD,KAAKI,OA3Bd,GA4BAzB,KAAKyL,MAAMyiD,KAAK7sD,KAAKgS,MAAM,EA5B3B,IA4B4C,MAEhDrT,KAAKyL,MAAMyiD,KAAK7sD,2BAG3B,WAAS,IAAAf,EAAAN,KACDiV,EAAQ,CACR20E,YAA8B,GAAjB5pF,KAAKyL,MAAMumF,OAGxB7lF,EAAYnM,KAAKyL,MAAMwmF,iBAAmBjyF,KAAKyL,MAAMyiD,KACrD,uBAAyB,cAC7B,OACIh+C,EAAAtK,EAAA4G,cAAA,OACEgH,WAAW,EACXT,YAAa,SAAC7J,GAAD,OAAO5I,EAAKyS,eACzBO,WAAY,SAACpK,GAAD,OAAO5I,EAAKgT,WAAWpK,IACnCwD,QAAS,kBAAMpM,EAAKoM,WACpBP,UAAWA,EAAW8I,MAAOA,GAC7B/E,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,kBAAMpM,EAAKmL,MAAMg+C,WAAWnpD,EAAKmL,MAAMyiD,OAChD/hD,UAAU,cACXnM,KAAKqB,aAhDQ4M,aAoEbC,cAPS,SAAAC,GACpB,MAAO,CACH8jF,eAAgB9jF,EAAM+uB,QAAQ+0D,iBATX,SAAAvjF,GACvB,MAAO,CACHqjF,kBAAmB,SAAAn9C,GAAC,OAAIlmC,EAASqjF,aAAkBn9C,KACnDujC,kBAAmB,SAAAvjC,GAAC,OAAIlmC,EAASypE,aAAkBvjC,OAW5C1mC,CAA6C2jF,4dC9DtDvjC,0CACF,SAAAA,EAAY7iD,GAAO,IAAAnL,EAAA,OAAAR,OAAAgpB,EAAA,EAAAhpB,CAAAE,KAAAsuD,IACfhuD,EAAAyoB,EAAAC,KAAAhpB,KAAMyL,IAED0C,MAAQ,CACTwgD,WAAW,EACXujC,UAAW,GACXC,UAAU,EACV/+C,SAAS,GAPE9yC,4FAWnB,SAAAwF,EAAuBoD,EAAGylD,GAA1B,OAAAhpD,EAAAC,EAAAU,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,UACIyC,EAAE+J,kBAEG07C,EAHT,CAAApoD,EAAAE,KAAA,YAKYzG,KAAKyL,MAAM29C,OAAOgpC,aAAgBpyF,KAAKyL,MAAM29C,OAAOL,SALhE,CAAAxiD,EAAAE,KAAA,eAMYzG,KAAKmpB,SAAS,CAACiqB,SAAS,IANpC7sC,EAAAE,KAAA,EAOkBzG,KAAKyL,MAAM29C,OAAOtmB,OAPpC,OAQY9iC,KAAKmpB,SAAS,CAACiqB,SAAS,IARpC,OAYIpzC,KAAKmpB,SAAS,CACVwlC,UAAWA,IAGf3uD,KAAKqyF,cAhBT,wBAAA9rF,EAAA2B,SAAApC,EAAA9F,wFAmBA,WAAW,IAAAuC,EAAAvC,KACP,OAAIA,KAAKmO,MAAMwgD,UAEPz+C,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAO3G,EAAK+vF,iBAAiBppF,GAAG,IACzCiD,UAAU,mBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,iBAKjB+D,EAAAtK,EAAA4G,cAAA,OACEE,QAAS,SAACxD,GAAD,OAAO3G,EAAK+vF,iBAAiBppF,GAAG,IACzCiD,UAAU,mBACV+D,EAAAtK,EAAA4G,cAAA,OAAKL,UAAU,aACVO,QAAS,SAACxD,GAAD,OAAO3G,EAAK+vF,iBAAiBppF,GAAG,6BAM5D,SAAOA,GACHA,EAAE+J,kBACFjT,KAAKmpB,SAAS,CAACgpE,UAAU,IACzB,IAAI/oC,EAASppD,KAAKyL,MAAM8mF,eACpBj1D,EAASt9B,KAAKyL,MAAM+mF,eACxB,QAAe9xF,IAAX0oD,EAAsB,CAEtB,GADAppD,KAAKyL,MAAMgnF,uBAAkB/xF,GACzBV,KAAKyL,MAAM29C,SAAWA,EACtB,OAEJA,EAAOx8B,SACP5sB,KAAKyL,MAAM29C,OAAOspC,UAAUtpC,aACV1oD,IAAX48B,IACPA,EAAOka,OAAOm7C,WAAWr1D,GACzBt9B,KAAKyL,MAAM0sE,uBAAkBz3E,GAC7BV,KAAKyL,MAAM29C,OAAOwpC,QAAQt1D,IAE9Bt9B,KAAKyL,MAAM69C,mBACXtpD,KAAKyL,MAAMonF,wBAAuB,8BAGtC,WACI,IAAIv2C,GAAM,IAAI51B,MAAOC,eACCjmB,IAAlBV,KAAK8xF,UAA0Bx1C,EAAMt8C,KAAK8xF,SAAW,KAErD9xF,KAAKyL,MAAM+9C,eAAexpD,KAAKyL,MAAM29C,QAEzCppD,KAAK8xF,SAAWx1C,EAEZt8C,KAAKyL,MAAMu9C,iBAAmBhpD,KAAKyL,MAAM29C,OACzCppD,KAAKyL,MAAMqnF,uBAAkBpyF,GAE7BV,KAAKyL,MAAMqnF,kBAAkB9yF,KAAKyL,MAAM29C,mCAIhD,SAAY/nD,GACRrB,KAAKmpB,SAAS,CACV+oE,UAAW7wF,6BAInB,SAAU6H,GACQ,UAAVA,EAAEuD,MACFzM,KAAKyL,MAAM29C,OAAO/nD,KAAOrB,KAAKmO,MAAM+jF,UACpClyF,KAAKmpB,SAASnpB,KAAKmO,wCAI3B,WAAmB,IAAAvL,EAAA5C,KACX+yF,EACA/yF,KAAKyL,MAAMu9C,iBAAmBhpD,KAAKyL,MAAM29C,QAAUppD,KAAKyL,MAAM29C,OAAO/nD,KACrE,uBAAyB,cAM7B,OAJIrB,KAAKmO,MAAMgkF,WACXY,GAAmB,UAInB7iF,EAAAtK,EAAA4G,cAAA,OACEgH,WAAW,EACXF,WAAY,SAACpK,GAAD,OAAOtG,EAAK0Q,WAAWpK,IACnC6J,YAAa,SAAC7J,GAAD,OAAOtG,EAAKmQ,YAAY7J,IACrCqkF,YAAa,SAACrkF,GAAD,OAAOtG,EAAK2qF,YAAYrkF,IACrCiD,UAAW4mF,GACR/yF,KAAKgzF,WACN9iF,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWnN,KAAKyL,MAAM29C,OAAO/nD,MACjD6O,EAAAtK,EAAA4G,cAAA,OACEL,UAAU,aACVO,QAAS,kBAAM9J,EAAKyvF,gBAEnBryF,KAAKyL,MAAM29C,OAAO/nD,OAGvB6O,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,eAAsCzM,IAA3BV,KAAKyL,MAAM29C,OAAO/nD,MAClD6O,EAAAtK,EAAA4G,cAAA,SACC1D,MAAO9I,KAAKmO,MAAM+jF,UAClB5hF,SAAU,SAACi2C,GAAD,OAAW3jD,EAAKqwF,YAAY1sC,EAAMj0C,OAAOxJ,QAClDmJ,UAAW,SAACs0C,GAAD,OAAW3jD,EAAKqP,UAAUs0C,IACtCx1C,IAAK,SAACmiF,GAAYtwF,EAAKswF,MAAQA,GAC/B3iF,YAAY,sBACZpE,UAAU,0CAMxB,SAAWjD,GACPA,EAAEqK,iBACFvT,KAAKmpB,SAAS,CACVgpE,UAAU,+BAGlB,SAAYjpF,GACRlJ,KAAKmpB,SAAS,CACVgpE,UAAU,+BAIlB,SAAYjpF,GACRlJ,KAAKyL,MAAMgnF,kBAAkBzyF,KAAKyL,MAAM29C,8BAG5C,WAAS,IAAAz3B,EAAA3xB,KACDipD,EAAUnpD,OAAA2R,EAAA,EAAA3R,CAAQE,KAAKyL,MAAM29C,OAAOH,YACxCA,EAAWlhD,KAAK,SAACnC,EAAGoC,GAChB,YAAetH,IAAXkF,EAAEvE,WAAiCX,IAAXsH,EAAE3G,KACnB,EAEJuE,EAAEvE,KAAK+1C,cAAcpvC,EAAE3G,QAElC,IAAI8xF,EAAQrzF,OAAA2R,EAAA,EAAA3R,CAAIE,KAAKyL,MAAM29C,OAAO+pC,OAC7BnhF,OAAO,SAAAnO,GAAC,YAAenD,IAAXmD,EAAExC,OACnB8xF,EAAMprF,KAAK,SAACnC,EAAGoC,GAAJ,OAAUpC,EAAEvE,KAAK+1C,cAAcpvC,EAAE3G,QAC5C,IAAI2wF,EAAQhyF,KAAKyL,MAAM29C,OAAO4oC,OAAS,EAAI,EAAI,EAC3C/8E,EAAQ,CACR20E,YAAmB,GAANoI,GAMjB,OAJc,IAAVA,IACAA,EAAQ,GAIR9hF,EAAAtK,EAAA4G,cAAA,OACEwG,OAAQ,SAAC9J,GAAD,OAAOyoB,EAAK3e,OAAO9J,IAC3BiD,UAAU,SAAS8I,MAAOA,GACzBjV,KAAKozF,mBACPljF,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,WAAYnN,KAAKmO,MAAMwgD,WACzC1F,EAAWjoD,IACR,SAAAqyF,GAAS,OACLnjF,EAAAtK,EAAA4G,cAAC8hD,EAADxuD,OAAAwzF,OAAA,CACM7mF,IAAK4mF,EAAUhyF,MACVswB,EAAKlmB,MAFhB,CAGM29C,OAAQiqC,QAGxBnjF,EAAAtK,EAAA4G,cAACgyC,EAAA54C,EAAD,CACEwtC,QAASpzC,KAAKmO,MAAMilC,QACpBqL,SAAU,KACVt3C,KAAM,GACNiX,MAAO,YACTlO,EAAAtK,EAAA4G,cAAC+b,EAAA,EAAD,CAAsBpb,UAAWnN,KAAKyL,MAAMi+C,YAAc1pD,KAAKmO,MAAMwgD,WAClEwkC,EAAMnyF,IACH,SAAAktD,GAAI,OACAh+C,EAAAtK,EAAA4G,cAAC+mF,EAAD,CACG9mF,IAAKyhD,EAAK7sD,KACVkoD,aAAc53B,EAAKlmB,MAAM89C,aACzBE,WAAY93B,EAAKlmB,MAAMg+C,WACvBuoC,MAAOA,EACP9jC,KAAMA,eAzMHjgD,aAoOfC,gBAVS,SAAAC,GACpB,MAAO,CACH66C,eAAgB76C,EAAM+uB,QAAQ8rB,eAC9BupC,eAAgBpkF,EAAM+uB,QAAQq1D,eAC9BC,eAAgBrkF,EAAM+uB,QAAQs1D,eAC9BnxF,UAAuCX,IAAjCyN,EAAM+uB,QAAQ8rB,eAA+B76C,EAAM+uB,QAAQ8rB,eAAe3nD,UAAOX,IAdpE,SAAAgO,GACvB,MAAO,CACHokF,kBAAmB,SAAAl+C,GAAC,OAAIlmC,EAASokF,aAAkBl+C,KACnD69C,kBAAmB,SAAA79C,GAAC,OAAIlmC,EAAS+jF,aAAkB79C,KACnDujC,kBAAmB,SAAAvjC,GAAC,OAAIlmC,EAASypE,aAAkBvjC,KACnDi+C,uBAAwB,SAAAj+C,GAAC,OAAIlmC,EAASmkF,aAAuBj+C,OActD1mC,CAA6CogD","file":"static/js/1.a5a53842.chunk.js","sourcesContent":["var apiToken = 'CijdTZuyBVDePURSejQHGgfMsTjgfJSxarjJkWBo';\nvar axios = require('axios');\n\nclass Discogs {\n\n    constructor() {\n        this.titleToLabels = {};\n        this.nameToLabelInfo = {};\n        this.nameToLabel = {};\n        this.idToReleases = {};\n    }\n\n    getLabels(title) {\n        return new Promise((resolve, reject) => {\n            if (this.titleToLabels[title] !== undefined) {\n                resolve(this.titleToLabels[title]);\n                return;\n            }\n\n            this.searchYoutubeTitle(title)\n                .then((result) => {\n                // get all the labels\n                var data = [];\n                if (result === null || result.label === undefined) {\n                    resolve(data);\n                }\n                result.label.map((label) => this.getLabelInfo(label, (ret) => {\n                    if (ret === null) {\n                        resolve(data);\n                        return;\n                    }\n                    var labelData = {\n                        id: ret.id,\n                        name: ret.name};\n                    if ('images' in ret) {\n                        labelData['thumbnail'] = ret.images[0].uri;\n                    }\n                    data.push(labelData);\n\n                    this.titleToLabels[title] = data;\n                    if (data.length == result.label.length) {\n                        resolve(data);\n                    } else {\n                    }\n                }));\n                })\n                .catch(err => {\n                    reject(err);\n                });\n        });\n    }\n\n    getReleaseInfo(discogsId) {\n        return new Promise((resolve, reject) => {\n            var url = 'https://api.discogs.com/releases/' + discogsId;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data !== undefined) {\n                    var results = ret.data;\n                    resolve(results);\n                } else {\n                    resolve(undefined);\n                }\n            });\n        });\n    }\n\n    searchRecords(recordName) {\n        return new Promise((resolve, reject) => {\n            console.log(\"searchinng name=\", recordName);\n            let query = recordName.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&type=release&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var results = ret.data.results;\n                    resolve(results);\n                } else {\n                    resolve([]);\n                }\n            });\n        });\n    }\n\n    searchLabel(labelName, callback) {\n        if (this.nameToLabel[labelName] !== undefined) {\n            return callback(this.nameToLabel[labelName]);\n        }\n        var query = labelName;\n        query = query.split(/\\s/g).join('+');\n        var url = 'https://api.discogs.com/database/search?q=' + query + '&type=label&token=' + apiToken;\n        axios.get(url)\n            .then((ret) => {\n                if (ret.data.results !== undefined) {\n                    var result = ret.data.results[0];\n                    this.nameToLabel[labelName] = result;\n                    callback(result);\n                }\n            });\n\n    }\n\n    getLabelInfo(labelName, callback) {\n        this.searchLabel(labelName, function (result) {\n            var labelId = result.id\n            var url = 'https://api.discogs.com/labels/' + labelId + '?token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    callback(ret.data);\n                })\n                .catch(function (err) {\n                    callback(null);\n                });\n        });\n            \n    }\n\n    getLabelReleases(labelId, page) {\n        return new Promise((resolve, reject) => {\n            if (this.idToReleases[labelId + '_' + page] !== undefined) {\n                resolve(this.idToReleases[labelId + '_' + page]);\n                return;\n            }\n            var url = 'https://api.discogs.com/labels/' + labelId +\n            '/releases?token=' + apiToken + '&page=' + page + '&per_page=8';\n            axios.get(url)\n                .then((ret) => {\n                    this.idToReleases[labelId + '_' + page] = ret.data;\n                    resolve(ret.data);\n                })\n                .catch(function (err) {\n                    reject(err);\n            });\n        });\n    }\n\n    searchYoutubeTitle(youtubeTitle) {\n        return new Promise((resolve, reject) => {\n            var searchObject = parseTitleString(youtubeTitle);\n            var query = searchObject.artist + ' - ' + searchObject.title;\n            query = query.split(/\\s/g).join('+');\n            var url = 'https://api.discogs.com/database/search?q=' + query + '&token=' + apiToken;\n            axios.get(url)\n                .then(function (ret) {\n                    var results = ret.data.results;\n                    var earliestResult = null;\n                    for (var i in results) {\n                        if ((earliestResult == null ||\n                             (results[i].year < earliestResult.year)) && \n                            results[i].title.includes(searchObject.title))\n                        {\n                            earliestResult = results[i];\n                        }\n                    }\n                    if (earliestResult == null) {\n                        // get the first result\n                        for (var i in results) {\n                            return resolve(results[i]);\n                        }\n                    }\n                    resolve(earliestResult);\n                })\n                .catch(function (err) {\n                    reject(err);\n                });;\n        });\n    }\n}\n\n// TODO: provide an array of potential separators\n// var SEPARATORS = [' - ', ' – ', ' -- ']\n// note that these can have spaces, but sometimes do not\n// TODO: output a testing dataset for changes to this function.\n\nvar TRACK_SEPARATOR = ' - ';\nfunction parseTitleString(string, partsCallback) {\n  var artist, title, credits = [];\n  var string = string || '';\n\n  function escapeRegExp(str) {\n    return str.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, \"\\\\$&\");\n  }\n\n  // TODO: load from datafile\n    var baddies = ['Full Album', 'Full vinyl', 'LP', '[dubstep]', '(full album)', '[electro]', '[edm]', '[house music]',\n    '[glitch hop]', '[video]', '[official video]', '(official video)',\n    '(official music video)', '(lyrics)',\n    '[ official video ]', '[official music video]', '[free download]',\n    '[free dl]', '( 1080p )', '(with lyrics)', '(high res / official video)',\n    '(music video)', '[music video]', '[hd]', '(hd)', '[hq]', '(hq)',\n    '(original mix)', '[original mix]', '[lyrics]', '[free]', '[trap]',\n    '[monstercat release]', '[monstercat freebie]', '[monstercat]',\n    '[edm.com premeire]', '[edm.com exclusive]', '[enm release]',\n    '[free download!]', '[monstercat free release]'];\n  baddies.forEach(function(token) {\n    string = string.replace(token + ' - ', '').trim();\n    string = string.replace(token.toUpperCase() + ' - ', '').trim();\n    string = string.replace(token.toLowerCase() + ' - ', '').trim();\n\n    string = string.replace(token, '').trim();\n    string = string.replace(token.toUpperCase(), '').trim();\n    string = string.replace(token.toLowerCase(), '').trim();\n  });\n\n    string = string.replace(/ *\\([^)]*\\) */g, '').trim();\n    string = string.replace(/ *\\[[^)]*\\] */g, '').trim();\n\n\n  var parts = string.split( ' - ' );\n\n  for (var i = 0; i < parts.length; i++) {\n    if ( baddies.indexOf( parts[i].toLowerCase() ) >= 0 ) {\n      parts.splice( i , 1 );\n    }\n  }\n\n  if (parts.length == 2) {\n    artist = parts[0];\n    title = parts[1];\n  } else if (parts.length > 2) {\n    // uh...\n    artist = parts[0];\n    title = parts[1];\n  } else {\n    artist = parts[0];\n    title = parts[0];\n  }\n\n\n  // one last pass\n  baddies.forEach(function(baddy) {\n    title  = title.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n    artist = artist.replace( new RegExp( escapeRegExp(baddy) , 'i') , '').trim();\n  });\n\n  // look for certain patterns in the string\n  credits.push(  title.replace(/(.*)\\((.*) remix\\)/i,       '$2').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push(  title.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push(  title.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push(  title.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push(  title.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$2').trim() );\n  credits.push(  title.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) ft\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$1').trim() );\n  credits.push( artist.replace(/(.*) feat\\.? (.*)/i,        '$2').trim() );\n  credits.push( artist.replace(/(.*) featuring (.*)/i,      '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(ft (.*)\\)/i,         '$2').trim() );\n  credits.push( artist.replace(/(.*) \\(feat\\.? (.*)\\)/i,    '$1').trim() );\n  credits.push( artist.replace(/(.*) \\(featuring (.*)\\)/i,  '$2').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$1').trim() );\n  credits.push( artist.replace(/(.*) & (.*)/ig,             '$2').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$1').trim() );\n  credits.push( artist.replace(/(.*) vs\\.? (.*)/i,          '$2').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$1').trim() );\n  credits.push( artist.replace(/(.*) x (.*)/i,              '$2').trim() );\n\n  var creditMap = {};\n  credits.forEach(function(credit) {\n    if (credit !== title) { // temp., until we find out why title is in credits\n      creditMap[ credit ] = credit;\n    }\n  });\n\n  var output = {\n      artist: artist\n    , title: title\n    , credits: Object.keys(creditMap)\n  };\n\n    return output;\n}\n\nexport default Discogs;\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport {isNumber} from 'utils/IsNumber.js';\nimport accounts from 'accounts/Accounts.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {getReleases} from 'decentralized/artists/Artists.js';\nimport {getRatings} from 'utils/getRatings.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport GuildSamplesContract from 'decentralized/contracts/GuildSamplesContract.js';\nimport {\n    SampleCreated,\n    SampleYoutube,\n    NewDiscogsSample,\n    SampleTagged\n} from 'decentralized/EthereumEvents.js';\n\nlet contractAddress = new GuildSamplesContract().contractAddress;\nconst blocksPerDay = 6425;\nconst cache = {};\n\n/**\n * Want to return a list of grouped samples, grouped by:\n ** day\n ** source\n ** tag\n \n * First need to get recent results paginated for a certain range\n * \n*/\n\nexport const getSoundResultsServer = (pageSize=50, searchTerms, guildId=0, groupBy, start, filterFavorites, sourceToSearch, tag, packToSearch) => {\n    let year = undefined;\n    if (isNumber(searchTerms)) {\n        let _year = parseInt(year);\n        if (_year > 1945 && _year < 2200) {\n            year = _year\n        } \n    }\n    return new Promise(async (resolve, reject) => {\n        let {releaseId, videoId} = sourceToSearch || {};\n        let guildIds = guildId !== 0 ? [guildId] : await ethereum.getGuildsWithAccess();\n        let pack = packToSearch ? packToSearch.packHash : undefined;\n        let userId = await accounts.getAccount();\n        let body = JSON.stringify({\n            size: Math.floor(pageSize),\n            pack,\n            searchTerm: searchTerms,\n            guildIds: guildIds,\n            groupBy,\n            year,\n            start: Math.floor(start),\n            filterFavorites,\n            releaseId,\n            videoId,\n            tag,\n            user: userId\n        });\n        fetch('/searchByDay/' , {\n                method: 'POST',\n            body,\n            headers: {\n                'Accept': 'application/json',\n                'Content-Type': 'application/json',\n            }\n        })\n            .then(resp => resp.json())\n            .then(resp => {\n                resp.sort((a,b) => b.blockNumber - a.blockNumber)\n                resolve(resp);\n            });\n    });\n}\n\nexport const getSoundResults = async (searcher, searchTerms, len=8000, guildIds=[0]) => {\n    if (searchTerms in cache) {\n        return cache[searchTerms];\n    }\n\n    let recentSounds =  await getRecentSounds(searcher, searchTerms, len, guildIds);\n    if (recentSounds.length === 0) {\n        return [];\n    }\n    let recentDiscogs =  await getRecentDiscogs(recentSounds, len, guildIds);\n    let recentReleases =  await getRecentReleases(recentDiscogs);\n    let recentYoutubes =  await getRecentYoutubeSamples(recentSounds, len, guildIds);\n    let recentTags =  await getRecentTags(recentSounds, len*3, guildIds);\n    let ratings = await getRatings(recentSounds.map(x => x.ipfsHash));\n    let sounds = combineAll(recentSounds, recentDiscogs, recentYoutubes, recentTags, ratings, recentReleases);\n\n    let byDay = getByDay(sounds);\n    let byDayAndSource = partitionBySource(byDay, searchTerms);\n    let x = await fetchDaysForBlocks(byDayAndSource);\n    cache[searchTerms] = x;\n    return x;\n};\n\nexport const getRecentSounds = async (searcher, searchTerm, len=500, guildIds) => {\n    let soundIds = undefined;\n    let filterByTitle = false;\n    if (searchTerm.trim() !== \"\") {\n        let searchResults = await searcher.freeTextSearch(searchTerm);\n        let tags = searchResults.TAG.map(x => x.value);\n        if (tags.length === 0) {\n            filterByTitle = true;\n        } else {\n            soundIds = await getSoundsWithOrTags(tags);\n            if (soundIds.length === 0) {\n                return [];\n            }\n        }\n    }\n\n    let query = new BackendQuery(contractAddress)\n        .from(SampleCreated)\n        .select(\"ipfsHash\")\n        .select(\"user\")\n        .select(\"title\")\n        .whereIn(\"guildId\", guildIds)\n        .limit(len);\n\n    if (soundIds) {\n        query.whereIn(\"ipfsHash\", soundIds);\n    }\n\n    let ret = await query.executeQuery();\n    if (filterByTitle) {\n        searchTerm = searchTerm.toLowerCase();\n        return ret.filter(\n            x => x.title.toLowerCase().includes(searchTerm));\n    }\n    return ret;\n};\n\nexport const getRecentDiscogs = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(NewDiscogsSample)\n        .select(\"sampleHash\")\n        .select(\"coverArtHash\")\n        .select(\"discogsId\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"sampleHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    return await query.executeQuery();\n};\n\nexport const getRecentYoutubeSamples = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleYoutube)\n        .select(\"ipfsHash\")\n        .select(\"videoId\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"ipfsHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    return await query.executeQuery();\n};\n\nexport const getRecentTags = async (recentSounds, len=500, guildIds) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleTagged)\n        .select(\"ipfsHash\")\n        .select(\"tag\")\n        .whereIn(\"guildIds\", guildIds)\n        .whereIn(\"ipfsHash\", recentSounds.map(x => x.ipfsHash))\n        .limit(len);\n\n    let results = await query.executeQuery();\n    let tags = {};\n    for (let result of results) {\n        if (!(result.ipfsHash in tags)) {\n            tags[result.ipfsHash] = [];\n        }\n        tags[result.ipfsHash].push(result.tag);\n    }\n    for (let key in tags) {\n        tags[key] = Array.from(new Set(tags[key]));\n    }\n    return tags;\n};\n\nconst combineAll = (sampleCreated, newDiscogs, sampleYoutube, tags, ratings, recentReleases) => {\n    let combined = {};\n    for (let result of sampleCreated) {\n        combined[result.ipfsHash] = {\n            ... result,\n            tags: tags[result.ipfsHash] || [],\n            rating: ratings[result.ipfsHash]\n        };\n    }\n\n    for (let ipfsHash in recentReleases) {\n        combined[ipfsHash] = {\n            ... combined[ipfsHash],\n            ... recentReleases[ipfsHash]\n        };\n    }\n\n    for (let result of newDiscogs) {\n        combined[result.sampleHash] = {\n            ... combined[result.sampleHash],\n            ... result\n        };\n    }\n\n    for (let result of sampleYoutube) {\n        combined[result.ipfsHash] = {\n            ... combined[result.ipfsHash],\n            ... result\n        };\n    }\n\n    let results = [];\n    for (let result of sampleCreated) {\n        results.push(combined[result.ipfsHash]);\n    }\n\n    return results;\n}\n\nexport const getByDay = (results) => {\n    // first try to find blocks that are within a certain range\n    let blocks = [];\n    for (let result of results) {\n        let {blockNumber} = result;\n        let lastBlock = blocks[blocks.length - 1];\n        if (lastBlock === undefined) {\n            blocks.push({\n                blockNumber,\n                results: [result]\n            });\n        } else {\n            let lastBlockNumber = lastBlock.blockNumber;\n            if (Math.abs(lastBlockNumber - blockNumber) <= blocksPerDay) {\n                lastBlock.results.push(result);\n            } else {\n                blocks.push({\n                    blockNumber,\n                    results: [result]\n                });\n            }\n        }\n    }\n    return blocks;\n};\n\nexport const partitionBySource = (byDay, searchTerm) => {\n    for (let dayResult of byDay) {\n        let {results} = dayResult;\n        let discogs = {};\n        let instrumentTypes = {};\n        let youtube = {};\n        let unsourced = {};\n        for (let result of results) {\n            if (result.discogsId) {\n                if (discogs[result.coverArtHash] === undefined) {\n                    discogs[result.coverArtHash] = [];\n                } else {\n                }\n                discogs[result.coverArtHash].push(result);\n            } else if (result.videoId) {\n                if (youtube[result.videoId] === undefined) {\n                    youtube[result.videoId] = [];\n                }\n                youtube[result.videoId].push(result);\n            } else {\n                let tag = result.tags[0] || '';\n                if (searchTerm !== '' && result.tags.some(tag => !tag.toLowerCase().includes(searchTerm.toLowerCase()))) {\n                    tag = result.tags.find(tag => !tag.toLowerCase().includes(searchTerm.toLowerCase()) &&\n                                          tag !== 'Resampled');\n                    if (tag === undefined) {\n                        tag = result.tags[0];\n                    }\n                }\n                if (unsourced[tag] === undefined) {\n                    unsourced[tag] = [];\n                }\n                unsourced[tag].push(result);\n\n                if (result.instrumentType) {\n                    if (instrumentTypes[result.instrumentType] === undefined) {\n                        instrumentTypes[result.instrumentType] = [];\n                    }\n                    instrumentTypes[result.instrumentType].push(result);\n                }\n            }\n        }\n        dayResult.discogs = discogs;\n        dayResult.youtube = youtube;\n        dayResult.unsourced = unsourced;\n        dayResult.instrumentTypes = instrumentTypes;\n    }\n    return byDay;\n};\n\nexport const fetchDaysForBlocks = async (byDayAndSource) => {\n    for (let i in byDayAndSource) {\n        let result = byDayAndSource[i];\n        /*\n        let day = new Date(); //await getBlockDate(parseInt(result.blockNumber));\n        result.date = day;\n        */\n    }\n    return byDayAndSource;\n};\n\nconst getSoundsWithOrTags = async (tags) => {\n    let soundIds = [];\n    let query = new BackendQuery(contractAddress)\n        .from(SampleTagged)\n        .select(\"ipfsHash\")\n        .whereIn(\"tag\", tags);\n    let results = await query.executeQuery();\n    return results.map(x => x.ipfsHash);\n};\n\nconst getRecentReleases = async (recentDiscogs) => {\n    let discogIds = recentDiscogs.map(x => x.discogsId);\n    let releases = await getReleases(discogIds);\n    let results = {};\n    for (let result of recentDiscogs) {\n        results[result.sampleHash] = releases[result.discogsId];\n    }\n    return results;\n}\n","import axios from 'axios';\nimport ipfs from 'decentralized/Ipfs.js';\n\nexport const downloadImage = (thumb) =>  {\n    return new Promise((resolve, reject) => {\n        axios.get('http://0.0.0.0:9092/' + thumb,\n                  {\n                      responseType: 'blob'\n                  })\n            .then(result => {\n                let blob = result.data;\n                ipfs.addBlob(blob).then((hash) => {\n                    console.log('Downloaded thumb = ', hash);\n                    resolve(hash);\n                });\n            });\n    });\n};\n \n","import React, { Component } from 'react';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport SingleLFOComponent from './SingleLFOComponent.js';\nimport SystemEnvelopeComponent from 'components/envelope/SystemEnvelopeComponent.js';\nimport {setShowEnvelopes} from 'actions/index.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {setContextualHelp} from \"actions/index.js\";\nimport {LFOS_BUTTON} from 'constants/contextual-help.js';\nimport {ENVELOPES_BUTTON} from 'constants/contextual-help.js';\n\nclass LFOTrackComponent extends Component {\n\n    get patternLocked() {\n        if (this.props.showLFOs) {\n            return this.props.lfoPatternLocked;\n        } else if (this.props.showEnvelopes) {\n            return this.props.envelopePatternLocked;\n        }\n        return false;\n    }\n\n    onClickLFOThumbnail() {\n        this.props.setShowEnvelopes(false);\n        this.props.setShowLFOs(!this.props.showLFOs);\n    }\n\n    onClickEnvelopeThumbnail() {\n        this.props.setShowLFOs(false);\n        this.props.setShowEnvelopes(!this.props.showEnvelopes);\n    }\n\n    onClickLock() {\n        if (this.props.showLFOs) {\n            this.props.lfosTrack.togglePatternLocked();\n        } else if (this.props.showEnvelopes) {\n            this.props.envelopesTrack.togglePatternLocked();\n        }\n    }\n\n    render() {\n        let className = this.props.isMixView ? 'track flex lfos-track mix-view' : 'track flex lfos-track';\n        let lfoThumbnailClassName = this.props.showLFOs ?\n            'lfo-thumbnail selected' : 'lfo-thumbnail';\n        let envelopeThumbnailClassName = this.props.showEnvelopes ?\n            'lfo-thumbnail selected' : 'lfo-thumbnail';\n        return (\n            <div\n              key={'lfo-tracks'}\n              onClick={() => []} className={className}>\n              <a name='lfos'/>\n              <a name='envelopes'/>\n              <div className='unselected youtube-container'>\n                <div className='lfo-envelope-button-container'>\n                  <div\n                    onMouseOver={() => this.props.setContextualHelp(LFOS_BUTTON)}\n                    onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                    onClick={() => this.onClickLFOThumbnail()} \n                    className={lfoThumbnailClassName}>\n                    LFO\n                  </div>\n                  <div \n                    onMouseOver={() => this.props.setContextualHelp(ENVELOPES_BUTTON)}\n                    onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                    onClick={() => this.onClickEnvelopeThumbnail()} \n                    className={envelopeThumbnailClassName}>\n                    ENV\n                  </div>\n                </div>\n              </div>\n              <ConditionedComponent condition={this.props.showLFOs}>\n                <div className=\"lfo-effects-view\">\n                  {this.props.lfosTrack.lfos.map(\n                      lfo => \n                          <SingleLFOComponent key={lfo.number} sequencerEngine={this.props.sequencerEngine} lfo={lfo}/>)}\n                </div>\n             </ConditionedComponent>\n              <ConditionedComponent condition={this.props.showEnvelopes}>\n                <div className=\"lfo-effects-view\">\n                  {this.props.envelopesTrack.envelopes.map(\n                      envelope => \n                    <SystemEnvelopeComponent\n                      key={envelope.number}\n                      scrollContainer={this.props.scrollContainer}\n                      sequencerEngine={this.props.sequencerEngine}\n                      envelopeTrack={envelope}/>)}\n                </div>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.showLFOs || this.props.showEnvelopes}>\n                <div className=\"lock-button-container\">\n                  <img\n                    onClick={() => this.onClickLock()}\n                    className=\"lock-button\"\n                    src={this.patternLocked ? \"/closed-padlock.png\" : \"/opened-padlock.png\"}/>\n                </div>\n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setShowEnvelopes: s => dispatch(setShowEnvelopes(s)),\n        setShowLFOs: s => dispatch(setShowLFOs(s)),\n        setContextualHelp: (element) => dispatch(setContextualHelp(element)),\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    let subSequenceEnvelopeLocks = state.tracks.envelopePatternLocks[props.envelopesTrack.subSequence.id] || {};\n    let envelopePatternLocked = subSequenceEnvelopeLocks[props.sequencerEngine.currentPattern];\n    let subSequenceLFOLocks = state.tracks.lfoPatternLocks[props.lfosTrack.subSequence.id] || {};\n    let lfoPatternLocked = subSequenceLFOLocks[props.sequencerEngine.currentPattern];\n    return {\n        showLFOs: state.sequencer.showLFOs,\n        showEnvelopes: state.sequencer.showEnvelopes,\n        lfoPatternLocked: lfoPatternLocked,\n        envelopePatternLocked: envelopePatternLocked,\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(LFOTrackComponent);\n","import React, { useEffect, useState, useCallback } from 'react';\nimport SendEffect from './SendEffect.js';\nimport { connect } from \"react-redux\";\nimport Dropdown from 'react-dropdown';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport '../../Sends.scss';\n\nconst SendComponent = (props) => {\n    let [value, setValue] = useState(undefined);\n    let channel = props.masterChannel || props.send;\n    let effects = props.masterChannel ?\n        props.masterChannel.effectsChain.effects : props.send.effects;\n\n    const handleChooseEffect = useCallback((e) => {\n        let effect = initializeEffect(e.value, props.sequencerEngine);\n        effect.enable(true);\n        if (effect.wetParameter) {\n            effect.wetParameter.set(1);\n        }\n        channel.addEffect(effect);\n        setValue(e.value);\n        return false;\n    }, [setValue, props.sequencerEngine, channel]);\n\n    useEffect(() => {\n        if (value) {\n            setValue(undefined);\n        }\n    }, [value, setValue]);\n\n    const moveEffectTo = useCallback((from, to) => {\n        channel.moveEffectTo(from, to);\n        setValue({from, to});\n    }, [setValue, channel]);\n\n    return (\n        <div className=\"send\">\n          <div className=\"name-and-chooser\">\n            <div className=\"send-name\">\n              {props.name || props.send.name}\n            </div>\n            <Dropdown\n              className='send-effects-dropdown'\n              options={effectOptions}\n              value={value}\n              onChange={handleChooseEffect}\n              placeholder=\"FX\" />\n          </div>\n          {effects.map(\n              (effect, i) =>\n                  <SendEffect key={effect.id} moveEffectTo={moveEffectTo} effectNumber={i} effect={effect}/>)}\n       </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    if (props.masterChannel) {\n        return {\n            effects: props.masterChannel.effectsChain.effects\n        };\n    } else {\n        return {\n            effects: props.send.effects\n        };\n    }\n};\n\nexport default connect(mapStateToProps, null)(SendComponent);\n\n","import React, { useEffect, useRef, useState, useCallback } from 'react';\nimport { connect } from \"react-redux\";\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport SendComponent from './SendComponent.js';\nimport {\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport '../../Sends.scss';\n\nfunction SendsTrackComponent(props) {\n    const [sends, setSends] = useState(props.sequencerEngine.sends.sends);\n    let ref = useRef(undefined);\n\n    const onDelete = useCallback(() => {\n        props.setSelectedSendEffect(undefined);\n    }, []);\n\n\n    useEffect(() => {\n        return () => props.setSelectedSendEffect(undefined);\n    }, []);\n    let selectedEffect = '';\n    if (props.selectedEffect) {\n        let send = sends.find(x => x.effects.indexOf(props.selectedEffect) > -1);\n        if (!send) {\n            let masterChannel = props.sequencerEngine.channelMixer.masterChannel;\n            if (masterChannel.effectsChain.effects.includes(props.selectedEffect)) {\n                send = masterChannel;\n            }\n        }\n        if (send) {\n            selectedEffect = (\n                <EffectComponent\n                  sequencerEngine={props.sequencerEngine}\n                    noSelect={true}\n                  scrollContainer={[props.scrollContainer, ref]}\n                  isDraggable={false}\n                  onDeleteEffect={() => onDelete()}\n                  effect={props.selectedEffect}\n                  send={send}/>);\n        }\n    }\n\n    const createNewSend = useCallback(() => {\n        props.sequencerEngine.sends.createNewSend();\n        setSends([... props.sequencerEngine.sends.sends]);\n    }, [setSends]);\n\n    return (\n        <div ref={ref} className=\"track sends\">\n          <div className=\"track-container\">\n          <div className=\"track-header\">\n            <div className=\"track-name-view\">\n              Routing\n            </div>\n          </div>\n          <div className=\"sends-container\">\n            {sends\n             //.filter(send => !send.pad)\n             .map((send, i) => <SendComponent key={i} sequencerEngine={props.sequencerEngine} send={send}/>)}\n            <SendComponent name=\"Mix\" sequencerEngine={props.sequencerEngine}\n                           masterChannel={props.sequencerEngine.channelMixer.masterChannel}/>\n            {selectedEffect}\n            <div\n              onClick={createNewSend}\n              className=\"new-send-button\">New Send</div>\n        </div>\n          </div>\n        </div>\n    );\n}\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedEffect: state.effects.selectedSendEffect,\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedSendEffect: (e) => dispatch(setSelectedSendEffect(e))\n   }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendsTrackComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Tags = ({setTags, tags, placeholder=\"Type tags\"}) => { \n    let [value, setValue] = useState('');\n    const deleteTag = useCallback(t => {\n        setTags(\n            tags.filter(x => x !== t));\n    }, [tags, setTags]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter') {\n            setTags([... tags, value]);\n            setValue('');\n        }\n    }, [setTags, tags, value]);\n \n    return (\n        <div className=\"tags\">\n          {tags.map(tag => <div onClick={() => deleteTag(tag)} className=\"tag-option\">{tag}</div>)}\n          <input placeholder={placeholder} className=\"tag-sample-input\" onKeyDown={onKeyDown} value={value} type=\"text\" onChange={e => setValue(e.target.value)}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Tags);\n","import React, { useCallback } from 'react';\nimport ParameterVisual from 'components/mix/mix2/ParameterVisual.js';\nimport { connect } from \"react-redux\";\nimport {\n    dragEffect,\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport '../../Sends.scss';\n\nfunction SendEffect(props) {\n    const onDragOver = (e) => {\n        e.preventDefault();\n    };\n\n    const onDragStart = useCallback((e) => {\n        props.dragEffect({effectNumber: props.effectNumber});\n    }, [props.effectNumber]);\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation()\n        if (props.effectDragging === undefined) {\n            return;\n        }\n        let {effectNumber} = props.effectDragging;\n        props.moveEffectTo(effectNumber, props.effectNumber);\n    }, [props.effectNumber, props.effectDragging]);\n\n    const selectEffect = useCallback((e) => {\n        console.log('setting selected send effect=',\n            props.isSelected ? undefined : props.effect);\n        props.setSelectedSendEffect(\n            props.isSelected ? undefined : props.effect);\n    }, [props.isSelected, props.effect]);\n\n    let className = \"send-effect\";\n    if (props.isSelected) {\n        className += \" selected\";\n    }\n\n    let parameters = props.effect.getParameters();\n    if (parameters.length > 10) {\n        parameters = parameters.slice(0, 10);\n    }\n    return (\n        <div\n          onClick={selectEffect}\n          onDragOver={onDragOver}\n          onDrop={onDrop}\n          onDragStart={onDragStart}\n          draggable\n          className={className}>\n          <div className=\"effect-name\">\n            {props.effect.name}\n          </div>\n          {parameters.map(parameter => <ParameterVisual key={parameter.id} parameter={parameter}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        effectDragging: state.sequencer.effectDragging,\n        isSelected: state.effects.selectedSendEffect === props.effect,\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        dragEffect: (e) => dispatch(dragEffect(e)),\n        setSelectedSendEffect: (e) => dispatch(setSelectedSendEffect(e))\n   }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendEffect);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectOption from './EffectOption.js';\nimport Dropdown from 'react-dropdown';\nimport MidiEffectComponent from 'components/effects/MidiEffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {midiEffectOptions, getMidiEffectOption, initializeMidiEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedMixEffect,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst AudioEffects = ({\n    currentSubSequence,\n    track,\n    sequencerEngine,\n    selectedEffect,\n    setSelectedEffect}) => { \n        let [value, setValue] = useState(undefined);\n        let effects = track ? track.midiEffects.effects : [];\n        \n        const moveEffectTo = useCallback((from, to) => {\n            track.moveMidiEffectTo(from, to);\n            setValue({from, to});\n        }, [track, setValue]);\n        \n        const onDelete = useCallback(() => {\n            setSelectedEffect(currentSubSequence, track.id, undefined, undefined);\n        }, [currentSubSequence, track]);\n\n        let fxComponent = '';\n        if (selectedEffect && effects.some(e => e.id === selectedEffect.id)) {\n            fxComponent = (\n                <MidiEffectComponent\n                  sequencerEngine={sequencerEngine}\n                  isDraggable={false}\n                  track={track}\n                  compact={true}\n                  onDeleteEffect={() => onDelete()}\n                  effect={selectedEffect}\n                  send={undefined}/>);\n        }\n\n        const handleChooseEffect = useCallback((e) => {\n            let effect = initializeMidiEffect(e.value, track);\n            track.midiEffects.addEffect(effect);\n            setSelectedEffect(currentSubSequence, track.id, undefined, effect);\n            return false;\n        }, [setValue, sequencerEngine, track]);\n\n        let name = \"\";\n        let style = {\n        };\n        console.log(\"SELECTED EFFECT =\" , selectedEffect);\n        return (\n            <div className=\"audio-effects\">\n              <div\n                style={style}\n                className=\"effects-channel-strip\">\n               <div className=\"effects-list\">\n                  {effects.map(\n                      (effect, i) =>\n                          <EffectOption\n                            key={effect.id}\n                            track={track}\n                            currentSubSequence={track}\n                            effectType={\"MIDI_FX\"}\n                            moveEffectTo={moveEffectTo}\n                            effectNumber={i}\n                            effect={effect}/>)}\n                </div>\n                <Dropdown\n                  className='send-effects-dropdown'\n                  options={midiEffectOptions}\n                  onChange={handleChooseEffect}\n                  placeholder=\"MIDI FX\" />\n             </div>\n\n              <div className=\"effects-view\">\n                {fxComponent}\n              </div>\n            </div>);\n    }\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = props.track.id;\n    let selectedGroup = state.mix.selectedGroup;\n    let subId = state.sequencer.currentSubSequence[props.sequencerEngine.engineId];\n    let track = props.track;\n    return {\n        selectedTrack, \n        selectedGroup,\n        effectsLength: track.midiEffects.effects.length,\n        selectedEffect: selectedTrack !== undefined ? state.mix.selectedTrackMidiEffects[subId] &&\n            state.mix.selectedTrackMidiEffects[subId][selectedTrack] :\n            undefined,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedEffect: (sub, trackNumber, groupNumber, effect) => dispatch(\n            setSelectedMixEffect(sub, trackNumber, groupNumber, \"MIDI_FX\", effect))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from \"decentralized/Ipfs.js\";\nimport {connect} from 'react-redux';\n\nconst NAMES = ['A', 'B', 'C', 'D', 'E', 'F', 'G'];\n\nconst ModuleOption = ({project, sequencerEngine}) => { \n    let [data, setData]= useState(undefined);\n    let [modules, setModules] = useState([]);\n    let [module, setModule] = useState(undefined);\n    useEffect(() => {\n        ipfs.getJson(project.newSequence).then(setData);\n    }, [setData]);\n\n    const onClickModule = useCallback((i) => {\n        sequencerEngine.loadSequence(project.newSequence, i);\n    }, [project]);\n\n    useEffect(() => {\n        if (data) {\n            setModules(data.subSequences);\n        }\n    }, [data, setModules]);\n    return (\n        <div\n          className=\"module-option\">\n          <div className=\"basic\">\n            <div className=\"project-name\">{project.title}</div>\n            <div className=\"module-types\">\n              {modules.map((x, i) => <div\n                                       onClick={() => onClickModule(i)}\n                                       className=\"module-name\">{NAMES[i]}</div>)}\n            </div>\n          </div>\n          {module !== undefined &&\n           <div className=\"expansion\">\n           </div>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {SIZE} from './constants.js';\n\nconst AutomationPaths = ({automationPaths}) => { \n    const getPath = (path) => {\n        return \"M \" + SIZE*path[0].x + ','+ SIZE*path[0].y + \" L \" +\n            path.slice(1).map(({x,y}) => x*SIZE +','+ y*SIZE).join(',');\n        \n    };\n    return automationPaths.map(\n        _path =>\n            <path fill=\"transparent\" d={getPath(_path)} strokeWidth={2} stroke=\"red\"/>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationPaths);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ModuleOption from './ModuleOption.js';\nimport {connect} from 'react-redux';\nimport '../../ModuleLoader.scss';\nimport {useScroll} from 'components/selector2/useScroll.js';\nimport {getProjects} from 'components/sequences2/getProjects.js';\n\nconst ModuleLoader = (props) => { \n    let [clicked, setClicked] = useState(false);\n    let [value, setValue] = useState('');\n    let [projects, setProjects] = useState([]);\n    const ref = useRef(undefined);\n    let {size} = useScroll(ref, 16, true, value);\n\n    useEffect(() => {\n        if (clicked) {\n            getProjects(value).then(\n                setProjects);\n        }\n    }, [clicked, setProjects, value]);\n\n    if (!clicked) {\n        return (<div>\n                  <div\n                    onClick={() => props.sequencerEngine.newSubSequence()}\n                    className=\"needs-click module-loader new-module\">\n                    <div className=\"click-me\">\n                      New Module\n                    </div>\n                  </div>\n                  <div\n                    onClick={() => setClicked(true)}\n                    className=\"needs-click module-loader\">\n                    <div className=\"click-me\">\n                      Click to load modules\n                    </div>\n                  </div>\n                </div>\n               );\n    }\n    return (\n        <div className=\"module-loader\">\n          <input type=\"text\" placeholder=\"Search for modules\" value={value} onChange={e => setValue(e.target.value)}/>\n          <div ref={ref} className=\"module-list\">\n            {projects.filter(p => p.guildId === 0).slice(0, size).map(\n                p => <ModuleOption\n                       key={p.newSequence}\n                       sequencerEngine={props.sequencerEngine} project={p}/>)}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleLoader);\n","export const SIZE = 32;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setShowHigherOrderSequencer,\n    } from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst HigherOrderHeader = ({setShowHigherOrderSequencer, show}) => { \n    return (\n        <div\n          className=\"higher-order-component\">\n          <div className=\"higher-order-header\">\n            <div className=\"name\">\n              H=O Sequencer\n            </div>\n            <div className=\"collapse-container\">\n              <div onClick={() => setShowHigherOrderSequencer(!show)} className={show ? \"arrow-down\" : \"arrow-left\"}>\n              </div>\n            </div>\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.higherOrder.show\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowHigherOrderSequencer: (x) => dispatch(setShowHigherOrderSequencer(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderHeader);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst ModuleRouter = ({inputModules, outputModules, higherOrderSequencer}) => { \n    let modules = higherOrderSequencer.sequencerEngine.subSequences;\n    return (\n        <div className=\"module-router\">\n        {modules.map(\n            mod =>\n                <div className=\"module-routes\">\n                  <div className=\"module-indicator\">\n                    {mod.name}\n                  </div>\n                  <img\n                    onClick={() => higherOrderSequencer.toggleInput(mod)}\n                    src={!inputModules.includes(mod) ?\n                            \"/black-arrow.svg\" :\n                            \"/gray-arrow.svg\"}/>\n                </div>\n        )}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let modules = props.higherOrderSequencer.sequencerEngine.subSequences;\n    return {\n        num: modules.length,\n        inputModules: state.higherOrder.inputModules,\n        outputModules: state.higherOrder.outputModules,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleRouter);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setHigherOrderStepsSelected} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst RoutingMatrix = ({orientation, higherOrderSequencer, setHigherOrderStepsSelected}) => { \n    let routings = higherOrderSequencer.routings[orientation];\n    let modules = higherOrderSequencer.modules;\n\n    const isConnected = useCallback((from, to) => {\n        return routings[from.id] && routings[from.id].includes(to);\n    }, [routings]);\n\n    const toggle = useCallback((from, to) => {\n        if (isConnected(from, to)) {\n            higherOrderSequencer.disconnectModules(orientation, from, to);\n        } else {\n            higherOrderSequencer.connectModules(orientation, from, to);\n        }\n    }, [routings]);\n\n    const toggleFreeform = useCallback((module) => {\n        if (higherOrderSequencer.isFreeform(module)) {\n            higherOrderSequencer.disconnectFromFreeform(module);\n        } else {\n            higherOrderSequencer.connectToFreeform(module);\n        }\n    }, []);\n\n    return (\n        <div className=\"orientation-routing\">\n          <div className=\"out-label\">\n            OUTPUT\n          </div>\n          <div className=\"module-outs\">\n            {modules.map(\n                module =>\n                    <div key={module.id}>\n                      <div className=\"m-name\">{module.name}</div>\n                      <div className=\"out-line\"/>\n                    </div>\n            )}\n            <div>\n              <div className=\"m-name\">free</div>\n              <div className=\"out-line\"/>\n            </div>\n          </div>\n          <div className=\"m-row\">\n            <div className=\"in-label\">\n              INPUT\n            </div>\n            <div>\n            {modules.map(\n                module =>\n                    <div\n                      key={module.id}\n                      className=\"m-routing\">\n                      <div className=\"m-name\">\n                        {module.name}\n                      </div>\n                      <div className=\"in-line\"/>\n                      {modules.map(\n                          toModule => \n                              <div\n                                key={toModule.id}\n                                onClick={() => toggle(module, toModule)}\n                                className=\n                                  {isConnected(module, toModule) ?\n                                   \"m-option connected\" : \"m-option\"}/>)}\n                      <div\n                        onClick={() => toggleFreeform(module)}\n                        className={higherOrderSequencer.isFreeform(module) ?\n                                   \"m-option connected\" : \"m-option\"}/>\n                    </div>)}\n            </div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      orientationRoutings: state.higherOrder.orientationRoutings,\n      modulesLen: props.higherOrderSequencer.modules.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setHigherOrderStepsSelected: x=>dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RoutingMatrix);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {doc} from 'effects/midi/scripting/documentation.js';\nimport ModuleRouter from './ModuleRouter.js';\nimport UserScriptComponent from \"components/effects/scripting/UserScriptComponent.js\";\nimport {connect} from 'react-redux';\n\nconst ModuleScripter = ({higherOrderSequencer}) => { \n    let {scriptEffect} = higherOrderSequencer;\n    return (\n        <div className=\"module-scripter\">\n          <ModuleRouter higherOrderSequencer={higherOrderSequencer}/>\n          <UserScriptComponent doc={doc} effect={scriptEffect}/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleScripter);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {setHigherOrderStepsSelected} from 'actions/index.js';\nimport {useOrientation} from './useOrientation.js';\nimport {connect} from 'react-redux';\n\nlet SIZE = 10;\nlet MARGIN= 17;\n\nconst TO_X = 70;\nconst FROM_X = SIZE;\n\nconst OrientationRouting = ({orientation, higherOrderSequencer, setHigherOrderStepsSelected}) => { \n    let ref = useRef(undefined);\n\n    let {selectedEdge, setSelectedEdge, onMouseMove, onMouseUp, onMouseDown, setDragging, dragging} =\n        useOrientation({ref, orientation, higherOrderSequencer});\n\n\n    useEffect(() => {\n        if (selectedEdge) {\n            setHigherOrderStepsSelected(undefined);\n        }\n    }, [selectedEdge]);\n    let routing = higherOrderSequencer.routings[orientation];\n    let modules = higherOrderSequencer.modules;\n    \n    let getXY = (col=0, i) => {\n        let x = col === 0 ? SIZE : TO_X;\n        let y = SIZE+(SIZE+MARGIN)*i;\n        return {x,y};\n    };\n\n    const getModNumber = (mod) => {\n        let modules = higherOrderSequencer.modules;\n        for (let i=0; i < modules.length; i++ ){\n            if (modules[i].id === mod) {\n                return i;\n            }\n        }\n        return -1;\n    };\n\n    const getRectXY = useCallback(() => {\n        let rectXY = getXY(0, higherOrderSequencer.modules.length);\n        let rectX = 25;\n        let rectY = rectXY.y;\n        return {\n            x: rectX,\n            y: rectY,\n        };\n    }, []);\n\n    const onFreeformUp = useCallback(() => {\n        if (!dragging) {\n            return;\n        }\n        higherOrderSequencer.connectToFreeform(dragging.module);\n    }, [dragging]);\n\n    const getPath = (x1, y1, x2, y2) => {\n        return \"M \" +x1 + ', ' + y1 + ' C ' +\n            (x1+x2)/2 +', ' + y1 + ',' + \n            (x1+x2)/2 +', ' + y2 + ','+\n            (x2-10) +', ' + y2;\n    };\n\n    let routeKeys = Object.keys(routing);\n    let rectXY = getRectXY();\n    let rectX = rectXY.x;\n    let rectY = rectXY.y;\n    return (\n        <svg\n          height={rectY+15}\n          width={100}\n          ref={ref}\n          onMouseUp={() => setDragging(undefined)}\n          onMouseLeave={() => setDragging(undefined)}\n          onMouseMove={onMouseMove}\n          className=\"orientation-routing\">\n          <marker id=\"o-arrowhead\" markerWidth=\"10\" markerHeight=\"8\" \n\t          refX=\"4\" refY=\"2\" orient=\"auto\">\n            <polygon points=\"0 0, 5 2, 0 4\" fill=\"white\"/>\n          </marker>\n          {dragging && <line\n                         stroke=\"white\" x1={dragging.x1} x2={dragging.x2} y1={dragging.y1} y2={dragging.y2}/>}\n          {higherOrderSequencer.freeformModules.map(\n              module => {\n                  let fromPos = getXY(0, getModNumber(module.id));\n                  let toPos = getRectXY();\n                  let x1 = fromPos.x;\n                  let y1 = fromPos.y;\n                  let x2 = toPos.x + 15;\n                  let y2 = toPos.y;\n                  let d = `M ${x1},${y1} C ${x1+30}, ${y1} ${x1+15}, ${y1+5} ${x2}, ${y2}`;\n                  let className= \"module-edge\";\n                  if (selectedEdge && selectedEdge.to === -1 &&\n                      selectedEdge.from === module.id) {\n                      className += \" selected\";\n                  }\n                  return (<path\n                            onMouseUp={(e) => {\n                                e.stopPropagation();\n                                setSelectedEdge({\n                                    from: module.id,\n                                    to: -1\n                                });\n                            }}\n                            className={className}\n                            markerEnd=\"url(#o-arrowhead)\"\n                            stroke=\"white\"\n                            d={d}\n                          />);\n              })}\n          {routeKeys.map(\n              from =>\n                  routing[from].map(\n                      to => {\n                          let fromPos = getXY(0, getModNumber(from));\n                          let toPos = getXY(1, getModNumber(to.id));\n                          let d = getPath(fromPos.x, fromPos.y, toPos.x, toPos.y);\n                          let className = \"module-edge\";\n                          if (selectedEdge) {\n                              if (selectedEdge.from === from &&\n                                  selectedEdge.to === to.id) {\n                                  className += \" selected\";\n                              }\n                          }\n\n                          return (\n                              <path\n                                onMouseUp={(e) => {\n                                    e.stopPropagation();\n                                    setSelectedEdge({\n                                        from: from,\n                                        to: to.id\n                                    });\n                                }}\n                                d={d}\n                                markerEnd=\"url(#o-arrowhead)\"\n                                stroke=\"white\"\n                                className={className}\n                              />);\n                      }))}\n\n          {modules.map(\n              (mod, i) =>\n                  <g>\n                    <circle\n                      onMouseDown={(e) => onMouseDown(e, mod)}\n                      fill=\"white\" cx={getXY(0, i).x} cy={getXY(0, i).y} r={SIZE}/>\n                    <text x={2+SIZE*0.5} y={0.5*SIZE+getXY(0,i).y} fill=\"black\">\n                      {mod.name}\n                    </text>\n                  </g>)}\n          {modules.map(\n              (mod, i) =>{\n                let {x,y} = getXY(1, i);\n                  return (\n                      <g>\n                        <circle\n                          onMouseUp={() => onMouseUp(mod)}\n                          fill=\"white\" cx={x} cy={y} r={SIZE}/>\n                        <text x={2+x-SIZE*0.5} y={0.5*SIZE+y} fill=\"black\">\n                          {mod.name}\n                        </text>\n                      </g>);\n              })}\n          <rect\n            onMouseUp={onFreeformUp}\n            fill=\"white\" x={rectX} y={rectY} width={30} height={15}/>\n          <text fill=\"black\" x={6+rectX} y={rectY+11}>Free</text>\n        </svg>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      orientationRoutings: state.higherOrder.orientationRoutings,\n      modulesLen: props.higherOrderSequencer.modules.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setHigherOrderStepsSelected: x=>dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OrientationRouting);\n","import React, { useRef, useState, useEffect, useCallback} from 'react';;\nexport const useOrientation = ({ref, higherOrderSequencer, orientation}) => {\n    let [dragging, setDragging] = useState(undefined);\n    let [selectedEdge, setSelectedEdge] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [selectedEdge, setSelectedEdge]);\n\n    const onKeyDown = useCallback((e) => {\n        if (!selectedEdge) {\n            return;\n        }\n        if (e.key === 'Backspace') {\n            let {from, to} = selectedEdge;\n            from = higherOrderSequencer.getModule(from);\n            if (to === -1) {\n                higherOrderSequencer.disconnectFromFreeform(from);\n            } else {\n                to = higherOrderSequencer.getModule(to);\n                higherOrderSequencer.disconnectModules(orientation, from, to);\n            }\n            setSelectedEdge(undefined);\n        }\n    }, [selectedEdge, setSelectedEdge]);\n\n    const getMouseXY = (e) => {\n        let rect = ref.current.getBoundingClientRect();\n        let x = e.clientX - rect.left;\n        let y = e.clientY - rect.top;\n        return {x,y};\n    };\n\n    const onMouseUp = useCallback((mod) => {\n        if (selectedEdge) {\n            setSelectedEdge(undefined);\n        }\n        if (!dragging) {\n            return;\n        }\n\n        higherOrderSequencer.connectModules(orientation, dragging.module, mod);\n    }, [dragging, selectedEdge, setSelectedEdge]);\n\n    const onMouseMove = useCallback((e) => {\n        if (!dragging) {\n            return;\n        }\n        let {x,y} = getMouseXY(e);\n        setDragging({\n            ... dragging,\n            x2: x,\n            y2: y\n        });\n    }, [dragging, setDragging]);\n\n    const onMouseDown = useCallback((e, module) => {\n        let {x,y} = getMouseXY(e);\n        setDragging({\n            module,\n            x1: x,\n            y1: y,\n            x2: x,\n            y2: y\n        });\n    }, [setDragging]);\n\n    return {onMouseMove, onMouseUp, onMouseDown, setDragging, dragging, selectedEdge, setSelectedEdge};\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Choice = ({sequencer, orientation, type, name}) => { \n    let [chosen, setChosen] = useState(sequencer.algorithmTypes[orientation].includes(type));\n\n    const toggle = useCallback(() => {\n        if (chosen) {\n            sequencer.algorithmTypes[orientation] =\n                sequencer.algorithmTypes[orientation].filter(\n                    n => n !== type);\n        } else {\n            sequencer.algorithmTypes[orientation] =\n                [... sequencer.algorithmTypes[orientation],\n                 type];\n        }\n        setChosen(!chosen);\n    }, [sequencer, chosen, setChosen]);\n\n    let className = \"algorithm-choice\";\n    if (chosen) {\n        className += \" chosen\";\n    }\n    return (<div onClick={toggle} className={className}>{name}</div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Choice);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst Triangle = ({orientation}) => { \n    let style = {\n    };\n    if (orientation === 0) {\n        style.borderLeft = '32px solid white';\n        style.borderTop = '32px solid transparent';\n    } else {\n        style.borderRight = '32px solid white';\n        style.borderBottom = '32px solid transparent';\n    }\n    return (\n        <div className=\"triangle-icon\" style={style}></div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Triangle);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RoutingMatrix from './RoutingMatrix.js';\nimport OrientationRouting from './OrientationRouting.js';\nimport Choice from './Choice.js';\nimport {connect} from 'react-redux';\nimport Triangle from './Triangle.js';\nimport {PLAY_SPEED_MODULE, RESTART_MODULE, PLAY_MODULE, ROLL_MODULE} from 'higherorder/algorithm-types.js';\n\nconst AlgorithmChooser = ({orientation, higherOrderSequencer}) => { \n    return (\n        <div className=\"algorithm-chooser\">\n          <Triangle orientation={orientation}/>\n          <RoutingMatrix orientation={orientation} higherOrderSequencer={higherOrderSequencer}/>\n          {/*<OrientationRouting orientation={orientation} higherOrderSequencer={higherOrderSequencer}/>*/}\n          <div className=\"algorithm-choices\">\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={PLAY_MODULE} name=\"Play\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={RESTART_MODULE} name=\"Restart\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={ROLL_MODULE} name=\"Roll\"/>\n            <Choice orientation={orientation} sequencer={higherOrderSequencer} type={PLAY_SPEED_MODULE} name=\"Speed\"/>\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AlgorithmChooser);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst ParameterResult = ({\n    i,\n    mouseDown,\n    selectedParameters,\n    setSelectedParameters,\n    higherOrderSequencer,\n    parameter,\n    setParameters,\n}) => { \n    let {context} = parameter;\n    let {lfosTrack, track, instrument, effect, midiEffect, subDevice} = context;\n    let subSequence = track && track.subSequence;\n    if (lfosTrack) {\n        subSequence = lfosTrack.subSequence;\n    }\n\n    const onClick = useCallback(() => {\n        higherOrderSequencer.setParameter(parameter);\n        setParameters([... higherOrderSequencer._parameters])\n    }, [parameter]);\n\n    const onMouseOver = useCallback((e) => {\n        if (selectedParameters && mouseDown.current) {\n            setSelectedParameters([... selectedParameters, i]);\n        }\n    }, [i, selectedParameters, setSelectedParameters]);\n\n    if (track && track.isMetronome) {\n        return '';\n    }\n    if (context.formant && !context.formant.enabled) {\n        return '';\n    }\n\n    let sorted = selectedParameters && [...selectedParameters].sort();\n    let className = \"parameter-result\";\n    if (sorted) {\n        if (selectedParameters.includes(i)) {\n            className += \" selected\";\n        }\n    }\n    return (\n        <div\n          onMouseOver={onMouseOver}\n          onMouseDown={(e) => e.metaKey && selectedParameters ? setSelectedParameters([... selectedParameters, i]) : setSelectedParameters([i])}\n          onClick={onClick} className={className}>\n          {subSequence &&\n           <div\n             style={{backgroundColor: subSequence.color}}\n             className=\"p-sub-sequence\">{subSequence.name}</div>}\n          <div className=\"p-name\">\n            {parameter.name}\n          </div>\n          {track &&\n           <div style={{backgroundColor: colors.getColorForTrack(track)}}\n                className=\"p-track\">{track.trackNumber + 1}. {track.getName()}</div>}\n          {subDevice && <div\n                          style={{backgroundColor: colors.getColorForHash(track ? track.getName() + subDevice.name : subDevice.name)}}\n                          className=\"p-sub-device\">{subDevice.name}</div>}\n          {effect && <div className=\"p-effect\">{effect.name}</div>}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParameterResult);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ParameterResult from './ParameterResult.js';\nimport {index} from \"parameters/ParameterIndex.js\";\nimport {connect} from 'react-redux';\n\nconst ParameterSearcher = ({higherOrderSequencer, setParameters}) => { \n    const [value, setValue] = useState('');\n    const [results, setResults] = useState([]);\n    const [selectedParameters, setSelectedParameters] = useState(undefined);\n    const mouseDown = useRef(false);\n    \n    useEffect(() => {\n        if (value !== \"\") {\n            setResults(\n                index.search(value)\n                    .filter(\n                        p => p.audioParam || p.audioParams));\n        } else {\n            setResults([]);\n        }\n    }, [value, setResults]);\n\n    useEffect(() => {\n        setSelectedParameters(undefined);\n    }, [results, setSelectedParameters]);\n\n    const createMacro = useCallback(() => {\n        let params = Array.from(new Set(selectedParameters.map(\n            x => results[x])));\n        let macro = higherOrderSequencer.createMacro(params);\n        setSelectedParameters(undefined);\n        setParameters([macro.macroParameter])\n    }, [selectedParameters, results, setSelectedParameters])\n\n    const onChange = useCallback((e) => {\n        setValue(e.target.value);\n    }, [setValue]);\n    \n    return (\n        <div\n          onMouseDown={() => mouseDown.current=true}\n          onMouseUp={() => mouseDown.current=false}\n          onMouseLeave={() => mouseDown.current=false}\n          className=\"parameter-searcher\">\n          <input placeholder=\"Search for parameters\" className=\"parameter-searcher\" value={value} type=\"text\" onChange={onChange}/>\n          <div onClick={() => setValue('')} className=\"delete-btn\">\n            x\n          </div>\n          <div className=\"parameter-results\">\n            {results\n             .filter(\n                 p =>\n                     !higherOrderSequencer._parameters.includes(p)) // dont show stuff weve already mapped\n             .filter(p => !p.hasMacro) // dont show macros \n             .map(\n                (r, i) => <ParameterResult\n                            mouseDown={mouseDown}\n                            selectedParameters={selectedParameters}\n                            setSelectedParameters={setSelectedParameters}\n                            i={i}\n                            setParameters={setParameters}\n                            higherOrderSequencer={higherOrderSequencer}\n                            key={r.id + '-' + i} parameter={r}/>)}\n          </div>\n          {selectedParameters && <div\n                                   onClick={createMacro}\n                                   className=\"create-macro-btn\">Create Macro ({selectedParameters.length})</div>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParameterSearcher);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectParameterSlider from \"components/effects/EffectParameterSlider.js\";\nimport ParameterSearcher from './ParameterSearcher.js';\nimport {\n    setAccumulatorParameterSelected,\n    setIsMacroMapping} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport ParametersMapper from \"components/effects/ParametersMapper.js\";\n\nconst HigherOrderParameters = ({higherOrderSequencer}) => { \n    let [parameters, setParameters] = useState([]);\n    return (\n        <div className=\"higher-order-parameters\">\n          <div>\n            <ParametersMapper parametersList={parameters} effect={higherOrderSequencer}/>\n            <EffectParameterSlider\n              name=\"Depth\"\n              sequencerEngine={higherOrderSequencer.sequencerEngine}\n              min={0}\n              max={1}\n              step={0.001}\n              parameter={higherOrderSequencer.automationDepthParameter}/>\n          </div>\n          <ParameterSearcher parametersList={parameters} setParameters={setParameters} higherOrderSequencer={higherOrderSequencer}/>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setIsMacroMapping: (isMapping) => dispatch(\n            setIsMacroMapping(isMapping)),\n      setAccumulatorParameterSelected: (param) => dispatch(\n          setAccumulatorParameterSelected(param))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderParameters);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport HigherOrderHeader from \"components/system5/HigherOrderHeader.js\";\nimport ModuleScripter from './ModuleScripter.js';\nimport {connect} from 'react-redux';\nimport AlgorithmChooser from './AlgorithmChooser.js';\nimport HigherOrderParameters from './HigherOrderParameters.js';\n\nconst Sidebar = ({higherOrderSequencer, selected}) => { \n    return (\n        <div className=\"higher-sidebar\">\n          <HigherOrderHeader/>\n          <div className=\"inner-higher-sidebar\">\n            <div>\n              <AlgorithmChooser higherOrderSequencer={higherOrderSequencer} orientation={0}/>\n              <AlgorithmChooser higherOrderSequencer={higherOrderSequencer} orientation={1}/>\n            </div>\n            <HigherOrderParameters higherOrderSequencer={higherOrderSequencer}/>\n          </div>\n        {/*\n          <ModuleScripter\n            higherOrderSequencer={higherOrderSequencer}\n            />*/}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nlet size = 32;\nconst Playhead = ({playing, trackStep}) => { \n    let style = {\n        left: (trackStep % 32) * 16\n    };\n    if (!playing) {\n        return '';\n    }\n    return (\n        <div style={style} className=\"higher-playhead\">\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      trackStep: props.sequencerEngine.trackStep,\n      playing: props.sequencerEngine.playing\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Playhead);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useMouse} from './useMouse.js';\nimport {connect} from 'react-redux';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\n\nlet SIZE = 32;\nconst HigherOrderStepComponent = ({\n    setDragging,\n    dragging,\n    isDragging,\n    setSelected,\n    orientation,\n    stepData,\n    size,\n    higherOrderSequencer,\n    isSelected,\n    setSelection,\n    x,\n    y,\n    ... props\n}) => { \n    let ref = useRef(undefined);\n    let acted = useRef(false);\n    let [color, setColor] = useState(stepData.module && stepData.module.color);\n    let className=\"higher-order-step\";\n    if (isDragging) {\n        className += \" dragging\";\n    }\n    let {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref});\n    let style = {};\n    useEffect(() => {\n        setColor(props.color);\n    }, [props.color, setColor]);\n    let _size = SIZE*size;\n    className += \" on\";\n    className += \" orientation-\" + orientation;\n\n    const {onMouseDown, onMouseUp} = useMouse({\n        setSelection,\n        acted,\n        setSelected,\n        higherOrderSequencer,\n        dragging,\n        setDragging});\n\n    let points=[x*SIZE,y*SIZE];\n    if (orientation === 0) {\n        points = [... points, x*SIZE, (y+size)*SIZE, (x+size)*SIZE, (y+size)*SIZE];\n    } else {\n        points = [... points, (x+size)*SIZE, (y)*SIZE, (x+size)*SIZE, (y+size)*SIZE];\n    }\n\n    const chooseModule = useCallback((module) => {\n        if (!stepData) {\n            return;\n        }\n        stepData.module = module;\n        if (module) {\n            setColor(module.color);\n        }\n    }, [x,y, setColor, stepData]);\n\n    if (dropdownPos) {\n        className += \" context\";\n    }\n    if (isSelected) {\n        className += \" selected\";\n    }\n    let {subSequences} = higherOrderSequencer.sequencerEngine;\n    return (\n        <polygon\n          points={points}\n          ref={ref}\n          onContextMenu={(e) => {\n              if (stepData) {\n                  onContextMenu(e);\n                  setDragging(undefined);\n              }\n          }}\n          onMouseDown={(e) => {\n              e.stopPropagation();\n              onMouseDown(x,y,e);\n          }}\n          onMouseUp={(e) => {\n              e.stopPropagation();\n              if (!dropdownPos) {\n                  onMouseUp(x,y);\n              }\n          }}\n          style={style} className={className}>\n        {/*\n          <ContextMenu dropdownPos={orientation === 0 ?\n                                    dropdownPos && {x: (-_size) + 'vw', y: (-_size) + 'vw'} :\n                                    dropdownPos} setDropdownPos={setDropdownPos}>\n            <MenuItem\n              onMouseUp={(e) => e.stopPropagation()}\n              onMouseDown={(e) => {\n                  e.stopPropagation();\n                  chooseModule(null);\n                  setDropdownPos(undefined);\n              }}>\n              <div className=\"module-name\">All</div>\n              <div  className=\"color-btn\"></div>\n            </MenuItem>\n            {subSequences.map(\n                module =>\n                    <MenuItem\n                      onMouseUp={(e) => e.stopPropagation()}\n                      onMouseDown={(e) => {\n                          e.stopPropagation();\n                          chooseModule(module);\n                          setDropdownPos(undefined);\n                      }}>\n                      <div className=\"module-name\">{module.name} </div>\n                      <div style={{backgroundColor: module.color}} className=\"color-btn\"></div>\n                    </MenuItem>)}\n          </ContextMenu>\n         */}\n        </polygon>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderStepComponent);\n","import React, {useCallback} from 'react';\nexport const useMouse = ({setSelection, acted, setSelected, higherOrderSequencer, dragging, setDragging}) => {\n    const onMouseUp = useCallback((x, y) => {\n        if (acted.current && dragging && dragging.x===x && dragging.y==y) {\n            higherOrderSequencer.toggle(x,y);\n        }\n        setDragging(undefined);\n    }, [setDragging, dragging]);\n\n    const onMouseDown = useCallback((x, y, e) => {\n        if (e.metaKey) {\n            setSelection({x1: x, y1: y, x2: x, y2: y});\n            return;\n        }\n        // higherOrderSequencer.toggle(x,y);\n        setDragging({x,y});\n        setSelected([higherOrderSequencer.matrix[x][y]]);\n        acted.current = true;\n    }, [setDragging, setSelection]);\n\n    return {onMouseDown, onMouseUp};\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport HigherOrderStepComponent from './HigherOrderStepComponent.js';\n\nconst HigherColumn = ({\n    x,\n    higherOrderSequencer,\n    dragging,\n    setDragging,\n    selected,\n    setSelected,\n    selection,\n    setSelection\n}) => { \n    const justPressed = useRef(false);\n    const onMouseUp = useCallback((y, e) => {\n        if (selection) {\n            setSelected(higherOrderSequencer.getSelection(selection));\n            return setSelection(undefined);\n        }\n\n        if (dragging && dragging.x===x && dragging.y==y) {\n            if (!justPressed.current && !e.metaKey) {\n                higherOrderSequencer.toggle(x,y);\n            }\n        }\n        setDragging(undefined);\n        justPressed.current = false;\n    }, [x, setSelected, setDragging, dragging, selection, setSelection]);\n\n    const onMouseOver  = useCallback((y) => {\n        if (selection) {\n            setSelection({... selection, x2: x, y2: y});\n            return;\n        }\n\n        if (!dragging) return;\n\n        let xDist = x-dragging.x;\n        let yDist = y-dragging.y;\n        let dist = Math.max(x - dragging.x, y - dragging.y);\n        if (dist >= 0) {\n            higherOrderSequencer.setStepSize(\n                dragging.x,\n                dragging.y,\n                dist+1);\n        } \n    }, [dragging, setDragging, selection, setSelection]);\n\n    const onMouseDown = useCallback((y, e) => {\n        if (e.metaKey) {\n            setSelection({x1: x, y1: y, x2: x, y2: y});\n            return;\n        }\n\n        if (!higherOrderSequencer.matrix[x][y]) {\n            justPressed.current=true;\n            higherOrderSequencer.toggle(x,y);\n        }\n        setDragging({x,y});\n        setSelected([higherOrderSequencer.matrix[x][y]]);\n    }, [setSelection, selection, setDragging]);\n\n    const getStepClass = useCallback((stepData, y) => {\n        let className = \"higher-step\";\n        if (y%2 === 0) {\n            className += \" even\";\n        }\n        if (selected && selected.includes(stepData)) {\n            className += \" selected\";\n        }\n        if (selection) {\n            let {x1, y1, x2, y2} = selection;\n            if (x1 <= x && x <= x2 &&\n                y1 <= y && y <= y2) {\n                className += \" selection\";\n            }\n        }\n        return className;\n    }, [selected, selection]);\n\n    let className = \"higher-col\";\n    if (x%2===0) {\n        className += \" even\";\n    } \n    if (dragging) {\n        className += \" dragging\";\n    }\n   return (\n        <div className={x%2==0 ? \"higher-col even\" :\"higher-col\"}>\n          {higherOrderSequencer.matrix[x].map(\n              (obj, y) =>\n                  <div\n                    onMouseLeave={() => justPressed.current=false}\n                    onMouseOver={() => onMouseOver(y)}\n                    onMouseDown={(e) => onMouseDown(y,e)}\n                    onMouseUp={(e) => onMouseUp(y,e)}\n                    className={getStepClass(obj, y)}>\n                 </div>)}\n        </div>\n    );\n};\n\nexport default HigherColumn;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport AutomationPaths from './AutomationPaths.js';\nimport HigherOrderHeader from \"components/system5/HigherOrderHeader.js\";\nimport Sidebar from './Sidebar.js';\nimport Playhead from './Playhead.js';\nimport HigherOrderStepComponent from './HigherOrderStepComponent.js';\nimport {\n    setShowHigherOrderSequencer,\n    setHigherOrderStepsSelected} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport HigherColumn from \"components/system5/HigherColumn.js\";\nimport {useKeys} from './useKeys.js';\nimport '../../HigherOrder.scss';\n\nconst HigherOrderComponent = ({setShowHigherOrderSequencer, sequencerEngine, selected, setSelected, show}) => { \n    let {higherOrderSequencer} = sequencerEngine;\n    let {matrix} = higherOrderSequencer;\n    let [dragging, setDragging] = useState(undefined);\n    let [selection, setSelection] = useState(undefined);\n    let [moving, setMoving] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n        };\n    }, [setDragging]);\n\n    useEffect(() => {\n        return () => setSelected(undefined);\n    }, []);\n\n    useKeys({higherOrderSequencer, setSelected, selected});\n\n    const onMouseUp = useCallback(() => {\n        setDragging(undefined);\n        setMoving(false);\n    }, [setDragging]);\n\n    const onMouseMove = useCallback(() => {\n        if (dragging) {\n            setMoving(true);\n        }\n    }, [dragging, setMoving]);\n\n    if (!show) {\n        return (<HigherOrderHeader/>);\n    }\n    let svgClass  = selection ? \"shape-container selection\" : \"shape-container\";\n    if (moving) {\n        svgClass += \" moving\";\n    }\n    return (\n        <div\n          onMouseMove={onMouseMove}\n          className=\"higher-order-component\">\n          <div className=\"higher-inner\">\n            <Playhead sequencerEngine={sequencerEngine}/>\n            {matrix.map(\n                (col, x) =>\n                    <HigherColumn\n                      setSelection={setSelection}\n                      selection={selection}\n                      setSelected={setSelected}\n                      selected={selected}\n                      setDragging={setDragging}\n                      dragging={dragging} x={x} higherOrderSequencer={higherOrderSequencer}/>\n            )}\n            <svg className={svgClass}>\n              {higherOrderSequencer.steps.map(\n                  stepData => \n                      <HigherOrderStepComponent\n                        setSelected={setSelected}\n                        setSelection={setSelection}\n                        isSelected={selected && selected.includes(stepData)}\n                        dragging={dragging}\n                        x={stepData.x} y={stepData.y}\n                        orientation={stepData.orientation}\n                        isDragging={dragging && dragging.x === stepData.x && dragging.y === stepData.y}\n                        size={stepData.size}\n                        setDragging={setDragging}\n                        color={stepData.module && stepData.module.color}\n                        stepData={stepData}\n                        higherOrderSequencer={higherOrderSequencer}/>)}\n              {higherOrderSequencer.automationPaths &&\n               <AutomationPaths automationPaths={higherOrderSequencer.automationPaths}/>}\n            </svg>\n          </div>\n          <Sidebar higherOrderSequencer={higherOrderSequencer} selected={selected}/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      matrix: state.higherOrder.matrix,\n      selected: state.higherOrder.selectedSteps,\n      show: state.higherOrder.show\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowHigherOrderSequencer: (x) => dispatch(setShowHigherOrderSequencer(x)),\n      setSelected: (x) => dispatch(setHigherOrderStepsSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HigherOrderComponent);\n","import React, {useEffect, useCallback} from 'react';\nexport const useKeys = ({selected, setSelected, higherOrderSequencer}) => {\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        };\n    }, [, selected, setSelected]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.target.tagName === 'INPUT' ||\n            e.target.tagName === 'TEXTAREA') {\n            return;\n        }\n\n        if (e.key === 'Backspace') {\n            e.preventDefault();\n            if (selected && selected.length > 0) {\n                higherOrderSequencer.deleteSteps(selected);\n                setSelected(undefined);\n            }\n        } else {\n            if (!selected) {\n                return;\n            }\n            let x=0;\n            let y=0;\n            if (e.key === 'Enter') {\n                e.preventDefault();\n                selected.forEach(\n                    ({x,y}) => \n                        higherOrderSequencer.toggle(x,y));\n                return;\n            }\n            if (e.key === 'ArrowLeft') {\n                e.preventDefault();\n                x--;\n            } else if (e.key === 'ArrowUp') {\n                e.preventDefault();\n                y--;\n            } else if (e.key === 'ArrowRight') {\n                e.preventDefault();\n                x++;\n            } else if (e.key === 'ArrowDown') {\n                e.preventDefault();\n                y++;\n            }\n            selected.forEach(\n                pt => higherOrderSequencer.moveStepTo(\n                    pt.x, pt.y, pt.x+x, pt.y+y));\n        }\n    }, [selected, setSelected]);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ModuleSpatialView from \"components/spatial/ModuleSpatialView.js\";\nimport ModuleLoader from 'components/system5/ModuleLoader.js';\nimport HigherOrderComponent from 'components/system5/HigherOrderComponent.js';\nimport Grids from \"components/explore/details/Grids.js\";\nimport {connect} from 'react-redux';\n\nconst MIN_SCALE = 0.30;\nconst GridsContainer = ({scale, setScale, sequencerEngine}) => { \n    const ref = useRef(ref);\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onMouseWheel);\n        return () => ref.current.removeEventListener(\"mousewheel\", onMouseWheel);\n    }, [setScale, scale]);\n\n    const onMouseWheel = useCallback((e) => {\n       let {deltaX, deltaY, wheelDeltaX, wheelDeltaY} = e;\n        if (!e.ctrlKey) { return; }\n        if (Math.abs(wheelDeltaY) > 80 ||\n            (Math.abs(wheelDeltaY) > 40 && Math.abs(deltaX) < 20 && Math.abs(deltaY) < 20)) {\n            e.preventDefault();\n            let _scale=1;\n            if (wheelDeltaY > 0) {\n                _scale =  scale * wheelDeltaY / 115.0;\n            } else {\n                _scale = Math.abs(scale / (wheelDeltaY / 115.0));\n            }\n            window._scale = Math.max(MIN_SCALE, Math.min(1, _scale));\n            setScale(Math.max(MIN_SCALE, Math.min(1, _scale)));\n        } \n    }, [setScale, scale]);\n\n    let style = {\n\n    };\n    if (scale !== 1) {\n        style.transform = \"scale(\" + scale + \")\";\n    }\n    \n    return (\n        <div ref={ref} className=\"grids-box\">\n          <div style={style} className=\"grids-container\">\n            {sequencerEngine.subSequences.map(\n                subSequence => \n                    <ModuleSpatialView\n                      key={subSequence.id}\n                      scale={scale}\n                      showEffects={true}\n                      subSequence={subSequence}\n                      sequencerEngine={sequencerEngine}/>)}\n          </div>\n          <HigherOrderComponent sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let {modulesCollapsed} = state.pads;\n    return {\n        modulesCollapsed,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GridsContainer);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst MixBottomPaneOptions = (props) => { \n    return (\n        <div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixBottomPaneOptions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectOption from './EffectOption.js';\nimport Dropdown from 'react-dropdown';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedMixEffect,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst AudioEffects = ({\n    currentSubSequence,\n    selectedTrack,\n    selectedGroup,\n    sequencerEngine,\n    selectedEffect,\n    setSelectedEffect}) => { \n        let [value, setValue] = useState(undefined);\n        let trackOrGroup = undefined;\n        if (selectedTrack !== undefined) {\n            trackOrGroup = sequencerEngine.tracks[selectedTrack];\n        } else if (selectedGroup !== undefined) {\n            trackOrGroup = sequencerEngine.groups.groups[selectedGroup];\n        }\n\n        let _track = sequencerEngine.tracks[selectedTrack];\n        let _group = sequencerEngine.groups.groups[selectedGroup];\n\n        let effects = trackOrGroup ? trackOrGroup.effects : [];\n\n        const moveEffectTo = useCallback((from, to) => {\n            trackOrGroup.moveEffectTo(from, to);\n            setValue({from, to});\n        }, [trackOrGroup, setValue]);\n\n        const onDelete = useCallback(() => {\n            setSelectedEffect(currentSubSequence, selectedTrack, selectedGroup, undefined);\n        }, [currentSubSequence, selectedTrack, selectedGroup]);\n\n        let fxComponent = '';\n        if (selectedEffect && effects.some(e => e.id === selectedEffect.id)) {\n            fxComponent = (\n                <EffectComponent\n                  sequencerEngine={sequencerEngine}\n                  track={sequencerEngine.tracks[selectedTrack]}\n                  group={sequencerEngine.groups.groups[selectedGroup]}\n                  compact={true}\n                  onDeleteEffect={() => onDelete()}\n                  effect={selectedEffect}\n                  send={undefined}/>);\n        }\n\n        const handleChooseEffect = useCallback((e) => {\n            let effect = initializeEffect(e.value, sequencerEngine);\n            effect.enable(true);\n            if (effect.wetParameter) {\n                effect.wetParameter.set(1);\n            }\n            trackOrGroup.effectsChain.addEffect(effect);\n            setValue(e.value);\n            return false;\n        }, [setValue, sequencerEngine, trackOrGroup]);\n\n        let name = \"\";\n       if (_track) {\n            name = _track.presetName || _track.getName();\n        } else if (_group) {\n            name = \"Group \" + (_group.groupNumber + 1);\n        }\n\n        let style = {\n            backgroundColor: _track ? colors.getColorForTrack(_track) :\n                _group ?\n                colors.getColorForTrack(_group.tracks[0]) : 'black'\n        };\n        return (\n            <div className=\"audio-effects\">\n              <div\n                style={style}\n                className=\"effects-channel-strip\">\n                <Dropdown\n                  className='send-effects-dropdown'\n                  options={effectOptions}\n                  onChange={handleChooseEffect}\n                  placeholder=\"Audio FX\" />\n                <div className=\"effects-list\">\n                  {effects.map(\n                      (effect, i) =>\n                          <EffectOption\n                            key={effect.id}\n                            track={selectedTrack}\n                            group={selectedGroup}\n                            currentSubSequence={currentSubSequence}\n                            effectType={\"AUDIO_FX\"}\n                            moveEffectTo={moveEffectTo}\n                            effectNumber={i}\n                            effect={effect}/>)}\n                </div>\n             </div>\n              {fxComponent}\n            </div>);\n    }\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = state.mix.selectedGroup === undefined ?\n            state.mix.selectedTrack : undefined;\n    let selectedGroup = state.mix.selectedGroup;\n    let subId = state.sequencer.currentSubSequence[props.sequencerEngine.engineId];\n    return {\n        selectedTrack, \n        selectedGroup,\n        selectedEffect: selectedTrack !== undefined ? state.mix.selectedTrackEffects[subId] &&\n            state.mix.selectedTrackEffects[subId][selectedTrack] :\n            state.mix.selectedGroupEffects[subId] &&\n            state.mix.selectedGroupEffects[subId][selectedGroup],\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedEffect: (sub, trackNumber, groupNumber, effect) => dispatch(\n            setSelectedMixEffect(sub, trackNumber, groupNumber, \"AUDIO_FX\", effect))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AudioEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport MixBottomPaneOptions from './MixBottomPaneOptions.js';\nimport EnvelopeOptions from 'components/track/EnvelopeOptions.js';\nimport ContextualHelpComponent from 'components/sidebar/ContextualHelpComponent.js';\nimport Keyboard from 'components/midi/Keyboard.js';\nimport AudioEffects from './AudioEffects.js';\nimport MidiEffects from './MidiEffects.js';\nimport Dropdown from 'react-dropdown';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport Colors from 'components/Colors.js';\nimport SendEffect from '../../track/SendEffect.js';\nimport {effectOptions, getEffectOption, initializeEffect} from 'components/effects/constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedSendEffect,\n} from 'actions/index.js';\nimport {EFFECTS} from './constants.js';\n\nconst colors = new Colors();\n\nconst MixEffects = ({\n    sequencerEngine,\n    selectedGroup,\n    selectedTrack\n}) => { \n    const [option, setOption] = useState(EFFECTS);\n    let hasTracks = sequencerEngine.tracks.length > 0;\n    if (!hasTracks) {\n        return (\n            <div className=\"mix-effects-pane\"/>\n        );\n    }\n\n    let _track = sequencerEngine.tracks[selectedTrack];\n    let _group = sequencerEngine.groups.groups.find(\n        x => x.groupNumber === selectedGroup);\n\n\n    let color = _track ? colors.getColorForTrack(_track) :\n            _group ?\n        colors.getColorForTrack(_group.tracks[0]) : 'black';\n\n    let style = {\n        backgroundColor: color\n    };\n\n    let name = \"\";\n    if (_track) {\n        name = _track.presetName || _track.getName();\n    } else if (_group) {\n        name = \"Group \" + (_group.groupNumber + 1);\n    }\n\n    let innerStyle = {\n        // background: \"linear-gradient(45deg, \" + color + \", #1513a2c2)\"\n    };\n    \n    return (\n        <div className=\"mix-effects-pane\">\n          <div\n            style={style}\n            className=\"mix-effects-header\">\n            <div className=\"element-name\">\n              {name}\n            </div>\n            <MixBottomPaneOptions setOption={setOption} option={option}/>\n            {_track ? <EnvelopeOptions track={_track}/> : ''}\n          </div>\n          <div style={innerStyle} className=\"mix-effects-inner\">\n            {selectedGroup !== undefined ? \"\" : <MidiEffects sequencerEngine={sequencerEngine}/>}\n            <AudioEffects sequencerEngine={sequencerEngine}/>\n            <ContextualHelpComponent sequencerEngine={sequencerEngine}/>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrack = state.mix.selectedGroup === undefined ?\n            state.mix.selectedTrack : undefined;\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack, \n        ... state.tracks.groupTracks,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixEffects);\n","export const EFFECTS = 1;\nexport const WAVEFORM = 2;\nexport const PIANO_ROLL = 3;\n","import React, { useState, useEffect } from 'react';\nimport {HIDE, MIXES, SUBSEQUENCE} from 'components/mix/constants.js';\nimport {setMixViewMode} from 'actions/index.js';\nimport { connect } from \"react-redux\";\n\nclass MixTab extends React.Component {\n    onClick(type, subSequence) {\n        this.props.setMixViewMode(type);\n\n        if (subSequence !== undefined) {\n            this.props.sequencerEngine.switchToSubSequence(subSequence);\n        }\n    }\n\n    render() {\n        let subSequences = this.props.sequencerEngine.subSequences.map(x => x.id);\n        return (\n            <div className=\"mix-tab\">\n              {subSequences.map(\n                  id => \n                      <MixTabOption\n                        key={id}\n                        onClick={() => this.onClick(SUBSEQUENCE, id)}\n                        isCurrent={this.props.currentSubSequence === id}\n                        selected={this.props.mixViewMode === SUBSEQUENCE && this.props.currentSubSequence === id}\n                        name={this.props.sequencerEngine.getSubSequenceName(id)}/>)}\n            {/*<MixTabOption\n                  onClick={() => this.onClick(MIXES)}\n                  selected={this.props.mixViewMode === MIXES} name=\"ALL\"/>*/}\n            </div>\n        );\n    }\n}\n\nfunction MixTabOption(props) {\n    let className = \"mix-tab-option\";\n    if (props.selected) {\n        className += ' selected';\n    }\n    if (props.isCurrent) {\n        className += ' current';\n    }\n    return (\n        <div onClick={props.onClick} className={className}>{props.name}</div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n        mixViewMode: state.mix.mixViewMode,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setMixViewMode: mixViewMode => dispatch(setMixViewMode(mixViewMode)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixTab);\n","import React, { useState, useCallback, useEffect } from 'react';\nimport MultiFreezeThumbnails from 'components/freeze/MultiFreezeThumbnails.js';\nimport {MULTI_FREEZE} from 'constants/track-types.js';\nimport {MULTI_SYNTH, SAMPLED_INSTRUMENT} from 'constants/instrument-types.js';\nimport {TRIGGER_SAMPLE, RELEASE_SAMPLE} from 'constants/event-types.js';\nimport { connect } from \"react-redux\";\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport Colors from 'components/Colors.js';\n\nconst COLORS = new Colors();\nconst triggerColor = COLORS.getColor(1);\nconst DRUM_TAGS = new Set(['clap', 'tom', 'toms', 'clave', 'perc', 'snare', 'kick', 'hi-hat', 'rim', 'side-stick', 'breaks', 'sub', 'ride', 'piano', 'violin']);\n\nfunction TrackVisualizer(props) {\n    let [lastTrigger, setLastTrigger] = useState(0);\n    let [lastRelease, setLastRelease] = useState(0);\n    let [thumbnailStyle, setThumbnailStyle] = useState({});\n    let [additionalStyle, setAdditionalStyle] = useState({});\n\n    const onClickMute = useCallback(() => {\n        props.track.mute(!props.track.muted);\n    }, [props.track]);\n\n    const onTrigger = useCallback((e) => {\n        if (e.trackNumber === props.track.trackNumber) {\n            setTimeout(() => {\n                setLastTrigger(new Date().getTime() + e.duration + 50);\n                let brightness = 1 - e.sliceStartTime/e.sliceDuration;\n                let style = {... additionalStyle};\n                style['borderBottomColor'] = COLORS.brighten(triggerColor, brightness);\n                setAdditionalStyle(style);\n                setTimeout(onRelease, e.duration * 1000);\n            }, e.time);\n        }\n    }, [props.track, props.currentSubSequenceId, additionalStyle]);\n\n    const onRelease = useCallback((e) => {\n        if (e === undefined ||\n            e.trackNumber === props.track.trackNumber) {\n            setLastRelease(new Date().getTime());\n        }\n    }, [props.track]);\n\n    const addEventListeners = () => {\n        window.addEventListener(TRIGGER_SAMPLE, onTrigger);\n        window.addEventListener(RELEASE_SAMPLE, onRelease);\n    };\n\n    const removeEventListeners = () => {\n        window.removeEventListener(TRIGGER_SAMPLE, onTrigger);\n        window.removeEventListener(RELEASE_SAMPLE, onRelease);\n    };\n\n    useEffect(() => {\n        addEventListeners();\n        return removeEventListeners;\n    }, []);\n\n    let sample =     props.track.sample;\n    let thumbnail = sample === undefined ? undefined : sample.getThumbnail();\n\n    useEffect(() => {\n        let style = {};\n        let color = undefined;\n\n        if ( thumbnail === undefined || thumbnail === '') {\n            let stringToConvert = sample && sample.getId() !== undefined ? \n                sample.getId() :\n                props.track.getName();\n            color = COLORS.getColorForHash(stringToConvert);\n            style.backgroundColor = color;\n        }\n        \n        if (props.muted) {\n            style['opacity'] = 0.2;\n        } else {\n            style['opacity'] = 1;\n        }\n\n        setThumbnailStyle(style);\n    }, [props.track, props.muted]);\n\n    let className = \"track-visualizer\";\n    let triggering = lastTrigger > lastRelease;\n    if (lastTrigger > lastRelease) {\n        className += ' triggering';\n    }\n\n    let track = props.track;\n    let innerText = undefined;\n    if (sample && sample.tags) {\n        innerText = sample.tags.find(tag => DRUM_TAGS.has(tag));\n        if (!innerText) {\n            innerText = sample.tags[0];\n        }\n    }\n    if (track && track.getInstrumentType() == MULTI_SYNTH) {\n        innerText = 'Synth';\n    }\n    if (track && track.getInstrumentType() === SAMPLED_INSTRUMENT) {\n        let samples = track.instrument.getSamples();\n        if (samples[0]) {\n            innerText = samples[0].tags.find(tag => DRUM_TAGS.has(tag));\n        }\n    }\n\n    let innerComponent = '';\n    if (track && track.getTrackType() === MULTI_FREEZE) {\n        innerComponent = (<MultiFreezeThumbnails track={track}/>)\n        className += \" is-multi \";\n    }\n\n    return (\n        <div\n          onClick={() => onClickMute()}\n          style={{... thumbnailStyle, ... additionalStyle}} className={className}>\n          <ConditionedComponent condition={thumbnail !== undefined} >\n            <img src={thumbnail}/>\n          </ConditionedComponent>\n          {!thumbnail && innerText ? <span className=\"inner-text\">{innerText}</span> : ''}\n          {innerComponent}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: props.track.muted\n    };\n};\n\nexport default connect(mapStateToProps, null)(TrackVisualizer);\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport TrackVisualizer from './TrackVisualizer.js';\n\nfunction TracksVisualizer(props) {\n    let tracks = props.sequencerEngine.tracks;\n\n    return (\n        <div className=\"tracks-visualizer\">\n          {tracks.map(track => <TrackVisualizer\n                                 currentSubSequenceId={props.currentSubSequence}\n                                 track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nexport default connect(mapStateToProps, null)(TracksVisualizer);\n\n","function _intersect(set1, set2) {\n    let z = Array.from(set1).filter(x => set2.has(x));\n    return new Set(z);\n}\n\nexport function filterTags(tags) {\n    let tagsToRemove = [];\n    for (let i in tags) {\n        let tag = tags[i];\n        for (let j in tags) {\n            let otherTag = tags[j];\n            if (otherTag === tag) {\n                continue;\n            }\n            let tagSplit = new Set(tag.split(' '));\n            let otherTagSplit = new Set(otherTag.split(' '));\n            let intersect = _intersect(tagSplit, otherTagSplit);\n            if (intersect.size > 1) {\n                tagsToRemove.push(tag);\n                break;\n            }\n        }\n    }\n\n    tags = new Set(tags);\n    for (let i in tagsToRemove) {\n        tags.delete(tagsToRemove[i]);\n    }\n\n    return Array.from(tags);\n}\n\n","import React, { Component } from 'react';\n\nclass TrackToggleButton extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    isToggled() {\n        return this.props.track.isEnabled;\n    }\n\n    onToggleClicked() {\n        this.props.track.toggleEnabled();\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div\n              onClick={() => this.onToggleClicked()}\n              className={this.isToggled() ? 'toggled track-toggle-button' : 'track-toggle-button'}>\n            </div>\n        );\n    }\n}\n\nexport default TrackToggleButton;\n","import React, { Component } from 'react';\n\nimport { connect } from \"react-redux\";\n\nclass TrackMuteButton extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    onMuteClicked() {\n        this.props.track.mute(!this.props.muted);\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div\n              onClick={() => this.onMuteClicked()}\n              className={this.props.muted ? \"muted track-mute-button\" : \"track-mute-button\"}>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: state.tracks.trackMutes[props.track.trackNumber]\n    };\n};\n\n\nexport default connect(mapStateToProps, null)(TrackMuteButton);\n","import React, { Component } from 'react';\nimport TrackToggleButton from 'components/mix/TrackToggleButton.js';\nimport TrackMuteButton from 'components/mix/TrackMuteButton.js';\nimport { connect } from \"react-redux\";\n\nclass GroupMuteButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    isGroupMuted() {\n        return this.props.group.muted;\n    }\n\n    onGroupMuteClicked() {\n        this.props.group.mute(!this.props.group.muted);\n        this.setState(this.state);\n    }\n\n    onTrackMuteClicked() {\n        let track = this.props.group.tracks[0];\n        track.mute(!track.muted);\n        this.setState(this.state);\n    }\n\n    isTrackMuted() {\n        let track = this.props.group.tracks[0];\n        return track.muted;\n    }\n\n    render() {\n        if (this.props.group.tracks.length == 1) {\n            return (\n                <div className=\"group-top-buttons\">\n                  <div className=\"toggle-buttons-container\">\n                    <TrackToggleButton track={this.props.group.tracks[0]}/>\n                  </div>\n                  <div\n                    onClick={() => this.onTrackMuteClicked()}\n                    className={this.props.muted ? \"muted group-mute-button\" : \"group-mute-button\"}>\n                  </div>\n                </div>\n            );\n        }\n        return (\n            <div className=\"group-top-buttons\">\n              <div\n                  onClick={() => this.onGroupMuteClicked()}\n                  className={this.props.muted ? \"muted small-group-mute-button\" : \"small-group-mute-button\"}>\n              </div>\n              <div className=\"toggle-buttons-container\">\n                {this.props.group.tracks.map(\n                track => <TrackToggleButton track={track}/>)}\n              </div>\n             <div className=\"track-mute-buttons-container\">\n                {this.props.group.tracks.map(\n                track => <TrackMuteButton track={track}/>)}\n              </div>\n         \n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let muted = state.tracks.groupMutes[props.group.groupNumber];\n    if (props.group.tracks.length == 1) {\n        muted = state.tracks.trackMutes[props.group.tracks[0].trackNumber];\n    }\n    return {\n        muted: muted\n    };\n};\n\nexport default connect(mapStateToProps, null)(GroupMuteButton);\n","import React, { Component } from 'react';\nimport {truncate} from 'utils/truncate.js';\nimport Colors from 'components/Colors.js';\nlet colors = 0;\nconst COLORS = new Colors();\nconst UPDATE_RATE = 100;\n\nconst TAGS = new Set(['hi-hat', 'kick', 'snare', 'clap', 'crash', 'ride', 'breaks', 'tom']);\n\nclass GroupThumbnailPart extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            height: 0\n        };\n    }\n\n    get thumbnail() {\n        let sample = this.props.track.sample;\n        if (sample === undefined) {\n            return undefined;\n        }\n        return sample.getThumbnail();\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (this.state.height !== nextState.height) {\n            return true;\n        }\n\n        if (this.props.selectedTrack !== nextProps.selectedTrack) {\n            return true;\n        }\n\n        if (this.props.renders !== nextProps.renders) {\n            return true;\n        }\n\n        if (this.props.track !== nextProps.track) {\n            return true;\n        }\n\n        return false;\n    }\n    \n    componentDidMount() {\n        this.timer = setInterval(() => {\n            this.setState({\n                height: Math.min(60 + this.props.track.trackMeter.getLevel(), 100)});\n        }, UPDATE_RATE);\n    }\n\n    componentWillUnmount() {\n        clearInterval(this.timer);\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDragStart(e) {\n        this.props.onDraggingTrack(this.props.track);\n    }\n\n    onDrop(e, tags) {\n        if (this.props.trackDragging !== undefined &&\n           this.props.trackDragging.group !== this.props.group) {\n            this.props.groups.addToGroup(this.props.trackDragging, this.props.group);\n            this.props.onGroupsChanged();\n        }\n    }\n\n    getNameToShow() {\n        if (this.props.track.sample !== undefined) {\n            let tag = this.props.track.sample.tags.filter(x => TAGS.has(x))[0];\n            if (tag) {\n                return tag;\n            }\n        }\n\n        return truncate(this.props.track.getName());\n    }\n\n    render() {\n        let style = {\n            //width: this.props.partWidth,\n            height: this.state.height,\n        }\n\n        let thumbnailStyle = {\n            height: 100,\n            opacity: 1,\n        }\n\n        let thumbnailPartStyle = {};\n        let color = undefined;\n        if ( this.thumbnail === undefined || this.thumbnail === '') {\n            let stringToConvert = this.props.track.sample && this.props.track.sample.getId() !== undefined ? \n                this.props.track.sample.getId() :\n                this.props.track.getName();\n            color = COLORS.getColorForHash(stringToConvert);\n            thumbnailPartStyle.backgroundColor = color;\n        }\n        \n        let unselected =\n            this.props.selectedTrack !== undefined &&\n            this.props.selectedTrack !== this.props.track.trackNumber;\n\n        if (unselected && this.props.isSelectedGroup) {\n            thumbnailPartStyle.opacity = 0.5;\n        }\n\n        let isTrackSelected =\n            this.props.selectedTrack === this.props.track.trackNumber;\n        \n        let coloredThumbnailStyle = style;\n        coloredThumbnailStyle['background-color'] = rainbow(colors+=5);\n\n        let nameStyle = {\n        };\n        if (color) {\n            nameStyle['backgroundColor'] = COLORS.brighten(color, 1.2);\n        }\n\n        let name = this.getNameToShow();\n        if (this.props.numParts === 3) {\n            name = name.slice(0, 2);\n        } else if (this.props.numParts > 3) {\n            name = name.slice(0, 1);\n        }\n\n        return (\n            <div\n              onDragStart={(e) => this.onDragStart(e)}\n              onDragOver={(e) => this.onDragOver(e)}\n              onDrop={(e)=>{this.onDrop(e)}}                   \n              draggable\n              style={thumbnailPartStyle}\n             className={isTrackSelected ? 'thumbnail-part-container selected-track' : unselected ? \"thumbnail-part-container\" : \"thumbnail-part-container selected\"}\n              onClick={() => this.props.onClickTrack(this.props.track)}\n              >\n            <div\n              style={coloredThumbnailStyle}\n              className={unselected ? \"blank-thumbnail thumbnail-part unselected\" : \"blank-thumbnail thumbnail-part\"}>\n              {this.thumbnail !== undefined ? \n                <img \n                      onError={() => this.setState({thumbnail: undefined})}\n                  src={this.thumbnail}\n                  className={unselected ? \"draggable droppable thumbnail-part unselected\" : \"draggable droppable thumbnail-part\"}/>\n                  : ''} \n            </div>\n            {this.thumbnail === undefined ? \n                <div style={nameStyle} className=\"group-part-name\">{name}</div>\n            : ''}\n          </div>);\n    }\n}\n\nfunction rainbow(n) {\n    n = n * 240 / 512;\n    return 'hsl(' + n + ',100%,50%)';\n}\n\nexport default GroupThumbnailPart;\n","import React, { Component } from 'react';\nimport GroupMuteButton from 'components/mix/GroupMuteButton.js';\nimport GroupThumbnailPart from 'components/mix/GroupThumbnailPart.js';\nimport {THUMBNAIL_WIDTH} from 'components/mix/constants.js';\n\nclass GroupThumbnail extends Component {\n\n    constructor(props) {\n        super(props);\n    }\n\n    onClickTrack(track) {\n        if (this.props.selectedTrack === track.trackNumber &&\n           this.props.group.tracks.length > 1) {\n            this.props.onSelectTrack(undefined);\n        } else {\n            this.props.onSelectTrack(track);\n        }\n    }\n\n    render() {\n        let group = this.props.group;\n\n        // we want to show a thumbnail for the group\n        // but split vertically between the # of tracks w/in the group.\n        let size = group.tracks.length;\n\n        // figure out the width of each track slice within\n        let partWidth = THUMBNAIL_WIDTH / size;\n\n        return (\n            <div>\n              <GroupMuteButton partWidth={partWidth} group={group}/>\n              <div\n                className=\"group-thumbnail\">\n                {group.tracks.map(\n                  track =>\n                      <GroupThumbnailPart\n                        key={\"group-thumbnail-track-\" + track.trackNumber}\n                        onDraggingTrack={this.props.onDraggingTrack}\n                        trackDragging={this.props.trackDragging}\n                        onGroupsChanged={this.props.onGroupsChanged}\n                        renders={this.props.renders}\n                        groups={this.props.groups}\n                        onClickTrack={(track) => this.onClickTrack(track)}\n                        numParts={group.tracks.length}\n                        isSelectedGroup={this.props.isSelectedGroup}\n                        selectedTrack={this.props.selectedTrack}\n                        track={track}\n                        partWidth={partWidth}\n                        group={group}/>\n                       )}\n            </div>\n          </div>\n        );\n    }\n}\n\nexport default GroupThumbnail;\n","import React, { Component } from 'react';\nimport {filterTags} from './filterTags.js';\nimport GroupThumbnail from 'components/mix/GroupThumbnail.js';\nimport OutputChannelChooser from './OutputChannelChooser.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport { Badge } from 'reactstrap';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\n\nclass Group extends Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            groups: props.groups\n        };\n        this.state = {volume: this.getVolume(), pattern: props.pattern};\n    }\n\n    get selectedTrack() {\n        return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n    }\n\n    isSelectedGroup() {\n        return this.props.group.tracks.indexOf(this.selectedTrack) > -1 ||\n            this.props.group === this.props.selectedGroup;\n    }\n\n    /**\n     * returns the selected track within a group, if the selected track\n     * is indeed found inside the given group. Otherwise, returns undefined\n     */\n    getSelectedTrackInGroup() {\n        if (this.props.group.tracks.length == 1) {\n            return this.props.group.tracks[0];\n        } else if (this.props.group.tracks.indexOf(this.selectedTrack) > -1) {\n            return this.selectedTrack;\n        } else {\n            return undefined;\n        }\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        if (this.state.pattern != nextProps.pattern) {\n            this.state.pattern = nextProps.pattern;\n            return true;\n        }\n\n        if (this.props.isSelected !== nextProps.isSelected ||\n            this.props.group !== nextProps.group ||\n            this.props.renders !== nextProps.renders ||\n            this.props.trackDragging !== nextProps.trackDragging ||\n            this.props.selectedTrack !== nextProps.selectedTrack ||\n            this.state.selectedGroup !== nextProps.selectedGroup ||\n            nextProps.volume != this.getVolume()) {\n            return true;\n        } \n        return false;\n    }\n\n    getVolume() {\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (this.props.group.tracks.length == 1) {\n            return this.props.group.tracks[0].getVolume() - 15;\n        } else if (selectedTrack === undefined ) {\n            return this.props.group.volume;\n        } else {\n            return selectedTrack.getVolume() - 15;\n        }\n    }\n\n    onSelectTrack(track) {\n        if (track !== undefined) {\n            this.props.cursor.track = track.trackNumber;\n            this.props.sequencerEngine.selectTrack(track.trackNumber);\n        } else {\n            this.props.setSelectedTrack(undefined);\n        }\n        this.props.setSelectedGroup(this.props.group);\n    }\n\n    onChangeVolume(volume) {\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (this.props.group.tracks.length != 1 &&\n            selectedTrack === undefined) {\n            // change the volume of the entire group\n            this.onSelectTrack(undefined);\n            this.props.setSelectedGroup(this.props.group);\n            this.props.group.setVolume(volume);\n        } else {\n            selectedTrack.setVolume(volume);\n            this.onSelectTrack(selectedTrack);\n        }\n        this.setState({volume: volume});\n    }\n\n    getTags() {\n        let tags = [];\n        let selectedTrack = this.getSelectedTrackInGroup();\n        if (selectedTrack === undefined ) {\n            // show the groups tracks because a specific track is\n            // not selected\n            tags = []; // filterTags(this.props.group.tags);\n        } else if (selectedTrack.sample !== undefined ) {\n            // we have a selected track and it's not MIDI\n            tags = filterTags(selectedTrack.sample.tags);\n        } else {\n            // other wise show the selected track's name (usually is gonna be MIDI)\n            tags = [selectedTrack.getName()];\n        }\n\n        if (tags.length > 6) {\n            tags.splice(0, 6);\n        }\n        return tags;\n    }\n\n    render() {\n        return (\n            <div\n              className={this.isSelectedGroup() ? 'group selected with-tracks' : 'group with-tracks'}>\n              <div className=\"volume-slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.volume}\n                  change={(e) => this.onChangeVolume(e.target.value)}\n                  step={0.1}\n                  max={6}\n                  min={-40}\n                  orientation=\"vertical\"\n                  reversed={true}\n                  /> \n              </div>\n                {!this.props.channelMixer.stereoConnected ? \n                  <OutputChannelChooser channel={this.props.group}/>\n                  : ''}\n              <GroupThumbnail\n                onDraggingTrack={this.props.onDraggingTrack}\n                trackDragging={this.props.trackDragging}\n                renders={this.props.renders}\n                groups={this.props.groups}\n                onGroupsChanged={this.props.onGroupsChanged}\n                isSelectedGroup={this.isSelectedGroup()}\n                selectedTrack={this.props.selectedTrack}\n                onSelectTrack={(track) => this.onSelectTrack(track)}\n                group={this.props.group}/>\n              <div className=\"tags-container\">\n                {this.getTags().map((tag) => <Badge size=\"sm\" color=\"dark\">{tag}</Badge>)}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let selectedTrackInGroup = undefined;\n    let selectedTrack = props.sequencerEngine.tracks[state.mix.selectedTrack];\n    if (props.group.tracks.length == 1) {\n        selectedTrackInGroup = props.group.tracks[0].trackNumber;\n    } else if (props.group.tracks.indexOf(selectedTrack) > -1) {\n        selectedTrackInGroup = state.mix.selectedTrack;\n    } \n    let volume = 0;\n    if (props.group.tracks.length == 1) {\n        volume = props.group.tracks[0].getVolume();\n    } else if (selectedTrackInGroup === undefined ) {\n        volume = state.tracks.groupVolumes[props.group.groupNumber];\n    } else {\n        volume = state.tracks.trackVolumes[selectedTrackInGroup];\n    }\n    \n    return {\n        volume: volume,\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack: state.mix.selectedTrack};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Group);\n","import React, { Component } from 'react';\n\nclass NewGroup extends Component {\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDrop(e) {\n        if (this.props.trackDragging !== undefined &&\n           this.props.trackDragging.group !== this.props.group) {\n            this.props.groups.newGroup(this.props.trackDragging);\n            this.props.onGroupsChanged();\n        }\n    }\n\n    render() {\n        return (\n            <div className=\"group\">\n              <div\n                onDragOver={(e) => this.onDragOver(e)}\n                onDrop={(e)=>{this.onDrop(e)}}                   \n                draggable\n                className=\"new-group-box\">\n                NEW GROUP\n              </div>\n            </div>\n        );\n    }\n}\n\nexport default NewGroup;\n","import React, { Component } from 'react';\nimport Group from 'components/mix/Group.js';\nimport NewGroup from 'components/mix/NewGroup.js';\n\nclass GroupsComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            renders: 0,\n        };\n    }\n\n    onDraggingTrack(track) {\n        this.setState({\n            trackDragging: track,\n            renders: this.state.renders+2\n        });\n    }\n\n    // Forces renders everywhere (used for drag and drop)\n    // TODO: use a better way to determine when state has changed in a way\n    // where there should be a re-render\n    onGroupsChanged() {\n        this.setState({renders: this.state.renders+2});\n    }\n\n\n    get groups() {\n        return this.props.sequencerEngine.groups;\n    }\n\n    render() {\n        return (\n            <div className=\"groups-component\">\n               {this.groups.groups.map(\n                       group =>\n                           <Group\n                                 sequencerEngine={this.props.sequencerEngine}\n                                 trackDragging={this.state.trackDragging}\n                                 renders={this.state.renders}\n                                 onGroupsChanged={() => this.onGroupsChanged()}\n                                 cursor={this.props.sequencerEngine.cursor}\n                                 groups={this.groups}\n                                 onDraggingTrack={(track) => this.onDraggingTrack(track)}\n                                 pattern={this.props.sequencerEngine.currentPattern}\n                                 channelMixer={this.props.sequencerEngine.channelMixer}\n                             group={group}/>)}\n                   <NewGroup\n                     onGroupsChanged={() => this.onGroupsChanged()}\n                     groups={this.groups}\n                     trackDragging={this.state.trackDragging}\n                   />\n            </div>\n        );\n    }\n}\n\nexport default GroupsComponent;\n","import React, { Component } from 'react';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {IS_GROUP} from 'components/mix/constants.js';\nimport {IS_TRACK} from 'components/mix/constants.js';\nimport {IS_SEND} from 'components/mix/constants.js';\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\nimport {setMultiParameterSliderValue} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {setParametersToRecord} from 'actions/index.js';\n\nclass MultiParameterSlider extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            // put this value in redux so you don't have to keep checking\n            minSelected: false,\n            maxSelected: false,\n            isMouseDown: false,\n        };\n    }\n\n    onMouseDown() {\n    }\n\n    onMouseUp() {\n        this.props.setParametersToRecord([]);\n    }\n\n    getEffectsTrackIf(type) {\n        let sends = this.props.sequencerEngine.sends.sends;\n        if (type === IS_TRACK) {\n            return this.props.selectedTrack;\n        } else if (\n            type == IS_GROUP &&\n                sends.indexOf(this.props.selectedGroup) == -1) {\n            return this.props.selectedGroup;\n        }  else if (type == IS_SEND &&\n                    sends.indexOf(this.props.selectedGroup) > -1) {\n            return this.props.selectedGroup;\n        }\n        return undefined;\n    }\n\n    getParameterLocks() {\n        if (this.props.sequencerEngine.parameterLocks[this.props.id] === undefined) {\n            return [];\n        }\n        return this.props.sequencerEngine.parameterLocks[this.props.id].parameterLocks;\n    }\n\n    onChange(val) {\n        if (this.state.minSelected) {\n            if (this.state.selectedParameter !== undefined) {\n                this.state.selectedParameter.min = this.state.selectedParameter.normalizeOriginal(val);\n                this.state.selectedParameter.set(this.state.selectedParameter.min);\n                this.props.setMultiParameterSliderValue(this.props.id, val);\n            }\n        } else if (this.state.maxSelected) {\n            if (this.state.selectedParameter !== undefined) {\n                this.state.selectedParameter.max  = this.state.selectedParameter.normalizeOriginal(val);\n                this.state.selectedParameter.set(this.state.selectedParameter.max);\n                this.props.setMultiParameterSliderValue(this.props.id, val);\n            }\n        } else {\n            // actually alter the parameter with the set min/max defining\n            let parameters = this.getParameterLocks().map(parameterLock => parameterLock.parameter);\n            parameters.forEach(param => param.normalizedSet(val));\n            this.props.setMultiParameterSliderValue(this.props.id, val);\n            this.props.setParametersToRecord(parameters);\n        }\n    }\n\n    onAdd() {\n        if (this.props.selectedParameter !== undefined) {\n            // get group number and track number\n            let groupNumber = this.getEffectsTrackIf(IS_GROUP) !== undefined ?\n                this.getEffectsTrackIf(IS_GROUP).groupNumber : undefined;\n            let trackNumber = this.getEffectsTrackIf(IS_TRACK) !== undefined ?\n                this.getEffectsTrackIf(IS_TRACK).trackNumber  : undefined;\n            let sendNumber = this.getEffectsTrackIf(IS_SEND) !== undefined ?\n                this.getEffectsTrackIf(IS_SEND).sendNumber : undefined;\n            let effectNumber = this.props.selectedEffect;\n            this.props.sequencerEngine.parameterLocks[this.props.id].addParameterLock(\n                trackNumber,\n                groupNumber,\n                sendNumber,\n                effectNumber,\n                this.props.selectedParameter);\n            this.setState(this.state);\n        }\n    }\n\n    onDeleteParameterLock(parameterLock) {\n        this.props.sequencerEngine.parameterLocks[this.props.id].deleteParameterLock(\n            parameterLock);\n    }\n\n    onClickParameterLock(parameterLock) {\n        if (this.state.selectedParameter === parameterLock.parameter) {\n            this.setState({selectedParameter: undefined});\n        } else {\n            if (parameterLock.trackNumber !== undefined) {\n                let track =this.props.sequencerEngine.tracks[parameterLock.trackNumber];\n                this.props.setSelectedTrack(track.trackNumber)\n                this.props.setSelectedGroup(undefined);\n            } else if (parameterLock.groupNumber !== undefined) {\n                this.props.setSelectedTrack(undefined);\n                this.props.setSelectedGroup(this.props.sequencerEngine.groups.groups[parameterLock.groupNumber]);\n            } else if (parameterLock.sendNumber !== undefined) {\n                let send = this.props.sequencerEngine.sends.sends[parameterLock.sendNumber];\n                this.props.setSelectedTrack(undefined);\n                this.props.setSelectedGroup(send);\n            }\n            this.setState({selectedParameter: parameterLock.parameter});\n        }\n    }\n\n    onClickMin() {\n        this.setState({minSelected: !this.state.minSelected, maxSelected: false});\n    }\n\n    onClickMax() {\n        this.setState({maxSelected: !this.state.maxSelected, minSelected: false});\n    }\n\n    formatNumber(n) {\n        if (n <= 1) {\n            return n;\n        } else {\n            return Math.floor(n);\n        }\n    }\n\n    render() {\n        return (\n            <div\n              onMouseDown={() => this.onMouseDown()}\n              onMouseLeave={() => this.onMouseUp()}\n              onMouseUp={() => this.onMouseUp()}\n              className=\"multi-parameter-slider-container\">\n              <div className=\"ranged-slider-container\">\n                <div\n                  onClick={() => this.onClickMin()}\n                  className={this.state.minSelected ? \"selected min-label\" : \"min-label\"}>\n                  {this.state.selectedParameter !== undefined ? this.formatNumber(this.state.selectedParameter.min) : 'MIN'}\n              </div>\n              <div className=\"slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.value}\n                  change={(e) => this.onChange(e.target.value)}\n                  step={0.01}\n                  max={1}\n                  min={0}\n                  orientation=\"horizontal\"\n                  reversed={false}/>\n              </div>\n              <div\n                onClick={() => this.onClickMax()}\n                className={this.state.maxSelected ? \"selected max-label\" : \"max-label\"}>\n                {this.state.selectedParameter !== undefined ? this.formatNumber(this.state.selectedParameter.max) : 'MAX'}\n              </div>\n              </div>\n              <div className=\"parameters-container\">\n                <div className=\"parameters-title\">PARAMETERS</div>\n                <div\n                  onClick={() => this.onAdd()}\n                  className={this.props.flashing !== undefined ? \"flashit add-parameter-button\" : \"add-parameter-button\"}>\n                  +\n                </div>\n              <div className=\"parameters-list\">\n                {this.getParameterLocks().map(parameterLock =>\n                  <ParameterElement\n                    onDelete={() => this.onDeleteParameterLock(parameterLock)}\n                    onClick={() => this.onClickParameterLock(parameterLock)}\n                    isSelected={this.state.selectedParameter === parameterLock.parameter}\n                    parameter={parameterLock.parameter}/>)}\n              </div>\n            </div>\n          </div>);\n            \n    }\n}\n\nclass ParameterElement extends Component {\n    render() {\n        return (\n            <div className={this.props.isSelected ? \"selected parameter-lock\" : \"parameter-lock\"} onClick={this.props.onClick}>\n              {this.props.parameter.effectName !== undefined ?\n                  <div>\n                    {this.props.parameter.effectName} - {this.props.parameter.name}\n                        <div className=\"delete-button\" onClick={this.props.onDelete}>x</div>\n                  </div>\n                      :\n                  <div>\n                     {this.props.parameter.name}\n                         <div className=\"delete-button\" onClick={this.props.onDelete}>x</div>\n                  </div>}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n        setMultiParameterSliderValue: (id, value) => dispatch(setMultiParameterSliderValue(id, value))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedParameter: state.mix.selectedParameter,\n        flashing: state.mix.selectedParameterFlashing,\n        selectedEffect: state.effects.selectedEffect,\n        selectedTrack: state.mix.selectedTrack,\n        selectedGroup: state.mix.selectedGroup,\n        value: state.mix.multiParameterSliderValues[props.id] || 0,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MultiParameterSlider);\n\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\n\nclass MixesComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div className=\"sub-sequence-chooser\">\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n    };\n};\n\nexport default connect(mapStateToProps, null)(MixesComponent);\n","import React, { Component } from 'react';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport MultiParameterSlider from 'components/mix/MultiParameterSlider.js';\nimport MixesComponent from 'components/mix/MixesComponent.js';\nimport SingleLFOComponent from 'components/lfo/SingleLFOComponent.js';\nimport {setShowLFOs} from 'actions/index.js';\nimport { connect } from \"react-redux\";\nimport {LFOS, MIXES, PARAMETERS} from './constants.js';\nimport {setMixViewMode} from 'actions/index.js';\n\nclass MixParametersComponent extends Component {\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            option: LFOS,\n        };\n\n        this.onClickOption = this.onClickOption.bind(this);\n    }\n\n    onClickOption(option) {\n        this.props.setMixViewMode(option);\n    }\n\n    onClickThumbnail() {\n        this.props.setShowLFOs(!this.props.showLFOs);\n    }\n\n    onClickLock() {\n        this.props.lfosTrack.togglePatternLocked();\n    }\n\n    render() {\n        let className = this.props.isMixView ? 'track flex lfos-track mix-lfo-view' : 'track flex lfos-track';\n        return (\n            <div></div>\n        );\n        return (\n            <div\n              key={'lfo-tracks'}\n              onClick={() => []} className={className}>\n              <div className=''>\n                <MixParameterOption\n                  option={LFOS}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n                <MixParameterOption\n                  option={PARAMETERS}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n                <MixParameterOption\n                  option={MIXES}\n                  selectedOption={this.props.mixViewMode}\n                  onClickOption={this.onClickOption}/>\n              </div>\n              <ConditionedComponent condition={this.props.mixViewMode === PARAMETERS}>\n                <MultiParameterSlider\n                  id={0}\n                  sequencerEngine={this.props.sequencerEngine}/>\n                <MultiParameterSlider\n                  id={1}\n                 sequencerEngine={this.props.sequencerEngine}\n                  />\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.mixViewMode === MIXES}>\n                <MixesComponent sequencerEngine={this.props.sequencerEngine}/>\n              </ConditionedComponent>\n              <ConditionedComponent condition={this.props.mixViewMode === LFOS}>\n                <div className=\"effects-view\">\n                  {this.props.lfosTrack.lfos.map(\n                      lfo => \n                  <SingleLFOComponent sequencerEngine={this.props.sequencerEngine} lfo={lfo}/>)}\n                </div>\n                   <div className=\"lock-button-container\">\n                   <img\n                   onClick={() => this.onClickLock()}\n                   className=\"lock-button\"\n                   src={this.props.patternLocked ? \"/closed-padlock.png\" : \"/opened-padlock.png\"}/>\n                   </div>\n \n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nclass MixParameterOption extends Component {\n    render() {\n        let className = 'mix-parameters-option';\n        if (this.props.option === this.props.selectedOption) {\n            className += ' selected';\n        }\n        return (\n            <div onClick={() => this.props.onClickOption(this.props.option)}\n              className={className}>\n              {this.props.option}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setShowLFOs: s => dispatch(setShowLFOs(s)),\n        setMixViewMode: s => dispatch(setMixViewMode(s)),\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mixViewMode: state.mix.mixViewMode,\n        showLFOs: state.sequencer.showLFOs,\n        patternLocked: state.tracks.lfoPatternLocks[props.sequencerEngine.currentPattern]\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MixParametersComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setEffectsPaneOption} from 'actions/index.js';\nimport {HIDE} from 'components/mix/constants.js';\nimport {TRACK} from 'components/mix/constants.js';\nimport {EFFECTS} from 'components/mix/constants.js';\n\n/**\n * side bar that lets you hide the pane, navigate to track parameters,\n * and also effect parameterse\n */\nclass EffectsPaneSidebar extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onClickOption(option) {\n        this.props.setEffectsPaneOption(option);\n    }\n\n    render() {\n        if (this.props.option == HIDE) {\n            return (\n                <div className=\"effects-pane-sidebar\">\n                  <div\n                    onClick={() => this.onClickOption(EFFECTS)}\n                    className=\"sidebar-option\">\n                    SHOW\n                  </div>\n                </div>\n                   );\n        }\n\n        return (\n            <div className=\"effects-pane-sidebar\">\n              <div\n                onClick={() => this.onClickOption(HIDE)}\n                className=\"sidebar-option\">\n                HIDE\n              </div>\n              <div\n                onClick={() => this.onClickOption(TRACK)}\n                className={this.props.option == TRACK ?\n                  \"selected sidebar-option\" : \"sidebar-option\"}>\n                TRACK\n              </div>\n              <div\n                onClick={() => this.onClickOption(EFFECTS)}\n                className={this.props.option == EFFECTS ?\n                  \"selected sidebar-option\" : \"sidebar-option\"}>\n                EFFECTS\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        option: state.mix.effectsPaneOption,\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setEffectsPaneOption: option => dispatch(setEffectsPaneOption(option)),\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectsPaneSidebar);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {setSelectedParameter} from 'actions/index.js';\nimport EffectParameterSlider from 'components/effects/EffectParameterSlider.js';\nimport {setSelectedParameterFlashing} from 'actions/index.js';\n\nclass MixTrackParametersView extends Component {\n    getParameters() {\n        if (this.props.track === undefined) {\n            return [];\n        }\n\n        let trackData = this.props.track.trackData;\n        return [[\n            trackData.durationParameter,\n            trackData.transposeParameter,\n            trackData.chopParameter],\n            [trackData.velocityParameter,\n            trackData.attackParameter,\n            trackData.releaseParameter],\n            [trackData.pitchAttackParameter,\n             trackData.pitchDecayParameter,\n            trackData.pitchSustainParameter,\n            trackData.pitchReleaseParameter]\n        ];\n    }\n\n    render() {\n        return (\n            <div className=\"track-parameters\">\n              {this.getParameters()\n                  .map(parameters =>\n                       <ParametersBox\n                         sequencerEngine={this.props.sequencerEngine}\n                         parameters={parameters}/>)}\n            </div>\n        );\n    }\n}\n\nclass ParametersBox extends Component {\n    render() {\n        return (\n            <div className=\"parameters-box\">\n              {this.props.parameters\n                  .map(parameters =>\n                       <Parameter\n                         sequencerEngine={this.props.sequencerEngine}\n                         parameter={parameters}/>)}\n            </div>\n        );\n    }\n}    \n\nclass ConnectedParameter extends Component {\n    onChange(value) {\n        this.props.setSelectedParameter(this.props.parameter);\n        this.props.setSelectedParameterFlashing(this.props.parameter);\n        setTimeout(() => {\n            this.props.setSelectedParameterFlashing(undefined);\n        }, 3000);\n    }\n\n    render() {\n        let step = (this.props.parameter.originalMax - this.props.parameter.originalMin) <= 20 ? 0.01  : 1;\n        let isSelected = this.props.isSelected;\n        return (\n            <div className={isSelected ? \"selected parameter\" :\"parameter\"}>\n                <EffectParameterSlider\n                  name={this.props.parameter.name}\n                  parameter={this.props.parameter}\n                  isParameter={true}\n                  lfoEnabled={true}\n                  sequencerEngine={this.props.sequencerEngine}\n                  value={this.props.value}\n                  onParameterChanged={(e) => this.onChange()}\n                  step={step}\n                  max={this.props.parameter.originalMax}\n                  min={this.props.parameter.originalMin}\n                  orientation=\"horizontal\"\n                  reversed={false}\n                /> \n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.parameter.id;\n    return {\n        value: state.effects.effectParameters[id],\n        isSelected: state.mix.selectedParameter === props.parameter\n    };\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedParameter: parameter => dispatch(setSelectedParameter(parameter)),\n        setSelectedParameterFlashing: parameter => dispatch(setSelectedParameterFlashing(parameter)),\n    }\n};\n\nconst Parameter = connect(mapStateToProps, mapDispatchToProps)(ConnectedParameter);\n\nexport default connect(null, null)(MixTrackParametersView);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport EffectComponents from 'components/effects/EffectsComponent.js';\nimport EffectsPaneSidebar from 'components/mix/EffectsPaneSidebar.js';\nimport MixTrackParametersView from 'components/mix/MixTrackParametersView.js';\nimport {IS_GROUP} from 'components/mix/constants.js';\nimport {IS_TRACK} from 'components/mix/constants.js';\nimport {IS_SEND} from 'components/mix/constants.js';\nimport {TRACK} from 'components/mix/constants.js';\nimport {EFFECTS} from 'components/mix/constants.js';\n\nclass MixEffectsPane extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    getEffectsTrack() {\n        let track = this.props.selectedGroup !== undefined ? this.props.selectedGroup :\n            this.props.sequencerEngine.tracks[this.props.selectedTrack];\n        return track;\n    }\n\n    getEffectsTrackIf(type) {\n        let sends = this.props.sequencerEngine.sends.sends;\n        if (type === IS_TRACK) {\n            if (typeof(this.props.selectedTrack) === 'number') {\n                return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n            }\n            return this.props.selectedTrack;\n        } else if (\n            type == IS_GROUP &&\n                sends.indexOf(this.props.selectedGroup) == -1) {\n            return this.props.selectedGroup;\n       }  else if (type == IS_SEND &&\n                    sends.indexOf(this.props.selectedGroup) > -1) {\n            return this.props.selectedGroup;\n        }\n        return undefined;\n    }\n\n    onEffectsChange() {\n        let track = this.getEffectsTrack();\n        if (track !== undefined) {\n            track.updateEffects();\n        }\n    }\n\n    render() {\n        if (this.props.effectsPaneOption === TRACK) {\n            return (\n            <div className=\"effects-pane\">\n              <EffectsPaneSidebar/>\n              <MixTrackParametersView\n                sequencerEngine={this.props.sequencerEngine}\n                track={this.props.sequencerEngine.tracks[this.props.selectedTrack]}/>\n            </div>\n            );\n        } else if (this.props.hide) {\n            return (\n                <div className=\"effects-pane hide\">\n                  <EffectsPaneSidebar/>\n                </div>\n            );\n        }\n\n        return (\n            <div className=\"effects-pane\">\n              <EffectsPaneSidebar/>\n              {this.getEffectsTrack(IS_TRACK) !== undefined || this.getEffectsTrack(IS_SEND) !== undefined ||\n                  this.getEffectsTrack(IS_GROUP) ? \n                  <EffectComponents.EffectsView\n                    store={this.props.sequencerEngine.store}\n                    sequencerEngine={this.props.sequencerEngine}\n                    onParameterChanged={(parameter) => this.props.onParameterChanged(parameter)}\n                    onEffectsChange={() => this.onEffectsChange()}\n                    panning={0}\n                    onChangePanning={(i) => console.log('panning changed = ' + i)}\n                    sends={this.props.sequencerEngine.sends}\n                    tracks={this.props.sequencerEngine.tracks}\n                    track={this.getEffectsTrackIf(IS_TRACK)}\n                    send={this.getEffectsTrackIf(IS_SEND)}\n                    group={this.getEffectsTrackIf(IS_GROUP)}/> : ''}\n              </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        selectedTrack: state.mix.selectedTrack,\n        effectsPaneOption: state.mix.effectsPaneOption,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n    };\n};\n\nexport default connect(mapStateToProps, null)(MixEffectsPane);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setSendMuted} from 'actions/index.js';\n\nclass SendMuteButton extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {};\n    }\n\n    onSendMuteClicked() {\n        this.props.send.mute(!this.props.send.muted);\n        this.props.setSendMuted(this.props.send.sendNumber, this.props.send.muted);\n        this.setState(this.state);\n    }\n\n    render() {\n        return (\n            <div className=\"group-top-buttons\">\n              <div\n                onClick={() => this.onSendMuteClicked()}\n                className={this.props.muted ? \"muted group-mute-button\" : \"group-mute-button\"}>\n              </div>\n            </div>\n        );\n   }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        muted: state.tracks.sendMutes[props.send.sendNumber]\n    };\n};\n\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSendMuted: (sendNumber, muted) => dispatch(setSendMuted(sendNumber, muted))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendMuteButton);\n","import React, { Component } from 'react';\nimport {THUMBNAIL_WIDTH} from 'components/mix/constants.js';\nimport SendMuteButton from 'components/mix/SendMuteButton.js';\n\nclass SendThumbnail extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <div>\n              <SendMuteButton partWidth={THUMBNAIL_WIDTH} send={this.props.send}/>\n              <div className=\"group-thumbnail\">\n              </div>\n            </div>);\n    }\n}\n\nexport default SendThumbnail;\n","import React, { Component } from 'react';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport SendThumbnail from 'components/mix/SendThumbnail.js';\nimport OutputChannelChooser from './OutputChannelChooser.js';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\n\nclass SendComponent extends Component {\n    constructor(props) {\n        super(props);\n    }\n  \n    isSelected() {\n        return this.props.send == this.props.selectedGroup;\n    }\n\n    onChangeVolume(volume) {\n        this.props.send.setVolume(volume);\n        this.props.setSelectedGroup(this.props.send);\n        this.props.setSelectedTrack(undefined);\n    }\n\n    render() {\n        return (\n            <div\n              className={this.isSelected() ? 'group selected' : 'group'}>\n              <div className=\"volume-slider-container\">\n                <ReactBootstrapSlider\n                  handle=\"square\"\n                  value={this.props.volume}\n                  change={(e) => this.onChangeVolume(e.target.value)}\n                  step={0.1}\n                  max={3}\n                  min={-40}\n                  orientation=\"vertical\"\n                  reversed={true}\n                  /> \n              </div>\n                {!this.props.channelMixer.stereoConnected ? \n                  <OutputChannelChooser channel={this.props.send}/>\n                  : ''}\n              <SendThumbnail\n                send={this.props.send}/>\n              <div className=\"send-name\">\n                SEND {this.props.send.name}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selectedGroup: state.mix.selectedGroup,\n        volume: props.send.getVolume(),\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setSelectedTrack: track => dispatch(setSelectedTrack(track))\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SendComponent);\n","import React, { Component } from 'react';\nimport SimpleSequencerBottomToolbar from \"components/installation/SimpleSequencerBottomToolbar.js\"\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport SidebarComponent from \"components/sidebar/SidebarComponent.js\";\nimport SubPatches from 'components/subpatch/SubPatches.js';\nimport GroupEdges from \"components/groups/GroupEdges.js\";\nimport LinkedParameterVisualizer from \"components/parameters/LinkedParameterVisualizer.js\";\nimport GridsContainer from \"components/mix/GridsContainer.js\";\nimport SendsTrackComponent from 'components/track/SendsTrackComponent.js';\nimport NewGroupsComponent from './mix2/NewGroupsComponent.js';\nimport MixEffects from './mix2/MixEffects.js';\nimport MixTab from './MixTab.js';\nimport StepsVisualizer from './StepsVisualizer.js';\nimport TracksVisualizer from './TracksVisualizer.js';\nimport TrackQuickView from 'components/sidebar/TrackQuickView.js';\nimport Group from 'components/mix/Group.js';\nimport NewGroup from 'components/mix/NewGroup.js';\nimport GroupsComponent from 'components/mix/GroupsComponent.js';\nimport MixParametersComponent from 'components/mix/MixParametersComponent.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport MixesComponent from 'components/mix/MixesComponent.js';\nimport { connect } from \"react-redux\";\nimport {setSelectedGroup} from 'actions/index.js';\nimport {setHideMixer} from 'actions/index.js';\nimport {setSelectedTrack} from 'actions/index.js';\nimport {setSelectedParameter} from 'actions/index.js';\nimport {setSelectedParameterFlashing} from 'actions/index.js';\nimport MixEffectsPane from 'components/mix/MixEffectsPane.js';\nimport GroupMuteButton from 'components/mix/GroupMuteButton.js';\nimport Sample from 'repos/Sample.js';\nimport EffectComponents from 'components/effects/EffectsComponent.js';\nimport SendComponent from 'components/mix/SendComponent.js';\nimport SubMixComponent from './SubMixComponent.js';\nimport {HIDE, MIXES} from 'components/mix/constants.js';\nimport '../../Mix.scss';\n\n/**\n * Mode for mixing sounds by groups easily, similar to the mix view in ableton\n */\nclass Mix extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            scale: 1,\n            selectedGroup: undefined,\n            renders: 0,\n            pattern: props.sequencerEngine.currentPattern\n        };\n\n        // this.props.setSelectedTrack(props.sequencerEngine.cursor.track);\n        \n        this.sequencerEngine = props.sequencerEngine;\n\n        this.onDrop = this.onDrop.bind(this);\n        this.ref = React.createRef();\n    }\n\n    get groups() {\n        return this.sequencerEngine.groups;\n    }\n\n    // plays or stops the sequencer\n    onClickPlayStop() {\n        this.sequencerEngine.play();\n        this.setState(this.state);\n    }\n\n    onParameterChanged(parameter) {\n        this.props.setSelectedParameter(parameter);\n        this.props.setSelectedParameterFlashing(parameter);\n        setTimeout(() => {\n            this.props.setSelectedParameterFlashing(undefined);\n        }, 3000);\n    }\n\n    get hide() {\n        return this.props.effectsPaneOption === HIDE ||\n            this.props.mixViewMode === MIXES;\n    }\n\n    onDrop(e) {\n        let state = this.props.sequencerEngine.state;\n        if (state.sequencer.effectDragging) {\n            return;\n        }\n        let trackDragging = state.mix.trackDragging;\n        this.props.sequencerEngine.groups.newGroup(\n            trackDragging);\n    }\n\n    toggleHide() {\n        this.props.setHideMixer(\n            !this.props.hideMixer);\n    }\n\n    render() {\n        if (this.props.showingPiano) {\n            console.log('showing piano');\n            return (<SimpleSequencerBottomToolbar sequencerEngine={this.props.sequencerEngine}/>);\n        }\n        return (\n            <div className=\"full-view\">\n                <SubPatches containerRef={this.ref}/>\n              <div ref={this.ref} className={this.props.mixViewMode === MIXES ? \"mixes mix-view\" : \"mix-view\"}>\n                {/*\n                <GroupEdges scrollContainer={this.ref} sequencerEngine={this.props.sequencerEngine}/>\n                <LinkedParameterVisualizer\n                  scale={this.state.scale}\n                  scrollContainer={this.ref}/>*/}\n                <ConditionedComponent\n                  condition={this.props.sequencerEngine.tracks.length > 0}>\n                  <MixTab sequencerEngine={this.props.sequencerEngine}/>\n                  <MixParametersComponent\n                    isMixView={true}\n                    sequencerEngine={this.props.sequencerEngine}\n                    lfosTrack={this.props.sequencerEngine.lfosTrack}/>\n                </ConditionedComponent>\n                <ConditionedComponent\n                  condition={this.props.mixViewMode === MIXES}>\n                  <GridsContainer \n                    scale={this.state.scale}\n                    setScale={(x) => this.setState({scale: x})}\n                    sequencerEngine={this.props.sequencerEngine}/>\n                </ConditionedComponent>\n                <div\n                  onDrop={this.onDrop}\n                  className={this.hide ? \"channel-mixer lower\" : \"channel-mixer\"}>\n                  {this.props.hideMixer && this.props.mixViewMode === MIXES ? \"\" : \n                   <div className=\"channel-mixer-parts\">\n                     <div className=\"groups-container\" id=\"mix-scroll\">\n                       <ConditionedComponent\n                         condition={this.props.mixViewMode !== MIXES}>\n                         <NewGroupsComponent sequencerEngine={this.sequencerEngine}/>\n                       </ConditionedComponent>\n                       <ConditionedComponent\n                         condition={this.props.mixViewMode === MIXES}>\n                         <SubMixComponent sequencerEngine={this.props.sequencerEngine}/>\n                       </ConditionedComponent>\n                     </div>\n                     <SendsTrackComponent sequencerEngine={this.props.sequencerEngine}/>\n                   </div>}\n                  {this.props.mixViewMode === MIXES && \n                  <div className=\"mix-bottom-bar\">\n                    <div onClick={() => this.toggleHide()} className=\"collapse-button\">\n                      {this.props.hideMixer ?\n                       <div className=\"arrow-right\"/> :\n                       <div className=\"arrow-up\"/>}\n                    </div>\n                  </div>}\n                </div>\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedTrack: track => dispatch(setSelectedTrack(track)),\n        setHideMixer: x => dispatch(setHideMixer(x)),\n        setSelectedGroup: group => dispatch(setSelectedGroup(group)),\n        setSelectedParameter: parameter => dispatch(setSelectedParameter(parameter)),\n        setSelectedParameterFlashing: parameter => dispatch(setSelectedParameterFlashing(parameter))\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let bottomMode = state.arrangement.bottomMode;\n    let showingPiano = state.sequencer.showPianoRoll && bottomMode === PIANO_ROLL;\n    return {\n        showingPiano,\n        effectsPaneOption: state.mix.effectsPaneOption,\n        currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n        mixViewMode: state.mix.mixViewMode,\n        hideMixer: state.mix.hideMixer\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Mix);\n","export const getPath = (x1,y1,x2,y2) => {\n    let d = Math.sqrt(dist(x1,y1,x2,y2)) * window.dist;\n    let yDistance = Math.abs(y2-y1);\n    let xd = Math.abs(x2 - x1);\n    let xDistance = Math.sqrt(xd);\n    if (x2 - x1 < 0) {\n        xDistance *= -1;\n    }\n    if (xd < 20) {\n        xDistance += (20 - xd);\n    }\n \n    return [x1, y1, x1 + window.x*xDistance, y1+d, x2 - window.x*xDistance, y2-d, x2, y2];\n};\n\nconst dist = (x1, y1, x2, y2) => {\n    return Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport Arrow from \"components/effects/rack/Arrow.js\";\nimport {getPath} from './getPath.js';\n\nconst DraggingEdge = ({dragging, scrollContainer, container}) => { \n    let [pos, setPos] = useState(undefined);\n\n    useEffect(() => {\n        if (!dragging) {\n            return;\n        }\n        let {transformation, x, y} = dragging;\n        let fromId = transformation.id;\n        let fromEl = document.getElementById(\"transformation-\" + fromId);\n        if (fromEl ) {\n            let fromRect = fromEl.getBoundingClientRect();\n            let bounds = container.current.getBoundingClientRect();\n            let scrollTop = scrollContainer.current.scrollTop;\n            let scrollLeft = scrollContainer.current.scrollLeft;\n            let left = scrollContainer.current.offsetLeft - scrollLeft;\n            setPos({\n                x1: fromRect.left - left, \n                y1: fromRect.top - bounds.top,\n                x2: x - 3 - left,\n                y2: y - bounds.top -2 \n            });\n        }\n    }, [dragging]);\n\n    if (!dragging || !pos) { return [] };\n\n    let {x1, y1,x2,y2} = pos;\n\n    return (\n         <Arrow\n          className=\"markov-edge new-edge\" \n          tension={window.tension}\n          pointerLength= {6}\n          pointerWidth={4}\n           points={[x1,y1,0.75*x1 + 0.25*x2, 0.75*y1 + 0.25*y2, 0.25*x1 + 0.75*x2, 0.25*y1 + 0.75*y2,  x2,y2]}\n          strokeWidth={2} />\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      dragging: state.groups.transformationEdgeDragging\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DraggingEdge);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport Arrow from \"components/effects/rack/Arrow.js\";\nimport {getPath} from './getPath.js';\n\nconst MarkovEdge = ({transformation, container, scrollContainer, trackSteps}) => { \n    let [pos, setPos] = useState(undefined);\n    useEffect(() => {\n        setTimeout(() => {\n            let fromId = transformation.id;\n            let toId = transformation.whenValue.get();\n            let fromEl = document.getElementById(\"transformation-\" + fromId);\n            let toEl = document.getElementById(\"transformation-\" + toId);\n            if (fromEl && toEl) {\n                let fromRect = fromEl.getBoundingClientRect();\n                let toRect = toEl.getBoundingClientRect();\n                let bounds = container.current.getBoundingClientRect();\n                let scrollTop = scrollContainer.current.scrollTop;\n                let scrollLeft = scrollContainer.current.scrollLeft;\n                let left = scrollContainer.current.offsetLeft - scrollLeft;\n                setPos({\n                    x2: fromRect.left + 3 - left,\n                    y2: fromRect.top - bounds.top,\n                    x1: toRect.left + 4 - left,\n                    y1: toRect.top - bounds.top \n                });\n            }\n        }, 100);\n    }, [setPos, transformation, trackSteps]);\n\n    if (!pos) {\n        return [];\n    }\n\n    let {x1, y1,x2,y2} = pos;\n\n    return (\n        <Arrow\n          className=\"markov-edge\" \n          tension={window.tension}\n          pointerLength= {6}\n          pointerWidth={4}\n          points={getPath(x1, y1, x2, y2)}\n          strokeWidth={2} />);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      trackSteps: state.tracks.trackSteps[props.track.trackNumber],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MarkovEdge);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport DraggingEdge from './DraggingEdge.js';\nimport MarkovEdge from \"components/groups/MarkovEdge.js\"\nimport {\n    setTransformationEdgeDragging} from 'actions/index.js';\nimport {MARKOV} from 'pattern/groups/transformations.js';\nimport {connect} from 'react-redux';\n\nconst GroupEdges = ({\n    stepsGroupMode,\n    scrollContainer,\n    sequencerEngine,\n    setTransformationEdgeDragging,\n}) => { \n    let ref = useRef(undefined);\n    \n    \n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        window.addEventListener(\"mousemove\", onMouseMove);\n\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n            window.removeEventListener(\"mousemove\", onMouseMove);\n        };\n    }, []);\n\n    const onMouseUp = useCallback((e) => {\n        if (sequencerEngine.state.groups.stepsGroupMode) {\n            setTransformationEdgeDragging(undefined);\n        }\n    },  []);\n\n    const onMouseMove = useCallback((e) => {\n        let dragging = sequencerEngine.state.groups.transformationEdgeDragging;\n        if (!dragging) { return; }\n        let x = e.pageX;\n        let y = e.pageY;\n        setTransformationEdgeDragging({\n            ... dragging,\n            x,\n            y\n        });\n    }, []);\n\n    if (!stepsGroupMode) {\n        return [];\n    }\n    let markovTransformations = sequencerEngine.tracks.map(\n        (track) => track.pattern.getAllGroups().map(g => g.transformations.filter(x => x.whenType === MARKOV).map(\n            t => ({transformation: t, track})))\n            .reduce((a,b) => [...a,...b], []))\n        .reduce((a,b) => [...a, ...b], []);\n    let style = {\n        height: scrollContainer.current && scrollContainer.current.scrollHeight \n    };\n\n    if (!scrollContainer.current) {\n        return [];\n    }\n    return (\n        <svg\n          style={style} ref={ref} className=\"group-edges\">\n          <defs>\n            <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"8\" \n\t            refX=\"4\" refY=\"2\" orient=\"auto\">\n              <polygon points=\"0 0, 5 2, 0 4\" />\n            </marker>\n          </defs>\n          <DraggingEdge scrollContainer={scrollContainer} container={ref}/>\n        {markovTransformations.map(\n            ({transformation, track}) =>\n                <MarkovEdge\n                  key={transformation.id}\n                  scrollContainer={scrollContainer}\n                  track={track}\n                  container={ref}\n                  transformation={transformation}/>)}\n        </svg>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      stepsGroupMode: state.groups.stepsGroupMode,\n      trackSteps: state.tracks.trackSteps[0],\n      isDragging: state.groups.transformationEdgeDragging !== undefined\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTransformationEdgeDragging: x => dispatch(setTransformationEdgeDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupEdges);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {downloadImage} from \"utils/downloadImage.js\"\nimport Tags from './Tags.js';\nimport Dropdown from 'react-dropdown';\nimport {connect} from 'react-redux';\n\nconst RecordInfo = ({discogs, records, sample, showTags=true}) => { \n    let [tags, setTags] = useState([]);\n    let [record, setRecord] = useState(records[0]);\n    useEffect(() => {\n        let _records = [...records];\n        _records.sort((a,b) => a.year - b.year);\n        setRecord(_records[0]);\n    }, [records, setRecord]);\n\n    useEffect(() => {\n        if (showTags) {\n            sample.tags = [... tags];\n        }\n    }, [tags, sample]);\n\n    useEffect(() => {\n        if (record) {\n            sample.year = record.year;\n            sample.styles = record.genre || [];\n            sample.country = record.country;\n            sample.discogsId = record.id;\n            sample.releaseName = record.title;\n            downloadImage(record.thumb).then(\n                t => sample.coverArtHash = t);\n            discogs.getReleaseInfo(record.id)\n                .then(d => {\n                    sample.artistName = d.artists[0].name;\n                });\n        }\n    }, [record, sample]);\n\n   \n    if (!record) {\n        return '';\n    }\n\n    let options = records.map(\n        r => ({label: r.title + '(' + (r.year) + ')', value: r}));\n        \n    return (\n        <div className=\"record-info\">\n          <div className=\"meta\">\n            <img src={record.thumb}/>\n            <div className=\"record-meta\">\n              <div className=\"record-title\">{record.title}</div>\n              <div className=\"record-year\">{record.year}</div>\n              <div className=\"record-genre\">{record.genre.map(g => <span>{g}</span>)}</div>\n            </div>\n          </div>\n          <div className=\"others\">\n            <Dropdown\n              onChange={(o) => setRecord(o.value)}\n              options={options}\n              value={options.find(o => o.value === record)}/>\n          </div>\n          {showTags ? <Tags tags={tags} setTags={setTags}/> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecordInfo);\n","import React, {useState, useCallback} from 'react';\nimport Dropdown from 'react-dropdown';\n\nexport default function OutputChannelChooser(props) {\n    let channelMixer = props.channel.channelMixer;\n    const [option, setOption] = useState(getOption(props.channel));\n\n    const onChange = useCallback((value) => {\n        channelMixer.switchChannelOutput(\n            props.channel.outputNode, \n            value.left,\n            value.right);\n\n        props.channel.outputs = [value.left, value.right];\n\n        setOption(getOption(props.channel));\n    }, [props.channel, setOption]);\n\n    return (\n        <div className=\"outputs-container\">\n              <Dropdown\n                className='channel-dropdown'\n                controlClassName='channel-control-dropdown'\n                arrowClassName='channel-arrow-dropdown'\n                options={getOptions(channelMixer)}\n                onChange={(o) => onChange(o.value)}\n                value={option}\n                placeholder=\"Rate\" />\n        </div>\n    );\n}\n\nfunction getOption(channel) {\n    let left = channel.outputs[0];\n    let right = channel.outputs[1];\n    let label = '';\n    if (right !== undefined) {\n        label =  (left + 1) + '/' + (right + 1);\n    } else {\n        label = left + 1;\n    }\n    return {\n        label,\n        value: {\n            left,\n            right\n        },\n    };\n}\n\nfunction getOptions(channelMixer) {\n    let options = [];\n    for (let i=0; i < channelMixer.channelCount; i+=2) {\n        options.push({\n            label: (i + 1) + '/' + (i + 2),\n            value: {\n                left: i,\n                right: i + 1,\n            }\n        });\n    }\n    for (let i=0; i < channelMixer.channelCount; i++) {\n        options.push({\n            label: i + 1,\n            value: {\n                left: i,\n            }\n        });\n    }\n    return options;\n}\n","export function truncate(str, truncateLength=14) {\n    if (str === undefined || str === null) {\n        return '';\n    }\n    let x = str.length > truncateLength? str.substring(0, truncateLength) + '...' : str;\n    return x.trim();\n}\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {getSamplePack} from 'decentralized/artists/Artists.js';\nimport {setUploadingFile} from 'actions/index.js';\nimport {SAMPLE_PACK} from 'constants/release-types.js';\nimport {connect} from 'react-redux';\nimport {downloadImage} from 'utils/downloadImage.js';\nimport ImageHandler from \"components/explore/lists/ImageHandler.js\"\n\n\nconst SamplePackFlow = ({track, sample, setUploadingFile, guildId}) => { \n    const [artistName, setArtistName] = useState('');\n    const [name, setName] = useState('');\n    const [coverArtUrl, setCoverArtUrl] = useState('');\n    const [samplePack, setSamplePack] = useState(undefined);\n    const [editedCoverArt, setEditedCoverArt] = useState(false);\n    const [copiedAll, setCopiedAll] = useState(false);\n\n    useEffect(() => {\n        if (sample.copiedAll) {\n            setCopiedAll(true);\n        }\n    }, [sample, setCopiedAll]);\n\n    useEffect(() => {\n        // check if this sample pack exists already, and if so auto fill\n        // the cover art hash\n        getSamplePack(artistName, name)\n            .then(samplePack => {\n                if (samplePack) {\n                    setName(samplePack.releaseName);\n                    setCoverArtUrl(samplePack.coverArtHash);\n                    setSamplePack(samplePack);\n                } else {\n                    setSamplePack(undefined);\n                }\n            });\n    }, [artistName, name, setName, setCoverArtUrl, setSamplePack]);\n\n    const copyToAll = useCallback(() => {\n        let coverArtHash = \"\";\n        if (coverArtUrl && editedCoverArt) {\n            coverArtHash = coverArtUrl;\n        } else if (samplePack && samplePack.coverArtHash) {\n            coverArtHash = samplePack.coverArtHash;\n        } \n\n        for (let _track of track.sequencerEngine.tracks) {\n            let _sample = _track.sample;\n            if (sample.tags) {\n                _sample.tags = [...sample.tags];\n            }\n            if (samplePack) {\n                window.sessionStorage.setItem(\"getSamplePack(\" + artistName + ',' + name+ \")\", JSON.stringify(samplePack));\n                if (!samplePack.releaseId) {\n                    _sample.discogsId =  Math.floor(new Date().getTime() / 10000);\n                } else {\n                    _sample.discogsId = samplePack.releaseId;\n                }\n            } else {\n                _sample.discogsId = Math.floor(new Date().getTime() / 10000);\n            }\n            _sample.releaseType = SAMPLE_PACK;\n \n            _sample.coverArtHash = coverArtHash;\n            _sample.releaseName = name;\n            _sample.artistName = artistName;\n            _sample.year = 0;\n            _sample.styles = [];\n            _sample.country = \"\";\n            _sample.copiedAll = true;\n        }\n        setCopiedAll(true);\n    }, [sample, name, coverArtUrl, editedCoverArt, samplePack, setCopiedAll]);\n\n    const saveWithCoverArt = useCallback((hash) => {\n        sample.coverArtHash = hash;\n        sample.releaseName = name;\n        sample.artistName = artistName;\n        sample.year = 0;\n        sample.styles = [];\n        sample.country = \"\";\n        \n        // since this isnt actually from discogs we use the current\n        // time stamp as the discogs id\n        if (samplePack) {\n            window.sessionStorage.setItem(\"getSamplePack(\" + artistName + ',' + name+ \")\", JSON.stringify(samplePack));\n            if (!samplePack.releaseId) {\n                sample.discogsId =  Math.floor(new Date().getTime() / 10000);\n            } else {\n                sample.discogsId = samplePack.releaseId;\n            }\n        } else {\n            sample.discogsId = Math.floor(new Date().getTime() / 10000);\n        }\n        sample.releaseType = SAMPLE_PACK;\n        setUploadingFile(true);\n        \n        setTimeout(async () => {\n            await sample.saveSample(guildId);\n            setUploadingFile(false);\n        }, 100);\n    }, [artistName, name, sample, samplePack, guildId]);\n\n    const saveAll = useCallback(() => {\n        setUploadingFile(true);\n        setTimeout(async () => {\n            for (let _track of track.sequencerEngine.tracks) {\n                await _track.sample.saveSample(guildId);\n            }\n            setUploadingFile(false);\n        }, 100);\n    }, [track, guildId]);\n    \n\n    const saveSample = useCallback((e) => {\n        if (coverArtUrl && editedCoverArt) {\n            saveWithCoverArt(coverArtUrl);\n        } else if (samplePack && samplePack.coverArtHash) {\n            saveWithCoverArt(samplePack.coverArtHash);\n        } else {\n            saveWithCoverArt(undefined);\n        }\n    }, [name, artistName, coverArtUrl, sample, samplePack, guildId, editedCoverArt]);\n\n    useEffect(() => {\n        setSamplePack(undefined);\n    }, [setSamplePack, sample]);\n\n    return (\n        <div className=\"sample-pack-flow\">\n          <div className=\"input-container\">\n            <div className=\"input-type\">\n              Artist Name:\n            </div>\n            <input\n              value={artistName}\n              onChange={(e) => setArtistName(e.target.value)}\n              type=\"text\"\n              className=\"sample-pack-name-input\"/>\n          </div>\n          <div className=\"input-container\">\n            <div className=\"input-type\">\n              Sample Pack:\n            </div>\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              type=\"text\"\n              className=\"sample-pack-name-input\"/>\n          </div>\n\n          <ImageHandler placeholder=\"Drag cover art here\" imageHash={coverArtUrl} setImageHash={(e) => {\n                  setCoverArtUrl(e);\n                  setEditedCoverArt(true);\n              }}/>\n\n          {!copiedAll ?\n           <div\n              onClick={saveSample}\n              className={artistName === \"\" ? \"save-button disabled\" : \"save-button\"}>\n              Save\n           </div> : ''}\n          {copiedAll ?\n           <div onClick={saveAll} className=\"save-button\">\n             Save All\n           </div> :\n           <div onClick={copyToAll} className=\"save-button\">\n             Copy To All Tracks\n           </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUploadingFile: (a) => dispatch(setUploadingFile(a)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplePackFlow);\n","export const SAMPLE_PACK = \"SAMPLE_PACK\";\nexport const RECORD = \"RECORD\";\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {RECORD, SAMPLE_PACK} from 'constants/release-types.js';\nimport {connect} from 'react-redux';\n\nconst ReleaseType = ({releaseType, setReleaseType}) => { \n    return (\n        <div className=\"release-type-chooser\">\n          <div\n            onClick={() => setReleaseType(RECORD)}\n            className={releaseType === RECORD ? \"option selected\" : \"option\"}>\n            Record\n          </div>\n          <div\n            onClick={() => setReleaseType(SAMPLE_PACK)}\n            className={releaseType === SAMPLE_PACK ? \"option selected\" : \"option\"}>\n            Sample Pack\n          </div>\n          <div\n            onClick={() => setReleaseType(undefined)}\n            className={releaseType === undefined ? \"option selected\" : \"option\"}>\n          None\n        </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ReleaseType);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {lstorage} from 'utils/lstorage.js';\nimport {setUploadingFile} from 'actions/index.js';\nimport {setSelectedGuild, setShowLogin, setSigningUp} from 'actions/index.js';\nimport accounts from 'accounts/Accounts.js';\nimport Discogs from 'discogs/Discogs.js';\nimport {connect} from 'react-redux';\nimport axios from 'axios';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {downloadImage} from 'utils/downloadImage.js';\n\n\nconst discogs = new Discogs();\n\nconst SAMPLE_PACK = 'SAMPLE_PACK';\nconst RECORD = 'RECORD';\n\nconst DiscogsFlow = ({\n    sample,\n    setUploadingFile,\n    isLoggedIn,\n    setShowLogin,\n    guildId}) => { \n    const [results, setResults] = useState([]);\n    const [name, setName] = useState('');\n    const [selectedId, setSelectedId] = useState(undefined);\n\n    const onClickResult = useCallback((result) => {\n        if (result.id === selectedId) {\n            setSelectedId(undefined);\n            sample.discogsId = undefined;\n            sample.year = undefined;\n            sample.releaseName = undefined;\n            sample.styles = [];\n            sample.country = null;\n            sample.coverArtHash = undefined;\n            sample.artistName = undefined;\n            sample.releaseType = undefined;\n            return;\n        }\n\n        setSelectedId(result.id);\n        sample.discogsId = result.id;\n        sample.year = result.year;\n        sample.releaseName = result.title;\n        sample.styles = result.style || [];\n        sample.country = result.country;\n        downloadImage(result.thumb)\n            .then(hash => sample.coverArtHash = hash);\n        discogs.getReleaseInfo(result.id)\n            .then(r => {\n                if (r !== undefined) {\n                    sample.artistName = r.artists[0].name;\n                    sample.releaseName = r.title;\n                    sample.releaseType = 'RECORD';\n                }\n            });\n        lstorage.setItem(\"lastDiscogs\", JSON.stringify(result));\n    }, [sample, setSelectedId, selectedId]);\n\n    const search = useCallback(() => {\n        discogs.searchRecords(stripExtension(name))\n            .then(x => setResults(x));\n    }, [name, setResults]);\n\n    useEffect(() => {\n        let n = stripExtension(sample.name);\n        setName(n);\n        discogs.searchRecords(stripExtension(n))\n            .then(x => {\n                if (lstorage.getItem(\"lastDiscogs\")) {\n                    let parsed = JSON.parse(lstorage.getItem(\"lastDiscogs\"));\n                    if (!x.some(y => y.id === parsed.id)) {\n                        x = [parsed, ... x];\n                        onClickResult(parsed);\n                    }\n                }\n                setResults(x);\n            });\n    }, [sample, setResults, setName, setSelectedId]);\n\n    const onClickSave = useCallback(() => {\n        setUploadingFile(true);\n        setTimeout(async () => {\n            await sample.saveSample(guildId);\n            setUploadingFile(false);\n        }, 100);\n    }, [sample, guildId]);\n\n    const showLogin = () => {\n        setShowLogin(true);\n    };\n\n    if (!isLoggedIn) {\n        return (\n            <div className=\"save-new-sample\">\n            Please <span className=\"login-button\" onClick={showLogin}>log in</span> to save this new sound.\n            </div>\n        );\n    }\n    return (\n        <div>\n          <div className=\"input-container\">\n            <input\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n              type=\"text\"\n              className=\"discogs-search-input\"/>\n            <div\n              onClick={search}\n              className=\"search-button\">\n              Search\n            </div>\n          </div>\n          {results.length === 0 ? <div className=\"no-results\">No results found. Try editing the name and searching again.</div> : ''}\n          <div className=\"results\">\n            {results.map(x => <Result isSelected={x.id === selectedId} onClick={onClickResult} result={x}/>)}\n          </div>\n          <div onClick={onClickSave} className=\"save-sample-button\">\n            Save\n          </div>\n        </div>\n    );\n}\n\nconst Result = ({result, isSelected, onClick}) => {\n    let className = \"result\";\n    if (isSelected) {\n        className += \" selected\";\n    }\n    return (\n        <div\n          onClick={() => onClick(result)}\n          className={className}>\n          <img src={result.thumb} className=\"discogs-thumb\"/>\n          <div className=\"result-title\">{result.title}</div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isLoggedIn: state.sequencer.userToken !== undefined,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUploadingFile: (a) => dispatch(setUploadingFile(a)),\n      setShowLogin: show=> dispatch(setShowLogin(show))\n  };\n};\n\n\nconst stripExtension = (name) => {\n    let extensionIndex = name.indexOf('.flac');\n    if (extensionIndex > -1) {\n        name = name.slice(0, extensionIndex);\n    }\n    extensionIndex = name.indexOf('.wav');\n    if (extensionIndex > -1) {\n        name = name.slice(0, extensionIndex);\n    }\n    return name;\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DiscogsFlow);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SamplePackFlow from './SamplePackFlow.js';\nimport ReleaseType from './ReleaseType.js';\nimport DiscogsFlow from './DiscogsFlow.js';\n\nimport {connect} from 'react-redux';\nimport {SAMPLE_PACK, RECORD} from 'constants/release-types.js';\n\nconst SaveNewSample = ({track, sample}) => { \n    const [releaseType, setReleaseType] = useState(undefined);\n\n    return (\n        <div className=\"save-new-sample\">\n          <div className=\"sample-save-info\">\n            Match the sample to it's source\n          </div>\n          <ReleaseType setReleaseType={setReleaseType} releaseType={releaseType}/>\n          {releaseType === RECORD ? <DiscogsFlow sample={sample}/> : \"\"}\n          {releaseType === SAMPLE_PACK ? <SamplePackFlow track={track} sample={sample}/> : \"\"}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SaveNewSample);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ethereum from 'decentralized/ethereum.js';\nimport {connect} from 'react-redux';\n\nconst Rating = ({content, color, type}) => { \n    const [rating, setRating] = useState(undefined);\n    let list = [0, 1, 2, 3, 4];\n    const onClick = useCallback((r) => {\n        setRating(r);\n        ethereum.xanadu.rateSound(content, r, type);\n    }, [setRating, content]);\n\n    useEffect(() => {\n        ethereum.xanadu.getSoundRating(content, type)\n            .then(x => {\n                setRating(x);\n            });\n    }, [setRating, content]);\n\n    return (\n        <div className=\"rating\">\n          {list.map(\n              x =>\n                  <Star\n                    color={color}\n                    onClick={onClick}\n                    number={x}\n                    rating={rating}/>)}\n       </div>\n    );\n}\n\nconst Star = ({number, rating, onClick, color}) => {\n\n    let className = \"star\";\n    if (number <= rating) {\n        className += \" starred\";\n    }\n\n    let style = {\n        color: color\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={() => onClick(number)}\n          className={className}>\n          <span>&#9734;</span>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setTrackBrowsedPresets} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst PresetsBreadcrumb = ({track, preset, presets=[], setBrowsedPresets}) => { \n    const onClick = useCallback((p) => {\n        track.sequencerEngine.auditionPreset(p, track.trackNumber, p.loadMods, p.loadEffects, false);\n    }, [track]);\n\n    const onClickPrev = useCallback(() => {\n        let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n        index++;\n        let s = presets[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, presets, preset]);\n\n    const onClickNext = useCallback(() => {\n        let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n        index--;\n        let s = presets[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, presets, preset]);\n\n    const getClassName = useCallback((x) => {\n        if (x.contentHash === preset.contentHash) {\n            return \"sample-option selected\";\n        }\n        return \"sample-option\";\n    }, [preset]);\n\n    let index = presets.map(x => x.contentHash).indexOf(preset.contentHash);\n    let len = presets.length;\n\n    let nextClass = \"next-button\";\n    let prevClass = \"previous-button\";\n\n    if (index >= len - 1) {\n        prevClass += \" disabled\";\n    }\n\n    if (index < 1) {\n        nextClass += \" disabled\";\n    }\n\n    return (\n        <div>\n          <div className=\"fwd-back-buttons\">\n            <div\n              onClick={onClickPrev}\n              className={prevClass}/>\n            <div\n              onClick={onClickNext}\n              className={nextClass}/>\n          </div>\n          <div className=\"samples-breadcrumb\">\n            {presets.map(\n                (x, i) =>\n                    <div\n                      key={x.name + '.' + i}\n                      onClick={() => onClick(x)}\n                      className={getClassName(x)}>\n                      {x.name} ( \n                      {x.tags && x.tags.join(\", \")})\n                    </div>)}\n            \n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presets: state.tracks.trackBrowsedPresets[props.track.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setBrowsedPresets: (presets) => dispatch(\n          setTrackBrowsedPresets(props.track.id, presets))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresetsBreadcrumb);\n","import ethereum from \"decentralized/ethereum.js\"\nimport {getFormattedDate} from 'utils/date.js';\nimport {SAMPLE, PRESET} from 'constants/content-types.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst CreateBy = ({content}) => { \n    let [contentName, setContentName] = useState('');\n    let [userName, setUserName] = useState('');\n    let [createdDate, setCreatedDate] = useState('');\n\n    useEffect(() => {\n        if (!content.isCreated()) {\n            setCreatedDate('');\n            setUserName('');\n            return;\n        }\n        ethereum.users.getUserName(content.sampledByUser || content.user)\n            .then(name => setUserName(name));\n        getBlockDate(content.blockNumber)\n            .then(date => {\n                if (date) {\n                    setCreatedDate(getFormattedDate(date));\n                }\n            });\n    }, [setUserName, setCreatedDate, content.ipfsHash, content]);\n\n    const saveContent = useCallback(() => {\n        content.save(contentName);\n    }, [content, contentName]);\n\n    const onChange = useCallback((e) => {\n        setContentName(e.target.value);\n    }, [setContentName]);\n\n    let creationWord = content.getContentType() === SAMPLE ?\n        'sampled' : 'created';\n\n    let creation = '';\n    if (content.getContentType() === PRESET &&\n        content.hasEdits) {\n        creation = (\n            <div className=\"needs-creation\">\n              <div className=\"info-text\">You've edited this sound</div>\n              <div className=\"name-input-container\">\n                <input\n                  placeholder=\"Type new name for sound\"\n                  onChange={onChange}\n                  value={contentName} type=\"text\" className=\"preset-name-input\"></input>\n                <div\n                  onClick={saveContent}\n                  className={contentName === '' ? \"preset-save-button disabled\" : \"preset-save-button\"}>\n                  Save\n                </div>\n              </div>\n            </div>\n        );\n    }\n\n    let createdBy = '';\n    if (content.isCreated() && content.getContentType() === SAMPLE) {\n        createdBy = (\n            <div className=\"sampled-by\">\n              <span className=\"sample-finder\">{userName}</span> {creationWord} this on <span className=\"sampled-date\">{createdDate}</span>\n            </div>);\n\n    }\n    return (\n        <div className=\"created-by\">\n          {creation}\n          {createdBy}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(CreateBy);\n","export function getFormattedDate(date) {\n  var year = date.getFullYear();\n\n  var month = (1 + date.getMonth()).toString();\n  month = month.length > 1 ? month : '0' + month;\n\n  var day = date.getDate().toString();\n  day = day.length > 1 ? day : '0' + day;\n  \n  return month + '/' + day + '/' + year;\n}\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ContextualHelp from \"components/sidebar/ContextualHelpComponent.js\";\nimport {MULTI_SYNTH, SAMPLED_INSTRUMENT} from 'constants/instrument-types.js';\nimport Rating from './Rating.js';\nimport {PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport PresetsBreadcrumb from './PresetsBreadcrumb.js';\nimport PresetsExplorer from './PresetsExplorer.js';\nimport TagsInfo from './TagsInfo.js';\nimport CreatedBy from './CreatedBy.js';\nimport YoutubeInfo from \"components/Youtube.js\";\nimport {connect} from 'react-redux';\nimport '../../SynthBrowser.scss';\nimport Colors from 'components/Colors.js';\n\nconst colors = new Colors();\n\nconst SynthBrowser = ({track, subTrack, synth, setTagSelected, tagSelected, hasEdits, name, type=MULTI_SYNTH}) => { \n    let t = subTrack || track;\n    let preset = t.preset;\n\n    let color = colors.getColorForTrack(t);\n    let thumbnailStyle = {\n        backgroundColor: color\n    };\n    \n    return (\n        <div\n          className=\"sampler-browser synth-browser\">\n          <div>\n            <div style={thumbnailStyle} className=\"synth-thumbnail\">\n            </div>\n            <PresetsBreadcrumb preset={preset} track={subTrack || track}/>\n          </div>\n          <div className=\"sample-info\">\n            <div className=\"name-info\">\n              <div className=\"sample-name\">{name || t.presetName || t.getName()}</div>\n              <CreatedBy hasEdits={hasEdits} content={preset}/>\n              <div className=\"blank-patch\">\n                {!hasEdits && name === undefined ?\n                 'Blank Patch' : ''}\n              </div>\n            </div>\n            {preset.isCreated() ?\n             <TagsInfo\n               tags={preset.tags}\n               tagSelected={tagSelected}\n               setTagSelected={setTagSelected}\n               content={preset}/>\n             : ''}\n            {!hasEdits && name ?\n             <Rating\n               color={color}\n               content={preset.contentHash}\n               type={PRESET_RATED}/> : ''}\n          </div>\n          <PresetsExplorer\n            type={type}\n            track={t}\n            tagSelected={tagSelected}\n            content={preset}\n          />\n          <ContextualHelp sequencerEngine={track.sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, {subTrack, track}) => {\n    let t = subTrack || track;\n    let preset = t.preset;\n    return {\n        hasEdits: preset.hasEdits === undefined ? true : preset.hasEdits,\n        name: preset.name,\n        tags: preset.tags,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SynthBrowser);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setTrackBrowsedSamples} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst SamplesBreadcrumb = ({track, sample, samples=[], setBrowsedSamples}) => { \n    const onClick = useCallback((s) => {\n        track.auditionSound(s, undefined, undefined, false);\n    }, [track]);\n\n    const onClickPrev = useCallback(() => {\n        let index = samples.indexOf(sample);\n        index++;\n        let s = samples[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, samples, sample]);\n\n    const onClickNext = useCallback(() => {\n        let index = samples.indexOf(sample);\n        index--;\n        let s = samples[index];\n        if (s) {\n            onClick(s);\n        }\n    }, [track, samples, sample]);\n\n    const getClassName = useCallback((x) => {\n        if (x === sample) {\n            return \"sample-option selected\";\n        }\n        return \"sample-option\";\n    }, [sample]);\n\n    let index = samples.indexOf(sample);\n    let len = samples.length;\n\n    let nextClass = \"next-button\";\n    let prevClass = \"previous-button\";\n\n    if (index >= len - 1) {\n        prevClass += \" disabled\";\n    }\n\n    if (index < 1) {\n        nextClass += \" disabled\";\n    }\n\n    return (\n        <div>\n          <div className=\"fwd-back-buttons\">\n            <div\n              onClick={onClickPrev}\n              className={prevClass}/>\n            <div\n              onClick={onClickNext}\n              className={nextClass}/>\n          </div>\n          <div className=\"samples-breadcrumb\">\n            {samples.map(\n                x =>\n                    <div\n                      onClick={() => onClick(x)}\n                      className={getClassName(x)}>\n                      {x.name} ( \n                      {x.tags ? x.tags.join(\", \") : \"\"})\n                    </div>)}\n            \n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      samples: state.tracks.trackBrowsedSamples[props.track.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setBrowsedSamples: (samples) => dispatch(\n          setTrackBrowsedSamples(props.track.id, samples))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplesBreadcrumb);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst GoToSource = ({sample}) => { \n    const goToSource = useCallback(() => {\n        if (sample.videoId) {\n            window.open('https://youtube.com/watch?v=' + sample.videoId, '_blank');\n        } else if (sample.discogsId) {\n            window.open('https://discogs.com/release/' + sample.discogsId, '_blank');\n        }\n    }, [sample]);\n\n    return (\n        <div className=\"go-to-source\">\n          <span onClick={goToSource}>Go to source</span>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GoToSource);\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {SampleYoutube} from 'decentralized/EthereumEvents.js';\nimport {NewDiscogsSample} from 'decentralized/EthereumEvents.js';\nimport GuildSamplesContract from 'decentralized/contracts/GuildSamplesContract.js';\nconst contract = new GuildSamplesContract();\n\nconst cache = {};\nexport const getThumbnails = async (samples) => {\n    let key = samples.join(',');\n    if (key in cache) {\n        return cache[key];\n    }\n    let videoIds = await new BackendQuery(contract.contractAddress)\n        .from(SampleYoutube)\n        .select('ipfsHash')\n        .select('videoId')\n        .whereIn('ipfsHash', samples)\n        .executeQuery(true);\n\n    let coverArts = await new BackendQuery(contract.contractAddress)\n        .from(NewDiscogsSample)\n        .select('sampleHash')\n        .select('coverArtHash')\n        .whereIn('sampleHash', samples)\n        .executeQuery(true);\n\n    let thumbnails = {};\n    for (let r of videoIds) {\n        thumbnails[r.ipfsHash] = 'https://img.youtube.com/vi/' + r.videoId + '/1.jpg';\n    }\n    for (let r of coverArts) {\n        thumbnails[r.sampleHash] = ipfs.getHashUrl(r.coverArtHash);\n    }\n    cache[key] = thumbnails;\n    return thumbnails;\n}\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst SampleTooltip = ({sampleInfo}) => { \n    if (sampleInfo === undefined) {\n        return (<div></div>);\n    } else {\n        return (\n            <div className=\"sample-tooltip\">\n              <div className=\"sample-name\">{sampleInfo.name.trim()}</div>\n              <div className=\"sample-tags\">\n                {sampleInfo.tags.map(tag => <div className=\"s-tag\">{tag}</div>)}\n              </div>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      sampleInfo: state.audition.sampleTooltip\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleTooltip);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setSampleTooltip} from 'actions/index.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from \"components/Colors.js\";\n\nimport ConditionedComponent from \"components/ConditionedComponent.js\"\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\nlet id = 0;\n\nconst SampleInfo = ({\n    thumbnail,\n    sample,\n    sampleId,\n    annotations,\n    onDragStart,\n    onMouseDown,\n    onMouseUp,\n    position,\n    sequencerEngine,\n    onClickSample\n}) => { \n    let [hovered, setHovered] = useState(undefined);\n\n    const setSampleInfo = (sampleInfo) => {\n        sequencerEngine.store.dispatch(setSampleTooltip(sampleInfo));\n    };\n\n    useEffect(() => {\n        if (!hovered) {\n            setSampleInfo(undefined);\n            return;\n        }\n        let c = ++id;\n        setTimeout(() =>  {\n            if (c === id) {\n                let sample = new Sample(hovered);\n                sample.load(false)\n                    .then(x => {\n                        setSampleInfo(sample);\n                    });\n            }\n        }, 100);\n    }, [hovered, setSampleInfo]);\n    \n    let style = {\n        borderColor: colors.saturate(colors.getColorForHash(sampleId), 3)\n    };\n\n    if (thumbnail && thumbnail !== '') {\n        style.backgroundImage = \"url(\\\"\" + thumbnail + \"\\\")\"; \n    } else {\n    }\n\n    return (\n        <div\n          style={{backgroundColor: colors.saturate(colors.getColorForHash(sampleId), 3)}}\n          draggable={true}\n          onDragStart={(e) => onDragStart(sampleId)}\n          onDragOver={(e) => e.stopPropagation()}\n          className='sample-container'>\n          <div\n            onMouseDown={() => onMouseDown(sampleId)}\n            onMouseOver={() => setHovered(sampleId)}\n            onMouseLeave={() => setHovered(undefined)}\n            onMouseUp={() => onMouseUp(sampleId)}\n            onClick={() => onClickSample(sampleId)}\n            className={sampleId === sample.ipfsHash ? \"sample-from-source selected\" : \"sample-from-source\"}\n            style={style}>\n            <ConditionedComponent condition={annotations.has(sampleId)}>\n              <div className=\"dot sample-annotation\"></div>\n            </ConditionedComponent>\n          </div>\n        </div>\n    );\n};\n\nexport default SampleInfo;\n","import ConditionedComponent from \"components/ConditionedComponent.js\"\nimport Discogs from 'discogs/Discogs.js';\nimport {newSampleByArtist, newRelease, getRelease} from 'decentralized/artists/Artists.js';\nimport {\n    getSoundsWithDiscogs,\n    getSoundsWithTag,\n    getSoundsWithVideo,\n    getSoundsWithUserBlockNumber} from 'search/getSounds.js';\nimport {getThumbnails} from './getThumbnails.js';\nimport SampleTooltip from './SampleTooltip.js';\nimport SampleInfo from './SampleInfo.js';\nimport React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {SAMPLE_ANNOTATION} from 'constants/annotation-types.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from \"components/Colors.js\";\nimport {connect} from 'react-redux';\nimport ethereum from \"decentralized/ethereum.js\";\nimport {\n    setSampleDragging} from \"actions/index.js\";\n    \nlet id = 0;\nlet counter = 0;\nconst colors = new Colors();\nconst SAMPLES_TO_SHOW = 64;\nconst discogs = new Discogs();\n\nconst SampleExplorer = ({\n    setTagSelected,\n    setSampleDragging,\n    sample,\n    track,\n    tagSelected,\n    audioUnit,\n    pendingTransactions}) => { \n\n        let ref = useRef(undefined);\n        let [start, setStart] = useState(0);\n        let [showSamples, setShowSamples] = useState(false);\n        let [samples, setSamples] = useState([]);\n        let [thumbnails, setThumbnails] = useState({});\n        let [annotations, setAnnotations] = useState(new Set());\n\n        const onMouseDown = useCallback(async (s) => {\n            if (s !== sample.ipfsHash) {\n                return;\n            }\n            audioUnit.playSound();\n        }, [sample]);\n        \n        useEffect(() => {\n            setShowSamples(false);\n        }, [setShowSamples, track]);\n        const onMouseUp= useCallback(async (s) => {\n            if (s !== sample.ipfsHash) {\n                return;\n            }\n            audioUnit.stopSound();\n        }, [sample]);\n\n        const onClickSample = useCallback(async (s) => {\n            if (s === sample.ipfsHash) {\n                return;\n            }\n            let _counter = ++counter;\n            let s2 = new Sample(s);\n            await s2.load();\n            if (_counter === counter) {\n                track.auditionSound(s2);\n            }\n        }, [track, sample]);\n\n        useEffect(() => {\n            ref.current.scrollTo(0, 0);\n            setStart(0);\n        }, [tagSelected, track, setStart]);\n\n        useEffect(() => {\n            if (tagSelected) {\n                getSoundsWithTag(tagSelected)\n                    .then(sounds => setSamples(sounds));\n                return;\n            }\n\n            if (sample.videoId) {\n                getSoundsWithVideo(sample.videoId)\n                    .then(sounds => setSamples(sounds));\n            } else if (sample.discogsId) {\n                getSoundsWithDiscogs(sample.discogsId)\n                    .then(sounds => {\n                        setSamples(sounds);\n                    });\n            } else {\n                getSoundsWithUserBlockNumber(sample.sampledByUser, sample.blockNumber)\n                    .then(sounds => setSamples(sounds));\n            }\n        }, [sample, setSamples, tagSelected, sample.videoId, sample.discogsId]);\n\n        useEffect(() => {\n            getThumbnails(samples)\n                .then(t => setThumbnails(t));\n            onScroll();\n        }, [samples, setThumbnails]);\n        \n\n        useEffect(() => {\n            setTagSelected(undefined);\n        }, [track]);\n\n        useEffect(() => {\n            ethereum.xanadu.getAnnotations(\n                SAMPLE_ANNOTATION)\n                .then(a => {\n                    setAnnotations(new Set(a.map(x => x.data)))\n                });\n        }, [setAnnotations, pendingTransactions]);\n\n        useEffect(() => {\n            ref.current.addEventListener('scroll', onScroll);\n            return () => {\n                ref.current.removeEventListener('scroll', onScroll);\n            };\n        }, [setStart, start, samples]);\n\n        const onScroll = useCallback((e) => {\n            let i = ++id;\n            setTimeout(() => {\n                if (i !== id || !ref.current) {\n                    return;\n                }\n                let el = ref.current;\n                let scrollTop = el.scrollTop + el.offsetHeight;\n                if (scrollTop >= el.scrollHeight - 20) {\n                    if (samples.length > start + SAMPLES_TO_SHOW) {\n                        setStart(start + SAMPLES_TO_SHOW);\n                    }\n                }\n            }, 100);\n        }, [setStart, samples, start]);\n\n        const onDragStart = useCallback((sample) => {\n            setSampleDragging(sample);\n        }, []);\n\n        /*\n        useEffect(() => {\n            if (sample.discogsId) {\n                getRelease(sample.discogsId).then(\n                    async (r) => {\n                        if (!r) {\n                            let release = await discogs.getReleaseInfo(sample.discogsId);\n                            console.log(\"RELEASE FETCHED = \", release);\n                            sample.artistName = release.artists[0].name;\n                            sample.releaseName = release.title;\n                            sample.releaseType = 'RECORD';\n                            newRelease(\n                                sample.artistName,\n                                sample.discogsId,\n                                sample.releaseName,\n                                sample.coverArtHash,\n                                \"RECORD\");\n                            newSampleByArtist(\n                                sample.artistName,\n                                sample.ipfsHash\n                            );\n                        }\n                    });\n            }\n        }, [sample]);\n        */\n\n        let samplesToShow = showSamples ? samples.slice(0, start + SAMPLES_TO_SHOW) : [];\n        return (\n            <div className=\"sample-explorer\">\n              {tagSelected ?\n               <div className=\"info\">\n                 {samples.length} \n                 <span\n                   onClick={() => setShowSamples(!showSamples)}\n                   className={showSamples ? \"samples-button selected\" : \"samples-button\"}\n                 >\n                   sounds\n                 </span>\n                 with this tag\n               </div>  :\n               <div className=\"info\">\n                 {samples.length} \n                 <span\n                   onClick={() => setShowSamples(!showSamples)}\n                   className={showSamples ? \"samples-button selected\" : \"samples-button\"}\n                 >\n                   sounds\n                 </span>\n                 from this source\n               </div>}\n              <div ref={ref} className=\"samples-from-source\">\n                {samplesToShow.map(\n                    (x, i) =>\n                        <SampleInfo\n                          thumbnail={thumbnails[x]}\n                          key={'sample-'+ i}\n                          onDragStart={(e) => onDragStart(x)}\n                          onMouseDown={() => onMouseDown(x)}\n                          position={i % 6}\n                          onMouseUp={() => onMouseUp(x)}\n                          sequencerEngine={track.sequencerEngine}\n                          annotations={annotations}\n                          onDragOver={(e) => e.stopPropagation()}\n                          onClickSample={() => onClickSample(x)}\n                          sampleId={x}\n                          sample={sample}/>\n                )}\n              </div>\n              <SampleTooltip/>\n            </div>\n        );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      pendingTransactions: state.transactions.pendingTransactions\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setSampleDragging: (sample) => dispatch(setSampleDragging(sample)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleExplorer);\n","import TrackThumbnail from \"components/TrackThumbnail.js\";\nimport UnsourcedFlow from './UnsourcedFlow.js';\nimport ContextualHelp from \"components/sidebar/ContextualHelpComponent.js\";\nimport SampleUsed from './SampleUsed.js';\nimport SaveNewSample from './SaveNewSample.js';\nimport Rating from './Rating.js';\nimport {SOUND_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport SynthBrowser from './SynthBrowser.js';\nimport SamplesBreadcrumb from './SamplesBreadcrumb.js';\nimport Colors from 'components/Colors.js';\nimport Waveform from 'components/Waveform.js';\nimport AnnotationEdit from \"components/explore/links/AnnotationEdit.js\"\nimport {SAMPLE_ANNOTATION} from 'constants/annotation-types.js';\nimport {WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport AudioUnit from 'engine/audio.js';\nimport TagsInfo from './TagsInfo.js';\nimport GoToSource from './GoToSource.js';\nimport CreatedBy from './CreatedBy.js';\nimport {SEQUENCER_VIEW} from \"constants/view-modes.js\";\nimport React, { useEffect, useCallback, useState} from 'react';\nimport DetailsView from 'components/DetailsView.js';\nimport {SAMPLER, SAMPLED_INSTRUMENT, MULTI_SYNTH} from \"constants/instrument-types.js\";\nimport {INSTRUMENT_RACK, MULTI_FREEZE} from \"constants/track-types.js\";\nimport SampleExplorer from './SampleExplorer.js';\nimport {connect} from 'react-redux';\nimport '../../SamplerBrowser.scss';\n\nconst colors = new Colors();\n\nconst SamplerBrowser = ({bottomMode, track, sequencerEngine, id, loaded, selectedInstrument, isFrozen}) => { \n    let [tagSelected, setTagSelected] = useState(undefined);\n    let [audioUnit, setAudioUnit] = useState(new AudioUnit());\n\n\n   useEffect(() => {\n        return () => audioUnit.dispose();\n    }, [audioUnit]);\n\n    if (track === undefined) {\n        return (\n           <div></div>\n        );\n    }\n\n    if (bottomMode === WAVEFORM && (\n        track.getTrackType() === SAMPLER ||\n            track.isFrozen ||\n            track.getTrackType() === MULTI_FREEZE)) {\n        return (\n            <DetailsView.DetailsView\n              showParameters={false}\n              hideKeyboard={false}\n              alreadyLoaded={true}\n              onGoBack={() => []}\n              keyboardEngine={sequencerEngine.keyboardEngine}\n              midiEngine={sequencerEngine.midi}\n              trackNumber={sequencerEngine.cursor.track}\n              resolution={sequencerEngine.resolution}\n              parentView={SEQUENCER_VIEW}\n              sequencerEngine={sequencerEngine}\n              bpm={sequencerEngine.bpm}\n              track={track}/>\n        );\n    }\n        \n    let sample = undefined\n    let subTrack = track;\n    let sampler= undefined;\n    let instrument = undefined;\n\n    if (track.getTrackType() === SAMPLER) {\n        sample = track.sample;\n        if (sample !== undefined) {\n            sampler = track.samplers[sample.getId()];\n        }\n    } else if (track.instrument && track.instrument.getInstrumentType() === SAMPLED_INSTRUMENT) {\n        sampler = track.selectedSampler || track.instrument.defaultSampler;\n        if (sampler) {\n            sample = sampler.sample;\n        }\n        instrument = track.instrument;\n    } else if (track.instrument && track.instrument.getInstrumentType() === MULTI_SYNTH) {\n        instrument = track.instrument;\n    } else if (track.instrument && track.getTrackType() === INSTRUMENT_RACK &&\n              track.tracks.length > 0) {\n        let t = selectedInstrument ? selectedInstrument.track : track.tracks[0].track;\n        if (t.instrument.getInstrumentType() === SAMPLED_INSTRUMENT) {\n            sampler = \n                t.selectedSampler || t.instrument.defaultSampler;\n            if (sampler !== undefined) {\n                sample = sampler.sample;\n                subTrack = t;\n            }\n        } else if (t.instrument.getInstrumentType() === MULTI_SYNTH) {\n            instrument = t.instrument;\n            subTrack = t;\n        }\n    };\n\n    if (instrument && !subTrack.isFrozen) {\n        return (\n            <SynthBrowser\n              type={instrument.getInstrumentType()}\n              tagSelected={tagSelected}\n              setTagSelected={setTagSelected}\n              synth={instrument}\n              track={subTrack}/>\n        );\n    }\n\n    if (sample === undefined ||\n        sample.audioBuffer === undefined ||\n        track.isFrozen) {\n        return (\n            <div>\n            </div>);\n    }\n\n    audioUnit.setBuffer(sample.audioBuffer);\n\n    let t = subTrack || track;\n    let color = colors.getColorForTrack(t);\n\n\n    return (\n        <div\n          className=\"sampler-browser\">\n          <div>\n            <TrackThumbnail \n              track={track}\n              sample={sample}\n              onClickThumbnail={() => []}\n              />\n            <Waveform\n              audioUnit={audioUnit}\n              sequencerEngine={sequencerEngine}\n              buffer={sample.audioBuffer}\n              id={sample.ipfsHash}\n              sample={sample}\n              width={100}\n              height={30}/>\n            <SamplesBreadcrumb sample={sample} track={subTrack}/>\n          </div>\n          <div className=\"sample-info\">\n            <div className=\"name-info\">\n              <div className=\"sample-name\">{truncateName(sample.name)}</div>\n              {sample.needsSave ? 'Not saved yet' : \n               <div>\n                 <CreatedBy content={sample}/>\n                 <GoToSource sample={sample}/>\n               </div>\n              }\n            </div>\n            <TagsInfo\n              tagSelected={tagSelected}\n              setTagSelected={setTagSelected}\n              content={sample}/>\n            <Rating\n              color={color}\n              content={sample.ipfsHash}\n              type={SOUND_RATED}/>\n          </div>\n          <div>\n            <UnsourcedFlow track={track} sample={sample}/>\n            <SampleUsed sequencerEngine={sequencerEngine} sample={sample}/>\n          </div>\n          {!sample.needsSave ? \n          <SampleExplorer\n            audioUnit={audioUnit}\n            setTagSelected={setTagSelected}\n            tagSelected={tagSelected}\n            track={subTrack}\n            sample={sample}/> \n           :\n           <SaveNewSample track={track} sample={sample}/>\n          }\n         <ContextualHelp sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nfunction truncateName(name) {\n    if (name === undefined) {\n        return \"\";\n    }\n    name = name.trim();\n    if (name.length > 40) {\n        return name.substring(0, 40) + '...';\n    }\n    return name;\n}\n\n\nconst mapStateToProps = (state, props) => {\n    let track = props.track;\n    if (track === undefined) {\n        return {\n            selectedInstrument: undefined,\n            loaded: false,\n        };\n    }\n    return {\n        playing: track.frozenColumns && track.frozenColumns[0].playing,\n        selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n        loaded: state.tracks.trackIsLoading[props.track.subSequence.id] &&\n            !state.tracks.trackIsLoading[props.track.subSequence.id][props.track.trackNumber],\n        isFrozen: track.isFrozen,\n        \n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SamplerBrowser);\n","import React, {useCallback, useEffect} from 'react';\nimport LFOTrackComponent from 'components/lfo/LFOTrackComponent.js';\nimport SamplerBrowser from \"components/installation/SamplerBrowser.js\"\nimport {WAVEFORM} from 'constants/arrangement-modes.js';\nimport DetailsView from 'components/DetailsView.js';\nimport {MIX_VIEW} from 'constants/view-modes.js';\nimport {SEQUENCER_VIEW} from 'constants/view-modes.js';\nimport AutomationToolbar from './AutomationToolbar.js';\nimport { connect } from \"react-redux\";\nimport {\n    SOUNDS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\nimport {setArrangementBottomResizing} from 'actions/index.js';\nimport {getEffectsComponent} from 'components/effects/getEffectsComponent.js';\nimport {PIANO_ROLL, EFFECTS} from 'constants/arrangement-modes.js';\nimport PianoRollComponent from 'components/pianoroll/PianoRollComponent.js';\n\nfunction ArrangementBottomContainer(props) {\n    let style = {\n        height: props.bottomHeight\n    };\n\n    let {sequencerEngine} = props;\n\n    const onMouseUp = useCallback(\n        () => {\n            props.setArrangementBottomResizing(false);\n        },\n        [props.setArrangementBottomResizing]);\n\n    let content = '';\n    let toolbar = '';\n    if (props.hide) {\n        return (\n            <div></div>\n        );\n    }\n    let track = undefined;\n    if (props.selectedTrack !== undefined && props.sequencerEngine.tracks) {\n        track = props.sequencerEngine.tracks[props.selectedTrack];\n\n        if (track) {\n            toolbar = (\n                <AutomationToolbar track={track} sequencerEngine={props.sequencerEngine}/>\n            );\n        }\n        if (track) {\n            if (props.bottomHeight > 25) {\n                content = (\n                    <PianoRollComponent\n                      parentClassName=\"arrangement-bottom-container\"\n                      isLooping={false}\n                      installation={true}\n                          sequencerEngine={props.sequencerEngine}\n                      hideToolbar={true}\n                      track={track}\n                    />);\n            }\n        }\n    } else {\n        //style.height = 0;\n    }\n\n    return (\n        <div\n          onMouseUp={onMouseUp}\n          style={style}\n          className=\"arrangement-bottom-container\">\n          {toolbar}\n          {content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let hide = false;\n    if (state.sequencer.sidebarCollapsed) {\n        hide = false;\n    } else if (\n        props.sequencerEngine.tracks && props.sequencerEngine.tracks.length === 0) {\n        hide = true;\n    }\n\n    if (state.sequencer.viewMode !== SEQUENCER_VIEW) {\n        // hide = true;\n    }\n \n    let track = props.sequencerEngine.tracks[state.mix.selectedTrack];\n    if (track && track.tracks && track.tracks[0]) {\n        track = track.tracks[0].track;\n    }\n    return {\n        track: track,\n        id: track === undefined ? 0 :\n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.presetName || track.getName(),\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n        bottomHeight:   state.arrangement.bottomHeight,\n        bottomMode: state.arrangement.bottomMode,\n        selectedRows: state.arrangement.selectedRows,\n        selectedTrack: state.mix.selectedTrack,\n        hide: hide,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementBottomContainer);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ZObjectComponent from \"components/zobject/ZObjectComponent.js\";\nimport {connect} from 'react-redux';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\";\nimport {\n    setViewableZObjects\n} from 'actions/index.js';\n\nconst ZObjectWindow = ({\n    containerRef,\n    setSize,\n    sizeRef,\n    setViewableZObjects,\n    zobject,\n    ordering,\n    setOrdering,\n    elements,\n    windowPosition\n}) => { \n    const ref = useRef();\n    const {windowScale, setWindowScale, onMouseDown, onMouseUp, style, startResizing} = useWindowManager({\n        sequencerEngine: zobject.sequencerEngine,\n        basicContainerRef: containerRef,\n        ref,\n        ordering,\n        setOrdering,\n        element: zobject.window,\n        setSize,\n        sizeRef,\n        elements,\n        windowPosition\n    });\n\n    let _style = {\n    };\n\n    if (windowPosition) {\n        _style.left = windowPosition.x;\n        _style.top = windowPosition.y;\n    }\n\n    const closeWindow = useCallback(() => {\n        let {viewableZObjects} = zobject.state.zobject;\n        setViewableZObjects(viewableZObjects.filter(\n            x => x !== zobject));\n    }, [zobject]);\n\n    return (\n        <div className=\"zobject-window\" style={style} ref={ref}>\n          <div\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}\n            className=\"zobject-header\">\n            <div onClick={closeWindow} className=\"delete-btn\">\n              x\n            </div>\n          </div>\n          <ZObjectComponent\n            scale={1}\n            elements={elements}\n            sequencerEngine={zobject.sequencerEngine}\n            ordering={ordering}\n            setOrdering={setOrdering}\n            isStatic={true}\n            customMode={false}\n            setSize={setSize}\n            sizeRef={sizeRef}\n            containerRef={ref}\n            zobject={zobject}\n          />\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      windowPosition: state.windows.windowPositions[props.zobject.window.id]\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setViewableZObjects: x => dispatch(setViewableZObjects(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectWindow);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RightSidebar from \"components/v3/sidebar/RightSidebar.js\"\nimport {connect} from 'react-redux';\nimport './subpatch-sidebar.scss';\n\nconst SubPatchSidebar = (props) => { \n    let [opened, setOpened] = useState(false);\n\n    useEffect(() => {\n        if (!props.selectedZObject) {\n            setOpened(false);\n        }\n    }, [props.selectedZObject, setOpened]);\n    return (\n        <div\n          style={{height: props.subpatch.height - 65}}\n          className={opened ? \"subpatch-sidebar opened\" : \"subpatch-sidebar\"}>\n        {!opened ?\n         (props.selectedZObject &&\n          props.selectedZObject.subSequence === props.subpatch && \n          <img className=\"pushable info-icon\" onClick={() => setOpened(true)} src=\"/info-icon.svg\"/>) :\n         <RightSidebar seauencerEngine={props.sequencerEngine}/>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      height: props.subpatch.height,\n      selectedZObject: state.zobject.selectedZObject\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setObjectDragging,\n    setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\nimport NestedZObject from \"components/v3/sidebar/NestedZObject.js\"\n\nconst ObjectTree = ({\n    setSelectedZObject,\n    setObjectDragging,\n    zobjects,\n    zmessages,\n    selectedZObject,\n    subpatch,\n}) => { \n\n    const onClickZObject = (obj) => {\n        setSelectedZObject(obj);\n    };\n\n    return (<div\n              style={{height: subpatch.height - 120, maxHeight: subpatch.height - 120}}\n              className=\"object-tree\">\n              {zmessages.map(\n                  x => <div\n                         draggable={true}\n                         onDragStart={(e) => {\n                             e.dataTransfer.setData('text/html', x.id); //cannot be empty string\n                             setObjectDragging(x);\n                         }}\n                         onDragOver={e => e.preventDefault()}\n                         key={x.id}\n                         onClick={() => setSelectedZObject(x)}\n                         className={x === selectedZObject ? \"selected zmessage\" : \"zmessage\"}>\n                         <img className=\"object-icon\" src={\n                             x.type === NUMBER ?\n                                 \"/znumber-light.svg\" : \"/zmessage-light.svg\"}\n                         /> {typeof x.storedMessage === \"string\" ?\n                             x.storedMessage : x.type === NUMBER ?\n                             \"Number\" : \"Message\"}\n                       </div>)}\n              {zobjects.map(\n                  x => <NestedZObject\n                         key={x.id}\n                         zobject={x}\n                         searchTerm={\"\"}\n                         setSelectedZObject={onClickZObject}\n                         setObjectDragging={setObjectDragging}\n                         selectedZObject={selectedZObject}/>)}\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      selectedZObject: state.zobject.selectedZObject,\n      zobjects: props.subpatch.zObjects,\n      zmessages: props.subpatch.zMessages,\n      objectDragging: state.zobject.objectDragging\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setObjectDragging: x => dispatch(setObjectDragging(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectTree);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ObjectTree from './ObjectTree.js';\nimport {connect} from 'react-redux';\n\nconst SubPatchObjectSidebar = ({subpatch}) => { \n    let [opened, setOpened ] = useState(false);\n    let className = \"subpatch-left-sidebar\";\n    if (opened) {\n        className += \" opened\"\n    }\n    return (<div className={className}>\n              <img\n                onClick={() => setOpened(!opened)}\n                src=\"/tree-icon.svg\" className=\"pushable tree-icon\"/>\n            {opened &&\n             <ObjectTree subpatch={subpatch}/>}\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      height: props.subpatch.height\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchObjectSidebar);\n","export const getParents = (subpatch) => {\n    let parents = [];\n    let zobject = subpatch.zObject;\n    while (zobject.subSequence && zobject.subSequence.zObject) {\n        parents.push(zobject.subSequence);\n        zobject = zobject.subSequence.zObject;\n   }\n    return parents;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setWindowPosition, setViewableSubPatches} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {getParents} from './getParents.js';\n\nconst SubPatchBreadcrumb = ({subpatch, setWindowPosition, setViewableSubPatches}) => { \n    let parents = getParents(subpatch);\n\n    const goTo = useCallback((_subpatch) => {\n        let {state} = subpatch.zObject.sequencerEngine;\n        let subpatches = state.zobject.viewableSubPatches.filter(\n            x => !parents.includes(x) && x !== subpatch);\n        let _parents = [... parents];\n        _parents.reverse();\n\n        let toAdd = [];\n\n        for (let s of _parents) {\n            toAdd.push(s);\n            if (s === _subpatch) {\n                break;\n            }\n        }\n\n        _subpatch.width = subpatch.width;\n        _subpatch.height = subpatch.height;\n        let position = state.windows.windowPositions[subpatch.id];\n        setWindowPosition(_subpatch.id, position);\n        setViewableSubPatches([... subpatches, ... toAdd]);\n    }, [parents, setViewableSubPatches, subpatch]);\n\n    return (\n        <div className=\"subpatch-breadcrumb\">\n          {parents.map(\n              (x) =>\n                  <div className=\"parent\">\n                    <div className=\"arrow-right\"/>\n                    <div onClick={() => goTo(x)} className=\"parent-name\">{x.zObject.args[0]}</div>\n                  </div>\n          )}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setWindowPosition: (id, x) => dispatch(setWindowPosition(id, x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchBreadcrumb);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {connect} from 'react-redux';\nimport {\n    setFullScreenZObject} from 'actions/index.js';\n\nconst SubPatchMenu = ({\n    setFullScreenZObject,\n    setEditLayout,\n    editLayout,\n    setCustomMode,\n    customMode,\n    subpatch,\n    presentationMode,\n}) => { \n    let [toggled, setToggled] = useState(false);\n\n    useEffect(() => {\n        if (!customMode) {\n            return;\n        }\n        if (presentationMode) {\n            setEditLayout(true);\n        } else {\n            setEditLayout(false);\n        }\n    }, [presentationMode, customMode]);\n    \n    const toggleCustom = useCallback(() => {\n        setEditLayout(!customMode);\n        subpatch.isCustom = !customMode;\n        setCustomMode(!customMode);\n    }, [customMode, setCustomMode, subpatch, setEditLayout]);\n\n    return (\n        <ButtonDropdown\n        className=\"subpatch-menu\"\n        show={toggled ? \"true\" : \"false\"}\n        isOpen={toggled}\n          toggle={() => setToggled(!toggled)}>\n        <DropdownToggle size=\"sm\" caret color=\"primary\">\n          Edit\n        </DropdownToggle>\n        <DropdownMenu>\n          {customMode && \n          <DropdownItem\n            onClick={() => setFullScreenZObject(subpatch.zObject)}\n           >\n            Full Screen\n          </DropdownItem>}\n          <DropdownItem\n            key=\"\"\n            onClick={toggleCustom}\n            size=\"sm\">\n            Instrument Mode\n            {customMode &&\n             <span className=\"small_checkmark\">\n               <div className=\"small_checkmark_stem\"></div>\n               <div className=\"small_checkmark_kick\"></div>\n             </span>}\n          </DropdownItem>\n        {customMode && <DropdownItem\n                         key=\"\"\n                         onClick={() => setEditLayout(!editLayout)}\n                         size=\"sm\">\n                         Edit Layout\n                         {editLayout &&\n                          <span className=\"small_checkmark\">\n                            <div className=\"small_checkmark_stem\"></div>\n                            <div className=\"small_checkmark_kick\"></div>\n                          </span>}\n                       </DropdownItem>}\n        </DropdownMenu>\n        </ButtonDropdown>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presentationMode: state.spatial.presentationMode\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchMenu);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {ChromePicker} from 'react-color';\n\nconst SubPatchColors = ({subpatch}) => { \n    let [fill, setFill] = useState({hex: subpatch.fillColor || \"#24273a\"});\n\n    useEffect(() => {\n        subpatch.fillColor = fill.hex;\n        console.log('ssetting to ', fill.hex);\n    }, [fill]);\n\n    let [showing, setShowing] = useState(undefined);\n    return (\n        <div className=\"subpatch-colors\">\n          <div\n            onClick={() => setShowing(showing ? undefined : \"fill\")}\n            style={{backgroundColor: fill.hex}} className=\"color-btn\"/>\n          {showing === \"fill\" &&\n           <ChromePicker color={fill} onChange={setFill}></ChromePicker>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchColors);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SubPatchSidebar from './SubPatchSidebar.js';\nimport SubPatchObjectSidebar from './SubPatchObjectSidebar.js';\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\";\nimport {segmentAllCables} from 'messaging/cables/segmentCables.js';\nimport {useSubPatchScroll} from './useSubPatchScroll.js';\nimport SubPatchBreadcrumb from './SubPatchBreadcrumb.js';\nimport {getParents} from './getParents.js';\nimport SubPatchMenu from 'components/subpatch/SubPatchMenu.js';\nimport ZObjectToolbar from \"components/pulled/ZObjectToolbar.js\";\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport SubPatchColors from './SubPatchColors.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport SubPatchContent from './SubPatchContent.js';\nimport {setModuleSize} from 'actions/index.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport {connect} from 'react-redux';\nimport {NW, NE, SW, SE} from 'components/windows/resize-types.js';\n\nimport {useWindowManager} from \"components/windows/useWindowManager.js\"\nimport \"../../subpatch.scss\";\nimport {setWindowPosition, setViewableSubPatches} from 'actions/index.js';\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\n\n\nconst SubPatch = ({\n    sizeRef,\n    ordering,\n    setOrdering,\n    elements,\n    setSize,\n    subpatch,\n    subPatches,\n    setViewableSubPatches,\n    setWindowPosition,\n    containerRef,\n    windowPosition,\n    backgroundColor,\n    presentationMode\n}) => { \n    let ref = useRef(undefined);\n    let contentRef = useRef(undefined);\n\n    let {arrangeWindows} = useArrangeWindows({elements, subSequence: subpatch, presentationMode});\n    const {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref: contentRef});\n    const dropdownPosRef = useRef(dropdownPos);\n    let [customMode, setCustomMode] = useState(subpatch.isCustom);\n    let [editLayout, setEditLayout] = useState(false);\n\n    const {windowScale, setWindowScale, onMouseDown, onMouseUp, style, startResizing} = useWindowManager({\n        sequencerEngine: subpatch.sequencerEngine,\n        basicContainerRef: containerRef,\n        ref,\n        ordering,\n        setOrdering,\n        element: subpatch,\n        setSize,\n        sizeRef,\n        elements,\n        windowPosition\n    });\n\n    let scrollRef = useRef();\n    useSubPatchScroll({subpatch, ref: scrollRef, size: windowScale, setSize: setWindowScale});\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onWheel);\n        return () => {\n            if (ref.current) {\n                ref.current.removeEventListener(\"mousewheel\", onWheel);\n            }\n        }\n    }, []);\n\n    const onWheel = (e) => {\n        e.stopPropagation();\n    };\n    \n    const onDoubleClickHeader = useCallback(() => {\n        let width = window.innerWidth;\n        let height = window.innerHeight;\n        if (subpatch.width + 100 > window.innerWidth &&\n            subpatch.height + 100 > window.innerHeight) {\n            width = 600;\n            height= 600;\n        } \n        subpatch.width = width;\n        subpatch.height = height;\n        setWindowScale({\n            x: width,\n            y: height\n        });\n        setWindowPosition(subpatch.id, {x: 0, y: 0});\n    }, [subpatch, setWindowScale]);\n\n    const onHeaderClick = useDoubleClick(onDoubleClickHeader);\n\n    let orderingRef = useRef(ordering);\n    useEffect(() => {\n        orderingRef.current = ordering;\n    }, [ordering]);\n\n    useEffect(() => {\n        return () => {\n            delete elements.current[subpatch.id];\n            setOrdering(orderingRef.current.filter(x => x !== subpatch));\n        };\n    }, []);\n    useEffect(() => {\n        if (dropdownPos) {\n            dropdownPosRef.current = dropdownPos;\n        }\n    }, [dropdownPos]);\n \n    const hideSubPatch = useCallback((e) => {\n        e.stopPropagation();\n        let parents = getParents(subpatch);\n        let _subPatches = subPatches.filter(x => x !== subpatch && !parents.includes(x));\n        setViewableSubPatches(_subPatches);\n    }, [subPatches]);\n\n    const deencapsulate = useCallback(() => {\n        subpatch.deencapsulate();\n    }, [subpatch]);\n\n    const createZMessage = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.createZMessage(x,y);\n    }, [subpatch]);\n\n    const createInlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newInlet(undefined, undefined, x,y);\n    }, [subpatch]);\n\n    const createInstanceInlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newInstanceInlet(undefined, undefined, x,y);\n    }, [subpatch]);\n\n    const createOutlet = useCallback(() => {\n        let {x,y} = dropdownPosRef.current;\n        subpatch.newOutlet(undefined, undefined, x, y);\n    }, [subpatch]);\n\n    const includeInPresentation = useCallback(() => {\n        let pulledElements = subpatch.sequencerEngine.state.windows.selectedElements;\n        let ids = Object.keys(pulledElements);\n        for (let id of ids) {\n            let node = subpatch.sequencerEngine.findNodeById(id);\n            if (node) {\n                node.setAttribute(\"Include in Presentation\", true);\n            }\n        }\n    }, [subpatch]);\n\n    let _style = {... style};\n    if (windowScale && windowScale.x > 0 && windowScale.y  > 0) {\n        _style.width = windowScale.x;\n        _style.height = windowScale.y;\n    }\n\n    if (windowPosition) {\n        _style.top = Math.min(window.innerHeight - 100, Math.max(0, windowPosition.y));\n        _style.left = windowPosition.x;\n    }\n    let zIndex = _style.zIndex + 1000000000;\n    _style.zIndex = zIndex;\n\n    let className = \"sub-patch no-select \" ;\n    if ((customMode && editLayout)) {\n        className += \" editing-layout-mode\";\n    }\n    if (ordering.indexOf(subpatch) === ordering.length - 1) {\n        className += \" top-window\";\n    }\n\n    const segment = useCallback(() => {\n        segmentAllCables(subpatch.sequencerEngine, subpatch);\n    }, [subpatch]);\n\n    const encapsulate = useCallback(() => {\n        subpatch.encapsulateObjects(dropdownPos.x, dropdownPos.y);\n    }, [dropdownPos]);\n\n    let _elements = subpatch.state.windows.selectedElements;\n    let selected = Object.keys(_elements).filter(x =>\n        _elements[x]);\n\n    _style.backgroundColor = backgroundColor;\n    return (\n        <div\n          onClick={e => {\n              console.log(\"SUB PATCH CLCIKED\");\n          }}\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          className={className} style={_style} ref={ref}>\n          <div\n            onMouseDown={(e) => startResizing(NW, e)}\n            className=\"top-left-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(NE, e)}\n            className=\"top-right-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(SW, e)}\n            className=\"bottom-left-edge\"/>\n          <div\n            onMouseDown={(e) => startResizing(SE, e)}\n            className=\"bottom-right-edge\"/>\n          <div onClick={onHeaderClick} className=\"sub-patch-header\">\n            {subpatch.zObject.args[0]}\n            <SubPatchBreadcrumb subpatch={subpatch}/>\n            <div\n              onMouseDown={e => e.stopPropagation()}\n              onClick={hideSubPatch}\n              className=\"delete-btn\">x</div>\n          </div>\n          <div\n            ref={contentRef}\n            onContextMenu={onContextMenu}\n            onMouseDown={(e) => {\n                e.stopPropagation();\n                setDropdownPos(undefined);\n            }}\n            className=\"sub-patch-content\">\n            <ContextMenu className=\"midi-context\" dropdownPos={dropdownPos ? {\n                x: dropdownPos.x,\n                y: dropdownPos.y} : undefined}>\n              {selected.length > 0 &&\n               <MenuItem\n                 onMouseDown={encapsulate}>\n                 Encapsulate Objects\n               </MenuItem>}\n              {selected.length > 0 && <MenuItem\n                                        onMouseDown={includeInPresentation}>\n                                        Include in Presentation\n                                        <img src=\"/presentation-mode.svg\"/>\n                                      </MenuItem>}\n              {selected.length > 0 &&\n               <MenuItem\n                 onMouseDown={arrangeWindows}>\n                 Pack Objects\n               </MenuItem>}\n              <MenuItem\n                onMouseDown={deencapsulate}>\n                De-encapsulate entire subpatch\n              </MenuItem>\n              <MenuItem\n                onMouseDown={createInlet}>\n                New Inlet \n              </MenuItem>\n              <MenuItem\n                onMouseDown={createOutlet}>\n                New Outlet \n              </MenuItem>\n              <MenuItem\n                onMouseDown={segment}>\n                Segment All Cables \n              </MenuItem>\n              <MenuItem\n                onMouseDown={createInstanceInlet}>\n                New Instance Inlet \n              </MenuItem>\n            </ContextMenu>\n            <ZObjectToolbar subpatch={subpatch} subSequence={subpatch}>\n              <SubPatchMenu\n                setEditLayout={setEditLayout}\n                editLayout={editLayout}\n                setCustomMode={setCustomMode}\n                customMode={customMode}\n                subpatch={subpatch}/>\n            </ZObjectToolbar>\n            <div className=\"content-and-sidebars\">\n              <SubPatchObjectSidebar\n                sequencerEngine={subpatch.sequencerEngine}\n                subpatch={subpatch}/>\n              <SubPatchContent\n                editLayout={editLayout}\n                scrollRef={scrollRef}\n                customMode={customMode}\n                subpatch={subpatch}/>\n              <SubPatchSidebar\n                sequencerEngine={subpatch.sequencerEngine}\n                subpatch={subpatch}/>\n            </div>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      presentationMode: state.spatial.presentationMode,\n      windowPosition: state.windows.windowPositions[props.subpatch.id],\n      backgroundColor: state.sequencer.backgroundColor\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setWindowPosition: (id, pos) => dispatch(setWindowPosition(id, pos)),\n      setViewableSubPatches: x => dispatch(setViewableSubPatches(x)),\n      setSize: x => dispatch(\n          setModuleSize(props.subpatch.id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatch);\n","import React, {useState, useEffect, useCallback} from 'react';\n\nexport const useSubPatchScroll = ({ref, subpatch, size, setSize}) => {\n    let [styleSize, setStyleSize] = useState(size);\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onWheel, {passive: false});\n        return () => {\n            if (ref && ref.current) {\n                ref.current.removeEventListener(\"mousewheel\", onWheel, {passive: false});\n            }\n        };\n    }, [styleSize, setStyleSize]);\n\n    const onWheel = useCallback((e) => {\n\n        if (new Date().getTime() - window.lastScrollTime < 1000) {\n            // e.preventDefault();\n            return false;\n        }\n        if (!ref || !ref.current) {\n            return false;\n        }\n\n        e.stopPropagation();\n        e.preventDefault();\n\n        let {scrollTop, scrollLeft} = ref.current;\n\n        let {deltaX, deltaY} = e;\n\n        let x = scrollLeft + deltaX;\n        let y = scrollTop + deltaY;\n\n        if (!size) {\n            return false;\n        }\n\n        let sx = 0;\n        let sy = 0;\n        size = {\n            width: Math.max(styleSize.width, window.innerWidth - sx),\n            height: Math.max(styleSize.height, window.innerHeight - sy)\n        };\n                \n        if (size.width < 200 || size.height < 200) {\n            return;\n        }\n        let _size = {width: deltaX + size.width, height: deltaY + size.height};\n        setStyleSize(_size);\n        //sizeRef.current = _size;\n        ref.current.scrollTo(x,y);\n        return false;\n    },[\n        styleSize,\n        setStyleSize,\n      ]);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport ZObjectWindow from './ZObjectWindow.js';\nimport {connect} from 'react-redux';\nimport SubPatch from './SubPatch.js';\n\nconst SubPatches = ({subPatches, zobjects, containerRef, fullScreenZObject}) => { \n    const elements = useRef({});\n    const {sizeRef, ordering, setOrdering} = useWindows();\n\n    let toHide = [];\n    for (let subpatch of subPatches) {\n        let {zObject} = subpatch;\n        if (subPatches.includes(zObject.subSequence)) {\n            // then we want to disclude the parent one\n            toHide.push(zObject.subSequence);\n        }\n    }\n    return [\n        zobjects.map(\n            zobject =>\n                <ZObjectWindow\n                  zobject={zobject}\n                  elements={elements}\n                  sizeRef={sizeRef}\n                  containerRef={containerRef}\n                  setSize={() => 0}\n                  ordering={ordering}\n                  setOrdering={setOrdering}/>\n        ),\n        subPatches\n            .filter(x => !fullScreenZObject || fullScreenZObject.effect !== x)\n            .filter(\n        x => !toHide.includes(x)).map(\n            x => <SubPatch\n                   key={x.id}\n                   sizeRef={sizeRef}\n                   ordering={ordering}\n                   setOrdering={setOrdering}\n                   elements={elements}\n                   subPatches={subPatches}\n                   subpatch={x}\n                   containerRef={containerRef}/>)\n        ];\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      subPatches: state.zobject.viewableSubPatches,\n      zobjects: state.zobject.viewableZObjects,\n      fullScreenZObject: state.zobject.fullScreenZObject\n  };\n\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatches);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {addEffect} from 'scripting/commands/effects.js';\nimport {connect} from 'react-redux';\nimport {getEffectPresets} from 'decentralized/effects/EffectPresets.js';\n\nconst EffectPresets = ({effect, sequencerEngine, matchedPresets}) => { \n    const [presets, setPresets] = useState([]);\n\n    useEffect(() => {\n        if (matchedPresets.length > 0) {\n            setPresets(matchedPresets);\n        } else {\n            getEffectPresets(effect).then(\n                p => setPresets(p));\n        }\n    }, [setPresets, effect, matchedPresets]);\n\n    const loadPreset = useCallback(async (e, preset) => {\n        e.stopPropagation();\n        let fx = addEffect(sequencerEngine, effect, undefined, undefined, true);\n        let json = await ipfs.getJson(preset.effectHash);\n        let trackNumber = sequencerEngine.cursor.track;\n        await fx.fromJson(json, sequencerEngine.tracks, trackNumber, true, false);\n        \n        if (fx.track && fx.track.loadLostParameters) {\n            fx.track.loadLostParameters();\n        }\n    }, [effect, sequencerEngine]);\n\n    return (\n        <div className=\"effect-presets\">\n          {presets.map(\n              preset =>\n                  <div\n                    onClick={(e) => loadPreset(e, preset)}\n                    className=\"preset-option\">\n                    {preset.title.trim()}\n                  </div>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectPresets);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {trim} from \"utils/trim.js\";\nimport EffectPresets from './EffectPresets.js';\nimport {addEffect} from 'scripting/commands/effects.js';\nimport {connect} from 'react-redux';\n\nconst EffectChoice = ({isSelected, effect, sequencerEngine, matchedPresets}) => { \n    const [isCollapsed, setIsCollapsed] = useState(matchedPresets.length === 0);\n    return (\n        <div\n          className={isSelected ? \"effect-option selected\" : \"effect-option\"}>\n          <div\n            className=\"inner\">\n            <div\n              onClick={(e) => {\n                  e.stopPropagation();\n                  setIsCollapsed(!isCollapsed);\n              }}\n              className=\"collapse-toggle\">\n              <div className={isCollapsed ? \"arrow-right\" : \"arrow-down\"}/>\n            </div>\n            <div\n              onClick={() => addEffect(sequencerEngine, effect)}\n              className=\"effect-name\">\n              {trim(effect)}\n            </div>\n          </div>\n          {!isCollapsed ? <EffectPresets\n                            matchedPresets={matchedPresets}\n                            sequencerEngine={sequencerEngine} effect={effect}/> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectChoice);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectChoice from './EffectChoice.js';\nimport {connect} from 'react-redux';\n\nconst EffectChoices = ({effects, sequencerEngine, selectedEffect}) => { \n    if (effects.length === 0) {\n        return [];\n    }\n    return (\n        <div className=\"effect-choices\">\n          {Object.keys(effects).map(\n              x =>\n                  <EffectChoice\n                    key={x}\n                    isSelected={x === selectedEffect}\n                    effect={x}\n                    matchedPresets={effects[x]}\n                    sequencerEngine={sequencerEngine}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectChoices);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst SidebarOptions = (props) => { \n    return (\n        <div className=\"sidebar-options\">\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarOptions);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport UnknownProgressBar from \"components/progressbar/UnknownProgressBar.js\";\nimport {connect} from 'react-redux';\nimport SamplesStreamExplorer from \"components/sidebar/SamplesStreamExplorer.js\";\n\nconst TIMEOUT = 700;\n\nconst SampleSearcher = ({searchText, sequencerEngine}) => { \n    let {auditionTrack} = sequencerEngine;\n    let counter = useRef(0);\n    let [stream, setStream] = useState(auditionTrack.samplesStream);\n    let [searching, setSearching] = useState(false);\n\n    useEffect(() => {\n        if (!searchText) {\n            return;\n        }\n        counter.current++;\n        setSearching(true);\n        let _counter = counter.current;\n        setTimeout(() => {\n            if (_counter !== counter.current) {\n                return;\n            }\n            sequencerEngine.searchForSounds([searchText], true, auditionTrack, false, false).then(\n                x => {\n                    setSearching(false);\n                    setStream(auditionTrack.samplesStream.sounds);\n                });\n        }, TIMEOUT);\n    }, [setStream, searchText, setSearching]);\n    \n    if (searching) {\n        return (<UnknownProgressBar text=\"Searching...\" width={230}/>);\n    }\n    return (<SamplesStreamExplorer track={auditionTrack} sequencerEngine={sequencerEngine}></SamplesStreamExplorer>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleSearcher);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    SOUNDS} from 'constants/sidebar-view-modes.js';\nimport {useScroll} from 'components/v2/useScroll.js';\nimport Colors from 'components/Colors.js';\nimport {setSidebarSearchInput} from 'actions/index.js';\nimport {\n    setShowPlugins,\n    setContextualHelp,\n    setSelectorMode,\n    setSidebarViewMode\n} from 'actions/index.js';\nimport {SIDEBAR_SEARCH} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport EffectChoices from './EffectChoices.js';\nimport {DEFAULT_TAGS} from './constants.js';\nimport {useSearcher} from './useSearcher.js';\nimport SidebarOptions from './SidebarOptions.js';\nimport {QUICK_ADD_BUTTON, QUICK_ADD_INSTRUMENT_BUTTON} from 'constants/contextual-help.js';\nimport {\n    setSelectedPianoRollSteps,\n    setArrangementBottomMode,\n    setShowPianoRoll,\n    setQuickAddSearchText,\n    setSampleTagDragging\n} from 'actions/index.js';\nimport {INFO} from 'constants/arrangement-modes.js';\nimport {connect} from 'react-redux';\nimport '../../QuickAdd.scss';\nimport SampleSearcher from \"components/audition/SampleSearcher.js\";\n\nconst RAINBOW = 80;\n\nconst colors = new Colors();\n\nconst QuickSampleChooser = (props) => { \n    const ref = useRef(undefined);\n    const [selectedTag, setSelectedTag] = useState(undefined);\n    const [selectedEffect, setSelectedEffect] = useState(undefined);\n    const scrollTags = useRef(undefined);\n    const [tags, setTags] = useState(DEFAULT_TAGS);\n    const [effects, setEffects] = useState({});\n\n    const [rainbow, setRainbow] = useState(0);\n\n    const {onChange, clear} = useSearcher({\n        setTags,\n        setEffects,\n        tags,\n        effects,\n        sequencerEngine: props.sequencerEngine,\n        searchText: props.searchText,\n        setSearchText: props.setSearchText,\n        selectedTag,\n        setSelectedTag,\n        selectedEffect,\n        setSelectedEffect,\n        ref\n    });\n\n    useEffect(() => {\n        props.setSidebarSearchInput(ref);\n    }, []);\n\n    const showBottom = () => {\n        props.setArrangementBottomMode(INFO);\n        props.setShowPianoRoll(true);\n    };\n\n    const addAudioTrack = useCallback(() => {\n        props.sequencerEngine.addAudioTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        props.sequencerEngine.tracks[props.sequencerEngine.tracks.length - 1].trackIsLoading = false;\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const addSynth = useCallback(() => {\n        props.sequencerEngine.addMultiSynthTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        props.sequencerEngine.tracks[props.sequencerEngine.tracks.length - 1].trackIsLoading = false;\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const addRack = useCallback(() => {\n        props.sequencerEngine.addInstrumentRackTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n\n    const addInstrument = useCallback(() => {\n        props.sequencerEngine.addSampledInstrumentTrack();\n        props.sequencerEngine.selectTrack(props.sequencerEngine.tracks.length - 1);\n        // showBottom();\n    }, [props.sequencerEngine]);\n\n    const openSelector = useCallback((tag) => {\n        if (tag) {\n            props.setSearchText(tag);\n        }\n        props.setSelectorMode(true);\n        props.setSidebarViewMode(\"SOUNDS\");\n    }, []);\n\n    let sampleClassName = \"quick-sample-chooser\";\n    let instClassName = \"quick-instrument-chooser\";\n    if (props.explorerMaximized || (props.selectedPianoRollSteps && props.selectedPianoRollSteps.filter(\n        x => x && x.group).length > 0)) {\n        sampleClassName += \" hide\";\n        instClassName += \" hide\";\n    }\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Tab') {\n            e.preventDefault();\n            openSelector();\n        }\n    }, []);\n    const onMouseDown = useCallback(() => {\n        props.setSelectedSteps(undefined);\n    }, []);\n\n    let isDark = false;\n    if (colors.getBrightness(props.backgroundColor) < 100) {\n        isDark = true;\n    }\n    let quickClassName = \"quick-actions\";\n    if (!props.selectedZObject && props.searchText !== \"\") {\n        quickClassName += \" no-zobject\";\n    }\n\n    if (props.sequencerEngine.tracks.length === 0 && props.searchText !== \"\") {\n        quickClassName += \" no-tracks\";\n    }\n\n    let tagsToShow = tags;\n    let track = props.sequencerEngine.getSelectedTrack();\n    if (props.selectedZObject) {\n        tagsToShow = {};\n    }\n    return (\n        <div onMouseDown={onMouseDown} className={quickClassName}>\n          <SidebarOptions/>\n          <Documented element={SIDEBAR_SEARCH} className=\"search-container\">\n            <input\n              ref={ref}\n              spellcheck=\"false\"\n              onKeyDown={onKeyDown}\n              className=\"quick-search\"\n              type=\"text\"\n              value={props.searchText}\n              placeholder=\"Search sounds\"\n              onChange={onChange}/>\n            <div className=\"clear-btn\" onClick={() => {\n                if (props.searchText === \"\") {\n                    if (props.hide) {\n                        props.hide();\n                    }\n                } else {\n                    clear();\n                }\n            }}>x</div>\n          </Documented>\n          <div\n            ref={scrollTags}\n            className={sampleClassName}>\n            {props.searchText !== \"\" ?\n             <SampleSearcher sequencerEngine={props.sequencerEngine} searchText={selectedTag}/> : \n             Object.keys(tagsToShow).map(\n                 (tag,i) => \n                 <Tag\n                   setSampleTagDragging={props.setSampleTagDragging}\n                   isRainbow={rainbow !== undefined && i < rainbow}\n                   i={i}\n                   key={tag}\n                   isDark={isDark}\n                   scrollTags={scrollTags}\n                   showBottom={showBottom}\n                   openSelector={openSelector}\n                   sequencerEngine={props.sequencerEngine}\n                   isSelected={tag === selectedTag}\n                   tag={tag}\n                   tags={tags[tag]}\n                 />)}\n          </div>\n          {/* {!props.selectedZObject && Object.keys(effects).length > 0 ? \n           <EffectChoices\n             selectedEffect={selectedEffect}\n             effects={effects}\n             sequencerEngine={props.sequencerEngine}/> : ''} */}\n          {!props.selectedZObject && (!props.searchText || props.searchText === \"\") &&\n           <div className={instClassName}>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={addSynth} className=\"add-synth-icon pushable\" src=\"/synth-icon.svg\"/>\n             </Documented>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={addAudioTrack} className=\"live-loop-icon pushable\" src=\"/live-loop-icon.svg\"/>\n             </Documented>\n             <Documented element={QUICK_ADD_INSTRUMENT_BUTTON} arg=\"Synth\">\n               <img onClick={() => props.setShowPlugins(true)} className=\"add-plugin-icon pushable\" src=\"/plugin-icon.svg\"/>\n             </Documented>\n           </div>}\n        </div>\n    );\n}\n\nconst Tag = ({isRainbow, i, isDark, openSelector, tag, scrollTags, tags, sequencerEngine, isSelected, setSampleTagDragging}) => {\n    let ref = useRef(undefined);\n    let [loading, setLoading] = useState(undefined);\n\n    useScroll({\n        scrollContainer: scrollTags,\n        trackRef: ref,\n        isSelected: isSelected,\n        offset: 0,\n        useClientBounds: true\n    });\n\n    const onClick = useCallback(async (e) => {\n        setLoading(true);\n        if (e.metaKey) {\n            return openSelector(tag);\n        }\n\n        if (tag === '?') {\n            // get a random sound \n            let c = sequencerEngine.ethereumCache;\n            let fields = c.getAllForField('TAG', 0, 5000);\n            let t = fields[Math.floor(Math.random() * fields.length)];\n            sequencerEngine.searchForSounds([t.value]);\n            return;\n        }\n\n        if (Array.isArray(tags)) {\n            let r = Math.floor(Math.random() * tags.length);\n            await sequencerEngine.searchForSounds(tags[r]);\n        } else {\n            await sequencerEngine.searchForSounds([tags]);\n        }\n        if (tags === \"breaks\") {\n            sequencerEngine.tracks[sequencerEngine.tracks.length - 1].warp();\n        }\n        setLoading(false);\n    }, [setLoading, tags]);\n\n    const onDragStart = () => {\n        if (Array.isArray(tags)) {\n            let r = Math.floor(Math.random() * tags.length);\n            setSampleTagDragging(tags[r]);\n        } else {\n            setSampleTagDragging([tags]);\n        }\n    };\n\n    let className = isSelected ? \"sample-chooser selected\" : \"sample-chooser\";\n\n    if (loading) {\n        className += \" flashit\";\n    }\n\n    let style = {\n    };\n\n    if (isRainbow) {\n        style.backgroundColor = 'hsl(' + (i / 8.0)*255 + ', 100%, 50%)';\n    }\n\n    if (isDark) {\n        className += \" dark\";\n    }\n\n    return (\n        <Documented className=\"pushable\" element={QUICK_ADD_BUTTON} arg={tag}>\n          <div\n            style={style}\n            ref={ref}\n            draggable={true}\n            onDragOver={(e) => e.preventDefault()}\n            onDragStart={onDragStart}\n            onClick={onClick}\n            className={className}>\n            <div\n              style={style}\n              className=\"tag-inner\">\n              {tag}\n            </div>\n          </div>\n        </Documented>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      backgroundColor: state.sequencer.backgroundColor,\n      selectedZObject: state.zobject.selectedZObject,\n      searchText: state.selector.quickAddSearchText,\n      //selectedPianoRollSteps: state.keyboard.selectedPianoRollSteps,\n      track: props.sequencerEngine.getSelectedTrack(),\n      explorerMaximized: state.selector.explorerMaximized\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x)),\n      setShowPianoRoll: x => dispatch(setShowPianoRoll(x)),\n      setArrangementBottomMode: x => dispatch(setArrangementBottomMode(x)),\n      setSampleTagDragging: x => dispatch(setSampleTagDragging(x)),\n      setSidebarSearchInput: (element) => dispatch(setSidebarSearchInput(element)),\n      setSelectorMode: m => dispatch(setSelectorMode(m)),\n      setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n      setSelectedSteps: m => dispatch(setSelectedPianoRollSteps(m)),\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(QuickSampleChooser);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SampleStreamOption from \"components/sidebar/SampleStreamOption.js\";\nimport {getBulkSampleInfo} from 'components/sidebar/getSamples.js';\nimport {\n    setQuickAddSearchText,\n} from 'actions/index.js';\nimport {getSoundResultsServer} from 'components/selector2/getSoundResults.js';\nimport {connect} from 'react-redux';\n\nlet counter=0;\nconst SourceSamples = ({\n    setSearchText,\n    track,\n    sample,\n    sequencerEngine,\n    selectedId\n}) => { \n    const scrollRef = useRef(undefined);\n    let loadingSample = useRef(loadingSample);\n    let [samples, setSamples] = useState([]);\n    useEffect(() => {\n        let sourceToSearch = undefined;\n\n        let searchTerm = \"\";\n        if ( sample.discogsId || (sample.videoId && sample.videoId !== \"\")) {\n            sourceToSearch  = sample.discogsId ? {releaseId: sample.discogsId} :\n            {videoId: sample.videoId};\n        } else {\n            searchTerm = sample.tags[0];\n        }\n\n        let _counter = ++counter;\n        getSoundResultsServer(\n            50, searchTerm, sample.guildId, 'tag', 0, false, sourceToSearch)\n            .then(\n                async results => {\n                    if (_counter !== counter) { return; }\n                    if (results.length === 0) {\n                        getSoundResultsServer(\n                            50, searchTerm, sample.guildId, 'tag', 0, false, sourceToSearch)\n                            .then(async (results) => {\n                                if (results.length === 0) {\n                                    return;\n                                }\n                                let ids = results.flatMap(x => x.results.map(x => x.ipfsHash));\n                                if (ids.length > 50) {\n                                    ids = ids.slice(0, 50);\n                                }\n                                let samples = await getBulkSampleInfo(ids, JSON.stringify(sourceToSearch));\n                                setSamples(samples);\n                            });\n                        return;\n                    }\n                    let ids = results.flatMap(x => x.results.map(x => x.ipfsHash));\n                    if (ids.length > 50) {\n                        ids = ids.slice(0, 50);\n                    }\n                    let samples = await getBulkSampleInfo(ids, JSON.stringify(sourceToSearch));\n                    setSamples(samples);\n                });\n    }, [sample, setSamples]);\n\n    const onClickTag = useCallback(async (tag, metaKey) => {\n        loadingSample.current = true;\n        setSearchText(\"\");\n        let tags=track.samplesStream.tags;\n        let _tags = [tag];\n        if (metaKey) {\n            _tags = [...tags, ..._tags];\n        }\n        await track.sequencerEngine.searchForSounds(\n            _tags, true, track, false);\n        loadingSample.current = false;\n    }, [track]);\n\n    let _samples = [...samples];\n    _samples.sort((a,b) => a.tags[0] && b.tags[0] && a.tags.join(',').localeCompare(b.tags.join(',')));\n\n    let _track = sequencerEngine.state.zobject.selectedZObject ?\n        sequencerEngine.getSelectedTrack() : sequencerEngine.auditionTrack;\n    return (\n        <div\n          onMouseDown={(e) => e.stopPropagation()}\n          ref={scrollRef} className=\"source-samples\">\n        {_samples.map(\n            sample => \n                <SampleStreamOption\n                  topOffset={150}\n                  scrollRef={scrollRef}\n                  key={sample.getId()}\n                  samples={samples}\n                  onClickTag={onClickTag}\n                  track={_track} //sequencerEngine.getSelectedTrack()}\n                  selected={selectedId === sample.getId()}\n                  id={sample.getId()} sample={sample} loadingSample={loadingSample} />)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let track = props.sequencerEngine.getSelectedTrack();\n  return {\n      track,\n      selectedId: track && track.sample && track.sample.getId(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceSamples);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst WIDTH = 400;\nconst HEIGHT = 400;\nconst VisualLink = ({setCoords, sample, coords= {x:0, y:0}}) => { \n    let [target, setTarget] = useState({x:0, y:0});\n    let parent = useRef(undefined);\n\n    useEffect(() => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { return; }\n        let rect = element.getBoundingClientRect();\n        setCoords({x : rect.left - WIDTH - 100, y: Math.min(window.innerHeight - 100 - HEIGHT, rect.top - HEIGHT/2)});\n    }, []);\n\n\n    useEffect(() => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { return undefined; }\n        let scroll = getParentScroll(element);\n        parent.current = scroll;\n        scroll.addEventListener(\"scroll\", calculatePts);\n        calculatePts();\n        return () => \n            scroll.removeEventListener(\"scroll\", calculatePts);\n    }, [sample, setTarget]);\n\n    const calculatePts = useCallback((e) => {\n        let element = document.getElementById('sample-option-' + sample.getId());\n        if (!element) { setTarget(undefined); return undefined; }\n        let rect = element.getBoundingClientRect();\n        let pRect = parent.current.getBoundingClientRect();\n        setTarget({\n            x : rect.left, y:\n            Math.min(parent.current.offsetHeight + pRect.top ,Math.max(pRect.top, rect.top))});\n    }, [sample, setTarget]);\n\n    if (!target) {\n        return 0;\n    }\n    return (\n        <svg className=\"visual-link\">\n          <linearGradient id=\"MyGradient\">\n            <stop offset=\"5%\" stopColor=\"#80808036\" />\n            <stop offset=\"95%\" stopColor=\"#80aaff36\" />\n          </linearGradient>\n          <polygon points={[\n              coords.x + WIDTH, coords.y,\n              coords.x + WIDTH, coords.y + HEIGHT,\n              target.x, target.y + 20,\n              target.x, target.y\n          ]}/>\n        </svg>);\n}\n\nconst getParentScroll = (e) => {\n    let parent = e.parentElement;\n    let i=0;\n    while (parent && ++i < 10) {\n        if (parent.className.includes(\"inner-explorer\")) {\n            return parent;\n        }\n        parent = parent.parentElement;\n    }\n    return parent;\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VisualLink);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setYearExploring,\n    setSourceExploring} from 'actions/index.js';\nimport SourceSamples from \"./SourceSamples.js\";\nimport Colors from 'components/Colors.js';\nimport {trim} from \"utils/trim.js\";\nimport VisualLink from './VisualLink.js';\nimport {useWindowManager} from 'components/windows/useWindowManager.js';\nimport {connect} from 'react-redux';\nimport ethereum from \"decentralized/ethereum.js\";\nimport '../../Xanadu.scss';\n\nconst colors = new Colors();\n\nconst SourceExploring = ({sequencerEngine, sourceExploring, setYearExploring, setSourceExploring}) => { \n    let ref = useRef(undefined);\n    let [styles, setStyles] = useState([]);\n\n    const {setCoords, onMouseUp, onMouseDown, coords} =\n          useWindowManager({ref});\n\n    useEffect(() => {\n        if (sourceExploring) {\n            ethereum.guildSamples.getStylesForSound(sourceExploring.getId())\n                .then(setStyles);\n        }\n    }, [sourceExploring, setStyles]);\n\n    if (!sourceExploring) { return []; }\n    let thumb = sourceExploring.getThumbnail();\n    return [\n        <div\n          key={1}\n          ref={ref}\n          onMouseUp={onMouseUp}\n          onMouseDown={onMouseDown}\n          style={coords ? {top: coords.y, left: coords.x} : {}} className=\"source-exploring no-select\">\n          <div onClick={() => setSourceExploring(undefined)} className=\"clear-btn\">x</div>\n          <div className=\"source-top\">\n            {thumb ?\n             <div className=\"cover-art\" style={{backgroundImage: 'url(' + thumb + ')'}}/> :\n             <div\n               style={{backgroundColor: colors.getColorForHash(sourceExploring.getId())}}\n               className=\"cover-art\"/>}\n            <div className=\"source-info\">\n              <div className=\"release-name\">\n                {sourceExploring.releaseName === \"\" ?\n                 trim(sourceExploring.name) : trim(sourceExploring.releaseName)}\n              </div>\n              <div className=\"artist-name\">\n                {trim(sourceExploring.artistName)}\n              </div>\n              <div\n                onClick={() => setYearExploring(sourceExploring.year)}\n                className=\"release-year\">\n                {sourceExploring.year !== 0 && sourceExploring.year}\n              </div>\n              <div className=\"styles\">\n                {styles.map(x => <span key={x}>{x}</span>)}\n              </div>\n            </div>\n          </div>\n          <SourceSamples\n            sequencerEngine={sequencerEngine}\n            sample={sourceExploring}/>\n        </div>,\n        <VisualLink key={2} setCoords={setCoords} coords={coords} sample={sourceExploring}/>\n    ];\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      sourceExploring: state.selector.sourceExploring\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSourceExploring: x => dispatch(setSourceExploring(x)),\n      setYearExploring: x => dispatch(setYearExploring(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceExploring);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport ethereum from \"decentralized/ethereum.js\";\nimport BackendQuery from \"decentralized/BackendQuery.js\";\nimport GuildSamplesContract from \"decentralized/contracts/GuildSamplesContract.js\";\nimport {getBulkSampleInfo} from 'components/sidebar/getSamples.js';\nimport {SampleYear} from \"decentralized/EthereumEvents.js\"\nimport {getSoundResultsServer} from 'components/selector2/getSoundResults.js';\nimport SampleStreamOption from \"components/sidebar/SampleStreamOption.js\";\nimport {\n    setYearExploring,\n    setSourceExploring} from 'actions/index.js';\nimport {useWindowManager} from \"components/windows/useWindowManager.js\";\nimport {connect} from 'react-redux';\n\nconst YearExploring = ({\n    selectedId,\n    setYearExploring,\n    year,\n    sequencerEngine\n}) => { \n    const ref = useRef(undefined);\n    const scrollRef  = useRef(undefined);\n    const loadingSample = useRef(false);\n\n    const [samples, setSamples] = useState([]);\n    const {onMouseDown, onMouseUp, coords, setCoords} = useWindowManager({ref});\n\n    useEffect(() => {\n        let elements = document.getElementsByClassName(\"source-exploring\");\n        if (elements.length === 0) { return; }\n\n        let el = elements[0];\n        setCoords({\n            x: el.offsetLeft - 450,\n            y: el.offsetTop\n        });\n    }, [year, setCoords]);\n    useEffect(() => {\n        if (!year) {\n            return;\n        }\n        ethereum.getGuildsWithAccess()\n            .then(guildIds => \n                  new BackendQuery(new GuildSamplesContract().contractAddress)\n                  .from(SampleYear)\n                  .select(\"ipfsHash\")\n                  .where(\"year\", year)\n                  .whereIn(\"guildId\", guildIds)\n                  .executeQuery()\n                  .then(async results => {\n                      let ids = Array.from(new Set(results.map(x => x.ipfsHash)));\n                      let samples = await getBulkSampleInfo(ids, year);\n                      setSamples(samples);\n                  }));\n                         \n    }, [setSamples, year]);\n\n    if (!year) { return []; };\n\n    let _track = sequencerEngine.state.zobject.selectedZObject ?\n        sequencerEngine.getSelectedTrack() : sequencerEngine.auditionTrack;\n    return (\n        <div\n          className=\"year-exploring no-select\"\n          style={coords ? {left: coords.x, top: coords.y} : {}}\n          onMouseDown={onMouseDown}\n          onMouseUp={onMouseUp}\n          ref={ref} >\n          <div onClick={() => setYearExploring(undefined)} className=\"clear-btn\">x</div>\n          <div className=\"year\">\n            {year}\n            <div className=\"year-chooser\">\n              <div onClick={() => setYearExploring(year+1)} className=\"arrow-up\"/>\n              <div onClick={() => setYearExploring(year-1)} className=\"arrow-down\"/>\n            </div>\n          </div>\n          <div\n            onMouseDown={(e) => e.stopPropagation()}\n            ref={scrollRef} className=\"source-samples\">\n            {samples.map(\n            sample => \n                <SampleStreamOption\n                  topOffset={20}\n                  scrollRef={scrollRef}\n                  key={sample.getId()}\n                  samples={samples}\n                  onClickTag={() => []}\n                  track={_track}\n                  selected={selectedId === sample.getId()}\n                  id={sample.getId()} sample={sample} loadingSample={loadingSample} />)}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let track = props.sequencerEngine.getSelectedTrack();\n  return {\n      year: state.selector.yearExploring,\n      selectedId: track && track.sample && track.sample.getId(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSourceExploring: x => dispatch(setSourceExploring(x)),\n      setYearExploring: x => dispatch(setYearExploring(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(YearExploring);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport SourceExploring from './SourceExploring.js';\nimport YearExploring from './YearExploring.js';\nimport '../../Xanadu.scss';\n\n\nexport default ({sequencerEngine, sourceExploring, setSourceExploring}) => { \n    return [\n        <SourceExploring sequencerEngine={sequencerEngine}/>,\n        <YearExploring sequencerEngine={sequencerEngine}/>,\n    ];\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ResolutionDropdown from 'components/toolbar/ResolutionDropdown.js';\nimport {setQuantized} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst StepActions = ({setQuantized, quantized, track, color}) => { \n    const addSteps = useCallback(() => {\n        track.sequencerEngine.doubleTrackLength(track.trackNumber);\n    }, [track]);\n    const removeSteps = useCallback(() => {\n        track.sequencerEngine.halfTrackLength(track.trackNumber);\n    }, [track]);\n\n    const toggleQuantize = useCallback(() => {\n        setQuantized(!quantized);\n    }, [quantized]);\n\n    let style = {\n        backgroundColor: color\n    };\n\n    let quantizedStyle = {\n        borderColor: color\n    };\n\n    return (\n        <div className=\"step-actions\">\n          <ResolutionDropdown sequencerEngine={track.sequencerEngine}/>\n          <div\n            style={quantizedStyle}\n            onClick={toggleQuantize}\n            className={quantized ? \"quantized quantize-button\" : \"quantize-button\"}>\n              {quantized ? 'Quantized' : 'Unquantized'}\n          </div>\n          <div style={style} onClick={addSteps} className=\"add-steps-btn\">+</div>\n          <div style={style} onClick={removeSteps} className=\"remove-steps-btn\">-</div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      quantized: state.sequencer.quantized,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setQuantized: quantized => dispatch(setQuantized(quantized)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepActions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TracksOverview from \"components/sidebar/TracksOverview.js\"\nimport {MULTI_FREEZE, SAMPLER, INSTRUMENT, INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {SAMPLED_INSTRUMENT, MULTI_SYNTH} from 'constants/instrument-types.js';\nimport {MODE_TO_HEIGHT, WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {\n    setShowPianoRoll,\n    setArrangementBottomMode,\n} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst Modes = ({track, setBottomMode, bottomMode, isFrozen, setShowPianoRoll}) => { \n    const [showQuickTracks, setShowQuickTracks] = useState(false);\n\n    let hasSampler = track.getTrackType() === SAMPLER ||\n        track.getTrackType() === MULTI_FREEZE ||\n        isFrozen;\n    let hasPiano = track.getTrackType() !== MULTI_FREEZE;\n    let hasInfo = track.getTrackType() === SAMPLER;\n    let t = track;\n    if (track.getTrackType() === INSTRUMENT_RACK &&\n        track.tracks.length > 0){\n        t = track.tracks[0].track;\n    }\n\n    if (t.getTrackType() === INSTRUMENT && t.instrument) {\n        if (t.instrument.getInstrumentType() === SAMPLED_INSTRUMENT ||\n            t.instrument.getInstrumentType() === MULTI_SYNTH\n           ) {\n            hasInfo = true;\n        }\n    }\n    if (t.isFrozen) {\n        hasInfo = false;\n    }\n\n    useEffect(() => {\n        if (isFrozen) {\n            setBottomMode(WAVEFORM);\n        }\n    }, [isFrozen]);\n\n    let nameStyle = {\n        color: colors.getColorForTrack(track)\n    };\n\n    return (\n        <div\n          onMouseLeave={() => setShowQuickTracks(false)}\n          className=\"modes\">\n          <div\n            onClick={() => setShowQuickTracks(!showQuickTracks)}\n            style={nameStyle} className={showQuickTracks ? \"toolbar-track-name show\" : \"toolbar-track-name\"}>\n            {truncate(track.presetName || track.getName())}\n            {showQuickTracks ?\n             <TracksOverview showName={true} mode={bottomMode} sequencerEngine={track.sequencerEngine}/> : ''}\n          </div>\n          {hasInfo ? \n           <Mode track={track} option={INFO}\n                 selectedOption={bottomMode}\n                 name={track.getTrackType() === INSTRUMENT ? \"Presets\" : \"Info\"}\n                 setBottomMode={setBottomMode}/> : ''}\n          {hasSampler ? \n           <Mode track={track} option={WAVEFORM} selectedOption={bottomMode}\n                 name=\"Waveform\" setBottomMode={setBottomMode}/>\n           : ''}\n          {hasPiano ? \n           <Mode track={track} option={PIANO_ROLL} selectedOption={bottomMode}\n                 name=\"Piano\" setBottomMode={setBottomMode}/> : ''}\n        </div>);\n}\n\nconst Mode = ({option, name, selectedOption, setBottomMode, track}) => {\n    let className = \"mode\";\n    if (option === selectedOption) {\n        className += \" selected\";\n    }\n\n    let style = {\n    };\n    if (selectedOption === option) {\n        style.borderBottomWidth = 4;\n        style.borderBottomStyle = 'solid';\n        style.borderBottomColor = colors.getColorForTrack(track);\n    } else {\n    }\n\n    return (\n        <div\n          style={style}\n          onClick={() => setBottomMode(option)}\n          className={className}>\n          {name}\n        </div>\n    );\n};\n\nconst truncate = (name) => {\n    if (name.length > 40) {\n        return name.slice(0, 40) + '...';\n    }\n    return name;\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      bottomMode: state.arrangement.bottomMode,\n      isFrozen: props.track && props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setBottomMode: (bottomMode) =>\n          dispatch(setArrangementBottomMode(bottomMode)),\n      setShowPianoRoll: (show) =>\n          dispatch(setShowPianoRoll(show)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Modes);\n","import React, {useState, useCallback, useEffect} from 'react';\nimport AutomationParameterDropdowns from 'components/automation/AutomationParameterDropdowns.js';\nimport {getParameterName} from 'utils/getParameterName.js';\nimport StepActions from './StepActions.js';\nimport Modes from './Modes.js';\nimport {MODE_TO_HEIGHT, WAVEFORM, PIANO_ROLL, INFO} from 'constants/arrangement-modes.js';\nimport {getParametersWithAutomation} from 'parameters/getParametersWithAutomation.js';\nimport {MACROS_EFFECT} from 'effects/live/constants.js';\nimport Dropdown from 'react-dropdown';\nimport { connect } from \"react-redux\";\nimport {INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementBottomResizing,\n    setBottomToolbarOffset,\n    setShowAutomation,\n    setShowPianoRoll,\n    setArrangementBottomHeight,\n    setTrackAutomationParameter,\n    setTrackAutomationRackDevice,\n    setTrackAutomationDevice,\n    setTrackAutomationSubDevice,\n       } from 'actions/index.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\nconst DOUBLE_CLICK_TIME = 300;\nconst MIN_HEIGHT = 50;\n\nfunction AutomationToolbar(props) {\n    let {track, selectedDevice, subDevice, selectedParameter, selectedRackDevice} = props;\n   let parametersWithAutomation = getParametersWithAutomation(track);\n\n    useEffect(() => {\n        if (props.hideAutomation) {\n            props.setShowAutomation(false);\n        }\n    }, [props.hideAutomation]);\n\n    /**\n     * Device -> Sub Device -> Parameter\n     * Rack -> Device -> Sub Device -> Parameter\n     */\n    const onParameterClicked = useCallback((e, parameter) =>  {\n        e.stopPropagation();\n        if (props.showAutomation && parameter === selectedParameter) {\n            return props.setShowAutomation(false);\n        }\n        props.setShowAutomation(true);\n        props.setTrackAutomationParameter(parameter);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationDevice,\n        props.setTrackAutomationRackDevice,\n        props.showAutomation\n    ]);\n                                          \n    const [lastClick, setLastClick] = useState(undefined);\n    const onMouseDown = useCallback((e) => {\n        let el = document.getElementsByClassName(\"toolbar-resizer\")[0];\n        let y = e.clientY - el.getBoundingClientRect().top;\n\n        props.setBottomOffset(y);\n        props.setArrangementBottomResizing(true);\n        // props.setArrangmentBottomResizingOffset(e.clientX);\n        let now = new Date().getTime();\n        if (lastClick !== undefined) {\n            if (now - lastClick <= DOUBLE_CLICK_TIME) {\n                if (props.hide) {\n                    return props.hide();\n                }\n                if (props.sequencerEngine.store.getState().arrangement.bottomHeight <= MIN_HEIGHT) {\n                    props.setArrangementBottomHeight(MODE_TO_HEIGHT[PIANO_ROLL]);\n                } else {\n                    props.setShowPianoRoll(false);\n                }\n            }\n        }\n        setLastClick(now);\n    }, [lastClick, setLastClick]);\n\n    const automationIcon = props.showAutomation ?\n          \"/automation-icon-enabled.png\" : \n          \"/automation-icon-disabled.png\";\n    const dropdownClassName = props.showAutomation ?\n          \"dropdowns\" : \"dropdowns disabled\";\n\n    let color = colors.getColorForTrack(props.track);\n    let style ={\n    };\n\n    if (props.bottomMode !== PIANO_ROLL && !props.hideAutomation) {\n        // then we shouldn't show those dropdowns, just a basic ass toolbar\n        return (\n            <div\n              style={style}\n              className=\"automation-toolbar\">\n              <div className=\"toolbar-container\">\n                <Modes id={props.id} track={track}/>\n                <div\n                  onMouseDown={onMouseDown}\n                  onMouseUp={() => props.setArrangementBottomResizing(false)}\n                  className=\"toolbar-resizer\"\n                >\n                  <div\n                    onMouseDown={(e) => {\n                        e.stopPropagation();\n                        if (props.hide) {\n                            props.hide();\n                        } else {\n                            props.setShowPianoRoll(false);\n                        }\n                        props.setArrangementBottomResizing(false);\n                    }}\n                    className=\"collapse-toggle bottom-shower\">\n                    <div className=\"arrow-down\">\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n        );\n    }\n\n    let toggleContent = (\n        <div\n          onMouseDown={(e) => {\n              e.stopPropagation();\n              if (props.hide) {\n                  props.hide();\n              } else {\n                  props.setShowPianoRoll(false);\n              }\n              props.setArrangementBottomResizing(false);\n          }}\n          className=\"bottom-shower collapse-toggle\">\n                <div className=\"arrow-down\"/>\n        </div>);\n    \n    return (\n        <div\n          style={style}\n          className=\"automation-toolbar\">\n          <div className=\"toolbar-container\">\n             <Modes id={props.id} track={track}/>\n            <div\n              onMouseDown={onMouseDown}\n              onMouseUp={() => props.setArrangementBottomResizing(false)}\n              className=\"toolbar-resizer\"\n            >\n              {!props.hideAutomation ? toggleContent : ''}\n            </div>\n          </div>\n          <div className=\"toolbar-container rest-toolbar\">\n            {!props.hideAutomation ? \n            <AutomationParameterDropdowns track={track} sequencerEngine={props.sequencerEngine}/>\n             : ''}\n            {!props.hideAutomation ? \n             <img\n                className=\"automation-icon\"\n                src={automationIcon} onClick={() => props.setShowAutomation(!props.showAutomation)}/>\n             : ''}\n              <div\n                onMouseDown={onMouseDown}\n                onMouseUp={() => props.setArrangementBottomResizing(false)}\n                className=\"toolbar-resizer automation-parameters\"\n                >\n                {parametersWithAutomation.map(\n                    parameter =>\n                        <div\n                          onMouseDown={(e) => onParameterClicked(e, parameter)}\n                          style={props.showAutomation && selectedParameter === parameter ?\n                                 {\n                                     backgroundColor: color,\n                                     color: 'black'} :\n                                 {}}\n                          className=\"parameter-button\">{getParameterName(parameter)}</div>)}\n              </div>\n            <StepActions color={color} track={track}/>\n            {props.hideAutomation ? toggleContent : ''}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    if (props.track) {\n        let track = props.track;\n        if (track && track.tracks && track.tracks[0]) {\n            track = track.tracks[0].track;\n        }\n\n        return {\n            id: track === undefined ? 0 :\n                track.sample !== undefined && track.sample.getId() !== undefined ?\n                track.sample.getId() : track.presetName || track.getName(),\n            numEffects: props.track.effects && props.track.effects.length,\n            selectedDevice: state.automation.trackDevice[props.track.id],\n            subDevice: state.automation.trackSubDevice[props.track.id],\n            selectedParameter: state.automation.trackParameter[props.track.id],\n            showAutomation: state.automation.show,\n            selectedRackDevice: state.automation.trackRackDevice[props.track.id],\n            selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n            bottomMode: state.arrangement.bottomMode\n        };\n    }\n    return {};\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setTrackAutomationParameter: (parameter) =>\n            dispatch(setTrackAutomationParameter(props.track.id, parameter)),\n        setShowPianoRoll: (show) =>\n            dispatch(setShowPianoRoll(show)),\n        setTrackAutomationDevice: (device) =>\n            dispatch(setTrackAutomationDevice(props.track.id, device)),\n        setTrackAutomationRackDevice: (device) =>\n            dispatch(setTrackAutomationRackDevice(props.track.id, device)),\n        setTrackAutomationSubDevice: (device) =>\n            dispatch(setTrackAutomationSubDevice(props.track.id, device)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setShowAutomation: (show) =>\n            dispatch(setShowAutomation(show)),\n        setBottomMode: (bottomMode) =>\n            dispatch(setArrangementBottomMode(bottomMode)),\n        setBottomOffset: (bottomOffset) =>\n            dispatch(setBottomToolbarOffset(bottomOffset))\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationToolbar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {legato, rollSteps} from \"pattern/utils/legato.js\";\nimport {ungroupSteps, groupSteps} from \"pattern/groups/stepGroups.js\";\nimport ConditionedCheckmark from 'components/ConditionedCheckmark.js';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {connect} from 'react-redux';\nimport {\n    setStepsGroupMode\n} from 'actions/index.js';\n\nconst StepsButton = ({selectedSteps, track, setGroupMode, groupMode}) => { \n    let [toggled, setToggled] = useState(false);\n\n    const onClickGroupSteps = useCallback(() => {\n        groupSteps(selectedSteps, track);\n    }, [selectedSteps]);\n\n    const onClickUngroup  = useCallback(() => {\n        ungroupSteps(selectedSteps);\n    }, [selectedSteps]);\n\n    const onClickRollSteps = useCallback(() => {\n        rollSteps(track, selectedSteps);\n    }, [selectedSteps]);\n\n    const onClickLegatoSteps = useCallback(() => {\n        legato(track, selectedSteps);\n    }, [selectedSteps]);\n\n    if (!selectedSteps || selectedSteps.length === 0) {\n        return [];\n    }\n\n    return (\n        <ButtonDropdown\n          className=\"steps-dropdown\"\n          show={toggled ? \"true\" : \"false\"}\n          isOpen={toggled}\n          toggle={() => setToggled(!toggled)}>\n          <DropdownToggle size=\"sm\" caret color=\"primary\">\n            {selectedSteps.length} steps\n          </DropdownToggle>\n          <DropdownMenu>\n            <DropdownItem\n              onClick={() => setGroupMode(!groupMode)}\n              size=\"sm\">\n              Groups Mode \n              <ConditionedCheckmark\n                className=\"group-checkmark\"\n                condition={groupMode}/>\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickGroupSteps}\n              size=\"sm\">\n              Group Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickUngroup}\n              size=\"sm\">\n              Un-group Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickLegatoSteps}\n              size=\"sm\">\n              Legato Steps\n            </DropdownItem>\n            <DropdownItem\n              onClick={onClickRollSteps}\n              size=\"sm\">\n              Roll Steps\n            </DropdownItem>\n         </DropdownMenu>\n        </ButtonDropdown>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      groupMode: state.groups.stepsGroupMode\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setGroupMode: (x) => dispatch(setStepsGroupMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepsButton);\n","import React, { useState, useEffect , useCallback} from 'react';\nimport StepsButton from \"components/sidebar/StepsButton.js\";\nimport StepGroupEditor from \"components/sidebar/StepGroupEditor.js\";\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport FavoriteButton from \"components/FavoriteButton.js\";\nimport Documented from \"components/help/Documented.js\";\nimport {BROWSE_SOUNDS} from 'constants/contextual-help.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport ChokesAndMatches from './ChokesAndMatches.js';\nimport { connect } from \"react-redux\";\nimport {\n    updateStepParameter,\n} from 'operations/actions.js';\n\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {SAMPLER} from 'constants/instrument-types.js';\nimport {\n    setParametersToRecord,\n} from 'actions/index.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nclass TrackQuickView extends React.Component {\n    constructor(props) {\n        super(props);\n\n        let track = props.sequencerEngine.tracks[props.selectedTrack];\n        if (track) {\n            let trackData = track.trackData;\n            this.state = {\n                selectedParameter: trackData.durationParameter,\n                value: trackData.durationParameter.value,\n            }\n        } else {\n            this.state = {};\n        }\n\n        this.state.loading = false;\n    }\n\n    onMouseUp() {\n        this.props.setParametersToRecord([]);\n    }\n\n    getTrackData(props) {\n        if (props.sequencerEngine.tracks === undefined) {\n            return undefined;\n        }\n        let track = props.sequencerEngine.tracks[props.selectedTrack];\n        if (track === undefined) {\n            return undefined;\n        }\n        return track.trackData;\n    }\n\n    get track() {\n        return this.props.sequencerEngine.tracks[this.props.selectedTrack];\n    }\n\n    getThumbnail() {\n        let thumbnail = undefined;\n        let style = {};\n        if (this.track.sample) {\n            thumbnail = this.track.sample.getThumbnail();\n\n            if (thumbnail !== undefined && thumbnail !== '') {\n                return (\n                    <img className=\"mini-thumbnail\" src={thumbnail}/>\n                );\n            }\n            \n            style['backgroundColor'] = \n                colors.getColorForHash(this.track.sample.getId());\n        } else {\n            style['backgroundColor'] = colors.getColorForHash(this.track.presetName || this.track.getName());\n        }\n\n        return (\n            <div className=\"mini-thumbnail\" style={style}></div>\n        );\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (this.getTrackData(nextProps) !== this.getTrackData(this.props) ||\n            nextProps.id !== this.props.id ) {\n            let selectedParameter = this.state.selectedParameter;\n\n            let trackData = this.getTrackData(nextProps);\n            if (selectedParameter === undefined) {\n                if (trackData !== undefined) {\n                    selectedParameter = trackData.durationParameter;\n                } \n            }\n\n            if (trackData === undefined) {\n                return true;\n            }\n\n            if (selectedParameter.name === 'Duration') {\n                this.state.selectedParameter = (trackData.durationParameter);\n            } else if (selectedParameter.name === 'Attack') {\n                this.state.selectedParameter = (trackData.attackParameter);\n            } else if (selectedParameter.name === 'Release') {\n                this.state.selectedParameter = (trackData.releaseParameter);\n            } else if (selectedParameter.name === 'Transpose') {\n                this.state.selectedParameter = (trackData.transposeParameter);\n            } else if (selectedParameter.name === 'Velocity') {\n                this.state.selectedParameter = (trackData.velocityParameter);\n            } else {\n                this.state.selectedParameter = (trackData.durationParameter);\n            }\n            this.state.value = this.state.selectedParameter.value;\n        }\n        return true;\n    }\n\n    get gangMode() {\n        return this.props.selectedSteps && this.props.selectedSteps.length > 0;\n    }\n\n    chooseParameter(parameter) {\n        this.setState({\n            selectedParameter: parameter,\n            value: parameter.value,\n        });\n    }\n\n    onUpdateParameter(value) {\n        if (this.gangMode) {\n            let parametersToUpdate = [];\n            let steps = [];\n            for (let step of this.props.selectedSteps) {\n                steps.push(step);\n                parametersToUpdate = [\n                    ... parametersToUpdate,\n                    ... step.parameters.filter(\n                        x => x.name === this.state.selectedParameter.name)\n                ];\n            }\n            let track = this.props.sequencerEngine.tracks &&\n                this.props.sequencerEngine.tracks[this.props.selectedTrack];\n            parametersToUpdate.forEach(\n                (param, i) => \n                    this.props.sequencerEngine.operationManager.dispatch(\n                        updateStepParameter(\n                            track,\n                            steps[i],\n                            param,\n                            value),\n                        false,\n                        true));\n            track.updateSteps();\n            this.setState({\n                value: value\n            });\n        } else {\n            this.state.selectedParameter.value = value;\n            this.setState({\n                value: value\n            });\n            this.props.setParametersToRecord([this.state.selectedParameter]);\n        }\n    }\n\n    async nextSample() {\n        this.setState({loading: true});\n        await this.track.auditionNext(true);\n        this.setState({loading: false});\n    }\n\n    async previousSample() {\n        this.setState({loading: true});\n        await this.track.auditionPrevious();\n        this.setState({loading: false});\n    }\n\n    getValue() {\n        if (this.gangMode && this.props.selectedSteps[0]) {\n            let step = this.props.selectedSteps[0];\n            let param = step.parameters.find(x => x.name === this.state.selectedParameter.name);\n            return !param || param.get() === null ? this.state.selectedParameter.value :\n                param.get();\n        } else {\n            return this.state.selectedParameter.value;\n        }\n    }\n        \n    render() { \n        let props = this.props;\n        let track = props.sequencerEngine.tracks && props.sequencerEngine.tracks[props.selectedTrack];\n        let selectedParameter = this.state.selectedParameter;\n        if (props.selectedTrack === undefined || track === undefined ||\n            selectedParameter === undefined) {\n            return (\n                <div></div>\n            );\n        }\n        let trackData = track.trackData;\n        let min = getMin(selectedParameter, trackData);\n        let max = getMax(selectedParameter, trackData);\n\n        let showGangButton = this.props.selectedSteps &&\n            this.props.selectedSteps.length > 0;\n        \n        let favoriteButton = '';\n        if (track &&\n            track.preset &&\n            track.preset.contentHash) {\n            favoriteButton = (\n                <FavoriteButton\n                  contentHash={track.preset.contentHash}\n                  type={PRESET_RATED}\n                />);\n        } else if (track && track.sample) {\n            favoriteButton = (\n                <FavoriteButton\n                  contentHash={track.sample.getId()}\n                  type={SOUND_RATED}\n                />);\n        }\n\n        let groups = !this.props.selectedSteps ? [] :\n            Array.from(new Set(this.props.selectedSteps.map(s => s && s.group).filter(s => s)));\n        return (\n            <div\n              onMouseLeave={() => this.onMouseUp()}\n              onMouseUp={() => this.onMouseUp()}\n              className=\"track-quick-view\">\n              <div className=\"name-component\">\n                {this.getThumbnail()}\n                <div className=\"name-label\">{this.track.presetName || this.track.getName()}</div>\n                <PulseLoader\n                    sizeUnit={\"px\"}\n                    size={10}\n                    color={'#123abc'}\n                    loading={this.state.loading}\n                    />\n                {favoriteButton}\n                <Documented className=\"sample-arrows\" element={BROWSE_SOUNDS}>\n                  <i onClick={() => this.previousSample()} className=\"left\"></i>\n                  <i onClick={() => this.nextSample()} className=\"right\"></i>\n                </Documented>\n              </div>\n              <div className=\"parameter-options\">\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.durationParameter)}\n                  selected={selectedParameter === trackData.durationParameter}\n                  isCirklonSelected={trackData.durationParameter.name === this.props.cirklonParameterSelected}\n                  name=\"Dur.\"/>\n                  <ParameterOption\n                    onClick={() => this.chooseParameter(trackData.transposeParameter)}\n                    isCirklonSelected={trackData.transposeParameter.name === this.props.cirklonParameterSelected}\n                    selected={selectedParameter === trackData.transposeParameter}\n                    name=\"Trsp.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.attackParameter)}\n                  isCirklonSelected={trackData.attackParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.attackParameter}\n                  name=\"Atk.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.releaseParameter)}\n                  isCirklonSelected={trackData.releaseParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.releaseParameter}\n                  name=\"Rel.\"/>\n                <ParameterOption\n                  onClick={() => this.chooseParameter(trackData.velocityParameter)}\n                  isCirklonSelected={trackData.velocityParameter.name === this.props.cirklonParameterSelected}\n                  selected={selectedParameter === trackData.velocityParameter}\n                  name=\"Vel.\"/>\n                <ParameterValue\n                  value={this.getValue()}\n                />\n              </div>\n              <div\n                className=\"track-slider-container\"\n                onMouseLeave={() => this.onMouseUp()}\n                >\n                <ReactBootstrapSlider\n                  value={parseFloat(this.getValue())}\n                  change={(e) => this.onUpdateParameter(e.target.value)}\n                  step={selectedParameter.name === \"Transpose\" ? 1 : 0.01}\n                  max={max}\n                  min={min}\n                  orientation=\"horizontal\"\n                  reversed={false}\n                  />\n                <StepsButton track={track} selectedSteps={this.props.selectedSteps}/>\n              </div>\n              {groups.map(group => <StepGroupEditor\n                                     track={track}\n                                     key={group.id} sequencerEngine={this.props.sequencerEngine} group={group}/>)}\n            </div>\n        );\n    }\n}\n\nfunction ParameterValue(props) {\n    return (\n        <div\n          className=\"parameter-value\">{props.value}\n        </div>\n    );\n}\n\nfunction ParameterOption(props) {\n    let className = 'parameter-option';\n    if (props.selected) {\n        className += ' selected';\n    }\n\n    if (props.isCirklonSelected) {\n        className += ' cirklon-selected';\n    }\n\n \n    return (\n        <div\n          onClick={props.onClick}\n          className={className}>{props.name}</div>\n    );\n}\n\nfunction getMin(parameter, trackData) {\n    if (parameter === trackData.durationParameter) {\n        return 0.01;\n    } else {\n        return parameter.min;\n    }\n}\n\nfunction getMax(parameter, trackData) {\n    if (parameter === trackData.durationParameter ) {\n        return 4;\n    } else if (parameter === trackData.attackParameter) {\n        return 100;\n    } else if (parameter === trackData.releaseParameter) {\n        return 400;\n    }\n    return parameter.max;\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n    }\n};\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let currentSubSequence = state.sequencer.currentSubSequence[id];\n    let currentPattern = state.sequencer.currentPattern[currentSubSequence] || 0;\n\n    let track = props.sequencerEngine.tracks && props.sequencerEngine.tracks[state.mix.selectedTrack];\n    return {\n        id: track === undefined ? 0 :\n            track.presetName ? track.presetName : \n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.getName(),\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n        currentPattern: currentPattern,\n        currentSubSequence: currentSubSequence,\n        selectedTrack: state.mix.selectedTrack,\n        selectedSteps: state.keyboard.selectedPianoRollSteps,\n        cirklonParameterSelected: state.steps.cirklonParameterSelected,\n        stepGroups: state.steps.stepGroups\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickView);\n\n","import BackendQuery from 'decentralized/BackendQuery.js';\nimport {\n    SampleInSequence,\n    TokenizedSequenceEdited\n} from 'decentralized/EthereumEvents.js';\nimport TokenizedSequencesContract from 'decentralized/contracts/TokenizedSequencesContract.js';\n\nconst contractAddress = new TokenizedSequencesContract().contractAddress;\n\nexport const getProjectsUsed = async (id) => {\n    let query = new BackendQuery(contractAddress)\n        .from(SampleInSequence)\n        .select(\"sequenceHash\")\n        .where(\"sampleHash\", id);\n\n    let results = await query.executeQuery();\n    let hashes = results.map(x => x.sequenceHash);\n\n    query = new BackendQuery(contractAddress)\n        .from(TokenizedSequenceEdited)\n        .select(\"title\")\n        .select(\"newSequence\")\n        .whereIn(\"newSequence\", hashes);\n\n    return await query.executeQuery();\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {MACROS_EFFECT} from 'effects/live/constants.js';\nimport Dropdown from 'react-dropdown';\nimport {getParametersWithAutomation} from 'parameters/getParametersWithAutomation.js';\nimport {connect} from 'react-redux';\nimport {INSTRUMENT_RACK} from 'constants/track-types.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementBottomResizing,\n    setBottomToolbarOffset,\n    setShowAutomation,\n    setShowPianoRoll,\n    setArrangementBottomHeight,\n    setTrackAutomationParameter,\n    setTrackAutomationRackDevice,\n    setTrackAutomationDevice,\n    setTrackAutomationSubDevice,\n       } from 'actions/index.js';\n\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst AutomationParameterDropdowns = (props) => { \n    let {track, selectedDevice, subDevice, selectedParameter, selectedRackDevice} = props;\n    let deviceOptions = track.getTrackType() === INSTRUMENT_RACK ?\n        []:\n        [\n            {value: null, label: \"None\"},\n            {value: track, label: \"Track\"}\n        ];\n    let rackOptions = [];\n    let subDeviceOptions = [];\n\n    let parametersWithAutomation = getParametersWithAutomation(track);\n\n    /**\n     * Device -> Sub Device -> Parameter\n     * Rack -> Device -> Sub Device -> Parameter\n     */\n    const onParameterClicked = useCallback((e, parameter) =>  {\n        e.stopPropagation();\n        if (props.showAutomation && parameter === selectedParameter) {\n            return props.setShowAutomation(false);\n        }\n        props.setShowAutomation(true);\n        props.setTrackAutomationParameter(parameter);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationDevice,\n        props.setTrackAutomationRackDevice,\n        props.showAutomation\n    ]\n                                         );\n\n    useEffect(() => {\n        if (props.selectedInstrument) {\n            onChangeRackDevice(props.selectedInstrument);\n        }\n    }, [props.selectedInstrument, onChangeRackDevice]);\n\n    useEffect(() => {\n        let parameter = selectedParameter;\n        if (!parameter) {\n            return;\n        }\n        if (parameter.context.subDevice) {\n            // its a rack parameter\n            props.setTrackAutomationDevice(\n                parameter.context.instrument || parameter.context.effect || parameter.context.midiEffect);\n            // was this the right choice?\n            // props.setTrackAutomationRackDevice(parameter.context.subDevice);\n            props.setTrackAutomationSubDevice(parameter.context.subDevice);\n        } else if (parameter.context.midiEffect || parameter.context.effect) {\n            props.setTrackAutomationDevice(parameter.context.midiEffect || parameter.context.effect);\n        }  else {\n            props.setTrackAutomationSubDevice(parameter.context.instrument);\n        }\n        props.setTrackAutomationParameter(parameter);\n    }, [selectedParameter]);\n\n\n    if (track.getTrackType() === INSTRUMENT_RACK) {\n        rackOptions = [\n            {label: \"None\", value: null},\n            {label: \"Track\", value: track},\n            ... track.getSubDevices()\n        ];\n        rackOptions = addMacroDeviceOptions(rackOptions, track);\n    }\n\n    if (selectedRackDevice && selectedRackDevice.track) {\n        track = selectedRackDevice.track;\n    }\n\n    if (track.instrument && track.getTrackType() !== INSTRUMENT_RACK) {\n        deviceOptions.push({value: track.instrument, label: \"Instrument\"});\n    }\n\n    deviceOptions = addMacroDeviceOptions(deviceOptions, track);\n\n\n    if (track.effects) {\n        deviceOptions = [\n            ... deviceOptions,\n            ... track.effects.map(\n                x => getDeviceOption(x)),\n            ... track.midiEffects.effects.map(\n                x => getDeviceOption(x))];\n    }\n\n    /*\n    for (let i in props.sequencerEngine.lfos) {\n        let lfo = props.sequencerEngine.lfos[i].lfo;\n        deviceOptions.push({value: lfo, label: lfo.name});\n    }\n    */\n\n    let parameterOptions = [];\n    if (track.effects && selectedDevice && selectedDevice.parameters) {\n        if (subDevice && selectedDevice.getSubDevices) {\n            if (subDevice.trackNumber !== undefined && subDevice.instrument) {\n                subDevice = subDevice.instrument;\n            }\n            parameterOptions = getParametersForDevice(subDevice, props.isMix)\n                .map(x => getParameterOption(x));\n        } else {\n            parameterOptions = getParametersForDevice(selectedDevice, props.isMix)\n                .map(x => getParameterOption(x));\n        }\n\n        if (selectedDevice.getSubDevices) {\n            subDeviceOptions = selectedDevice.getSubDevices();\n        }\n   }\n\n\n    for (let i in parameterOptions) {\n        let parameter = parameterOptions[i].value;\n        let automations = props.isMix ?\n            parameter.mixAutomation.automations :\n            parameter.automations;\n        if (automations.length > 0) {\n            parameterOptions[i].className = \"has-automations\";\n        }\n    }\n\n    const onChangeRackDevice = useCallback((value) => {\n        console.log(\"on change rack device =\", value);\n        props.setTrackAutomationRackDevice(value);\n        if (!value) {\n            console.log(\"clearing all this shit\");\n            props.setTrackAutomationDevice(null);\n            props.setTrackAutomationSubDevice(null);\n            props.setTrackAutomationParameter(undefined);\n            return;\n        }\n\n        if (value.macroParameter) {\n            props.setTrackAutomationDevice(value);\n            return;\n        }\n\n        let deviceOptions = getDeviceOptionsForTrack(value.track ? value.track : value);\n        let deviceToChoose = deviceOptions[0].value;\n        if (selectedDevice) {\n            let dev = deviceOptions\n                .filter(({value}) => value)\n                .find(({value}) =>\n                      value.name === selectedDevice.name);\n            if (dev) {\n                deviceToChoose = dev.value;\n            }\n        }\n\n        if (!deviceToChoose) {\n            deviceToChoose = value;\n        }\n        props.setTrackAutomationDevice(deviceToChoose);\n        let parameters = getParametersForDevice(deviceToChoose, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [selectedDevice, selectedParameter]);\n\n    const onChangeDevice = useCallback((value) => {\n        props.setTrackAutomationDevice(value);\n        if (!value) {\n            props.setTrackAutomationDevice(null);\n            props.setTrackAutomationSubDevice(null);\n            props.setTrackAutomationParameter(undefined);\n            return;\n        }\n        if (value.getSubDevices && value.getSubDevices().length > 0) {\n            let subDevice = value.getSubDevices()[0].value;\n            props.setTrackAutomationSubDevice(subDevice);\n            value = subDevice;\n        }\n        let parameters = getParametersForDevice(value, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [\n        selectedParameter,\n        props.setTrackAutomationParameter,\n        props.setTrackAutomationSubDevice,\n        props.setTrackAutomationDevice]);\n\n    const onChangeSubDevice = useCallback((value) => {\n        props.setTrackAutomationSubDevice(value);\n        let parameters = getParametersForDevice(value, props.isMix);\n        if (selectedParameter) {\n            let parameterWithName = parameters.find(\n                p => p.name === selectedParameter.name);\n            if (parameterWithName) {\n                props.setTrackAutomationParameter(parameterWithName);\n                return;\n            }\n        }\n        props.setTrackAutomationParameter(parameters[0]);\n    }, [selectedParameter]);\n\n    const getSubDeviceOption = useCallback((value) => {\n        let option = subDeviceOptions.find(opt => opt.value === value);\n        return option;\n    }, [subDeviceOptions]);\n\n    const automationIcon = props.showAutomation ?\n          \"/automation-icon-enabled.png\" : \n          \"/automation-icon-disabled.png\";\n    let dropdownClassName = props.showAutomation ?\n          \"dropdowns\" : \"dropdowns disabled\";\n\n    let color = colors.getColorForTrack(props.track);\n    let style ={\n    };\n\n    if (track.getTrackType() === INSTRUMENT_RACK) {\n        if (!selectedRackDevice) {\n            dropdownClassName += \" non-selected rack-dropdown\";\n        }\n    } else {\n        if (!selectedDevice) {\n            dropdownClassName += \" non-selected\";\n        }\n    }\n\n  return (\n      <div className={dropdownClassName}>\n        {rackOptions.length > 0 ?\n         <Dropdown\n           onMouseDown={(e) => e.stopPropagation()}\n           options={rackOptions}\n           onChange={(o) => onChangeRackDevice(o.value)} \n           value={getDeviceOption(selectedRackDevice, true)}\n           placeholder=\"Rack Device\" />\n         : ''}\n        {selectedRackDevice === track ?\n         '' : \n        <Dropdown\n          onMouseDown={(e) => e.stopPropagation()}\n          controlClassName=\"device-dropdown\"\n          options={deviceOptions}\n          onChange={(o) => onChangeDevice(o.value)} \n          value={getDeviceOption(selectedDevice)}\n          placeholder=\"Device\" />}\n        {selectedRackDevice !== track && subDeviceOptions.length > 0 ?\n         <Dropdown\n          controlClassName=\"sub-device-dropdown\"\n           onMouseDown={(e) => e.stopPropagation()}\n           options={subDeviceOptions}\n           onChange={(o) => onChangeSubDevice(o.value)} \n           value={getSubDeviceOption(subDevice)}\n           placeholder=\"Sub Device\" /> : ''}\n        <Dropdown\n          controlClassName=\"parameter-dropdown\"\n          onMouseDown={(e) => e.stopPropagation()}\n          options={parameterOptions}\n          onChange={(o) => props.setTrackAutomationParameter(o.value)}\n          value={getParameterOption(selectedParameter)}\n          placeholder=\"Parameter\" />\n      </div>);\n}\n\nconst getDeviceOption = (device, isRack) => device && ({\n    label: device.trackNumber !== undefined && !device.instrumentRack ?\n        \"Track\" :\n        device.instrumentRack && !isRack ? \"Instrument\" :\n        device.presetName || device.name || (device.getName && device.getName()) ,\n    value: device});\nconst getParameterOption = (parameter) => parameter && ({label: parameter.prettyName, value: parameter});\n\nconst getParametersForDevice = (device, isMix=false) => {\n    let parameters = device.parameters\n        .filter(x => isMix ? x.mixAutomation.automations : x.automations);\n    parameters.sort(\n        (a,b) => isMix ?\n            b.mixAutomation.automations.length - a.mixAutomation.automations.length : \n            b.automations.length - a.automations.length);\n    return parameters.filter(\n        x =>\n            x.automatable &&\n            x.uxAutomatable &&\n            !x.isMapped &&\n            x.name !== 'enabled' && x.name !== 'Configuration');\n};\n\nconst addMacroDeviceOptions = (deviceOptions, track) => {\n    // do we have a macro effect?\n    let macrosEffect = track.liveEffects.effects.find(\n        e => e.effect === MACROS_EFFECT);\n\n    if (!macrosEffect) {\n        return deviceOptions;\n    }\n\n    let macroOptions = [];\n    for (let i in macrosEffect.macros) {\n        let macro = macrosEffect.macros[i];\n        if (macro.subMacros.length > 0) {\n            macroOptions.push({\n                    label: macro.name,\n                    value: macro\n            });\n        }\n    }\n\n    return [... deviceOptions, ...macroOptions];\n};\n\n\nconst getDeviceOptionsForTrack= (track) => {\n    let deviceOptions = [];\n    if (track.instrument && track.getTrackType() !== INSTRUMENT_RACK) {\n        deviceOptions.push({value: track.instrument, label: track.instrument.name});\n    }\n\n    deviceOptions = [\n        {label: \"None\", value: null},\n        ... deviceOptions,\n        ... track.effects.map(\n            x => getDeviceOption(x)),\n        ... track.midiEffects.effects.map(\n            x => getDeviceOption(x))];\n\n    return deviceOptions;\n};\n\nconst mapStateToProps = (state, props) => {\n    if (props.track) {\n        let track = props.track;\n        if (track && track.tracks && track.tracks[0]) {\n            track = track.tracks[0].track;\n        }\n\n        return {\n            id: track === undefined ? 0 :\n                track.sample !== undefined && track.sample.getId() !== undefined ?\n                track.sample.getId() : track.presetName || track.getName(),\n            numEffects: props.track.effects && props.track.effects.length,\n            selectedDevice: state.automation.trackDevice[props.track.id],\n            subDevice: state.automation.trackSubDevice[props.track.id],\n            selectedParameter: state.automation.trackParameter[props.track.id],\n            showAutomation: state.automation.show,\n            selectedRackDevice: state.automation.trackRackDevice[props.track.id],\n            selectedInstrument: state.tracks.selectedRackSubTrack[props.track.id],\n            bottomMode: state.arrangement.bottomMode\n        };\n    }\n    return {};\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setTrackAutomationParameter: (parameter) =>\n            dispatch(setTrackAutomationParameter(props.track.id, parameter)),\n        setShowPianoRoll: (show) =>\n            dispatch(setShowPianoRoll(show)),\n        setTrackAutomationDevice: (device) =>\n            dispatch(setTrackAutomationDevice(props.track.id, device)),\n        setTrackAutomationRackDevice: (device) =>\n            dispatch(setTrackAutomationRackDevice(props.track.id, device)),\n        setTrackAutomationSubDevice: (device) =>\n            dispatch(setTrackAutomationSubDevice(props.track.id, device)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setShowAutomation: (show) =>\n            dispatch(setShowAutomation(show)),\n        setBottomMode: (bottomMode) =>\n            dispatch(setArrangementBottomMode(bottomMode)),\n        setBottomOffset: (bottomOffset) =>\n            dispatch(setBottomToolbarOffset(bottomOffset))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AutomationParameterDropdowns);\n","export const getParametersWithAutomation =\n    (track) => {\n        let params = track.trackData ? track.getAllParameters()\n            .filter(x => x.automations)\n            .filter(x => x.automations.length > 0) : [];\n        return Array.from(new Set(params));\n    };\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Colors from 'components/Colors.js';\nimport {newTransformation} from 'pattern/groups/stepGroups.js';\nimport TransformationEditor from \"components/sidebar/TransformationEditor.js\";\nimport {connect} from 'react-redux';\nimport '../../StepGroup.scss';\n\nconst colors = new Colors();\n\nconst StepGroupEditor = ({group, sequencerEngine, track}) => { \n    let [transformations, setTransformations] = useState(group.transformations);\n\n    const onClickNew = useCallback(() => {\n        newTransformation(group);\n        setTransformations([... group.transformations]);\n    }, [setTransformations, group]);\n\n    let style = {\n        backgroundColor: colors.getColorForHash(group.id)\n    };\n    return (\n        <div className=\"step-group-editor\">\n          <div className=\"group-header\">\n            <div style={style} className=\"group-thumb\"/>\n            <div className=\"group-name\">\n              {group.name}\n            </div>\n            <div onClick={onClickNew} className=\"new-transform-btn\">+</div>\n          </div>\n          {transformations.map(\n              transformation =>\n                  <TransformationEditor\n                    key={transformation.id}\n                    track={track}\n                    sequencerEngine={sequencerEngine}\n                    transformation={transformation}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StepGroupEditor);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {useScrollTo} from './useScrollTo.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport PresetIcon from \"components/installation/getPresetStyle.js\";\nimport {FILTER_BY_DAY, FILTER_BY_DAY_TAG} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport {\n    setCurrentTagInList,\n    setSampleTagDragging,\n    setSamplesDragging} from 'actions/index.js';\nimport {formatDate} from './formatDate.js';\nimport Colors from 'components/Colors.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport {connect} from 'react-redux';\nconst colors = new Colors();\nwindow.tran2 = 0.6;\nwindow.tran = 0.3;\n\nconst Day = ({\n    results,\n    searchTerm,\n    onClickDay,\n    isCurrent,\n    onClickSource,\n    number,\n    filterFavorites,\n    setCurrentTagInList,\n    sourceToSearch,\n    setSamplesDragging,\n    setSourceToSearch,\n    setSampleTagDragging,\n    scrollRef,\n}) => { \n    let ref = useRef(undefined);\n    let [dayResults, setDayResults] = useState(results);\n    let {tag,  blockNumber, instrumentTypes, discogs, youtube, unsourced, totalResults} = dayResults || {};\n    let [date, setDate] = useState(undefined);\n    let [toggled, setToggled] = useState(tag === \"\" || searchTerm !== \"\" || sourceToSearch);\n\n    useEffect(() => {\n        if (results) {\n            setDayResults(results);\n        }\n    }, [results, setDayResults]);\n\n    useEffect(() => {\n        if (searchTerm !== \"\") {\n            setToggled(true);\n        }\n    }, [searchTerm, setToggled]);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n\n    let text = tag !== \"\" ? tag : date ? formatDate(date) : \"\";\n    let style = {\n        backgroundColor: colors.transparent(colors.saturate(colors.getColorForHash(text), 1.2), window.tran2)\n    };\n\n    let ratio = Math.pow(totalResults / 30.0, 0.5);\n    if (!toggled) {\n        style.opacity = ratio;\n    }\n\n    useEffect(() => {\n        if (unsourced) {\n            setToggled(true);\n        }\n    }, [unsourced, setToggled]);\n\n    const onClick= useCallback(() => {\n        setCurrentTagInList(number);\n        if (toggled) {\n            onClickDay(dayResults, tag);\n        } else {\n            if (unsourced) {\n                setToggled(true);\n            } else {\n                // need to get results\n                getSoundResultsServer(\n                    50,\n                    searchTerm, 0, \"tag\", 0, filterFavorites, undefined, tag)\n                    .then((r) => {\n                        console.log('results gotten for tag=', tag);\n                        setDayResults(r[0]);\n                    });\n            }\n        }\n    }, [\n        onClickDay,\n        results,\n        tag,\n        toggled,\n        setToggled,\n        setDayResults,\n        unsourced,\n        dayResults,\n        number,\n        filterFavorites]);\n\n    useScrollTo({ref, scrollRef, isCurrent, expanded: toggled});\n\n    useEffect(() => {\n        if (isCurrent) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        }\n        return () => isCurrent && window.removeEventListener(\"keydown\", onKeyDown);\n    }, [isCurrent, onClickDay, results, tag, toggled, setToggled, setDayResults, unsourced, dayResults, number]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter') {\n            onClick();\n        }\n    }, [isCurrent, onClickDay, results, tag, toggled, setToggled, setDayResults, unsourced, dayResults, number]);\n\n    let className = \"day\";\n    if (toggled) {\n        className += \" day toggled\";\n    }\n    if (toggled && (!discogs || !unsourced || !youtube)) {\n        console.log(\"RETURNNING toggled=%s\", toggled, dayResults, results, discogs, unsourced, youtube);\n        return [];\n    }\n    if (isCurrent) {\n        className += \" current\";\n    }\n    return (\n        <Documented element={FILTER_BY_DAY}>\n          <div\n            ref={ref} \n            draggable={tag !== \"\" && searchTerm === \"\"}\n            onDragStart={() => setSampleTagDragging(tag)}\n            onDragOver={(e) => e.preventDefault()}\n            style={style} className={className} onClick={onClick}>\n            <div className=\"floppy-part\">\n              <div style={toggled ? style : undefined} className=\"date\">\n                {tag !== \"\" ? tag : date ? formatDate(date) : \"\"}\n              </div>\n            </div>\n            {!toggled ? <div style={style} className=\"floppy-inner\"/> :\n             <div className=\"sources\">\n               {Object.keys(discogs).map(\n                   (coverArtHash, i) =>\n                       <Source\n                         i={i}\n                         setSourceToSearch={setSourceToSearch}\n                         key={coverArtHash}\n                         setSamplesDragging={setSamplesDragging}\n                         onClickSource={onClickSource}\n                         coverArtHash={coverArtHash}\n                         results={discogs[coverArtHash]}/>)}\n               {Object.keys(youtube).map(\n                   (videoId, i) =>\n                       <Source\n                         i={i}\n                         key={videoId}\n                         setSamplesDragging={setSamplesDragging}\n                         setSourceToSearch={setSourceToSearch}\n                         onClickSource={onClickSource}\n                         videoId={videoId}\n                         results={youtube[videoId]}/>)}\n               {Object.keys(unsourced).map(\n                   (tag, i) =>\n                       <Source\n                         i={i}\n                         key={tag}\n                         setSamplesDragging={setSamplesDragging}\n                         onClickSource={onClickSource}\n                         instrumentType={unsourced[tag][0].instrumentType}\n                         tag={tag}\n                         results={unsourced[tag]}/>)}\n             </div>}\n          </div>\n        </Documented>\n    );\n};\n\nconst Source = ({\n    setSourceToSearch,\n    i,\n    results,\n    instrumentType,\n    coverArtHash,\n    videoId,\n    tag,\n    onClickSource, setSamplesDragging}) => {\n        let [userName, setUserName] = useState('');\n        useEffect(() => {\n            if (results[0] && results[0].user) {\n                ethereum.users.getUserName(results[0].user)\n                    .then(x => setUserName(x));\n            }\n        }, []);\n\n        let style = {\n        };\n        let bookLeftStyle = {\n        };\n\n        let color = colors.saturate(\n            colors.getColorForHash(coverArtHash && coverArtHash !== '' ? coverArtHash : videoId), 3);\n        if (coverArtHash) {\n            style.backgroundImage = 'url(' + ipfs.getHashUrl(coverArtHash) + \")\";\n        } else if (videoId) {\n            style.backgroundImage = 'url(' + 'https://img.youtube.com/vi/' + videoId + '/1.jpg)';\n        } else {\n            if (!instrumentType && !tag) {\n                style.display = 'none';\n            }\n        }\n        let _color = instrumentType ?\n            colors.saturate(colors.getColorForHash(INSTRUMENT_TYPE_TO_NAME[instrumentType]), 5) :\n            tag ? colors.saturate(colors.saturate(colors.getColorForHash(tag), 3), 3) : undefined;\n        if (_color) {\n            // bookLeftStyle.color = colors.compliment(_color, 1.5); //colors.transparent(color, 0.90);\n            color = _color;\n        }  else if (color) {\n            // bookLeftStyle.color = colors.compliment(color, 1.5); //colors.transparent(color, 0.90);\n        }\n\n        let title = coverArtHash && results[0].releaseName ?\n            results[0].artistName + '-' + results[0].releaseName :\n            coverArtHash ? results[0].title :\n            videoId ? results[0].title :\n            tag; \n        if (title === '' || title) {\n            title = results[0].title;\n        }\n        let tags = results\n            .filter(x => x.tags)\n            .map(x => x.tags).reduce((a,b) => [... a, ...b], [])\n            .filter(_tag => tag !== _tag && _tag !== 'Resampled');\n\n        let counts = {};\n        for (let tag of tags) {\n            counts[tag] = tag.length;\n        }\n        let max = 100;\n        let maxTag = tag;\n        for (let _tag in counts) {\n            if (_tag !== tag && counts[_tag] < max) {\n                maxTag = _tag;\n                max = counts[_tag];\n            }\n        }\n        let person = results[0].artistName !== '' ?\n            results[0].artistName : userName;\n        let releaseName = results.find(x => x.releaseName !== '');\n        let releaseId = undefined;\n        if (releaseName) {\n            title = releaseName.releaseName;\n            releaseId = releaseName.releaseId;\n        }\n        if (!coverArtHash && !videoId && coverArtHash != '' && videoId != '') {\n            title = tag.toUpperCase();\n        }\n        tag = maxTag;\n        title = Math.floor(i / 20) % 2 === 1 ? cleanTitle(title) : cleanTitle(title);\n\n\n        color = colors.transparent(color, window.tran);\n\n        let className = \" source-container\";\n        if (coverArtHash) {\n            className += \" record\";\n        }\n\n        if (i % 3 == 2 ) {\n            className += \" bigger\";\n        }\n        \n        return (\n            <Documented\n              arg={title}\n              element={FILTER_BY_DAY_TAG}>\n              <div\n                draggable={true}\n                onDragStart={(e) => setSamplesDragging(results.map(x => x.ipfsHash))}\n                onDragOver={(e) => e.preventDefault()}\n                style={{width: i % 3 < 2 ? 186 : 186*2}}\n                onClick={(e) => e.stopPropagation() || onClickSource(e, {results, coverArtHash, videoId, tag})}\n                className={className}>\n                <div\n                  style={bookLeftStyle}\n                  className=\"book-left\">\n                  <span>\n                    {tag && tag !== '' ? tag : instrumentType && results.length === 1 ? results[0].title : INSTRUMENT_TYPE_TO_NAME[instrumentType]}\n                  </span>\n                </div>\n                <div\n                  className=\"source-title\">\n                  {title}\n                </div>\n                {coverArtHash || videoId ? \n                 <div\n                   onClick={(e) => {\n                       e.stopPropagation();\n                       if (videoId && videoId !== \"\") {\n                           setSourceToSearch({videoId});\n                       } else {\n                           setSourceToSearch({releaseId});\n                       }\n                   }}\n                   className=\"source-thumb\" style={style}>\n                 </div> : \n                 <div style={bookLeftStyle} className=\"book-right\">{person}</div>}\n              </div>\n            </Documented>\n        );\n    };\n\nconst Bar = ({length}) => {\n    return (\n        <div className=\"bar\">\n          <div style={{width: Math.min(100 * length / 20, 100) + '%'}} className=\"bar-indicator\">\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setSampleTagDragging: x => dispatch(setSampleTagDragging(x)),\n        setSamplesDragging: (s) => dispatch(setSamplesDragging(s)),\n        setCurrentTagInList: (s) => dispatch(setCurrentTagInList(s))\n    };\n};\n\nconst cleanTitle = (title) => {\n    if (!title) {\n        return '';\n    }\n    title = title.trim();\n    title = title.replace(/[|&;$%@\"<>()+,]/g, \"\");\n    let t = \"\";\n    for (let i=0; i < title.length; i++) {\n        if (title.charCodeAt(i) > 32) {\n            return title.substring(i);\n        }\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Day);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {isNumber} from 'utils/IsNumber.js';\nimport {connect} from 'react-redux';\n\nconst ZNumberInspector = ({znumber}) => { \n    let [min, setMin] = useState(znumber.min);\n    let [max, setMax] = useState(znumber.max);\n    let [round, setRound] = useState(znumber.round);\n\n    useEffect(() => {\n        setMin(znumber.min);\n        setMax(znumber.max);\n        setRound(znumber.round);\n    }, [znumber, setMin, setRound, setMax]);\n\n    const onChange = useCallback((e, setter, field) => {\n        let value = e.target.value;\n        let text = value;\n        if (value === '.' || value === '-.') {\n            value = 0;\n        } else if (value === '-') {\n            value = 0;\n        } else if (value === '') {\n            value = 0;\n        } else if (!isNumber(value)) {\n            return;\n        }\n        setter(text);\n        znumber[field] = parseFloat(value);\n    }, [setMax, setMin, znumber]);\n\n    useEffect(() => {\n        setRound(znumber.round);\n    }, [setRound, znumber.round]);\n\n    const handleRoundChange = useCallback(() => {\n        znumber.round = !round;\n        setRound(!round);\n    }, [round, setRound, znumber]);\n\n    return (\n        <div className=\"z-number-inspector\">\n            <div className={\"min-max\"}>Min\n              <input className=\"min-max-input\"\n                     value={min}\n                     onChange={(e) => onChange(e, setMin, \"min\")} type=\"text\"/>\n            </div>\n            <div className={\"min-max\"}>Max\n              <input className=\"min-max-input\"\n                     value={max}\n                     onChange={(e) => onChange(e, setMax, \"max\")} type=\"text\"/>\n            </div>\n          <Checkbox label=\"Round\" value={round} onChange={handleRoundChange}/>\n        </div>\n    );\n}\n\nconst Checkbox = ({ label, value, onChange }) => {\n  return (\n    <label>\n      <input type=\"checkbox\" checked={value} onChange={onChange} />\n      {label}\n    </label>\n  );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZNumberInspector);\n","import React, { Component } from 'react';\nimport accounts from 'accounts/Accounts.js';\nimport {getNotes} from './getNotes.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport { Button, InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport ethereum from 'decentralized/ethereum.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {SEQUENCE} from 'decentralized/messaging/message-types.js';\n\nconst PAGE_SIZE = 10;\n\nclass CommentsComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            commentText: '',\n            commentSent: false,\n            notes: [],\n            start: 0,\n            messageSent: undefined,\n        };\n\n        this.getNotes();\n        this.watchForNotes();\n    }\n\n    async watchForNotes() {\n        if (this.props.sequence.id === undefined) {\n            return;\n        }\n\n        ethereum.messaging.watchForNewMessages(\n            this.props.sequence.id,\n            this.props.userId,\n            (note) => this.onNewNote(note));\n    }\n\n    onNewNote(note) {\n        if (note.messageHash === this.state.messageSent) {\n            this.setState({messageSent: undefined});\n        }\n        this.setState({\n            notes: [note, ... this.state.notes]\n        });\n    }\n\n    async getNotes() {\n        let notes = await getNotes(this.props.sequence.id);\n        if (notes === undefined) {\n            return;\n        }\n        this.setState({notes: notes});\n    }\n\n    async sendComment() {\n        let referenceHash = this.props.sequence.id;\n        let userId = this.props.userId;\n        let messageContent = this.state.commentText;\n        let messageType = SEQUENCE;\n\n        let messageSent = await ethereum.messaging.sendMessage(\n            userId,\n            referenceHash,\n            messageType,\n            messageContent);\n\n        this.setState({commentText: '', commentSent: true, messageSent: messageSent});\n    }\n\n    needsPagination() {\n        return this.notes.length > PAGE_SIZE;\n    }\n\n    getPaginatedNotes() {\n        if (this.notes.length > this.state.start + PAGE_SIZE) {\n            return this.notes.slice(\n                this.state.start, this.state.start + PAGE_SIZE);\n        } else {\n            return this.notes.slice(this.state.start);\n        }\n    }\n\n    getPagination() {\n        return (\n            <div className=\"pagination\">\n            </div>\n        );\n    }\n\n    render() {\n        return (\n            <div className=\"comments-container\">\n              <ConditionedComponent condition={accounts.isLoggedIn()}>\n                <InputGroup className=\"tag-sound-input\">\n                  <Input\n                    onChange={(event) => {\n                        this.state.commentText = event.target.value;\n                        this.setState(this.state);\n                    }}\n                    type=\"textarea\"\n                    value={this.state.commentText}\n                    placeholder=\"Write a note\" className=\"comment-input-box\"/>\n                  <InputGroupAddon addonType=\"append\">\n                    <Button size=\"sm\" onClick={() => this.sendComment()} color=\"secondary\">Send</Button>\n                  </InputGroupAddon>\n                </InputGroup>\n              </ConditionedComponent>\n              <PulseLoader\n                sizeUnit={\"px\"}\n                size={10}\n                color={'#f92360'}\n                loading={this.state.messageSent !== undefined}\n                />\n                {this.state.notes.map(\n                (note, i) => <Note odd={i % 2 == 1} note={note}/>)}\n                <div onClick={this.props.onHide} className=\"common-button hide-notes-button\">\n                  Hide Notes\n                </div>\n            </div>\n        );\n    }\n}\n\nclass Note extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            messageText: '',\n            fromUser: props.note.fromUser,\n            isFavorite: false,\n            date: '',\n        };\n\n        this.getMessage();\n    }\n\n    shouldComponentUpdate(nextProps) {\n        if (this.props.note !== nextProps.note) {\n            this.getMessage(nextProps.note);\n        }\n        return true;\n    }\n\n    async getMessage(note=this.props.note) {\n        let userId = note.fromUser ? note.fromUser :\n            note.user;\n        let userName = await ethereum.users.getUserName(userId);\n        if (userName !== undefined) {\n            this.setState({fromUser: userName});\n        }\n\n        let date = await ethereum.getBlockDate(note.blockNumber);\n        this.setState({\n            date: date === undefined ? '': date.toLocaleString(),\n        });\n        \n        if (note.isPrevious) {\n            this.setState({\n                newSequence: note.newSequence,\n                messageText: 'Made an edit (' + note.title + ')'});\n            return;\n        } else if (note.newSequence) {\n            this.setState({\n                newSequence: note.newSequence,\n                messageText: 'Made an edit (' + note.title + ')'});\n\n            return;\n        } else if (note.isFavorite) {\n            this.setState({\n                isFavorite: true,\n                messageText: 'Favorited'\n            });\n\n            return;\n        }\n        let message = await ipfs.getJson(note.messageHash, true);\n        this.setState({messageText: message.content});\n\n    }\n\n    onClickText() {\n        if (this.state.newSequence) {\n            var win = window.open('/create/' + this.state.newSequence, '_blank');\n            win.focus();\n        }\n    }\n\n    onClickUser() {\n        var win = window.open('/user/' + this.state.fromUser, '_blank');\n        win.focus();\n    }\n\n    render() {\n        let className = \"sequence-note-container\";\n        if (this.props.odd) {\n            className += ' odd';\n        }\n        return (\n            <div className={className}>\n              <div\n                onClick={() => this.onClickUser()}\n                className=\"sequence-note-from\">{this.state.fromUser}:</div>\n              <div onClick={() => this.onClickText()} className=\"sequence-note-text\">\n                <ConditionedComponent condition={!this.state.isFavorite}>\n                  {this.state.messageText}\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.state.isFavorite}>\n                  <div className=\"heart favorited\"/>\n                </ConditionedComponent>\n              </div>\n              <div className=\"note-date\">{this.state.date}</div>\n            </div>\n        );\n    }\n}\n\nexport default CommentsComponent;\n","import ethereum from 'decentralized/ethereum.js';\nimport sequenceMetadata from 'decentralized/sequences/SequenceMetadata.js';\n\nexport async function getNotes(id, checkSequences=true) {\n    if (id === undefined) {\n        return undefined;\n    }\n    let notes = await ethereum.messaging.getMessages(\n        id);\n    \n    let nextSequences = await ethereum.tokenizedSequences.getNextSequences(\n        id);\n    let previousSequences = []; // await ethereum.tokenizedSequences.getPreviousSequences(\n//        id);\n    let favorites = await sequenceMetadata.getFavorites(id);\n    favorites = favorites.map(x => ({... x, isFavorite: true}));\n    \n    let fullNotes = checkSequences ?\n        [... nextSequences, ... previousSequences, ...favorites, ... notes] :\n        [... notes, ...favorites];\n    fullNotes.sort((a, b) => b.blockNumber - a.blockNumber);\n    return fullNotes;\n}\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport ethereum from 'decentralized/ethereum.js';\nimport FolderComponent from './FolderComponent.js';\nimport '../../Folders.scss';\n\nclass FoldersComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n        };\n\n        this.loadFolders();\n    }\n\n    async loadFolders() {\n        if (!ethereum.folders.isLoaded) {\n            await ethereum.folders.loadFolders();\n            this.setState(this.state);\n        }\n    }\n\n    get selectedFolder() {\n        return this.props.sequencerEngine.state.presets.selectedFolder;\n    }\n\n    onKeyUp(e) {\n        console.log('on key up = ' + e.key);\n        e.stopPropagation();\n        if (e.key === 'Delete') {\n            this.selectedFolder.delete();\n        }\n        return false;\n    }\n\n    render() {\n        let root = ethereum.folders.root;\n        let subFolders = root.subFolders;\n        subFolders.sort((a, b) => {\n            if (a.name === undefined || b.name === undefined) {\n                return 0;\n            }\n            return a.name.localeCompare(b.name);\n        });\n \n        return (\n            <div\n              className=\"folders-container\">\n              {subFolders.map(\n                  (folder, i) => \n                      <FolderComponent\n                            key={folder.name+'-'}\n                            onFoldersUpdated={() => this.setState(this.state)}\n                            onChooseItem={this.props.onChooseItem}\n                            onChooseFolder={this.props.onChooseFolder}\n                            onTestItem={this.props.onTestItem}\n                            showItems={this.props.showItems}\n                            folder={folder}\n                        />)}\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n    }\n};\n\nexport default connect(mapStateToProps, null)(FoldersComponent);\n\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {setTrackDragging} from 'actions/index.js';\nimport './synth.scss';\nconst SynthThumbnail = ({track}) => { \n    let color = track.color;\n    let style = {\n        backgroundColor: color\n    };\n    return (<div\n              draggable={true}\n              onDragStart={() => setTrackDragging(track)}\n              onDragOver={(e) => e.preventDefault()}\n              className=\"youtube-info synth-info\">\n              <div className=\"synth-thumbnail sound-thumbnail\">\n                <div style={style} className=\"white-key\"/>\n                <div style={style} className=\"white-key\"/>\n                <div style={style} className=\"white-key\"/>\n                <div className=\"black-key key-1\"/>\n                <div className=\"black-key key-2\"/>\n              </div>\n            </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackDragging: x=>dispatch(setTrackDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SynthThumbnail);\n","import React , {useEffect} from 'react';\nimport {GO_BACK_HOME} from 'constants/contextual-help.js';\nimport Documented from \"components/help/Documented.js\";\nimport {setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {TRACK} from 'constants/object-types.js';\nimport {\n    savePreset,\n} from 'components/v2/trackRightClickActions.js';\n\nconst Navigator =  ({streamSize, zobject, options, setOption, option, showSave=false, setSelectedZObject}) => {\n    useEffect(() => {\n        if (!options.includes(option)) {\n            setOption(options[0]);\n        }\n    }, [options, setOption, option]);\n    let auditionName = zobject && zobject.getObjectType && zobject.getObjectType() === TRACK ?\n        \"Sounds\" : \"Presets\";\n    \n    return (\n        <div className=\"sidebar-navigator\">\n          <Documented\n            element={GO_BACK_HOME}\n            onClick={() => setSelectedZObject(undefined)}\n            className=\"back-arrow-container pushable\">\n            <div className=\"arrow-left\"/>\n          </Documented>\n          {options\n           .map(\n              _option =>\n              <div\n                onClick={() => setOption(_option)}\n                className={_option === option ? \"selected option \" + _option+'-option': \"option \" + _option+'-'+\"option\"}>\n                {_option === \"Audition\" ? auditionName : _option}\n                {streamSize > 0 && _option === \"Audition\" && <span className=\"audition-size\">{streamSize}</span>}\n              </div>)}\n          {showSave && <img className=\"save-preset-icon\" onClick={() => savePreset(zobject)} src=\"/save-preset-floppy.svg\"/>}\n\n\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      streamSize: props.zobject && props.zobject.samplesStream &&\n          props.zobject.samplesStream.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Navigator);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SidebarPresets from \"components/sidebar/SidebarPresets.js\";\nimport TrackQuickView from 'components/sidebar/TrackQuickView.js';\nimport QuickSampleChooser from \"components/sidebar/QuickSampleChooser.js\";\nimport {setShowArrangementSearcher} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport Modal from 'react-bootstrap/Modal';\n\nconst ArrangementSearcher = ({show, sequencerEngine, setShow}) => { \n    if (!show) {\n        return [];\n    }\n\n    return (\n        <Modal dialogClassName=\"searcher-modal\" show={show} onHide={() => setShow(false)}>\n          <QuickSampleChooser hide={() => setShow(false)} sequencerEngine={sequencerEngine}/>\n          <div className=\"modal-row\">\n            <TrackQuickView\n              sequencerEngine={sequencerEngine}/>\n            <SidebarPresets sequencerEngine={sequencerEngine}/>\n          </div>\n        </Modal>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showSearcher\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShow: (x) => dispatch(setShowArrangementSearcher(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementSearcher);\n","import React, { useRef, useCallback, useState, memo, useEffect, Component } from 'react';\nimport {getDuration} from './getDuration.js';\nimport {useXVisible} from './useXVisible.js';\nimport {getVisualization} from './getVisualization.js';\nimport { connect } from \"react-redux\";\nimport Colors from 'components/Colors.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\n\nconst rollSubId = 1000000;\n\nconst colors = new Colors();\n\nconst PatternComponent = memo((props) => {\n    const ref = useRef(ref);\n    const [showVisuals, setShowVisuals] = useState(true);\n\n    useXVisible({\n        horizontalScroll: props.arrangementContainer,\n        ref,\n        isSelected: props.isSelected\n    });\n\n    /*\n    useEffect(() => {\n        onScroll();\n    }, []);\n\n    useEffect(() => {\n        if (!props.arrangementContainer) {\n            return undefined;\n        }\n        props.arrangementContainer.current.addEventListener(\n            'scroll', onScroll);\n\n        return () => props.arrangementContainer.current ?\n            props.arrangementContainer.current.removeEventListener(\n            'scroll', onScroll) : undefined;\n    }, [setShowVisuals, props.i, props.arrangementContainer]);\n\n    const onScroll = useCallback((e) => {\n        if (!props.arrangementContainer) {\n            return;\n        }\n        let scrollLeft = props.arrangementContainer.current.scrollLeft;\n        let rect = ref.current.getBoundingClientRect();\n        let elemLeft = rect.left - 140;\n        let width = props.arrangementContainer.current.clientWidth;\n        \n        let isVisible = (elemLeft >= 0) && (elemLeft <= width + 10 );\n        setShowVisuals(isVisible);\n    }, [setShowVisuals, props.i, props.arrangementContainer]);\n    */\n    \n    const onRightMouseDown = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        props.onRightMouseDown();\n    }, [props.type, props.event, props.onRightMouseDown]);\n\n    const onLeftMouseDown = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        props.onLeftMouseDown();\n    }, [props.type, props.event, props.onLeftMouseDown]);\n\n    const onSelect = useCallback((e) => {\n        if (props.type === SEQUENCE_ROLL &&\n            !props.event.value) {\n            return;\n        }\n        e.stopPropagation();\n        props.onSelect(e);\n    }, [props.type, props.event]);\n    \n    let text = '';\n    if (props.type === PATTERN_SWITCH) {\n        text = props.value + 1;\n    } else if (props.type === SEQUENCE_ROLL) {\n        text = props.value + ' ';\n    }\n\n    const getAdditionalStyling = useCallback((style) => {\n        if (props.type === SEQUENCE_ROLL) {\n            if (!props.event.value) {\n                // not rolling so make it invisible\n                style.opacity = 0.001;\n            }\n        }\n        return style;\n    }, [props.type, props.event]);\n\n    let hasEdges = false;\n    if (props.type === SEQUENCE_ROLL &&\n        !props.event.value) {\n        hasEdges = false;\n    } else {\n        hasEdges = true;\n    }\n\n    let topStyle = {};\n    let duration = props.duration === undefined ? 64 : props.duration;\n    let color;\n    if (props.isRoll) {\n        let resolution = props.event.resolution;\n        if (resolution === undefined) {\n            color = colors.getColor(13);\n        } else {\n            color = colors.getColor(resolution.resolution);\n        }\n    } else {\n        let eventKey = props.subSequence.id.slice ?\n            props.subSequence.id.slice(0, 10) : 's' + props.subSequence.id;\n        color = colors.getColorForHash(eventKey);\n        if (!isNaN(props.value)) {\n            topStyle.backgroundSize = (props.value + 1)*4 + 'px 50px';\n        }\n    }\n    let fullStyle = {\n    };\n    topStyle = {\n        ... topStyle,\n        width: getBarWidth(duration, props.resolution, props.xScale) - 2,\n        backgroundColor: colors.saturate(color, 3)\n    };\n\n    fullStyle = getAdditionalStyling(fullStyle);\n\n    let className = props.isSelected ?\n        \"pattern selected\" : \"pattern\";\n    \n    if (props.isLast) {\n        className += ' last';\n    }\n\n    fullStyle['width'] = getBarWidth(duration, props.resolution, props.xScale);\n\n    let restStyle = {\n        width: topStyle.width,\n        maxWidth: props.maxWidth || topStyle.width,\n    };\n\n    if (props.isSelected && color) {\n        fullStyle['border'] = 'solid 1px ' + colors.brighten(color, 1.5);\n        restStyle['backgroundColor'] = colors.brighten(color, 0.4);\n    }\n\n    if (props.smallPattern) {\n        className += ' small-pattern';\n    }\n\n    if (duration === 0) {\n        return [];\n    }\n\n    return (\n        <div\n          ref={ref}\n          className={className}\n          onMouseUp={props.onMouseUp}\n          style={fullStyle}\n        >\n          <div\n            style={topStyle} \n            onMouseDown={onSelect}\n            className=\"pattern-top\">\n            <ConditionedComponent condition={hasEdges}>\n              <div\n                onMouseDown={onLeftMouseDown}\n                onMouseUp={props.onMouseUp}\n                className=\"left-edge\"/>\n            </ConditionedComponent>\n            <div className=\"pattern-number\">\n              {text}\n            </div>\n            <ConditionedComponent condition={hasEdges}>\n              <div\n                onMouseDown={onRightMouseDown}\n                onMouseUp={props.onMouseUp}\n                className=\"right-edge\"/>\n            </ConditionedComponent>\n          </div>\n          {!props.smallPattern ? \n           <div\n             style={restStyle} className=\"pattern-rest\">\n             {showVisuals ? getVisualization(\n                 props.event, props.subSequence, duration, \n                 getBarWidth(1, props.resolution, props.xScale)) : ''}\n             <div className=\"center\"/>\n           </div>\n           : ''}\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    let selectedEvents = state.arrangement.selectedEvents;\n    let isSelected = selectedEvents === undefined ?\n        false :\n        selectedEvents[props.event.id] !== undefined;\n    return {\n        isSelected: isSelected,\n        duration: props.event.duration,\n        value: props.event.value,\n        xScale: state.arrangement.xScale,\n    };\n};\n\nexport default connect(mapStateToProps, null)(PatternComponent);\n","import {useEffect, useCallback} from 'react';\n\nexport const useXVisible = ({horizontalScroll, ref, isSelected}) => {\n    useEffect(() => {\n        if (!isSelected ||\n            !horizontalScroll ||\n            !ref ||\n            !horizontalScroll.current ||\n            !ref.current) {\n            return;\n        }\n\n        // check if visible\n        let scrollLeft = horizontalScroll.current.scrollLeft;\n        let scrollWidth = horizontalScroll.current.offsetWidth;\n        let scrollRight = scrollLeft + scrollWidth;\n\n        let left = ref.current.offsetLeft;\n        let right = left + ref.current.offsetWidth;\n        let mid = (left + right) / 2;\n        if (mid < scrollLeft || mid > scrollRight) {\n            // then we need to scroll\n            horizontalScroll.current.scrollTo(left - 150, 0);\n        }\n    }, [isSelected, ref, horizontalScroll]);\n};\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport PatternComponent from './PatternComponent.js';\nimport {\n    PATTERN_SWITCH,\n    NO_SUB_SEQUENCE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction RollComponent(props) {\n    let event = props.event;\n\n    if (!event.value) {\n        // sequence_roll OFF is represented as empty, visually\n        let style = {\n            width: getBarWidth(props.duration, props.resolution, props.xScale),\n            opacity: 0.001,\n        };\n        \n        return (\n            <div className=\"empty-roll-event\" style={style}>\n              <div style={style}/>\n            </div>\n        );\n    }\n    \n    let step = event.step;\n    let duration = event.duration;\n    let width = getBarWidth(duration, props.resolution, props.xScale);\n    let style = {\n        width: width, \n    };\n    \n    let subEvents = props.event.getSubEvents();\n    return (\n        <div style={style} className={\"roll-event step-\" + props.event.step}>\n          {subEvents.map(\n              (event, i) =>\n                  <PatternComponent\n                        subSequence={NO_SUB_SEQUENCE}\n                        maxWidth={width}\n                        key={event.id}\n                        eventKey={'roll-'+Math.pow(event.value + 4, 8)}\n                        type={SEQUENCE_ROLL}\n                        isRoll={true}\n                        resolution={props.resolution}\n                        isLast={i === subEvents.length - 1}\n                        isFirst={i === 0}\n                        onDragStart={(e) => []}\n                        onSelect={(e) => {\n                            props.onSelect(props.event, event, e);\n                        }}\n                        onMouseUp={(e) => props.onMouseUp(event)}\n                        onRightMouseUp={(e) => props.onRightMouseUp(props.event, event)}\n                        onRightMouseDown={(e) => props.onRightMouseDown(props.event, event)}\n                        onLeftMouseUp={(e) => props.onLeftMouseUp(props.event, event)}\n                        onLeftMouseDown={(e) => props.onLeftMouseDown(props.event, event)}\n                        mixSession={props.mixSession}\n                        sequencerEngine={props.sequencerEngine}\n                        event={event}/>\n          )}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        duration: props.event.duration,\n        subEventsLength: props.event.subEvents.length,\n        xScale: state.arrangement.xScale\n    };\n}\n \nexport default connect(mapStateToProps, null)(RollComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {getEffectsComponent} from 'components/effects/getEffectsComponent.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementPatternSelected} from 'actions/index.js';\nimport AutomationToolbar from '../installation/AutomationToolbar.js';\nimport PianoRollComponent from 'components/pianoroll/PianoRollComponent.js';\nimport {connect} from 'react-redux';\n\nconst ArrangementBottom = ({\n    setPatternSelected,\n    patternSelected,\n    sequencerEngine,\n    bottomHeight,\n    selectedEvents,\n    selectedTrack,\n    showTracks,\n    bottomMode,\n    currentSubSequence,\n    setBottomMode\n}) => { \n    let style = {\n        height: bottomHeight\n    };\n\n\n    useEffect(() => {\n        if (patternSelected && selectedTrack) {\n            selectedTrack.updateSteps();\n        }\n    }, [patternSelected, selectedTrack]);\n\n    useEffect(() => {\n        return () => setPatternSelected(undefined);\n    }, []);\n\n    if ((!patternSelected && bottomMode !== EFFECTS) || !showTracks) {\n        return [];\n    }\n    \n    let toolbar = '';\n    let content = '';\n    let track = undefined;\n    if (selectedTrack !== undefined) {\n        track = selectedTrack;\n\n        if (track) {\n            toolbar = (\n                <AutomationToolbar\n                  hideAutomation={true}\n                  hide={() => {\n                      setPatternSelected(undefined);\n                      setBottomMode(PIANO_ROLL);\n                  }}\n                  track={track} sequencerEngine={sequencerEngine}/>\n            );\n        }\n        if (bottomMode === EFFECTS) {\n            content = getEffectsComponent(track);\n        } else if (bottomHeight > 25) {\n            let pattern = track.patterns[patternSelected.patternNumber];\n            content = (\n                <PianoRollComponent\n                  parentClassName=\"arrangement-bottom-container\"\n                  isLooping={false}\n                  pattern={pattern}\n                  scale={0.5}\n                  installation={true}\n                  sequencerEngine={sequencerEngine}\n                  hideToolbar={true}\n                  track={track}\n                />);\n        }\n    } else {\n        style.height = 0;\n    }\n\n    return (\n        <div\n          style={style}\n          className=\"arrangement-bottom-container\">\n          {toolbar}\n          {content}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        selectedEvents: state.arrangement.selectedEvents,\n        currentSubSequence: props.sequencerEngine.currentSubSequence,\n        selectedTrack: props.sequencerEngine.tracks[state.mix.selectedTrack],\n        bottomHeight:   state.arrangement.bottomHeight,\n        patternSelected: state.arrangement.patternSelected,\n        showTracks: state.arrangement.showTracks[sub.id],\n        bottomMode: state.arrangement.bottomMode\n        \n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n    return {\n        setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n        setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementBottom);\n","import React, {useCallback, useState} from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    setArrangementBottomResizing,\n    setArrangementBottomHeight,\n       } from 'actions/index.js';\nimport {PIANO_ROLL, MODE_TO_HEIGHT} from 'constants/arrangement-modes.js';\nconst DOUBLE_CLICK_TIME = 300;\nconst MIN_HEIGHT = 50;\n\nfunction ArrangementBottomResizer(props) {\n    const [lastClick, setLastClick] = useState(undefined);\n    const onMouseDown = useCallback((e) => {\n        props.setArrangementBottomResizing(true);\n        let now = new Date().getTime();\n        if (lastClick !== undefined) {\n            if (now - lastClick <= DOUBLE_CLICK_TIME) {\n                if (props.sequencerEngine.store.getState().arrangement.bottomHeight <= MIN_HEIGHT) {\n                    props.setArrangementBottomHeight(MODE_TO_HEIGHT[PIANO_ROLL]);\n                } else {\n                    props.setArrangementBottomHeight(0);\n                }\n            }\n        }\n        setLastClick(now);\n    }, [lastClick, setLastClick]);\n\n    return (\n        <div\n          onMouseDown={onMouseDown}\n          className=\"arrangement-resizing-edge\">\n        </div>\n    );\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height))\n    };\n};\n \nexport default connect(null, mapDispatchToProps)(ArrangementBottomResizer);\n","import React, {useState, useEffect} from 'react';\nimport FolderComponent from './FolderComponent.js';\n\nexport default function XanaduFolders(props) {\n    let root = props.root;\n    const [subFolders, setSubFolders] = useState(root.subFolders);\n    useEffect(() => {\n        if (!props.root.isLoaded) {\n            props.root.load()\n                .then(() => \n                      setSubFolders([... props.root.subFolders]));\n        }\n    }, [props.root]);\n\n    const onChooseItem = (item) => {\n        console.log('choose item ', item);\n        let {fromData} = item;\n        props.sequencerEngine.loadSampleFromSequence(item.getId(), fromData);\n    };\n\n    const onChooseFolder = (folder) => {\n        console.log('choose folder ', folder);\n    };\n\n    const onTestItem = (item) => {\n    };\n\n    let subFoldersToShow = [... subFolders];\n    if (subFoldersToShow.length > 500) {\n        subFoldersToShow = subFolders.slice(0, 500);\n    }\n\n    return (\n        <div className=\"folders-container xanadu-folders\">\n          {subFoldersToShow.map(\n                  folder => \n                      <FolderComponent\n                            key={folder.name}\n                            onFoldersUpdated={() => []}\n                            onChooseItem={onChooseItem}\n                            onChooseFolder={onChooseFolder}\n                            onTestItem={onTestItem}\n                            showItems={true}\n                            folder={folder}\n                        />)}\n           \n        </div>\n    );\n}\n","import React, {useState, useCallback} from 'react';\nimport { connect } from \"react-redux\";\nimport ethereum from 'decentralized/ethereum.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport FoldersComponent from 'components/folders/FoldersComponent.js';\nimport XanaduFolders from 'components/folders/XanaduFolders.js';\n\nconst COLLAPSED_WIDTH = 30;\nconst PRESETS = 'PRESETS';\nconst SEQUENCES = 'SEQUENCES';\n\nfunction SideBrowserContainer(props) {\n    const [collapsed, setCollapsed]  = useState(false);\n    const [searchText, setSearchText]  = useState('');\n    const [option, setOption]  = useState(PRESETS);\n\n    const toggleCollapse = useCallback(() => {\n        setCollapsed(!collapsed);\n    }, [setCollapsed, collapsed]);\n\n    let style = {};\n    if (collapsed) {\n        style['minWidth'] = COLLAPSED_WIDTH;\n        style['width'] = COLLAPSED_WIDTH;\n    }\n\n    const onChooseItem = (item) => {\n        props.sequencerEngine.loadPresetAsSubSequence(item);\n    };\n\n    const onSearchTextChanged = useCallback((e) => {\n        setSearchText(e.target.value);\n    }, [setSearchText]);\n\n    const onClickOption = useCallback((opt) => {\n        setOption(opt);\n    }, [setOption]);\n\n    /**\n            <input\n              value={searchText}\n              className=\"browser-search\"\n              type=\"text\"\n              placeholder='Search'\n              onChange={onSearchTextChanged}/>\n            <div className=\"options\">\n              <Option option={PRESETS} selectedOption={option} onClick={(o) => onClickOption(o)} name=\"Presets\"/>\n              <Option option={SEQUENCES} selectedOption={option} onClick={(o) => onClickOption(o)} name=\"Sequences\"/>\n            </div>\n    */ \n    return (\n        <div\n          style={style}\n          className=\"side-browser-container\">\n         <div className=\"sidebar-header\">\n            <div\n              onClick={() => toggleCollapse()}\n              className=\"collapse-toggle\">\n              {collapsed ? \n                  <div className=\"arrow-down\"/> :\n                  <div className=\"arrow-right\"/>}\n            </div>\n          </div>\n          <ConditionedComponent condition={!collapsed}>\n           <ConditionedComponent condition={option === PRESETS}>\n              <div\n                className=\"preset-folders\">\n                <FoldersComponent\n                  sequencerEngine={props.sequencerEngine}\n                  onTestItem={(preset) => []}\n                  onChooseFolder={(folder) => []}\n                  onChooseItem={(item) => onChooseItem(item)}\n                  showItems={true}/>\n              </div>\n            </ConditionedComponent>\n            <ConditionedComponent condition={option === SEQUENCES}>\n              <div\n                className=\"preset-folders\">\n                <XanaduFolders\n                  sequencerEngine={props.sequencerEngine}\n                  root={ethereum.xanadu.linkFolder}\n                  />\n              </div>\n            </ConditionedComponent>\n          </ConditionedComponent>\n        </div>\n    );\n}\n\nfunction Option(props) {\n    let className = 'option';\n    if (props.option === props.selectedOption) {\n        className += ' selected';\n    }\n\n    return (\n        <div\n          onClick={() => props.onClick(props.option)}\n          className={className}>{props.name}</div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mode: state.arrangement.browserMode\n    };\n};\n \nexport default connect(mapStateToProps, null)(SideBrowserContainer);\n","import {\n    NO_SUB_SEQUENCE,\n} from 'session/constants.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementPatternSelected\n} from 'actions/index.js';\nimport {NUMBER_TO_RESOLUTION} from 'constants/resolution-keys.js';\nimport {\n    editResolution,\n    editPattern\n} from 'session/operations/actions.js';\n\nexport function onKeyDown(event, sequencerEngine) {\n    let key = event.key;\n    if (key > 0 && key <= 9) {\n        onNumberDown(parseInt(key), sequencerEngine);\n    }\n}\n\nfunction onNumberDown(number, sequencerEngine) {\n    if (sequencerEngine.rolling) {\n        return;\n    }\n\n    if (isRollsRowSelected(sequencerEngine)) {\n        let selectedRollEvents = getSelectedEvents(sequencerEngine, NO_SUB_SEQUENCE.id);\n        for (let i in selectedRollEvents) {\n            let event = selectedRollEvents[i];\n            sequencerEngine.mix.dispatch(editResolution(event, NUMBER_TO_RESOLUTION[number]));\n        }\n        return;\n    } \n\n    for (let i in sequencerEngine.subSequences) {\n        let subSequence = sequencerEngine.subSequences[i];\n        let selectedPatternSwitchEvents =\n            getSelectedEvents(sequencerEngine, subSequence.id);\n\n        for (let i in selectedPatternSwitchEvents) {\n            let event = selectedPatternSwitchEvents[i];\n            sequencerEngine.mix.dispatch(editPattern(event, number - 1));\n            if (state(sequencerEngine).arrangement.patternSelected) {\n                sequencerEngine.dispatch(setArrangementPatternSelected(event));\n            }\n            \n        }\n        sequencerEngine.dispatch(setSelectedArrangementEvents(\n            {\n                ... selectedPatternSwitchEvents\n            }));\n    }\n}\n\nfunction getSelectedEvents(sequencerEngine, subSequenceId) {\n    return sequencerEngine.state.arrangement.selectedEvents || [];\n}\n\nexport function getRowsSelected(sequencerEngine) {\n    return sequencerEngine.state.arrangement.selectedRows;\n}\n\nfunction isRollsRowSelected(sequencerEngine) {\n    return getRowsSelected(sequencerEngine).indexOf(NO_SUB_SEQUENCE.id) > -1;\n}\n\nconst state = (engine) => engine.state;\n","export function quantizeStep(step, resolution=16, shouldRound=true) {\n    if (shouldRound) {\n        return resolution * Math.round(step / resolution);\n    } else {\n        return resolution * Math.floor(step / resolution);\n    }\n}\n","import React, { useState, useCallback } from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport { connect } from \"react-redux\";\nimport { setArrangementSelection } from \"actions/index.js\";\nimport { setArrangementRowSelections } from \"actions/index.js\";\nimport { setArrangementLoopSelected } from \"actions/index.js\";\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction SelectionComponent(props) {\n    const [isDragging, setIsDragging] = useState(false);\n    const [dragOffset, setDragOffset] = useState(undefined);\n    const [directionResizing, setDirectionResizing] = useState(undefined);\n    const [didDrag, setDidDrag] = useState(false);\n\n    const onMouseDown = useCallback((e) => {\n        e.stopPropagation();\n        setIsDragging(true);\n        setDidDrag(false);\n        let step = getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale);\n        let offset = step - props.selectionStart;\n        setDragOffset(offset);\n    }, [\n        setIsDragging,\n        setDidDrag,\n        isDragging,\n        props.selectionStart,\n        props.resolution,\n        setDragOffset,\n        props.xScale]);\n\n    const onMiddleMouseUp = useCallback((e) => {\n        if (!didDrag) {\n            props.setArrangementLoopSelected(!props.loopSelected);\n            if (!props.loopSelected) {\n                selectAll(props.selectionStart, props.selectionEnd);\n            } else {\n                unselectAll();\n            }\n        }\n    }, [didDrag, props.loopSelected]);\n\n    const getMouseX = useCallback((e) => {\n        if (props.arrangementContainer) {\n            return props.arrangementContainer.scrollLeft + e.pageX;\n        } else {\n            return e.pageX;\n        }\n    }, [props.arrangementContainer]);\n\n    const onMouseUp = useCallback((e) => {\n        setIsDragging(false);\n        setDragOffset(undefined);\n        setDirectionResizing(undefined);\n        setDidDrag(false);\n    }, [setIsDragging, setDragOffset, setDidDrag]);\n\n    const onMouseMove = useCallback((e) => {\n        if (isDragging) {\n            let newStart = getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale) - dragOffset;\n            if (newStart < 0) {\n                return;\n            }\n            let selectionDur = props.selectionEnd - props.selectionStart;\n            let newEnd = newStart + selectionDur;\n            let quantizedStart = quantizeStep(newStart);\n            let quantizedEnd = quantizeStep(newEnd);\n            props.setArrangementSelection(\n                quantizedStart, \n                quantizedEnd); \n            if (props.loopSelected) {\n                selectAll(quantizedStart, quantizedEnd);\n            }\n            setDidDrag(true);\n        } else if (directionResizing === LEFT) {\n            let newStart = quantizeStep(\n                getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale));\n            if (newStart >= props.selectionEnd) {\n                return;\n            }\n            props.setArrangementSelection(\n                newStart,\n                props.selectionEnd);\n            if (props.loopSelected) {\n                selectAll(newStart, props.selectionEnd);\n            }\n            setDidDrag(true);\n        } else if (directionResizing === RIGHT) {\n            let newEnd = quantizeStep(\n                getStepFromPosition(getMouseX(e), props.resolution, undefined, props.xScale));\n            if (newEnd <= props.selectionStart) {\n                return;\n            }\n            props.setArrangementSelection(\n                props.selectionStart,\n                newEnd);\n            setDidDrag(true);\n            if (props.loopSelected) {\n                selectAll(props.selectionStart, newEnd);\n            }\n        } \n    }, [props.selectionStart, setDidDrag,\n        props.selectionEnd, isDragging,\n        props.loopSelected, props.xScale,\n        props.resolution, dragOffset, directionResizing]);\n\n    const unselectAll = () => {\n        props.setArrangementRowSelections({});\n    };\n\n    const selectAll = (start, end) => {\n        let selection = {start, end};\n        let rowSelections = {};\n        rowSelections[NO_SUB_SEQUENCE.id] = selection;\n        for (let i in props.sequencerEngine.subSequences) {\n            rowSelections[props.sequencerEngine.subSequences[i].id] = selection;\n        }\n\n        props.setArrangementRowSelections(rowSelections);\n    };\n\n    const onEdgeDown = useCallback((e, direction) => {\n        setDirectionResizing(direction);\n    }, [setDirectionResizing]);\n        \n\n    let className = props.loopSelected ? 'selection looping' : 'selection';\n    return (\n        <div\n            onMouseUp={onMouseUp}\n            onMouseMove={onMouseMove}\n            className=\"selection-container\">\n          <div>\n            <div style={getSelectionStyle(props)} className={className}>\n              <div\n                onMouseDown={(e) => onEdgeDown(e, LEFT)}\n                className=\"triangle-right\"/>\n                <div\n                  onMouseDown={onMouseDown}\n                  onMouseUp={onMiddleMouseUp}\n                  className=\"middle\"/>\n                <div\n                  onMouseDown={(e) => onEdgeDown(e, RIGHT)}\n                  className=\"triangle-left\"/>\n                </div>\n              </div>\n            </div>\n    );\n}\n\nfunction getAbsoluteSelection(props) {\n    let style = {\n        left: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n\n    let className = \"absolute-selection\";\n    if (props.loopSelected) {\n        className += ' looping'\n    }\n    return (\n        <div className={className} style={style}>\n        </div>\n    );\n}\n\nfunction getSelectionStyle(props) {\n    return {\n        marginLeft: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n}\n\nconst mapStateToProps = state => {\n    let selection = state.arrangement.selection;\n    return {\n        selectionStart: selection !== undefined ? selection.start : undefined,\n        selectionEnd: selection !== undefined ? selection.end : undefined,\n        loopSelected: state.arrangement.loopSelected,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\n const mapDispatchToProps = dispatch => {\n    return {\n        setArrangementRowSelections: (selections) => dispatch(setArrangementRowSelections(selections)),\n        setArrangementSelection: (start, end) => dispatch(setArrangementSelection(start, end)),\n        setArrangementLoopSelected: (selected) => dispatch(setArrangementLoopSelected(selected))\n    };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionComponent);\n","import { createSelector } from 'reselect'\n\nconst getSubSequenceId = (state, props) => props.subSequence.id;\nconst getSelectedRows = (state, props) => state.arrangement.selectedRows;\nexport const getIsSelected = createSelector(\n    [getSubSequenceId, getSelectedRows],\n    (subSequenceId, selectedRows) => selectedRows.indexOf(subSequenceId) > -1\n    );\n\n","import React, { useEffect, Component, useCallback} from 'react';\nimport { getIsSelected} from './selectors.js';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nfunction MouseHelper(props) {\n    let style = {\n        left: getBarWidth(\n            props.cursorStep, props.resolution, props.xScale),\n            \n    };\n    if (props.offset) {\n        style.left += props.offset;\n    }\n\n    if (!props.isSelected) {\n        style['display'] =  'none';\n    }\n\n    useEffect(() => {\n        if (!props.sequencerEngine) {\n            return;\n        }\n        if (!props.sequencerEngine.playing &&\n            props.cursorStep !== undefined) {\n            // then we seek to that\n            props.sequencerEngine.seekToTrackStep(\n                props.cursorStep);\n        }\n    }, [props.sequencerEngine, props.cursorStep]);\n\n    return (\n        <div className=\"flashit mouse-helper\" style={style}></div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    return {\n        mouseX: state.arrangement.mouseX,\n        cursorStep: state.arrangement.cursorStep,\n        resolution: DEFAULT_RESOLUTION,\n        isSelected: props.isSelected || getIsSelected(state, props),\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, null)(MouseHelper);\n","import React, {useEffect, useCallback, useState, useRef} from 'react';\nimport {sleep} from 'utils/sleep.js';\n\nexport const useSticky = ({\n    showBottom,\n    bottomHeight,\n    showTracks,\n    isBottom,\n    scrollContainer,\n    stickyContainer}) => {\n    const [sticky, setSticky] = useState({top: 0});\n    let counter = useRef(0);\n\n    useEffect(() => {\n        onScroll();\n    }, [showBottom, scrollContainer, stickyContainer, showTracks, bottomHeight]);\n\n    useEffect(() => {\n        if (!scrollContainer) {\n            return undefined;\n        }\n        scrollContainer.current.addEventListener(\n            'mousewheel', onWheel);\n        scrollContainer.current.addEventListener(\n            'scroll', onScroll);\n\n        return () => {\n            if (scrollContainer.current) {\n                scrollContainer.current.removeEventListener(\n                    'scroll', onScroll);\n                scrollContainer.current.removeEventListener(\n                    'mousewheel', onWheel);\n            }\n        }\n    }, [stickyContainer, scrollContainer, setSticky, isBottom]);\n\n    const onWheel = useCallback((e) => {\n        if (Math.abs(e.deltaX) > Math.abs(e.deltaY)) {\n            return true;\n        }\n        e.preventDefault();\n        scrollContainer.current.scrollTo(0, scrollContainer.current.scrollTop + e.deltaY);\n        return false;\n    }, []);\n\n    const onScroll = useCallback(async (e) => {\n        if ((!scrollContainer || !scrollContainer.current) ||\n            (!stickyContainer || !stickyContainer.current)) {\n            return;\n        }\n\n        let scrollTop = scrollContainer.current.scrollTop;\n        let scrollHeight = scrollContainer.current.offsetHeight;\n        let scrollBottom = scrollTop + scrollHeight;\n        let height = stickyContainer.current.offsetHeight;\n        let top = isBottom ? scrollBottom - height - 10 : scrollTop;\n        stickyContainer.current.style[\"top\"] = top + \"px\";\n    }, [setSticky, stickyContainer, scrollContainer, isBottom]);\n\n    return {sticky};\n};\n","import {getBarWidth} from './getBarWidth.js';\n\nconst SCROLL_BUFFER_LENGTH = 140;\nconst MIN_X_SCALE = 0.1;\n\nexport const onScale = ({\n    xScale,\n    setArrangementXScale,\n    arrangementContainer,\n    x,\n    cursorStep,\n    resolution\n}) => {\n    if (xScale < MIN_X_SCALE || xScale > 5) {\n        return;\n    }\n    \n    // first scroll then do the thang\n    let width = getBarWidth(cursorStep, resolution, xScale);\n    let scrollLeft = width - x + SCROLL_BUFFER_LENGTH;\n    setArrangementXScale(xScale);\n    arrangementContainer.current.scrollTo(scrollLeft, 0);\n};\n","export const getHeight = (sequencerEngine, showTracks={}) => {\n    let height = 70 + 70 * ( 1 + sequencerEngine.subSequences.length);\n\n    for (let id in showTracks) {\n        if (showTracks[id]) {\n            let subSequence = sequencerEngine.getSubSequence(id); \n            height += 85 * subSequence.tracks.length;\n        }\n    }\n    return height;\n};\n","import React, {memo, PureComponent, useEffect, useCallback, useState, useRef, Component } from 'react';\nimport MouseHelper from './MouseHelper.js';\nimport {useSticky} from './useSticky.js';\nimport {useScroll} from './useScroll.js';\nimport {onScale} from './onScale.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getHeight} from './getHeight.js';\nimport {\n    setArrangementXScale,\n    setArrangementCursorStep,\n    setArrangementMouseX\n} from \"actions/index.js\";\nimport {getTotalLength} from './getTotalLength.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\n\nconst MIN_X_SCALE = 0.1;\nconst SCROLL_BUFFER_LENGTH = 140;\n\nconst TimeRowComponent = (props) => {\n    const ref = useRef(undefined);\n\n    const {sticky} = useSticky({\n        showTracks: props.showTracks,\n        stickyContainer: ref,\n        scrollContainer: props.yScrollContainer,\n        isBottom: props.isBottom,\n        bottomHeight: props.bottomHeight,\n        showBottom: props.showBottom\n    });\n\n    const mouseDown = useRef(undefined);\n    const dragStartY = useRef(undefined);\n    const dragY = useRef(undefined);\n    const dragX = useRef(undefined);\n    const timeout = useRef(undefined);\n\n    const onMouseDown = useCallback((e) =>{\n        mouseDown.current = true;\n        dragStartY.current = e.pageY;\n        dragY.current = e.pageY;\n        dragX.current = e.pageX;\n\n        timeout.current = setInterval(() => {\n            let diff = dragY.current - dragStartY.current;\n            let _xScale = props.sequencerEngine.state.arrangement.xScale ;\n            let xScale = _xScale + diff / 50.0;\n            xScale = Math.max(MIN_X_SCALE, xScale);\n            xScale = Math.min(5, xScale);\n\n            if (xScale === _xScale) {\n                return;\n            }\n\n            if (getBarWidth(16*props.totalLength, props.resolution, xScale) < window.innerWidth - 140) {\n                // Dont let user zoom out beyond the width of the window\n                return;\n            }\n\n            onScale({\n                xScale,\n                setArrangementXScale: props.setArrangementXScale,\n                cursorStep: cursorStep(),\n                resolution: props.resolution,\n                x: dragX.current,\n                arrangementContainer: props.arrangementContainer\n            });\n        }, 100);\n    }, [props.resolution, props.totalLength]);\n\n    const onMouseUp = (e) => {\n        clearInterval(timeout.current);\n        mouseDown.current = false;\n        dragStartY.current = undefined;\n    }\n\n    const onMouseMove = (e) => {\n        if (!mouseDown.current) {\n            return;\n        }\n\n        dragY.current = e.pageY;\n    };\n\n    const cursorStep = () => {\n        return props.sequencerEngine.state.arrangement.cursorStep;\n    };\n\n    \n    let className = \"time-row\";\n    if (props.constantHeight) {\n        className += ' bottom';\n    }\n\n    let style = {};\n\n    return (\n        <div\n          ref={ref}\n          style={style}\n          className={className}>\n          <div className=\"time-top-background\"></div>\n          <div className=\"time-full-background\"></div>\n          <div\n            onMouseLeave={onMouseUp}\n            onMouseMove={onMouseMove}\n            onMouseDown={onMouseDown}\n            onMouseUp={onMouseUp}\n            className=\"inner-time-row\">\n            <MouseHelper\n              sequencerEngine={props.sequencerEngine}\n              offset={-5}\n              isSelected={true}/>\n            <Bars  {...props}/>\n          </div>\n          {props.children}\n        </div>\n    );\n}\n\nconst Bars = memo((props) => {\n    const getEvents = useCallback(() => {\n        let numBars = props.totalLength;\n        let arr = []; \n        for (let i=0; i < numBars; i++) {\n            arr.push({\n                step: i * 16,\n                duration: 32\n            });\n        }\n        return arr;\n    }, [props.totalLength]);\n\n    const {visibleView} = useScroll({\n        ref: props.arrangementContainer,\n        xScale: props.xScale,\n        resolution: props.resolution,\n        events: getEvents(),\n        sequencerEngine: props.sequencerEngine,\n        eventsLength: props.totalLength,\n    });\n\n    let bars = getEvents().slice(\n        visibleView.start, visibleView.end);\n\n    let barWidth = getBarWidth(16, props.resolution, props.xScale);\n\n    return [(\n        <div className=\"bar-filler\" style={{minWidth: visibleView.preWidth}}/>),\n            bars.map(\n                ({step, value}, i) =>\n                    <BarComponent\n                      xScale={props.xScale}\n                      height={props.height}\n                      key={step / 16.0}\n                      barWidth={barWidth}\n                      selectionStart={props.selectionStart}\n                      selectionEnd={props.selectionEnd}\n                      constantHeight={props.constantHeight}\n                      sequencerEngine={props.sequencerEngine}\n                      resolution={props.resolution}\n                      number={step / 16.0}/>)\n           ];\n});\n\nclass BarComponent extends PureComponent {\n    render() {\n        let beat = this.props.number*(8 / this.props.resolution);\n        let style = {\n            minWidth: this.props.barWidth,\n        };\n        let beatStyle = {};\n        if (this.props.xScale <= 0.8) {\n            beatStyle['opacity'] = 0.5;\n        }\n\n        beatStyle['height'] = this.props.height;\n        let firstStyle = {\n            height: beatStyle.height\n        };\n\n        if (this.props.xScale <= 0.5 && this.props.number % 4 !== 0) {\n            firstStyle['opacity'] = 0.4;\n        }\n\n        let beatClass = 'beat';\n        if (this.props.xScale <= 0.5) {\n            beatClass += ' hidden';\n        }\n        \n        return (\n            <div\n              style={style}\n              className=\"bar\">\n              <ConditionedComponent condition={this.props.xScale > 0.6 || beat % 4 === 0}>\n                <span className=\"beat-number\">\n                  {1 + beat}\n                </span>\n              </ConditionedComponent>\n              <div style={firstStyle} className=\"first-beat\">\n              </div>\n              <div style={beatStyle} className={beatClass}>\n              </div>\n              <div style={beatStyle} className={beatClass}></div>\n              <div style={beatStyle} className={beatClass}></div>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale)),\n        setArrangementMouseX: (x) => dispatch(\n            setArrangementMouseX(x)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        numSubSequences: props.sequencerEngine.subSequences.length,\n        xScale: state.arrangement.xScale,\n        totalLength: state.arrangement.totalLength ,\n        showTracks: state.arrangement.showTracks,\n        bottomHeight: state.arrangement.bottomHeight,\n        showBottom: state.arrangement.patternSelected && state.arrangement.showTracks[sub.id]\n    };\n\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(TimeRowComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport { setArrangementXScale } from \"actions/index.js\";\nimport {getBarWidth} from './getBarWidth.js';\n\nclass TimeBackgroundComponent extends Component {\n    get numberOfBars() {\n        return 100;\n    }\n\n    render() {\n        let bars = new Array(this.numberOfBars); \n        bars.fill(0);\n        let barWidth = getBarWidth(1, this.props.resolution, this.props.xScale);\n\n        return (\n            <div\n             className=\"time-background\">\n              {bars.map(\n                  (bar, i) =>\n                      <BarComponent\n                        barWidth={barWidth}\n                        selectionStart={this.props.selectionStart}\n                        selectionEnd={this.props.selectionEnd}\n                        resolution={this.props.resolution} number={i}/>)}\n            </div>\n        );\n    }\n}\n\nclass BarComponent extends Component {\n    render() {\n        let beat = this.props.number*(16 / this.props.resolution);\n        let style = {\n            width: this.props.barWidth,\n        };\n        return (\n            <div\n              style={style}\n              className=\"bar\">\n              <div className=\"beat\">\n              </div>\n              <div className=\"beat\"></div>\n              <div className=\"beat\"></div>\n              <div className=\"last-beat\"></div>\n            </div>\n        );\n    }\n\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    return {\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(TimeBackgroundComponent);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nconst SCROLL_BUFFER_LENGTH = 100;\nconst INFO_WIDTH = 0;\n\nclass ClockTickComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.unlockedScroll = false;\n\n        this.unlockScroll = this.unlockScroll.bind(this);\n    }\n\n    unlockScroll() {\n        this.unlockedScroll = true;\n    }\n\n    componentDidMount() {\n        window.addEventListener('mousewheel', this.unlockScroll);\n        this.arrangementContainer = document.getElementsByClassName('arrangement-container')[0];\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('mousewheel', this.unlockScroll);\n    }\n\n    getX(props=this.props) {\n        let cursorStep = props.sequencerEngine.state.arrangement.cursorStep;\n        let step = props.isPlaying ? props.step : cursorStep;\n        let width = getBarWidth(step, props.resolution, props.xScale);\n        return width;\n    }\n\n    componentDidUpdate(prevProps) {\n        if (prevProps.isPlaying !== this.props.isPlaying &&\n            prevProps.isPlaying) {\n            this.unlockedScroll=false;\n        }\n        let scroll = this.arrangementContainer ? this.arrangementContainer.scrollLeft : 0;\n\n        if (prevProps.step !== this.props.step) { // || prevProps.xScale !== this.props.xScale) {\n            let x = this.getX();\n            if (!this.props.isPlaying && (x > window.innerWidth - 400 || x < scroll)) {\n                // this.arrangementContainer.scrollLeft = x - this.props.mouseDownX + 100;\n            } else if (x > window.innerWidth - 400 ||\n                      x < scroll ||\n                      !this.props.resolution.equals(this.props.resolution)) {\n                if (!this.unlockedScroll) {\n                    // todo: check for redux variable forcing scroll\n                    return;\n                    let scrollLeft = x - SCROLL_BUFFER_LENGTH;\n                    this.arrangementContainer.scrollLeft = scrollLeft;\n                    this.unlockedScroll = false;\n                }\n            }\n        }\n        return true;\n    }\n\n    render() {\n        let style =  {\n            left: this.getX()\n        };\n\n        if (!this.props.isPlaying) {\n            style.display = 'none';\n        }\n        return (\n            <div\n              style={style}\n              className=\"clock-ticker\">\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.getSequenceId();\n    let isPlaying = state.sequencer.isPlaying[id] || 0;\n    return {\n        step: isPlaying ? props.sequencerEngine.trackStep : 0,\n        cursorStep: state.arrangement.cursorStep,\n        mouseDownX: state.arrangement.mouseDownX,\n        resolution: DEFAULT_RESOLUTION,\n        isRecordingMix: state.mix.isRecordingMix,\n        isPlaying: isPlaying,\n        xScale: state.arrangement.xScale\n    };\n};\n \nexport default connect(mapStateToProps, null)(ClockTickComponent);\n\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {getBarWidth} from './getBarWidth.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nfunction RowSelection(props) {\n    let style = {\n        left: getBarWidth(props.start, props.resolution, props.xScale),\n        width: getBarWidth(props.end - props.start, props.resolution, props.xScale),\n    };\n    return (\n        <div\n          style={style}\n          className=\"row-selection\">\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let selection = state.arrangement.rowSelections[props.id];\n    return {\n        start: selection === undefined ? 0 : selection.start,\n        end: selection === undefined ? 0 : selection.end,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, null)(RowSelection);\n","import React, {useEffect, useRef, useState, useCallback} from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\n\nexport const useRowSelection = ({\n    scrollContainer,\n    id,\n    sequencerEngine,\n    xScale,\n    resolution,\n    setArrangementRowSelections\n}) => {\n    const resizingSelection = useRef(false);\n\n    const scrollLeft = () => scrollContainer.current.scrollLeft;\n\n    const onRowSelectionDown = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), resolution, undefined, xScale);\n        resizingSelection.current = true;\n        let rowSelections = {};\n        rowSelections[id] = {\n            start: step,\n            end: step\n        };\n        setArrangementRowSelections(rowSelections);\n \n    }, [resolution, xScale, id]);\n\n    const onRowSelectionUp = useCallback((e) => {\n        resizingSelection.current = false;\n    }, []);\n\n    const getState = () => sequencerEngine.state;\n    \n    const onRowSelectionMove = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), resolution, undefined, xScale);\n        let _resolution = 32 / resolution.resolution;\n        let remainder = step % _resolution;\n        step -= remainder;\n \n        if (resizingSelection.current) {\n            let selection = getState().arrangement.rowSelections[id];\n            if (selection !== undefined) {\n                selection.end = step;\n                let selections = {};\n                selections[id] = selection;\n                setArrangementRowSelections(selections);\n            }\n        }\n    }, [xScale, id, resolution]);\n\n    return {\n        onRowSelectionMove,\n        onRowSelectionUp,\n        onRowSelectionDown\n    }\n};\n","import React, { useRef, memo, useEffect, useCallback, useState} from 'react';\nimport {getDuration} from '../getDuration.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {\n    setArrangementBottomMode,\n    setArrangementCursorStep,\n    setArrangementPatternSelected} from 'actions/index.js';\nimport {getVisualization} from \"components/arrangement/getVisualization.js\";\n\nimport Step from 'components/track/Step.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {getBarWidth} from '../getBarWidth.js';\n\nconst colors = new Colors();\nconst DOUBLE_CLICK = 250;\n\nconst TrackPattern = memo((props) => { \n    let lastClick = useRef(0);\n    let length = props.pattern.length(props.resolution);\n    let style = {\n        backgroundColor: colors.getColorForTrack(props.track),\n    };\n    \n    let width = getBarWidth(\n        props.duration || 64,\n        props.resolution,\n        props.xScale);\n\n    let fullStyle = {\n        width\n    };\n\n    let className = \"track-pattern\";\n    style.width -= 1;\n\n    if (props.event.duration === 0) {\n        return '';\n    }\n\n    const onClickHeader = useCallback((e) => {\n        e.stopPropagation();\n        props.track.sequencerEngine.selectTrack(props.track.trackNumber);\n        let time = new Date().getTime();\n        if (time - lastClick.current <= DOUBLE_CLICK) {\n            if (props.isSelected) {\n                props.setPatternSelected(undefined);\n            } else {\n                props.setBottomMode(PIANO_ROLL);\n                props.setPatternSelected(props.event);\n            }\n        }\n        lastClick.current = time;\n    }, [props.isSelected, props.event]);\n\n    if (props.isSelected) {\n        className += \" selected\";\n        fullStyle.backgroundColor = colors.brighten(style.backgroundColor, 0.1);\n        fullStyle.borderColor = style.backgroundColor;\n        fullStyle.backgroundColor = colors.brighten(style.backgroundColor, 1.2);\n    }\n\n    const onHeaderMouseDown = useCallback((e) => {\n        e.stopPropagation();\n        props.setCursorStep(undefined);\n    }, []);\n\n    let duration = \n              props.event.duration ||\n        64;\n\n    return (\n        <div\n          style={fullStyle}\n          className={className}>\n          <div\n            onMouseDown={onHeaderMouseDown}\n            onClick={onClickHeader}\n            style={style} className=\"track-pattern-header\">\n            {props.isFrozen ? \"Frozen\" : \"\"}\n          </div>\n          {getVisualization(\n              props.event,\n              {tracks: [props.track]},\n              duration,\n              getBarWidth(1, props.resolution, props.xScale), true)}\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    let isSelected = state.arrangement.patternSelected === props.event &&\n        state.mix.selectedTrack === props.track.trackNumber;\n    return {\n        isSelected,\n        steps: isSelected ? state.tracks.trackSteps[props.track.trackNumber] : undefined,\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n      setCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n      setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackPattern);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {getBarWidth} from '../getBarWidth.js';\nimport {useScroll} from '../useScroll.js';\nimport TrackPattern from './TrackPattern.js';\nimport {connect} from 'react-redux';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {DEFAULT_RESOLUTION} from '../constants.js';\n\nconst TrackPatterns = ({\n    wrapperRef,\n    events=[],\n    track,\n    subSequence,\n    xScale,\n    resolution,\n    selectedEvents,\n    isFrozen\n}) => { \n    if (!selectedEvents ||\n        Object.keys(selectedEvents).length === 0 ||\n        selectedEvents[Object.keys(selectedEvents)[0]].patternNumber === undefined) {\n        return [];\n    }\n\n    let event = selectedEvents[Object.keys(selectedEvents)[0]];\n    if (!events.includes(event)) {\n        return [];\n    }\n    let preWidth = getBarWidth(event.step, resolution, xScale);\n\n    return (\n        <div className=\"track-patterns\">\n          <div className=\"pattern-filler\" style={{width: preWidth}}/>\n          {[event].map(\n              event =>\n                  <TrackPattern\n                    isFrozen={isFrozen}\n                    key={event.id}\n                    pattern={track.patterns[event.value % track.patterns.length]}\n                    xScale={xScale}\n                    resolution={resolution}\n                    duration={event.duration}\n                    track={track}\n                    event={event}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let patternSwitchEvents = mixEvents !== undefined ?\n        mixEvents[PATTERN_SWITCH] : undefined;\n    return {\n        events: patternSwitchEvents,\n        eventsLength: patternSwitchEvents === undefined ? 0 : patternSwitchEvents.length,\n        patternDragging: state.sequencer.patternDragging,\n        resolution: DEFAULT_RESOLUTION,\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n        xScale: state.arrangement.xScale,\n        selectedEvents: state.arrangement.selectedEvents,\n        isFrozen: props.track.isFrozen\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackPatterns);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PATTERN_SWITCH} from 'session/constants.js';\nimport {\n    selectedParameter,\n    getSelectedAutomations} from '../copy.js';\nimport RowSelection from '../RowSelection.js';\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport {\n    setArrangementCursorStep,\n    setSelectedArrangementEvents,\n    setArrangementPatternSelected,\n    setArrangementRowSelections,\n    setAutomationPointsSelected,\n} from 'actions/index.js';\nimport {useYVisible} from './useYVisible.js';\nimport {useRowSelection} from '../useRowSelection.js';\nimport MouseHelper from '../MouseHelper.js';\nimport TrackPatterns from './TrackPatterns.js';\nimport ParameterAutomation from 'components/automation/ParameterAutomation.js';\nimport {DEFAULT_WIDTH} from '../constants.js';\nimport {WIDTH} from 'components/pianoroll/constants.js';\nimport {connect} from 'react-redux';\n\nconst DOUBLE_CLICK_TIME = 200;\n\nconst TrackTimeLine = ({\n    setPatternSelected,\n    width,\n    xScale,\n    style,\n    track,\n    wrapperRef,\n    isSelectedTrack,\n    subSequence,\n    yScrollContainer,\n    resolution,\n    setArrangementRowSelections,\n    setAutomationPointsSelected,\n    setSelectedEvents,\n    setCursorStep,\n    bottomMode,\n    patternSelected\n}) => { \n    const ref = useRef(undefined);\n    const lastClick = useRef(0);\n\n    const onClick = useCallback(() => {\n        track.sequencerEngine.selectTrack(track.trackNumber);\n        let now = new Date().getTime();\n        if (now - lastClick.current <= DOUBLE_CLICK_TIME) {\n            // show the pattern\n            let cursorStep = track.sequencerEngine.state.arrangement.cursorStep;\n            let event = track.subSequence.mix.getEvent(PATTERN_SWITCH, cursorStep);\n            let events = {};\n            events[event.id] = event;\n            setSelectedEvents(events);\n            setPatternSelected(event);\n            setCursorStep(event.step);\n        }\n        lastClick.current = now;\n    }, [track]);\n\n    const {onRowSelectionUp, onRowSelectionDown, onRowSelectionMove} =\n          useRowSelection({\n              id: track.id,\n              sequencerEngine: track.sequencerEngine,\n              xScale: xScale,\n              resolution: resolution,\n              setArrangementRowSelections: setArrangementRowSelections,\n              scrollContainer: wrapperRef\n          });\n\n    useYVisible({\n        verticalScroll: yScrollContainer,\n        ref,\n        isSelected: isSelectedTrack,\n        patternSelected,\n        bottomMode\n    });\n\n    const onMouseUp = useCallback((e) => {\n        onRowSelectionUp();\n\n        let engine = track.sequencerEngine;\n        let state = engine.state;\n        // find selected parameters if necessary\n        let rowSelection = state.arrangement.rowSelections[track.id];\n        let parameter = selectedParameter(engine, track.id);\n        if (parameter && rowSelection) {\n            let automations = getSelectedAutomations(\n                engine,\n                rowSelection,\n                track.id);\n\n            setAutomationPointsSelected(\n                track.id,\n                automations);\n        }\n        \n    }, [track]);\n\n    return (\n        <div\n          ref={ref}\n          onMouseDown={onRowSelectionDown}\n          onMouseMove={onRowSelectionMove}\n          onMouseUp={onMouseUp }\n          onClick={onClick}\n          style={style} className={isSelectedTrack ? \"selected track-time-line\" : \"track-time-line\"}>\n          <RowSelection id={track.id}/>\n          {isSelectedTrack ?\n           <MouseHelper subSequence={track.subSequence} isSelected={true}/> : ''}\n           <TrackPatterns\n             wrapperRef={wrapperRef}\n             track={track} subSequence={subSequence}/>\n          <ParameterAutomation\n            xScale={xScale / (5.76 / 2.0)} \n            wrapperRef={wrapperRef}\n            left={140}\n            track={track}\n            isMix={true}\n            height={62}\n            width={width}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    let currentSubSequence = props.track.sequencerEngine.currentSubSequence;\n    return {\n        xScale: state.arrangement.xScale,\n        isSelectedTrack: isSelectedTrack && props.track.subSequence === currentSubSequence,\n        resolution: DEFAULT_RESOLUTION,\n        patternSelected: state.arrangement.patternSelected,\n        bottomMode: state.arrangement.bottomMode\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setArrangementRowSelections: (selections) => dispatch(\n          setArrangementRowSelections(selections)),\n      setAutomationPointsSelected: (id, events) =>\n          dispatch(setAutomationPointsSelected(id, events)),\n      setPatternSelected: p => dispatch(setArrangementPatternSelected(p)),\n      setSelectedEvents: (events) => dispatch(\n          setSelectedArrangementEvents(events)),\n      setCursorStep: (x) => dispatch(\n          setArrangementCursorStep(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackTimeLine);\n","import {useEffect, useCallback} from 'react';\n\nexport const useYVisible = ({verticalScroll, ref, isSelected, patternSelected, bottomMode}) => {\n    useEffect(() => {\n        if (!isSelected ||\n            !verticalScroll ||\n            !ref ||\n            !verticalScroll.current ||\n            !ref.current) {\n            return;\n        }\n\n        // check if visible\n        let scrollTop = verticalScroll.current.scrollTop;\n        let scrollHeight = verticalScroll.current.offsetHeight;\n        let scrollBottom = scrollTop + scrollHeight;\n\n        let top = ref.current.offsetTop;\n        let bottom = top + ref.current.offsetHeight;\n\n        if (top < scrollTop || bottom > scrollBottom) {\n            // then we need to scroll\n            verticalScroll.current.scrollTo(0, top - 150);\n        }\n    }, [isSelected, ref, verticalScroll]);\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackTimeLine from './TrackTimeLine.js';\nimport {connect} from 'react-redux';\n\nconst SubSequenceTracks = ({\n    yScrollContainer,\n    wrapperRef,\n    subSequence,\n    style,\n    show,\n    width}) => { \n    if (!show) {\n        return '';\n    }\n    return (\n        <div className=\"sub-sequence-tracks\">\n        {subSequence.tracks.map(\n            track =>\n                <TrackTimeLine\n                  yScrollContainer={yScrollContainer}\n                  subSequence={subSequence}\n                  width={width}\n                  wrapperRef={wrapperRef}\n                  style={style}\n                  track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showTracks[props.subSequence.id],\n      numTracks: props.subSequence.tracks && props.subSequence.tracks.length\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubSequenceTracks);\n","export function getScrollLeft() {\n    let el = document.getElementsByClassName('arrangement-container')[0];\n    return el.scrollLeft;\n}\n","import React, {useCallback} from 'react';\nimport { connect } from \"react-redux\";\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\nimport {getScrollLeft} from './getScrollLeft.js';\nimport Step from 'components/track/Step.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {ARRANGEMENT_TRACK_PATTERN} from 'session/constants.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementMouseX,\n    setArrangementPatternDragging,\n    setArrangementPatternResizing,\n    setSelectedArrangementEvents,\n    setArrangementBottomMode}  from 'actions/index.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport Colors from 'components/Colors.js';\nimport {LEFT, RIGHT} from './constants.js';\n\nconst colors = new Colors();\n\nfunction PatternRoll(props) {\n    let length = props.pattern.length(props.resolution);\n\n    let steps = props.steps === undefined ? [] :\n        props.steps.map((s, i) => ({\n        stepNumber: i,\n        on: s,\n    }))\n        .filter(s => s.on);\n\n    const startDragging = useCallback((e) => {\n        e.stopPropagation();\n        let left = getBarWidth(props.startStep, props.resolution, props.xScale);\n        let offset = e.pageX + getScrollLeft() - left - INFO_COLUMN_WIDTH;\n        props.setPatternDragging(props.pattern, offset);\n\n        let selectedEvents = {};\n        selectedEvents[ARRANGEMENT_TRACK_PATTERN] = props.pattern;\n        props.setSelectedEvents(selectedEvents);\n        props.track.switchToPattern(props.patternNumber);\n        props.track.updateSteps(true);\n        if (props.sequencerEngine.state.arrangement.bottomMode !== PIANO_ROLL &&\n            props.isSelected) {\n            props.setArrangementMode(PIANO_ROLL);\n        }\n        props.setArrangementMouseX(undefined);\n        props.setArrangementCursorStep(undefined);\n    }, [\n        props.setArrangementMode,\n        props.startStep,\n        props.patternNumber,\n        props.setPatternDragging,\n        props.isSelected,\n        props.pattern,\n        props.xScale]);\n\n    const onMouseUp = useCallback((e) => {\n        e.stopPropagation();\n        props.setPatternDragging(undefined);\n        props.setPatternResizing(undefined);\n    }, [props.setPatternDragging], props.setPatternResizing);\n\n    const onEdgeMouseDown = useCallback((e, direction) => {\n        e.stopPropagation();\n        props.setPatternResizing(props.pattern, direction);\n    }, [props.setPatternResizing, props.pattern]);\n\n    // style\n    let style = {\n        backgroundColor: colors.getColorForHash(props.track.presetName || props.track.getName())\n    };\n    \n    style.width = getBarWidth(\n        props.pattern.length(),\n        props.resolution,\n        props.xScale);\n\n    let fullStyle = {\n        width: style.width,\n        left: getBarWidth(props.startStep, props.resolution, props.xScale)\n    };\n\n    let className = \"mini-piano-roll-wrapper\";\n    fullStyle['border'] = '1px solid ' + colors.brighten(style.backgroundColor, 0.3);\n    if (props.isSelected) {\n        fullStyle['border'] = '1px solid ' + style.backgroundColor;\n        fullStyle['backgroundColor'] = colors.brighten(style.backgroundColor, 0.3);\n        fullStyle['opacity'] = 0.7;\n    }\n\n    style.width -= 1;\n\n    return (\n        <div\n          onMouseUp={() => props.setPatternDragging(undefined)}\n          style={fullStyle}\n          className={className}>\n          <div\n            onMouseDown={startDragging}\n            onMouseUp={onMouseUp}\n            style={style} className=\"mini-piano-roll-header\">\n            <div\n              onMouseDown={(e) => onEdgeMouseDown(e, LEFT)}\n              className=\"left-edge\"></div>\n            <div className=\"middle\"></div>\n            <div\n              onMouseDown={(e) => onEdgeMouseDown(e, RIGHT)}\n              className=\"right-edge\"></div>\n          </div>\n          <div className=\"mini-piano-roll steps-map\">\n            {steps.map(\n                (x, i) =>\n                    <Step\n                          pattern={props.pattern}\n                          width={length * getBarWidth(2, props.resolution, props.xScale)}\n                          height={60}\n                          key={'mini-step-' + i + '-' + x.stepNumber}\n                          trackColor={\"#00ff14\"}\n                          length={length}\n                          track={props.track}\n                          stepNumber={x.stepNumber}\n                          resolution={props.resolution}\n                          stepData={x.step}/>\n            )}\n        \n        </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let steps = state.tracks.trackPatternSteps[props.track.subSequence.id] || {};\n\n    let selectedEvents = state.arrangement.selectedEvents;\n    let isSelected = selectedEvents === undefined ?\n            false :\n        selectedEvents[ARRANGEMENT_TRACK_PATTERN] === props.pattern;\n    let patternStartStep = state.arrangement.patternStartSteps[props.track.subSequence.id];\n    return {\n        isSelected: isSelected,\n        resolution: DEFAULT_RESOLUTION,\n        steps: steps[props.patternNumber],\n        xScale: state.arrangement.xScale,\n        startStep: patternStartStep ? patternStartStep[props.pattern.id] : 0,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n        setPatternDragging: (pattern, offset) => dispatch(setArrangementPatternDragging(pattern, offset)),\n        setPatternResizing: (pattern, resizing) => dispatch(setArrangementPatternResizing(pattern, resizing)),\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PatternRoll);\n\n","import React, {useState, useCallback} from 'react';\nimport PatternRoll from './PatternRoll.js';\nimport { connect } from \"react-redux\";\nimport Step from 'components/track/Step.js';\nimport {getScrollLeft} from './getScrollLeft.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {setArrangementBottomMode}  from 'actions/index.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {movePianoRollPattern} from 'session/operations/actions.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nfunction MiniPianoRoll(props) {\n    const onMouseMove = useCallback((e) => {\n        if (props.sequencerEngine.state.arrangement.patternDragging) {\n            e.stopPropagation();\n            let {patternDragging, offsetX} =\n                props.sequencerEngine.state.arrangement.patternDragging;\n            let x = e.pageX + getScrollLeft() - offsetX;\n            let stepNumber = getStepFromPosition(x, props.resolution, undefined, props.xScale);\n            dispatch(undefined, movePianoRollPattern(props.track, patternDragging, stepNumber));\n        }\n    }, [props.xScale]);\n    \n    return (\n        <div onMouseMove={onMouseMove}>\n          {props.track.patterns\n              .filter((x, i) => i >= 1)\n              .map((pattern, i) =>\n                   <PatternRoll\n                         key={'pattern-'+pattern.id}\n                         sequencerEngine={props.sequencerEngine}\n                         pattern={pattern}\n                         track={props.track}\n                         patternNumber={i+1}/>\n                  )}\n        </div>\n    );\n}\n\n\nconst mapStateToProps = (state, props) => {\n    return {\n        numPatterns: props.track.patterns.length,\n    };\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(MiniPianoRoll);\n\n","export const HEIGHT = 42;\nexport const INNER_HEIGHT = 42;\n\nexport function getXPositionFromStep(step, resolution, zoom=1) {\n    let ratio = resolution.resolution / 8;\n    return zoom * ratio * 100 * step / 32;\n}\n\nexport function getYPositionFromVolume(volume) {\n    return HEIGHT - volume * INNER_HEIGHT;\n}\n\nexport function getValueFromYPosition(position) {\n    return Math.max(0, Math.min(1, (HEIGHT  - position) / INNER_HEIGHT));\n}\n\n","import React, { useCallback, useState, memo } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport { connect } from \"react-redux\";\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport {\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nconst VolumeAutomationPoint = memo(({\n    onMouseDown,\n    highlightPoint,\n    unhighlightPoint,\n    onMouseUp,\n    step,\n    resolution,\n    xScale,\n    volume,\n    isHighlighted}) => {\n    return (\n        <circle\n          onMouseDown={onMouseDown}\n          onMouseOver={highlightPoint}\n          onMouseLeave={unhighlightPoint}\n          onMouseUp={onMouseUp}\n          cx={getXPositionFromStep(step, resolution, xScale)}\n          cy={getYPositionFromVolume(volume)}\n          r={2}\n          fill={isHighlighted ? 'blue' : 'black'}\n          stroke={isHighlighted ? 'blue' : 'red'}\n          strokeWidth={2} />\n    );\n    });\n\nconst mapStateToProps = (state, props) => {\n    return {\n        step: props.event.step,\n        volume: props.event.volume,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n \nexport default connect(mapStateToProps, null)(VolumeAutomationPoint);\n","import React, { useCallback, useState } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport {\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nexport default function VolumeGuidePoint(props) {\n    if (props.guidePoint === undefined) {\n        return (<Rect x={0} y={0} width={0} height={0}></Rect>);\n    }\n\n    return (\n         <circle\n           onMouseLeave={props.onMouseLeave}\n           onMouseDown={props.onClick}\n           cx={getXPositionFromStep(props.guidePoint.step, props.resolution, props.xScale)}\n           cy={getYPositionFromVolume(props.guidePoint.value)}\n           r={2}\n           fill={'blue'}\n           stroke={'blue'}\n           strokeWidth={2} />\n    );\n}\n","import React, { useRef, useCallback, useState } from 'react';\nimport { Circle, Group, Stage, Layer, Rect, Line} from 'react-konva';\nimport {getStepFromPosition} from '../getStepFromPosition.js';\nimport { connect } from \"react-redux\";\nimport {DEFAULT_RESOLUTION} from '../constants.js';\nimport VolumeAutomationPoint from './VolumeAutomationPoint.js';\nimport VolumeGuidePoint from './VolumeGuidePoint.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementMouseX,\n    setArrangementRowSelections,\n       } from 'actions/index.js';\nimport {\n    SUB_SEQUENCE_VOLUME_CHANGE\n} from 'session/constants.js';\nimport SubSequenceVolumeChangeEvent from 'session/SubSequenceVolumeChangeEvent.js';\nimport {\n    HEIGHT,\n    getValueFromYPosition,\n    getXPositionFromStep,\n    getYPositionFromVolume\n} from './positionUtils.js';\n\nfunction VolumeChangeAutomation(props) {\n    let ref = useRef(undefined);\n    let [guidePoint, setGuidePoint] = useState(undefined);\n    let [pointBeingDragged, setPointBeingDragged] = useState(undefined);\n    let [highlightedPoint, setHighlightedPoint] = useState(undefined);\n    let [pointHasDragged, setPointHasDragged] = useState(false);\n\n    const getXY = (e) => {\n        let rect = ref.current.getBoundingClientRect();\n        return {\n            x: e.clientX - rect.left,\n            y: e.clientY - rect.top,\n        };\n    };\n\n    const onClickLine = (e) => {\n        e.stopPropagation();\n        let state = props.sequencerEngine.store.getState();\n        let {x, y} = getXY(e);\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        if (isNaN(step)) {\n            return;\n        }\n        let value = getValueFromYPosition(y);\n        let event = new SubSequenceVolumeChangeEvent(\n            props.subSequence, value);\n        event.step = step;\n        props.subSequence.mix.insertEvent(event, 1);\n        setGuidePoint(undefined);\n        setPointBeingDragged(event);\n        setPointHasDragged(true);\n        props.clearSelection();\n    };\n\n    const getValue = () => {\n        let state = props.sequencerEngine.store.getState();\n        let fade = state.mix.subSequenceFades[props.subSequence.id];\n        return fade === undefined ? 1 : fade;\n    };\n\n    const getLinePoints = () => {\n        let events = props.events || [];\n        let pts = []; \n        if (events.length === 0  || events[0].step > 1) {\n            let startY = getYPositionFromVolume(getValue()); \n            pts = [{x: 0, y: startY}];\n        }\n        for (let i in events) {\n            pts.push({\n                x: getXPositionFromStep(events[i].step, props.resolution, props.xScale),\n                y : getYPositionFromVolume(events[i].volume)\n            });\n        }\n\n        let last = pts[pts.length - 1];\n\n        pts.push({\n            x: last.x + 1000,\n            y: last.y\n        });\n        return pts;\n    };\n\n    const onMouseMove = useCallback((e) => {\n        if (pointBeingDragged === undefined) {\n            return;\n        }\n\n        let {x,y} = getXY(e);\n        let state = props.sequencerEngine.store.getState();\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        let value = getValueFromYPosition(y);\n        pointBeingDragged.step = step;\n        pointBeingDragged.value = value;\n        props.subSequence.volumeAutomationMix.updateRedux(\n            props.subSequence,\n            props.sequencerEngine\n        );\n        setGuidePoint(undefined);\n        setPointHasDragged(true);\n        props.setArrangementMouseX(undefined);\n        props.setArrangementCursorStep(undefined);\n        props.clearSelection();\n    }, [pointBeingDragged, props.events, props.resolution]);\n\n    const showGuidePoint = useCallback((e) => {\n        let {x,y} = getXY(e);\n        let state = props.sequencerEngine.store.getState();\n        let step = getStepFromPosition(x, props.resolution, 0, state.arrangement.xScale);\n        let value = getValueFromYPosition(y);\n        setGuidePoint({step, value});\n    }, [setGuidePoint, props.resolution]);\n\n    const onHighlightPoint = useCallback((event) => {\n        setHighlightedPoint(event);\n        setGuidePoint(undefined);\n    }, [setGuidePoint, setHighlightedPoint]);\n\n    const clearState = useCallback((e) => {\n        setPointBeingDragged(undefined);\n        setHighlightedPoint(undefined);\n        setGuidePoint(undefined);\n        setPointHasDragged(false);\n    }, [setPointBeingDragged, setHighlightedPoint, setGuidePoint]);\n\n    const deleteIfNecessary = useCallback((event) => {\n        if (!pointHasDragged) {\n            props.subSequence.volumeAutomationMix.deleteEvent(event);\n        }\n        clearState();\n    }, [pointHasDragged]);\n\n    let events = props.events || [];\n\n    let width = getXPositionFromStep(props.subSequence.mix.length + 1000, props.resolution, props.xScale);\n\n    let pts = getLinePoints();\n    return (\n        <div className=\"linear-automation-container\">\n          <svg\n            ref={ref}\n            width={width}\n            height={HEIGHT}\n            onMouseLeave={clearState}\n            onMouseMove={onMouseMove}\n            onMouseUp={clearState}\n            >\n            <path\n              onMouseMove={(e) => showGuidePoint(e)}\n              onMouseOver={(e) => showGuidePoint(e)}\n              onMouseDown={(e) => onClickLine(e)}\n              alpha={0}\n              fill=\"transparent\"\n              opacity={0}\n              strokeWidth={16}\n              d={\"M 0 0 L \" + pts.slice(1).map(({x,y}) => x + ' ' + y).join(' ')}\n              stroke={'black'}/>\n            <path\n              onMouseMove={(e) => showGuidePoint(e)}\n              onMouseOver={(e) => showGuidePoint(e)}\n              onMouseDown={(e) => onClickLine(e)}\n              closed={false}\n              fill=\"transparent\"\n              strokeWidth={2}\n              d={\"M 0 0 L \" + pts.slice(1).map(({x,y}) => x + ' ' + y).join(' ')}\n              stroke={'red'}/>\n            <VolumeGuidePoint\n              resolution={props.resolution}\n              onMouseLeave={() => setGuidePoint(undefined)}\n              xScale={props.xScale}\n              guidePoint={guidePoint}\n              onClick={onClickLine}/>\n            {events.map(\n                (event, i) => \n                    <VolumeAutomationPoint\n                      key={\"automation-\" + event.id}\n                      highlightPoint={() => onHighlightPoint(event)} \n                      unhighlightPoint={() => setHighlightedPoint(undefined)}\n                      isHighlighted={event === highlightedPoint || event === pointBeingDragged}\n                      onMouseDown={() => setPointBeingDragged(event)}\n                      onMouseUp={() => deleteIfNecessary(event)}\n                      event={event}\n                    />)}\n      </svg>\n            </div>\n    );\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        clearSelection: () => dispatch(setArrangementRowSelections({})),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let events = mixEvents !== undefined ?\n        mixEvents[props.eventType] :\n        undefined;\n    let fade = state.mix.subSequenceFades[props.subSequence.id];\n\n    return {\n        events: events,\n        volume: state.mix.isPlayingMix ? undefined :\n            fade === undefined ? 1 : fade,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\nfunction partitionBy(list) {\n   return [list];\n}\n \nexport default connect(mapStateToProps, mapDispatchToProps)(VolumeChangeAutomation);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport InstallationVolume from \"components/track/InstallationVolume.js\";\nimport {\n    setArrangementPatternSelected,\n    setArrangementBottomMode,\n} from 'actions/index.js';\nimport AutomationParameterDropdowns from 'components/automation/AutomationParameterDropdowns.js';\nimport AutomationToolbar from \"components/installation/AutomationToolbar.js\";\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {getTrackName} from 'utils/getTrackName.js';\n\nconst colors = new Colors();\nconst DOUBLE_CLICK_TIME = 200;\n\nconst TrackSidePanel = ({\n    setPatternSelected,\n    track,\n    isSelectedTrack,\n    enabled,\n    muted,\n    solod,\n    setBottomMode\n}) => { \n    let lastClick = useRef(0);\n    let name = track.presetName || track.getName();\n    if (!track.presetName && track.sample) {\n        name = track.sample.name;\n    }\n\n    let color = colors.getColorForTrack(track);\n\n    let style = {\n    };\n\n    if (isSelectedTrack ){\n        style.backgroundColor = color;\n    }\n\n    const onClick = useCallback((e) => {\n        e.stopPropagation();\n        track.sequencerEngine.selectTrack(track.trackNumber);\n\n        let now = new Date().getTime();\n        if (now - lastClick.current < DOUBLE_CLICK_TIME) {\n            setBottomMode(EFFECTS);\n        }\n\n        lastClick.current = now;\n    }, [track]);\n\n    const onClickMute = useCallback(() => {\n        track.mute(!muted);\n    }, [muted, track]);\n\n    const onClickSolo = useCallback(() => {\n        track.solo(!solod);\n    }, [solod, track]);\n\n    const onClickEnable = useCallback(() => {\n        track.setIsEnabled(!enabled);\n    }, [enabled, track]);\n\n    return (\n        <div\n          onClick={onClick}\n          style={{borderRightColor: color}} className=\"track-side-panel\">\n          <div\n            style={style}\n            className=\"track-name\">\n            {name.trim()}\n          </div>\n          <AutomationParameterDropdowns\n            isMix={true}\n            sequencerEngine={track.sequencerEngine}\n            track={track}/>\n          <div className=\"track-controls\">\n            <InstallationVolume track={track} sequencerEngine={track.sequencerEngine}/>\n            <div\n              onClick={onClickMute}\n              className={muted ? \"muted mute-btn\" : \"mute-btn\"}>{track.trackNumber + 1}</div>\n            <div\n              onClick={onClickSolo}\n              className={solod ? \"solod solo-btn\" : \"solo-btn\"}>s</div>\n            <div\n              onClick={onClickEnable}\n              className={enabled ? \"enabled enable-btn\" : \"enable-btn\"}></div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    let currentSubSequence = props.track.sequencerEngine.currentSubSequence;\n    let track = props.track;\n    let _track = track;\n    if (track && track.tracks && track.tracks[0]) {\n        _track = track.tracks[0].track;\n    }\n    \n    return {\n        id: _track.presetName ? _track.presetName :\n            _track.sample !== undefined && _track.sample.getId() !== undefined ?\n            _track.sample.getId() :\n            _track.getName(),\n        isSelectedTrack: isSelectedTrack && props.track.subSequence === currentSubSequence,\n        solod: props.track.getSolo(),\n        muted: props.track.muted,\n        enabled: props.track.isEnabled\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x)),\n      setBottomMode: (x) => dispatch(setArrangementBottomMode(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackSidePanel);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackSidePanel from './TrackSidePanel.js';\nimport {\n    setShowAutomation\n} from 'actions/index.js';\n\nconst TracksSidePanel = ({\n    style, subSequence, setShowAutomation}) => { \n    let color = style.backgroundColor;\n    style = {\n        backgroundColor: color //\"linear-gradient(0deg, #ffffff61, \" + color + \"  25%)\"\n    };\n\n    return (\n        <div style={style} className=\"tracks-side-panel\">\n          {subSequence.tracks.map(\n              track => <TrackSidePanel key={track.id} track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowAutomation: (show) =>\n          dispatch(setShowAutomation(show)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksSidePanel);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setArrangementPatternSelected} from 'actions/index.js';\nimport {setShowArrangementTracks} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst TracksShowButton = ({\n    patternSelected,\n    setPatternSelected,\n    subSequence,\n    show,\n    setShowArrangementTracks\n}) => { \n    const onClick = useCallback(() => {\n        if (show && patternSelected && patternSelected.subSequence === subSequence) {\n            // hiding so we must unselect any selected patterns\n            setPatternSelected(undefined);\n        }\n        setShowArrangementTracks(!show);\n    }, [patternSelected, show, subSequence]);\n    return (\n        <div\n          onClick={onClick}\n          className=\"tracks-show-button\">\n          {show ? <div className=\"arrow-down\"/> : <div className=\"arrow-right\"/>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      show: state.arrangement.showTracks[props.subSequence.id],\n      patternSelected: state.arrangement.patternSelected\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setShowArrangementTracks: (x) => dispatch(setShowArrangementTracks(props.subSequence.id, x)),\n      setPatternSelected: (x) => dispatch(setArrangementPatternSelected(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksShowButton);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport Dropdown from 'react-dropdown';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE\n} from 'session/constants.js';\n\nfunction AutomationTypeDropdown(props) {\n    function onChange(type) {\n        props.subSequence.setAutomationToShow(type);\n    }\n\n    return (\n        <Dropdown\n          className='automation-type-dropdown'\n          controlClassName='automation-type-control-dropdown'\n          arrowClassName='automation-type-arrow-dropdown'\n          options={OPTIONS}\n          onChange={(o) => onChange(o.value)}\n          value={getOption(props.automationTypeToShow)}\n          placeholder=\"Rate\" />\n    );\n}\n\nconst OPTIONS = [\n    {value: PATTERN_SWITCH, label: 'Pattern'},\n    {value: SUB_SEQUENCE_VOLUME_CHANGE, label: 'Volume'},\n];\n\nfunction getOption(value=PATTERN_SWITCH) {\n    return OPTIONS.find(opt => opt.value === value);\n}\n\n\nconst mapStateToProps = (state, props) => {\n    return {\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n    };\n};\n \nexport default connect(mapStateToProps, null)(AutomationTypeDropdown);\n","import React, { Component } from 'react';\nimport TracksSidePanel from './tracks/TracksSidePanel.js';\nimport TracksShowButton from './tracks/TracksShowButton.js';\nimport {getIsSelected} from './selectors.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getVolume} from 'utils/getVolume.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport AutomationTypeDropdown from './AutomationTypeDropdown.js';\nimport { connect } from \"react-redux\";\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport VolumeBox from 'components/instruments/VolumeBox.js';\nimport Colors from 'components/Colors.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementBottomMode,\n    setArrangementSelectedRows,\n} from 'actions/index.js';\n\nconst colors = new Colors();\nconst NAMES = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H'];\nconst MAX_NAME_LENGTH = 18;\n\nfunction SubSequenceSidePanel(props) {\n    const onChangeVolume = (volume) => {\n        props.subSequence.fade = volume;\n    };\n\n    const onClickMute = () => {\n        props.subSequence.mute = !props.muted;\n    };\n\n    const stopPropagation = (e) => {\n        e.stopPropagation();\n    };\n\n    const toggleEnabled = () => {\n        props.subSequence.tracks[0].toggleEnabled();\n    };\n\n    const selectRow = (e) => {\n        e.stopPropagation();\n        props.setSelectedRows([props.subSequence.id]);\n        props.sequencerEngine.switchToSubSequence(props.subSequence.id, false);\n        /*\n        if (props.subSequence.tracks.length === 1) {\n            // props.subSequence.tracks[0].updateSteps();\n            //props.setArrangementMode(EFFECTS);\n        } else {\n            props.setArrangementMode(undefined);\n        }\n        */\n\n        // props.clearSelectedArrangementEvents();\n    };\n\n    let className = \"pattern-info sub-sequence\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n\n    let name = props.subSequence.tracks.length === 1 ?\n        props.subSequence.tracks[0].presetName ||\n        props.subSequence.tracks[0].getName() : NAMES[props.i];\n\n    if (name !== undefined && name.length >= MAX_NAME_LENGTH) {\n        name = name.substring(0, MAX_NAME_LENGTH);\n    }\n\n    const onVolumeChange = (v) => {\n        props.subSequence.fade = v;\n    };\n\n    let nameClass = props.subSequence.isTrack ? 'sub-sequence-name is-track' : 'sub-sequence-name';\n    let nameStyle = {\n    };\n\n    if (props.subSequence.isTrack && props.isSelected) {\n        let track = props.subSequence.tracks[0];\n        let name = track.presetName || track.getName();\n        nameStyle = {\n            backgroundColor: colors.getColorForHash(name)\n        };\n    }\n\n    let id = typeof props.subSequence.id === \"string\" ?\n        props.subSequence.id.slice(0, 10) :\n        \"s\" + props.subSequence.id;\n    let color = colors.saturate(colors.getColorForHash(id), 3);\n    let style = {\n        borderRightColor: color,\n        backgroundColor: color\n    };\n\n    return (\n        <div>\n        <div\n          onMouseDown={e => e.stopPropagation()}\n          onMouseUp={e => e.stopPropagation()}\n          onClick={selectRow}\n          onMouseMove={stopPropagation}\n          style={style}\n          onDragStart={stopPropagation}\n          className={className}>\n          <div\n            style={nameStyle}\n            className={nameClass}>\n            {name}\n          </div>\n          <div className=\"panel-rest\">\n            <div className=\"track-controls-container\">\n              <ConditionedComponent condition={props.subSequence.isTrack}>\n                  <div \n                    onClick={() => toggleEnabled()}\n                    className={props.isEnabled ? \"midi-recording-button on\" : \"midi-recording-button off\"}>\n                    <span className=\"black plain-dot\"></span>\n                  </div>\n                </ConditionedComponent>\n              <TracksShowButton subSequence={props.subSequence}/>\n            </div>\n          </div>\n        </div>\n          {props.showTracks ? <TracksSidePanel style={style} subSequence={props.subSequence}/> : ''}\n        </div>\n    );\n    \n}\n\nconst mapStateToProps = (state, props) => {\n    let volume = state.mix.subSequenceFades[props.subSequence.id];\n    let enabledMap = state.tracks.trackIsEnabled[props.subSequence.id] || {};\n    let isEnabled = enabledMap[0];\n\n    return {\n        isSelected: getIsSelected(state, props),\n        volume: volume === undefined ? 1 : volume,\n        muted: state.mix.subSequenceMuted[props.subSequence.id],\n        isEnabled:  isEnabled === undefined ? false : isEnabled,\n        showTracks: state.arrangement.showTracks[props.subSequence.id],\n        numTracks: props.subSequence.tracks && props.subSequence.tracks.length\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setArrangementMode: (mode) => dispatch(setArrangementBottomMode(mode)),\n        clearSelectedArrangementEvents: () => dispatch(setSelectedArrangementEvents(undefined)),\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(SubSequenceSidePanel);\n","import {getStepFromPosition} from './getStepFromPosition.js';\nimport {getTotalLength} from \"components/arrangement/getTotalLength.js\";\nimport {\n    setTotalArrangementLength\n} from 'actions/index.js';\nimport SequenceRollEvent from 'session/SequenceRollEvent.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {insertRollEvent} from 'session/operations/actions.js';\nimport {insertEvent} from 'session/operations/actions.js';\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\nimport {setSelectedArrangementEvents} from 'actions/index.js';\n\nconst DEFAULT_ROLL_DURATION = 8;\nconst DEFAULT_PATTERN_DURATION = 32;\n\nexport function getCursorStep(store) {\n    let state = store.getState();\n    return state.arrangement.cursorStep;\n}\n\nexport function insertPatternEventAtCursor(mix, store) {\n    let resolution = store.getState().sequencer.displayResolution;\n    let cursorStep = getCursorStep(store);\n    let event = new PatternSwitchEvent(0);\n    event.step = cursorStep;\n    mix.dispatch(insertEvent(event, DEFAULT_PATTERN_DURATION));\n    store.dispatch(setSelectedArrangementEvents([event]));\n\n    // update the total length in redux for the arr. view\n    mix.sequencerEngine.dispatch(\n        setTotalArrangementLength(getTotalLength(mix.sequencerEngine)));\n}\n\nexport function insertRollEventAtCursor(mix, store) {\n    let state = store.getState();\n    let resolution = state.sequencer.displayResolution;\n    let cursorStep = getCursorStep(store);\n    let eventOn = new SequenceRollEvent(true, resolution);\n    eventOn.step = cursorStep;\n\n    let dur = 64;\n    let xScale = state.arrangement.xScale;\n    if (xScale < 0.8) {\n        dur *= 2;\n    } else if (xScale < 0.4) {\n        dur *= 4;\n    }\n    mix.dispatch(insertRollEvent(eventOn, dur / resolution.resolution));\n    store.dispatch(setSelectedArrangementEvents([eventOn.initialSubEvent]));\n}\n","/**\n *\n * A sub-sequence within an arrangement. Contains pattern events\n * that can be resized.\n * If the sub-sequence is \"expanded\", the underlying tracks will be\n * displayed underneath it.\n */\n\nimport React, { useRef, useEffect, useState, useCallback, Component } from 'react';\nimport SubSequenceTracks from './tracks/SubSequenceTracks.js';\nimport { connect } from \"react-redux\";\nimport { getIsSelected} from './selectors.js';\nimport {dragPattern} from 'actions/index.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {resizePianoRollPattern} from 'session/operations/actions.js';\nimport MouseHelper from './MouseHelper.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport MiniPianoRoll from './MiniPianoRoll.js';\nimport RowSelection from './RowSelection.js';\nimport VolumeChangeAutomation from './automation/VolumeChangeAutomation.js';\nimport SubSequenceSidePanel from './SubSequenceSidePanel.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport PatternComponent from './PatternComponent.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {useRowSelection} from './useRowSelection.js';\nimport {useScroll} from './useScroll.js';\nimport {getWindowedEvents} from './getWindowedEvents.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {insertPatternEventAtCursor} from './cursor.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {\n    setArrangementMouseX,\n    setArrangementCursorStep,\n    setArrangementPatternSelected,\n    setSelectedArrangementEvents,\n    setArrangementSelectedRows,\n    setArrangementRowSelections,\n} from 'actions/index.js';\nimport {\n    PATTERN_SWITCH,\n    SUB_SEQUENCE_VOLUME_CHANGE,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {LEFT, RIGHT} from './constants.js';\n\nconst CLICK_THRESHOLD = 200;\n\nconst SubArrangementComponent = (props) => {\n\n    const getState = () => {\n        return props.sequencerEngine.store.getState();\n    };\n\n    const patternSwitchEvents = () => {\n        let mixEvents = getState().arrangement.mixEvents[props.subSequence.id];\n        return mixEvents !== undefined ? mixEvents[PATTERN_SWITCH] || [] : [];\n    };\n\n    const {visibleView} = useScroll({\n        ref: props.wrapperRef,\n        resolution: props.resolution,\n        xScale: props.xScale,\n        events: patternSwitchEvents(),\n        sequencerEngine: props.sequencerEngine,\n        eventsLength: props.eventsLength\n    });\n\n    const {onRowSelectionUp, onRowSelectionDown, onRowSelectionMove} =\n          useRowSelection({\n              id: props.subSequence.id,\n              sequencerEngine: props.sequencerEngine,\n              xScale: props.xScale,\n              resolution: props.resolution,\n              setArrangementRowSelections: props.setArrangementRowSelections,\n              scrollContainer: props.wrapperRef\n          });\n\n    const patternEventDragging = useRef(undefined);\n    const resizing = useRef(false);\n    const draggingDiff = useRef(0);\n    const lastClickTime = useRef(undefined);\n    const direction = useRef(undefined);\n\n    const scrollLeft = () => props.wrapperRef.current.scrollLeft;\n\n    const mix = props.subSequence.mix;\n\n    const onDragPatternEvent = useCallback((e, patternEvent) => {\n        e.stopPropagation();\n        if (patternEvent.patternNumber === 0) {\n            // we don't let you fuck with the first pattern\n            return;\n        }\n        let step = getStepFromPosition(e.pageX + scrollLeft(), props.resolution, undefined, props.xScale);\n        patternEventDragging.current = patternEvent;\n        draggingDiff.current = step - patternEvent.step;\n    }, [props.resolution, props.xScale]);\n\n    // when the right edge of a pattern is dragged this\n    // is called\n    const onEdgeMouseDown = (event,  _direction) => {\n        resizing.current = event;\n        direction.current = _direction;\n    };\n\n    const onRowMouseUp = () => {\n        let currentTime = new Date().getTime();\n        if (lastClickTime.current &&\n            currentTime - lastClickTime.current <= CLICK_THRESHOLD) {\n            insertPatternEventAtCursor(mix, props.sequencerEngine.store);\n        }\n        lastClickTime.current = currentTime;\n        onRowSelectionUp();\n    };\n     \n    const onMouseUp = useCallback((event) => {\n        resizing.current = undefined;\n        direction.current = undefined;\n        props.onMouseUp();\n    }, [props.onMouseUp]);\n\n    const onMouseMove = useCallback((e) => {\n        let step = getStepFromPosition(e.pageX + scrollLeft(), props.resolution, undefined, props.xScale);\n        let resolution = 32 / props.resolution.resolution;\n        let remainder = step % resolution;\n        step -= remainder;\n        let resizedStep = Math.floor(step);\n\n        if (resizing.current) {\n           let difference = \n                step - (resizing.current.step + resizing.current.duration);\n\n            if (direction.current === RIGHT) {\n                let nextEvent = mix.getNextEvent(resizing.current);\n                if (nextEvent) {\n                    let nextStepAfter = mix.getNextEvent(nextEvent);\n                    if (nextStepAfter) {\n                        // don't allow resizing past the following event\n                        if (resizedStep < nextStepAfter.step &&\n                            resizing.current.step < resizedStep) {\n                            nextEvent.step = resizedStep;\n                            mix.updateAllTypeRedux();\n                        }\n                    } else if (resizing.current.step < resizedStep) {\n                        nextEvent.step = resizedStep;\n                        mix.updateAllTypeRedux();\n                    }\n                }\n            } else {\n                let previousEvent = mix.getPreviousEvent(resizing.current);\n                let nextStep = mix.getNextEvent(resizing.current);\n                if (previousEvent === undefined || resizedStep > previousEvent.step) {\n                    if (nextStep === undefined || resizedStep < nextStep.step) {\n                        resizing.current.step = resizedStep;\n                        mix.updateAllTypeRedux();\n                    }\n                } \n            }\n            if (!props.isSelected) {\n                selectRow();\n            }\n        } else if (patternResizing()) {\n            let {pattern, direction} = patternResizing();\n            dispatch(resizePianoRollPattern(pattern, direction, resizedStep));\n        } else {\n            onRowSelectionMove(e, props.resolution, props.xScale);\n        }\n    }, [props.resolution, props.xScale, props.isSelected]);\n\n    const onMouseLeave = () => {\n        resizing.current = undefined;\n    };\n\n    const onDrop = useCallback((event) => {\n        let step = getStepFromPosition(\n            event.pageX + scrollLeft(),\n            props.resolution,\n            undefined,\n            props.xScale);\n        step = quantizeStep(step, props.resolution);\n\n        if (props.patternDragging !== undefined) {\n            let patternSwitch = new PatternSwitchEvent(\n                props.patternDragging);\n\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            patternSwitch.step = step;\n            mix.insertEvent(\n                patternSwitch, 32);\n            props.dragPattern(undefined);\n        } else if (patternEventDragging.current !== undefined) {\n            let event = patternEventDragging.current;\n            mix.deleteEvent(event);\n            step -= draggingDiff.current;\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            event.step = step;\n            mix.insertEvent(\n                event, event.duration);\n\n            patternEventDragging.current = undefined;\n        }\n    }, [props.resolution, props.patternDragging]);\n\n    const onSelect = (event) => {\n        console.log('on select');\n        let _selectedEvents = {... selectedEvents()} || {};\n\n        props.setArrangementCursorStep(event.step);\n        props.setArrangementMouseX(undefined);\n        if (isSelected(event)) {\n            delete _selectedEvents[event.id];\n\n            props.setSelectedEvents(selectedEvents);\n            props.setArrangementRowSelections({});\n            return;\n        }\n\n        props.setArrangementRowSelections({});\n        if (getState().arrangement.patternSelected) {\n            props.setPatternSelected(event);\n        }\n        _selectedEvents = {};\n        _selectedEvents[event.id] = event;\n        props.setSelectedEvents(_selectedEvents);\n    };\n\n    const isSelected = (event) => {\n        return selectedEvents() === undefined ?\n            false :\n            selectedEvents()[event.id] !== undefined;\n    };\n\n    const onDragOver = (e) => {\n        e.preventDefault();\n    };\n\n\n    const selectedEvents = () => {\n        return getState().arrangement.selectedEvents;\n    };\n\n    const patternResizing = () => {\n        return getState().arrangement.patternResizing;\n    };\n\n    const selectRow = () => {\n        props.setSelectedRows([props.subSequence.id]);\n        props.sequencerEngine.switchToSubSequence(props.subSequence.id, false);\n    };\n\n    const onMouseDown = useCallback((e) => {\n        onRowSelectionDown(e);\n        selectRow();\n    }, [props.resolution, props.xScale]);\n\n    let eventComponents = '';\n    if (props.subSequence.isTrack) {\n        eventComponents = (\n            <MiniPianoRoll\n              track={props.subSequence.tracks[0]}\n              xScale={props.xScale}\n              resolution={props.resolution}\n              sequencerEngine={props.sequencerEngine}\n              subSequence={props.subSequence}/>\n        );\n    } else {\n        let _patternSwitchEvents = patternSwitchEvents() || [];\n        let smallPattern = false;\n        if (props.automationTypeToShow === SUB_SEQUENCE_VOLUME_CHANGE) {\n            smallPattern = true;\n        }\n        let eventsToShow = [];\n        if (visibleView.start !== undefined) {\n            eventsToShow = \n                _patternSwitchEvents.slice(visibleView.start, visibleView.end + 1);\n        }\n        eventComponents = [\n            (<div className=\"pattern-filler\" style={{width: visibleView.preWidth}}/>),\n            ...eventsToShow .map(\n                    (event, i) =>\n                        <PatternComponent\n                          i={i}\n                          smallPattern={smallPattern}\n                          key={event.id}\n                          type={PATTERN_SWITCH}\n                          resolution={props.resolution}\n                          subSequence={props.subSequence}\n                          isLast={i === patternSwitchEvents.length - 1}\n                          isFirst={i === 0}\n                          onDragStart={(e) => onDragPatternEvent(e, event)}\n                          onSelect={() => onSelect(event)}\n                          onRightMouseDown={(e) => onEdgeMouseDown(event, RIGHT)}\n                          onMouseUp={onMouseUp}\n                          xScale={props.xScale}\n                          onMouseLeave={onMouseLeave}\n                          onLeftMouseDown={(e) => onEdgeMouseDown(event, LEFT)}\n                          sequencerEngine={props.sequencerEngine}\n                          event={event}\n                          arrangementContainer={props.wrapperRef}\n                        />)\n        ];\n    }\n\n    let automations = '';\n    if (props.automationTypeToShow !== undefined &&\n        props.automationTypeToShow !== PATTERN_SWITCH) {\n        automations = (\n            <VolumeChangeAutomation\n              eventType={props.automationTypeToShow}\n              sequencerEngine={props.sequencerEngine}\n              subSequence={props.subSequence}/>\n        );\n    }\n\n    let className = \"pattern-row\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n    let smallPattern = false;\n    if (props.automationTypeToShow === SUB_SEQUENCE_VOLUME_CHANGE) {\n        smallPattern = true;\n        className += ' automation';\n    }\n\n    let style = {\n        width: props.width\n    };\n\n    className += \" \" + props.subSequence.id;\n    return (\n        <div className=\"sub-sequence-arrangement-container\">\n          <div\n            style={style}\n            onClick={selectRow}\n            onDrop={onDrop}\n            onDragOver={onDragOver}\n            onMouseDown={onMouseDown}\n            onMouseUp={onRowMouseUp}\n            onMouseMove={onMouseMove}\n            onMouseLeave={onMouseLeave}\n            className={className}>\n            <RowSelection id={props.subSequence.id}/>\n            <MouseHelper subSequence={props.subSequence}/>\n            <div\n              className=\"patterns-arrangement-container\">\n              {eventComponents}\n            </div>\n            {automations}\n          </div>\n          <SubSequenceTracks\n            width={props.width}\n            yScrollContainer={props.yScrollContainer}\n            wrapperRef={props.wrapperRef}\n            style={style}\n            subSequence={props.subSequence}/>\n        </div>\n    );\n}\n\nconst mapDispatchToProps = (dispatch, props) => {\n    let subSequenceId = props.subSequence.id;\n    return {\n        dragPattern : p => dispatch(dragPattern(p)),\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setPatternSelected: p => dispatch(setArrangementPatternSelected(p)),\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementRowSelections: (selections) => dispatch(\n            setArrangementRowSelections(selections)),\n        setArrangementMouseX: (x) => dispatch(\n            setArrangementMouseX(x)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x))\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[props.subSequence.id];\n    let patternSwitchEvents = mixEvents !== undefined ?\n        mixEvents[PATTERN_SWITCH] : undefined;\n    return {\n        eventsLength: patternSwitchEvents === undefined ? 0 : patternSwitchEvents.length,\n        patternDragging: state.sequencer.patternDragging,\n        resolution: DEFAULT_RESOLUTION,\n        automationTypeToShow: state.arrangement.automationTypeToShow[props.subSequence.id],\n        isSelected: getIsSelected(state, props),\n        xScale: state.arrangement.xScale,\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubArrangementComponent);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\nimport {useSticky} from './useSticky.js';\nimport {connect} from 'react-redux';\n\nconst SidePanelToolbar = (props) => { \n    const ref = useRef(undefined);\n    const {sticky} = useSticky({\n        scrollContainer: props.scrollContainer,\n        stickyContainer: ref\n    });\n    let style = sticky ? sticky : {};\n    const [dropdownOpen, setDropdownOpen] = useState(false);\n\n    const onNewMix = () => {\n        props.sequencerEngine.mix.clear();\n        props.sequencerEngine.subSequences.forEach(\n            s => s.mix.clear());\n        // find all mix automations and delete them\n        for (let s of props.sequencerEngine.subSequences) {\n            for (let track of s.tracks) {\n                let automatedParameters = track.getAllParameters()\n                    .filter(\n                        x => x.mixAutomation &&\n                            x.mixAutomation.automations.length > 0);\n                automatedParameters.forEach(\n                    s => s.mixAutomation.deleteAutomations());\n            }\n        }\n    };\n\n    return (\n        <div style={style} ref={ref} className=\"side-panel-toolbar\">\n          <ButtonDropdown\n            className=\"view-dropdown\"\n            show={dropdownOpen ? \"true\" : \"false\"}\n            isOpen={dropdownOpen}\n            toggle={() => setDropdownOpen(!dropdownOpen)}>\n            <DropdownToggle size=\"sm\" caret color=\"primary\">\n              <img className=\"actions-btn\" src=\"/automation-icon-disabled.png\"/>\n            </DropdownToggle>\n            <DropdownMenu>\n              <DropdownItem onClick={onNewMix}size=\"sm\">New Mix</DropdownItem>\n            </DropdownMenu>\n          </ButtonDropdown>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidePanelToolbar);\n","import SubSequenceSidePanel from './SubSequenceSidePanel.js';\nimport SidePanelToolbar from './SidePanelToolbar.js';\nimport { connect } from \"react-redux\";\nimport {getIsSelected} from './selectors.js';\nimport React, { useState } from 'react';\nimport {\n    NO_SUB_SEQUENCE\n    } from 'session/constants.js';\n\nfunction SidePanelContainer(props) {\n    let rollClassName = \"pattern-info\";\n    if (props.isRollSelected) {\n        rollClassName += ' selected';\n    }\n    /*\n         */\n \n    return (\n        <div className=\"side-panel-container\">\n          <SidePanelToolbar\n            scrollContainer={props.scrollContainer}\n            sequencerEngine={props.sequencerEngine}/>\n         {props.sequencerEngine.subSequences\n              .filter(s => !s.isTrack)\n              .map(\n              (subSequence, i) =>\n          <SubSequenceSidePanel i={i} sequencerEngine={props.sequencerEngine} subSequence={subSequence}/>)}\n        {props.sequencerEngine.subSequences\n              .filter(s => s.isTrack)\n              .map(\n              (subSequence, i) =>\n          <SubSequenceSidePanel i={i} sequencerEngine={props.sequencerEngine} subSequence={subSequence}/>)}\n            <div className={rollClassName}>\n            <div className=\"roll sub-sequence-name\">\n              ROLL\n            </div>\n            </div>\n        </div>\n    );\n \n}\nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    return {\n        isRollSelected: getIsSelected(state, props),\n        subSequences: state.sequencer.subSequences[id],\n    };\n};\n \nexport default connect(mapStateToProps, null)(SidePanelContainer);\n","import React, { useState, useCallback } from 'react';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport { connect } from \"react-redux\";\nimport { setArrangementSelection } from \"actions/index.js\";\nimport { setArrangementRowSelections } from \"actions/index.js\";\nimport { setArrangementLoopSelected } from \"actions/index.js\";\nimport {NO_SUB_SEQUENCE} from 'session/constants.js';\n\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nfunction SelectionComponent(props) {\n    if (props.selectionStart === undefined) {\n        return '';\n    }\n     let style = {\n        left: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n\n    let className = \"absolute-selection\";\n    if (props.loopSelected) {\n        className += ' looping'\n    }\n    return (\n        <div className={className} style={style}>\n        </div>\n    );       \n}\n\nfunction getSelectionStyle(props) {\n    return {\n        marginLeft: getBarWidth(props.selectionStart, props.resolution, props.xScale),\n        width: getBarWidth(props.selectionEnd - props.selectionStart, props.resolution, props.xScale),\n    };\n}\n\nconst mapStateToProps = state => {\n    let selection = state.arrangement.selection;\n    return {\n        selectionStart: selection !== undefined ? selection.start : undefined,\n        selectionEnd: selection !== undefined ? selection.end : undefined,\n        loopSelected: state.arrangement.loopSelected,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale\n    };\n};\n\n const mapDispatchToProps = dispatch => {\n    return {\n        setArrangementRowSelections: (selections) => dispatch(setArrangementRowSelections(selections)),\n        setArrangementSelection: (start, end) => dispatch(setArrangementSelection(start, end)),\n        setArrangementLoopSelected: (selected) => dispatch(setArrangementLoopSelected(selected))\n    };\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectionComponent);\n","import React, { useRef, useCallback, useState, Component } from 'react';\nimport {getIsSelected} from './selectors.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {useScroll} from './useScroll.js';\nimport RollComponent from './RollComponent.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport RowSelection from './RowSelection.js';\nimport MouseHelper from './MouseHelper.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {insertRollEventAtCursor} from './cursor.js';\nimport {\n    setSelectedArrangementEvents,\n    setArrangementSelectedRows,\n    setArrangementBottomMode,\n    setArrangementRowSelections,\n} from 'actions/index.js';\nimport {moveRollEvent} from 'session/operations/actions.js';\nimport { connect } from \"react-redux\";\nimport {\n    NO_SUB_SEQUENCE,\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\n\nconst RIGHT = 'RIGHT';\nconst DOUBLE_CLICK_THRESHOLD = 250;\nconst LEFT = 'LEFT';\n\nconst RollsArrangementComponent = (props) => {\n    const getState = () => {\n        return props.sequencerEngine.store.getState();\n    };\n\n    const getEvents = () => {\n        let mixEvents = getState().arrangement.mixEvents[NO_SUB_SEQUENCE.id];\n        return mixEvents ? mixEvents[SEQUENCE_ROLL] || [] : [];\n    };\n\n    const {visibleView} = useScroll({\n        ref: props.wrapperRef,\n        resolution: props.resolution,\n        xScale: props.xScale,\n        events: getEvents(),\n        sequencerEngine: props.sequencerEngine,\n        widthExtension: 250\n    });\n\n    const resizingSelection = useRef(false);\n    const lastClickTime = useRef(undefined);\n    const resizing = useRef(undefined);\n    const resizingSubEvent = useRef(undefined);\n    const rollDragging = useRef(undefined);\n    const rollDragOffset = useRef(undefined);\n    const direction = useRef(undefined);\n\n    const getMouseX = (e) => {\n        return e.pageX + props.wrapperRef.current.scrollLeft;\n    };\n\n    const onDragPatternEvent = (e, event) => {\n    };\n\n    const onSelect = (event, subEvent, e) => {\n        if (isSelected(subEvent)) {\n            props.setSelectedEvents(undefined);\n        } else {\n            props.setArrangementRowSelections({});\n            let selectedEvents = {};\n            selectedEvents[subEvent.id] = subEvent;\n            props.setSelectedEvents(selectedEvents);\n        }\n        rollDragOffset.current = getStepFromMouseEvent(e) - event.step;\n        rollDragging.current= event;\n    };\n\n    const isSelected = (event) => {\n        return selectedEvents() === undefined ? false :\n            selectedEvents()[event.id] !== undefined;\n    };\n\n    const selectedEvents = () => {\n        let state = getState();\n        return state.arrangement.selectedEvents;\n    };\n\n    const xScale = () => {\n        return getState().arrangement.xScale;\n    };\n\n    const mix = props.sequencerEngine.mix;\n\n    const onMouseUp = (e) => {\n        if (e === undefined) {\n            let currentClickTime = new Date().getTime();\n\n            if (lastClickTime.current !== undefined &&\n                currentClickTime - lastClickTime.current < DOUBLE_CLICK_THRESHOLD) {\n                insertRollEventAtCursor(mix, props.sequencerEngine.store);\n            }\n            lastClickTime.current= currentClickTime;\n        }\n        resizing.current = undefined;\n        resizingSubEvent.current = undefined;\n        resizingSelection.current = false;\n        rollDragging.current = undefined;\n        rollDragOffset.current = undefined;\n    };\n\n    const scrollLeft = () => {\n        return props.wrapperRef.current.scrollLeft;\n    };\n\n    const getStepFromMouseEvent = useCallback((e) => {\n        let x = e.pageX + scrollLeft();\n        let step = getStepFromPosition(\n            x,\n            props.resolution,\n            undefined,\n            xScale());\n        return step;\n    }, [props.resolution]);\n\n    const onMouseMove = useCallback((e) => {\n        if (resizing.current || rollDragging.current || resizingSelection.current) {\n            let x = e.pageX + scrollLeft();\n            let step = getStepFromPosition(\n                x,\n                props.resolution,\n                undefined,\n                xScale());\n            let originalStep = step;\n            let resolution = 32 / props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n\n            if (rollDragging.current) {\n                let quantizedStep = quantizeStep(\n                    originalStep - rollDragOffset.current, 64 / props.resolution.resolution);\n                mix.dispatch(moveRollEvent(rollDragging.current, quantizedStep));\n            } else if (resizing.current) {\n                let difference = \n                    step - (resizingSubEvent.current.step + resizingSubEvent.current.duration);\n                \n                if (direction.current === RIGHT) {\n                    // check that next event doesnt overlap\n                    if (isRightEventInBounds(step, resizing.current, resizingSubEvent.current) &&\n                        isRightSubEventInBounds(step, resizing.current, resizingSubEvent.current)) {\n                        mix.resizeSequenceRoll(\n                            resizing.current, resizingSubEvent.current, RIGHT, Math.floor(difference));\n                    } else {\n                        resizing.current= undefined;\n                        resizingSubEvent.current= undefined;\n                    }\n                } else {\n                    if (isLeftEventInBounds(step, resizing.current) &&\n                        isLeftSubEventInBounds(step, resizing.current, resizingSubEvent.current)) {\n                        mix.resizeSequenceRoll(\n                            resizing.current, resizingSubEvent.current, LEFT, Math.floor(step));\n                    } else {\n                        resizing.current = undefined;\n                        resizingSubEvent.current= undefined;\n                    }\n                }\n            } else if (resizingSelection.current) {\n                let selection = getState().arrangement.rowSelections[NO_SUB_SEQUENCE.id];\n                if (selection !== undefined) {\n                    selection.end = step;\n                    let selections = {};\n                    selections[NO_SUB_SEQUENCE.id] = selection;\n                    props.setArrangementRowSelections(selections);\n                }\n            } \n        }\n    }, []);\n\n    const isLeftEventInBounds = (stepToResize, event) => {\n        let previousEvent = mix.getPreviousEvent(event);\n        let nextStep = mix.getNextEvent(event);\n\n        if (previousEvent === undefined || stepToResize > previousEvent.step) {\n            if (nextStep === undefined || stepToResize < nextStep.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isLeftSubEventInBounds = (stepToResize, event, subEvent) => {\n        let previousEvent = event.getPreviousSubEvent(subEvent);\n        let nextStep = event.getNextSubEvent(subEvent);\n\n        if (previousEvent === undefined || stepToResize > previousEvent.step) {\n            if (nextStep === undefined || stepToResize < nextStep.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isRightEventInBounds = (stepToResize, event, subEvent) => {\n        let nextEvent = mix.getNextEvent(event);\n        let previousEvent = mix.getPreviousEvent(event);\n\n        if (nextEvent) {\n            let nextStepAfter = mix.getNextEvent(nextEvent);\n            if (nextStepAfter === undefined ||\n                stepToResize < nextStepAfter.step) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const isRightSubEventInBounds = (stepToResize, event, subEvent) => {\n        if (stepToResize < subEvent.step) {\n            return false;\n        }\n        let nextEvent = event.getNextSubEvent(subEvent);\n        let previousEvent = event.getPreviousSubEvent(subEvent);\n\n        if (nextEvent === undefined) {\n            return true;\n        }\n\n        let nextStepAfter = event.getNextSubEvent(nextEvent);\n        if (nextStepAfter === undefined ||\n            stepToResize < nextStepAfter.step) {\n            return true;\n        }\n        return false;\n    }\n\n    const onMouseDown = (event, subEvent, _direction) => {\n        resizing.current = event;\n        resizingSubEvent.current = subEvent;\n        direction.current = _direction;\n    };\n\n\n    const selectRow = () => {\n        props.setSelectedRows([NO_SUB_SEQUENCE.id]);\n        props.setArrangementMode(undefined);\n    };\n\n\n    const onSelectionMouseDown = (e) => {\n        let step = getStepFromMouseEvent(e);\n        resizingSelection.current= true;\n        let rowSelections = {};\n        rowSelections[NO_SUB_SEQUENCE.id] = {\n            start: step,\n            end: step\n        };\n        props.setArrangementRowSelections(rowSelections);\n    };\n\n    let state = getState();\n\n    let sequenceRollEvents = getEvents();\n    let eventsToShow = [];\n    if (visibleView.start !== undefined) {\n        eventsToShow = \n            sequenceRollEvents.slice(visibleView.start, visibleView.end + 1);\n    }\n \n    let className = \"pattern-row rolls-row\";\n    if (props.isSelected) {\n        className += ' selected';\n    }\n\n    let style = {\n        width: props.width\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={selectRow}\n          onMouseMove={onMouseMove}\n          onMouseDown={onSelectionMouseDown}\n          onMouseUp={(e) => onMouseUp(undefined)}\n          onMouseLeave={onMouseUp}\n          className={className}>\n          <RowSelection id={NO_SUB_SEQUENCE.id}/>\n          <MouseHelper subSequence={NO_SUB_SEQUENCE}/>\n          <div className=\"pattern-filler\" style={{width: visibleView.preWidth}}/>\n          {eventsToShow\n           .filter(e => e !== undefined)\n           .map(\n               (event, i) =>\n                   <RollComponent\n                     key={event.id}\n                     type={SEQUENCE_ROLL}\n                     mixSession={props.mixSession}\n                     resolution={props.resolution}\n                     isLast={i === sequenceRollEvents.length - 1}\n                     isFirst={i === 0}\n                     onDragStart={(e) => onDragPatternEvent(e, event)}\n                     onSelect={(event, subEvent, e) => onSelect(event, subEvent, e)}\n                     onMouseUp={(e) => onMouseUp(event)}\n                     onRightMouseUp={(event, subEvent) => onMouseUp(event, subEvent)}\n                     onRightMouseDown={(event, subEvent) => onMouseDown(event, subEvent, RIGHT)}\n                     onLeftMouseUp={(event, subEvent) => onMouseUp(event, subEvent)}\n                     onLeftMouseDown={(event, subEvent) => onMouseDown(event, subEvent, LEFT)}\n                     mixSession={props.mixSession}\n                     sequencerEngine={props.sequencerEngine}\n                     event={event}\n                   />)}\n        </div>);\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        setSelectedEvents: (events) => dispatch(\n            setSelectedArrangementEvents(events)),\n        setArrangementRowSelections: (selections) => dispatch(\n            setArrangementRowSelections(selections)),\n        setArrangementMode: (mode) => dispatch(\n            setArrangementBottomMode(mode)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let mixEvents = state.arrangement.mixEvents[NO_SUB_SEQUENCE.id];\n    let sequenceRollEvents = mixEvents ? mixEvents[SEQUENCE_ROLL] : [];\n    return {\n        isSelected: getIsSelected(state, props),\n        numEvents: sequenceRollEvents === undefined ? 0 : sequenceRollEvents.length,\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(RollsArrangementComponent);\n","import SubArrangementComponent from './SubArrangementComponent.js';\nimport {\n    setArrangementXScale,\n} from \"actions/index.js\";\nimport {onScale} from './onScale.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport {getHeight} from './getHeight.js';\nimport {connect} from 'react-redux';\nimport MouseHelper from './MouseHelper.js';\nimport SelectionComponent from './SelectionComponent.js';\nimport SelectionBox from './SelectionBox.js';\nimport {\n    NO_SUB_SEQUENCE,\n} from 'session/constants.js';\nimport RollsArrangementComponent from './RollsArrangementComponent.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport ClockTickComponent from './ClockTickComponent.js';\nimport React, {memo, Component, useCallback, useEffect, useRef} from 'react';\nimport TimeRowComponent from './TimeRowComponent.js';\n    \nconst SCROLL_BUFFER_LENGTH = 140;\n\nconst ArrangementContainer = memo(({\n    showTracks,\n    onMouseDown,\n    onMouseUp,\n    onMouseMove,\n    sequencerEngine,\n    resolution,\n    arrangementContainer,\n    mixSession,\n    totalLength,\n    xScale,\n    setArrangementXScale,\n    yScrollContainer\n}) => {\n    let ref = useRef(undefined);\n    let mouseX = useRef(0);\n    let lastCursor = useRef(0);\n    let style = {\n        height: getHeight(sequencerEngine, showTracks) \n    };\n\n    let width = getBarWidth(16*totalLength, resolution, xScale);\n\n    useEffect(() => {\n        ref.current.addEventListener(\"mousewheel\", onMouseWheel, {passive: false});\n\n        return () => ref.current ? ref.current.removeEventListener(\"mousewheel\", onMouseWheel) : 0;\n    }, [xScale, resolution, totalLength]);\n\n    const onMouseWheel = useCallback((e) => {\n        if (e.ctrlKey) {\n            e.preventDefault();\n            e.stopPropagation();\n            // Your zoom/scale factor\n            let _xScale = xScale - e.deltaY * 0.01;\n            if (getBarWidth(16*totalLength, resolution, _xScale) < window.innerWidth - 140) {\n                // Dont let user zoom out beyond the width of the window\n                return;\n            }\n\n            onScale({\n                x: mouseX.current,\n                setArrangementXScale,\n                arrangementContainer: ref,\n                cursorStep: lastCursor.current, \n                resolution, \n                xScale: _xScale\n            });\n        } else {\n            let width = getBarWidth(1, resolution, xScale);\n            let _cursorStep = (e.clientX - SCROLL_BUFFER_LENGTH + ref.current.scrollLeft) / width;\n            mouseX.current = e.clientX;\n            lastCursor.current = _cursorStep;\n        }\n    }, [xScale, resolution, totalLength]);\n\n    return (\n        <div\n          ref={ref}\n          style={style}\n          className=\"arrangement-container\"\n          onMouseDown={(e) => onMouseDown(e)}\n          onMouseLeave={() => onMouseUp()}\n          onMouseMove={(e) => {\n              let width = getBarWidth(1, resolution, xScale);\n              let _cursorStep = (e.clientX - SCROLL_BUFFER_LENGTH + ref.current.scrollLeft) / width;\n              mouseX.current = e.clientX;\n              lastCursor.current = _cursorStep;\n              onMouseMove(e);\n          }}\n          onMouseUp={(e) => onMouseUp(e)}\n          >\n          <div\n            className=\"viewport-wrapper\">\n            <ClockTickComponent sequencerEngine={sequencerEngine}/>\n          <TimeRowComponent\n            height={style.height}\n            arrangementContainer={ref}\n            yScrollContainer={yScrollContainer}\n            sequencerEngine={sequencerEngine}\n            selectionStart={undefined}\n            selectionEnd={undefined}\n            resolution={resolution}\n            >\n            <SelectionComponent\n              arrangementContainer={arrangementContainer}\n              sequencerEngine={sequencerEngine}\n            />\n          </TimeRowComponent>\n            <SelectionBox\n              arrangementContainer={arrangementContainer}\n              sequencerEngine={sequencerEngine}\n            />\n          <div className=\"sub-sequence-container\">\n            {sequencerEngine.subSequences\n                .filter(s => !s.isTrack)\n                .map(\n                (sub, i) =>\n                    <SubArrangementComponent\n                      key={\"sub-arrangement-\" + sub.id + '-' + i}\n                      i={i}\n                      wrapperRef={ref}\n                      width={width}\n                      sequencerEngine={sequencerEngine}\n                      yScrollContainer={yScrollContainer}\n                      onMouseUp={e => onMouseUp(e)}\n                      subSequence={sub}/>)}\n            {sequencerEngine.subSequences\n                .filter(s => s.isTrack)\n                .map(\n                (sub, i) =>\n                    <SubArrangementComponent\n                      key={\"sub-arrangement-\" + sub.id}\n                      wrapperRef={ref}\n                      width={width}\n                      yScrollContainer={yScrollContainer}\n                      sequencerEngine={sequencerEngine}\n                      onMouseUp={e => onMouseUp(e)}\n                      subSequence={sub}/>)}\n        </div>\n            <RollsArrangementComponent\n              width={width}\n              mixSession={mixSession}\n              wrapperRef={ref}\n              subSequence={NO_SUB_SEQUENCE}\n              sequencerEngine={sequencerEngine}\n            />\n          <TimeRowComponent\n            sequencerEngine={sequencerEngine}\n            constantHeight={true}\n            yScrollContainer={yScrollContainer}\n            arrangementContainer={ref}\n            isBottom={true}\n            selectionStart={undefined}\n            selectionEnd={undefined}\n            resolution={resolution}\n            />\n           <div className=\"arrangement-rest\"/>\n            </div>\n          </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    return {\n        showTracks: state.arrangement.showTracks,\n        totalLength: state.arrangement.totalLength,\n        xScale: state.arrangement.xScale,\n        numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setArrangementXScale: (xScale) => dispatch(\n            setArrangementXScale(xScale))\n    }\n};\n \n\nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementContainer);\n","import React, { Component } from 'react';\nimport ArrangementSearcher from 'components/modals/ArrangementSearcher.js';\nimport {EFFECTS} from 'constants/arrangement-modes.js';\nimport { connect } from \"react-redux\";\nimport {ARRANGEMENT_TRACK_PATTERN} from 'session/constants.js';\nimport {deleteRowSelections} from './copy.js';\nimport {dispatch} from 'session/operations/dispatch.js';\nimport {splitPianoRollPattern} from 'session/operations/actions.js';\nimport RollComponent from './RollComponent.js';\nimport ArrangementBottom from './ArrangementBottom.js';\nimport {setArrangementBottomResizing} from 'actions/index.js';\nimport ArrangementBottomResizer from './ArrangementBottomResizer.js';\nimport SideBrowserContainer from './SideBrowserContainer.js';\nimport {onKeyDown} from './keyDown.js';\nimport {copy, paste, isRowSelectionsEmpty, duplicate} from './copy.js';\nimport SelectionComponent from './SelectionComponent.js';\nimport {quantizeStep} from './quantizeStep.js';\nimport {DEFAULT_RESOLUTION} from './constants.js';\nimport {\n    deleteEvent,\n    deleteCompoundEvent\n} from 'session/operations/actions.js';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport {getBarWidth} from './getBarWidth.js';\nimport TimeRowComponent from './TimeRowComponent.js';\nimport TimeBackgroundComponent from './TimeBackgroundComponent.js';\nimport ClockTickComponent from './ClockTickComponent.js';\nimport SubArrangementComponent from './SubArrangementComponent.js';\nimport PatternSwitchEvent from 'session/PatternSwitchEvent.js';\nimport {\n    setArrangementCursorStep,\n    setArrangementPatternResizing,\n    setIsPlayingMix,\n    setArrangementPatternDragging,\n    setArrangementSelectedRows,\n    setSelectedArrangementEvents,\n    setArrangementBottomHeight,\n    setArrangementMouseX,\n    setArrangementMouseDownX,\n} from 'actions/index.js';\nimport SidePanelContainer from './SidePanelContainer.js';\nimport ArrangementContainer from './ArrangementContainer.js';\nimport {\n    NO_SUB_SEQUENCE,\n    PATTERN_SWITCH,\n    SEQUENCE_ROLL,\n    RESOLUTION_CHANGE} from 'session/constants.js';\nimport {INFO_COLUMN_WIDTH} from './constants.js';\nimport {getStepFromPosition} from './getStepFromPosition.js';\nimport {PIANO_ROLL} from 'constants/arrangement-modes.js';\nimport Track from 'track/Track.js';\n\nimport '../../Arrangement.scss';\n\nconst MIN_TIME_SINCE_CLICK = 250;\nconst RIGHT = 'RIGHT';\nconst LEFT = 'LEFT';\n\nclass ArrangementView extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            arrangementContainer: undefined\n        };\n\n        window.brightness = 120;\n        this.idToEvent = {};\n\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.savedArrangementContainer = undefined;\n\n        this.copyRing = {\n        };\n\n        this.ref = React.createRef(undefined);\n    }\n\n    componentDidMount() {\n        window.addEventListener('keydown', this.onKeyDown);\n        this.props.sequencerEngine.resolution = DEFAULT_RESOLUTION;\n\n        this.updateTrackSteps();\n    }\n\n    updateTrackSteps() {\n        // update subsequence\n        this.props.sequencerEngine.subSequences.filter(\n            s => s.isTrack)\n            .forEach(s => s.tracks[0].updateSteps());\n    }\n\n    componentWillUnmount() {\n        this.props.sequencerEngine.resolution = DEFAULT_RESOLUTION;\n        window.removeEventListener('keydown', this.onKeyDown);\n    }\n\n    get arrangementContainer() {\n        if (this.savedArrangementContainer) {\n            return this.savedArrangementContainer;\n        }\n        this.savedArrangementContainer = document\n            .getElementsByClassName('arrangement-container')[0];\n\n        this.setState({\n            arrangementContainer: this.savedArrangementContainer\n        });\n\n        return this.savedArrangementContainer;\n    }\n\n\n    onKeyDown(event, sequencerEngine) {\n        onKeyDown(event, this.props.sequencerEngine);\n\n        if (event.key === 'c' && (event.metaKey || event.ctrlKey)) {\n            this.copy();\n        }\n        if (event.key === 'v' && (event.metaKey || event.ctrlKey)) {\n            this.paste();\n        }\n        if (event.key === 'd' && (event.metaKey || event.ctrlKey)) {\n            event.stopPropagation();\n            this.duplicate();\n        }\n        if (event.key === 'e' && (event.ctrlKey || event.metaKey)) {\n            event.preventDefault();\n            event.stopPropagation();\n            this.splitPattern();\n        }\n    }\n\n    // when the left edge of a pattern is dragged this\n    // is called\n    onLeftMouseDown(event, subEvent) {\n        this.resizing = event;\n        this.resizingSubEvent = event;\n        this.direction = LEFT;\n    }\n\n    // when the right edge of a pattern is dragged this\n    // is called\n    onRightMouseDown(event, subEvent) {\n        this.resizing = event;\n        this.resizingSubEvent = event;\n        this.direction = RIGHT;\n    }\n\n    onMouseLeave() {\n        this.props.setArrangementMouseX(undefined);\n        this.props.setArrangementCursorStep(undefined);\n        this.resizing = undefined;\n    }\n\n    get xScale() {\n        return this.getState().xScale;\n    }\n\n    onMouseDown(event) {\n        let mouseX = event === undefined || this.resizing ?\n            undefined :\n            event.pageX + this.arrangementContainer.scrollLeft;\n        this.props.setMouseDownX(event.pageX);\n        let step = getStepFromPosition(mouseX, this.props.resolution, undefined, this.props.xScale);\n        let quantization = 16 / this.props.resolution * 4;\n        let quantizedStep = quantizeStep(step, quantization, false);\n\n        if (quantizedStep !== undefined) {\n            this.props.setArrangementCursorStep(quantizedStep);\n            this.props.setArrangementMouseX(mouseX);\n        }\n    }\n\n    // when dragging has stopped or otherwise finished clicking\n    // resets everything\n    onMouseUp(event) {\n        if (this.selecting) {\n            this.updateSelectedPatterns();\n        }\n\n        let mouseX = event === undefined || this.resizing ?\n            undefined :\n            event.pageX + this.arrangementContainer.scrollLeft;\n\n        // quantize then convert back to mouseX\n        let step = getStepFromPosition(mouseX, this.props.resolution, undefined, this.props.xScale);\n        let quantization = 16 / this.props.resolution * 4;\n        let quantizedStep = quantizeStep(step, quantization, false);\n        mouseX = INFO_COLUMN_WIDTH +\n            getBarWidth(quantizedStep, this.props.resolution, this.xScale);\n\n        if (mouseX !== undefined && quantizedStep === this.cursorStep) {\n            if (event.pageY > 38 && event.pageY < 65) {\n                // user clicked the time bar (so we want to skip that part of the track)\n                if (!this.props.sequencerEngine.playing) {\n                    /*\n                    this.props.playMix();\n                    this.props.sequencerEngine.play();\n                    */\n                }\n                let trackStep = this.getQuantizedStepFromPosition(mouseX);\n                this.props.sequencerEngine.seekToTrackStep(trackStep);\n            }\n        }\n\n        this.resizing = undefined;\n        this.resizingSubEvent = undefined;\n        this.selecting = false;\n\n        this.props.setArrangementPatternDragging(undefined);\n    }\n\n    getQuantizedStepFromPosition(x) {\n        let step = getStepFromPosition(x, this.props.resolution, this.props.xScale);\n        let resolution = 32 / this.props.resolution.resolution;\n        let remainder = step % resolution;\n        step -= remainder;\n        return step;\n    }\n\n    onMouseMove(e) {\n        if (this.resizing) {\n            let x = e.pageX + this.arrangementContainer.scrollLeft;\n            let step = getStepFromPosition(e.pageX + this.arrangementContainer.scrollLeft, this.props.resolution);\n            let resolution = 32 / this.props.resolution.resolution;\n            let remainder = step % resolution;\n            step -= remainder;\n            let difference = this.resizingSubEvent ?\n                step - (this.resizingSubEvent.step + this.resizingSubEvent.duration) :\n                step - (this.resizing.step + this.resizing.duration);\n\n            if (this.resizing.getType() === PATTERN_SWITCH) {\n                if (this.direction === RIGHT) {\n                    this.mixSession.resizeEvent(\n                        this.resizing, Math.floor(difference));\n                } else {\n                    this.resizing.step = Math.floor(step);\n                    this.mixSession.updateAllTypeRedux();\n                }\n            } else if (this.resizing.getType() === SEQUENCE_ROLL) {\n                if (this.direction === RIGHT) {\n                    this.mixSession.resizeSequenceRoll(\n                        this.resizing, this.resizingSubEvent, RIGHT, Math.floor(difference));\n                } else {\n                    this.mixSession.resizeSequenceRoll(\n                        this.resizing, this.resizingSubEvent, LEFT, Math.floor(step));\n                }\n            }\n        }\n    }\n\n    updateAllTypeRedux() {\n        this.mixSession.updateAllTypeRedux();\n    }\n\n    getState() {\n        return this.props.sequencerEngine.store.getState().arrangement;\n    }\n\n    getSelectionStart() {\n        return this.getState().selection === undefined ?\n            undefined :\n            this.getState().selection.start;\n    }\n\n    getSelectionEnd() {\n        return this.getState().selection === undefined ?\n            undefined :\n            this.getState().selection.end;\n    }\n\n    get cursorStep() {\n        return this.getState().cursorStep;\n    }\n\n    updateSelectedPatterns() {\n        let fromStep = this.getSelectionStart();\n        let toStep = this.getSelectionEnd();\n\n        let events = [];\n        for (let i in this.props.patternSwitchEvents) {\n            let event = this.props.patternSwitchEvents[i];\n            if (event.step >= fromStep &&\n                event.step + event.duration <= toStep) {\n                events.push(event);\n            }\n        }\n\n        /*\n        this.setState({\n            selectedEvents: events\n        });\n        */\n    }\n\n    isSelectedEvent(event, subEvent) {\n        /*\n        if (subEvent) {\n            return this.state.selectedCompoundEvents[event.id] &&\n                this.state.selectedCompoundEvents[event.id].indexOf(subEvent) > -1;\n        }\n        return false;\n        */\n        return false;\n    }\n\n    copy() {\n        this.copyRing = copy(this.getState());\n    }\n\n    duplicate() {\n        duplicate(this.props.sequencerEngine);\n    }\n\n    paste() {\n        paste(this.props.sequencerEngine, this.copyRing);\n    }\n\n    splitPattern() {\n        let step = this.cursorStep;\n        for (let i in this.selectedRows) {\n            let id = this.selectedRows[i];\n            let subSequence = this.props.sequencerEngine.getSubSequence(id);\n            if (!subSequence.isTrack) {\n                continue;\n            }\n            let track = subSequence.tracks[0];\n            let pattern = track.patterns.find(\n                p => p.overlapsStep(step));\n            if (pattern !== undefined) {\n                dispatch(undefined, splitPianoRollPattern(pattern.track, pattern, step));\n                this.onMouseLeave();\n                return;\n            }\n        } \n    }\n\n    getMix(subSequenceId) {\n        if (subSequenceId === NO_SUB_SEQUENCE.id) {\n            return this.props.sequencerEngine.mix;\n        }\n        return this.props.sequencerEngine\n            .getSubSequence(subSequenceId)\n            .mix;\n    }\n\n    getSelectedEvents() {\n        return this.getState().selectedEvents;\n    }\n\n    getRowSelections() {\n        return this.getState().rowSelections;\n    }\n\n    get selectedRows() {\n        return this.getState().selectedRows;\n    }\n\n    get mixSession() {\n        return this.props.sequencerEngine.mix;\n    }\n\n    get mix() {\n        return this.props.sequencerEngine.mixSession.mix;\n    }\n\n    get bottomBarWidth() {\n        return 225;\n    }\n\n    onMouseMoveResize(e) {\n    }\n\n    onGlobalMouseUp() {\n        this.props.setArrangementBottomResizing(false);\n        this.props.setArrangementPatternResizing(undefined);\n    }\n\n    render() {\n        let style = {\n        };\n        if (this.props.showBottom) {\n            style.height = window.innerHeight - this.props.bottomHeight - 17;\n        }\n        return (\n            <div\n              onMouseUp={(e) => this.onGlobalMouseUp()} \n              onMouseMove={(e) => this.onMouseMoveResize(e)}\n              className=\"arrangement-view\">\n              <ArrangementSearcher sequencerEngine={this.props.sequencerEngine}/>\n              <div className=\"arrangement-column\">\n                <div\n                  ref={this.ref}\n                  style={style}\n                  className=\"full-arrangement-container\">\n                <SidePanelContainer\n                  scrollContainer={this.ref}\n                  updateAllTypeRedux={() => this.updateAllTypeRedux()}\n                  subSequence={NO_SUB_SEQUENCE}\n                  sequencerEngine={this.props.sequencerEngine}\n                  />\n                <ArrangementContainer\n                  yScrollContainer={this.ref}\n                  onMouseDown={(e) => this.onMouseDown(e)}\n                  onMouseLeave={() => this.onMouseLeave()}\n                  onMouseMove={(e) => this.onMouseMove(e)}\n                  mixSession={this.mixSession}\n                  arrangementContainer={this.state.arrangementContainer}\n                  resolution={this.props.resolution}\n                  onDragStart={(e, event) => this.onDragPatternEvent(e, event)}\n                  onSelect={(event, subEvent) => []}\n                  onMouseUp={(event, subEvent) => this.onMouseUp(event, subEvent)}\n                  onRightMouseDown={(event, subEvent) => this.onRightMouseDown(event, subEvent)}\n                  onLeftMouseDown={(event, subEvent) => this.onLeftMouseDown(event, subEvent)}\n                  sequencerEngine={this.props.sequencerEngine}\n                  />\n                </div>\n                </div>\n               <ArrangementBottom sequencerEngine={this.props.sequencerEngine}/>\n            </div>\n        );\n    }\n\n    //\n    \n    /*\n               */\n                // <SideBrowserContainer\n                  //sequencerEngine={this.props.sequencerEngine}\n                  ///>\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        playMix: () => dispatch(setIsPlayingMix(true)),\n        setArrangementMouseX: (mouseX) => dispatch(setArrangementMouseX(mouseX)),\n        setMouseDownX: (mouseX) => dispatch(setArrangementMouseDownX(mouseX)),\n        setSelectedRows: p => dispatch(setArrangementSelectedRows(p)),\n        clearSelectedArrangementEvents: () => dispatch(setSelectedArrangementEvents(undefined)),\n        setArrangementBottomResizing: (resizing) =>\n            dispatch(setArrangementBottomResizing(resizing)),\n        setArrangementBottomHeight: (height) =>\n            dispatch(setArrangementBottomHeight(height)),\n        setArrangementCursorStep: (x) => dispatch(\n            setArrangementCursorStep(x)),\n        setArrangementPatternDragging: (x) => dispatch(\n            setArrangementPatternDragging(x)),\n        setArrangementPatternResizing: (x) => dispatch(\n            setArrangementPatternResizing(x)),\n    };\n};\n \nconst mapStateToProps = (state, props) => {\n    let id = props.sequencerEngine.engineId;\n    let sub = props.sequencerEngine.currentSubSequence;\n    return {\n        resolution: DEFAULT_RESOLUTION,\n        xScale: state.arrangement.xScale,\n        subSequences: state.sequencer.subSequences[id] || [],\n        bottomHeight: state.arrangement.bottomHeight,\n        showBottom: (state.arrangement.patternSelected && state.arrangement.showTracks[sub.id])\n            || state.arrangement.bottomMode === EFFECTS\n    };\n};\n \nexport default connect(mapStateToProps, mapDispatchToProps)(ArrangementView);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport AudioUnit from 'engine/audio.js';\nimport Tone from 'tone';\nimport {setSampleDragging} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport './recent.scss';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst RecentlyAddedSounds = ({recentlyAddedSounds, setSampleDragging}) => { \n    let audioUnit = useRef(new AudioUnit(Tone.Master.context));\n    let [selected, setSelected] = useState(undefined);\n\n    const playSound = useCallback((sample) => {\n        audioUnit.current.setBuffer(sample.audioBuffer);\n        audioUnit.current.playSound(0);\n        setSelected(recentlyAddedSounds.indexOf(sample));\n    }, [recentlyAddedSounds, setSelected]);\n\n    if (recentlyAddedSounds.length === 0) {\n        return '';\n    }\n    return (\n        <div className=\"recently-added-sounds\">\n        {recentlyAddedSounds.map(\n            (sample, i) =>\n            <div\n              draggable={true}\n              onDragOver={e => e.preventDefault()}\n              onDragStart={() => setSampleDragging(sample)}\n              onClick={(x) => playSound(sample)}\n              className={i === selected ? \"recent-sound selected\" : \"recent-sound\"}>\n              <div\n                style={{backgroundColor: colors.getColorForHash(sample.ipfsHash)}}\n                className=\"recent-thumb\"/>\n              <div className=\"recent-name\">{sample.name}</div>\n            </div>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      recentlyAddedSounds: state.samples.recentlyAddedSounds\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSampleDragging: x => dispatch(setSampleDragging(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RecentlyAddedSounds);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ipfs from \"decentralized/Ipfs.js\";\nimport {connect} from 'react-redux';\nimport {\n    setShowPlugins,\n    setPluginsLoaded} from 'actions/index.js';\nimport ethereum from \"decentralized/ethereum.js\";\n\nconst PluginOption = ({\n    setShowPlugins,\n    sequencerEngine,\n    plugin,\n    setPluginsLoaded\n}) => { \n    let [description, setDescription] = useState('');\n    let [thumbnail, setThumbnail] = useState(undefined);\n    let [creator, setCreator] = useState('');\n\n    useEffect(() => {\n        ipfs.getJson(plugin.versions[0].pluginMetadataURI).then(\n            json => {\n                setDescription(json.description);\n                setThumbnail(json.image);\n            });\n\n        ethereum.users.getUserName(plugin.creator).then(setCreator);\n    }, [setCreator, plugin, setDescription, setThumbnail]);\n\n    const loadPlugin = useCallback(() => {\n        ipfs.getJson(plugin.versions[0].pluginContentHash).then(\n            json => {\n                let o = sequencerEngine.currentSubSequence.createZObject(5,5,\"subpatch\");\n                o.hide();\n                o.loadPresetJson(json, false, true, true);\n                o.plugin = plugin;\n                \n                let pluginsLoaded = sequencerEngine.state.plugins.pluginsLoaded || [];\n                setPluginsLoaded([... pluginsLoaded, o]);\n                setShowPlugins(false);\n            });\n    }, [plugin]);\n    return (\n        <div className=\"plugin-option\">\n          <div className=\"plugin-name\">\n            {thumbnail && <img src={thumbnail}/>}\n            <div className=\"name-and-author\">\n              <div className=\"name-text\">{plugin.name}</div>\n              <div className=\"creator-text\">{creator}</div>\n            </div>\n          </div>\n          <div className=\"plugin-description\">{description}</div>\n          <div\n            onClick={loadPlugin}\n            className=\"load-button pushable\">\n            Load Plugin\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPluginsLoaded: x => dispatch(setPluginsLoaded(x)),\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {getPlugins} from 'plugins/plugins.js';\nimport {connect} from 'react-redux';\nimport PluginOption from './PluginOption.js';\n\nconst PluginsList = ({sequencerEngine}) => { \n    let [plugins, setPlugins] = useState([]);\n    useEffect(() => {\n        getPlugins().then(setPlugins);\n    }, [setPlugins]);\n\n    console.log(\"PLUGINs=\", plugins);\n    return (\n        <div className=\"plugins-list\">\n          {plugins.map(plugin => <PluginOption plugin={plugin} sequencerEngine={sequencerEngine}/>)}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginsList);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PluginsList from './PluginsList.js';\nimport {\n    setShowPlugins,\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport './plugins.scss';\n\nconst PluginsViewer = ({sequencerEngine, setShowPlugins}) => { \n    return (\n        <div className=\"plugins-viewer\">\n          <div className=\"plugins-header\">\n            <div\n              onClick={() => setShowPlugins(false)}\n              className=\"back-arrow-container pushable\">\n              <div className=\"arrow-left\"/>\n            </div>\n            <img className=\"plugins-icon\" src=\"/plugin-icon.svg\"/>\n            <div className=\"header-text\">Plugins</div>\n          </div>\n          <PluginsList sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setShowPlugins: m => dispatch(setShowPlugins(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PluginsViewer);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setStepParameterSelected,\n    setParametersToRecord,\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ParamValue = ({\n    setStepParameterSelected,\n    lastPlayedStepData,\n    isRecording,\n    trackStep,\n    track,\n    parameters,\n    rounded=false,\n    setParametersToRecord,\n    isSelected\n}) => { \n    let ref = useRef(undefined);\n    let [hover, setHover] = useState(false);\n    const getParameterValue = useCallback((p) => {\n        if (!p) {\n            return 0;\n        }\n        if (p.get() === null) {\n            return track.trackData[p.name.toLowerCase() + 'Parameter'].get();\n        }\n        return p.get();\n    }, [track]);\n\n    let [value, setValue] = useState(getParameterValue(parameters[0], track));\n    let [editing, setEditing] = useState(false);\n\n    useEffect(() => {\n        window.addEventListener(\"mouseup\", onMouseUp);\n        window.addEventListener(\"mousemove\", onMouseMove);\n\n        return () => {\n            window.removeEventListener(\"mouseup\", onMouseUp);\n            window.removeEventListener(\"mousemove\", onMouseMove);\n        };\n    }, [parameters, setEditing, editing, setValue, isSelected]);\n\n    useEffect(() => {\n        setValue(getParameterValue(parameters[0]), track);\n    }, [getParameterValue(parameters[0], track), setValue, track]);\n\n    const onMouseMove = useCallback(e => {\n        if (editing) {\n            let {y, number} = editing;\n            let {pageY} = e;\n            let distY = y - pageY;\n            let ratio = Math.pow(distY / y, 2);\n            if (distY < 0) {\n                ratio *= -1;\n            }\n            let parameter = parameters[0];\n            let max = parameter.max;\n            let min = parameter.min;\n            if (parameter.name === \"Duration\") {\n                max = 2;\n                min = 0.01;\n            } else if (parameter.name === \"Velocity\") {\n                min = 0.001;\n            }\n            let _number = ratio*(max - (min+0.001)) + number;\n            _number = Math.max(min, Math.min(max, _number));\n            if (rounded) {\n                _number = Math.round(_number);\n            }\n            if (_number !== getParameterValue(parameter, track)) {\n                parameters.forEach(p => p.set(_number));\n                setValue(_number);\n            }\n            setParametersToRecord(parameters);\n        }\n    }, [parameters, isRecording, setEditing, editing, setValue, track]);\n\n    const onMouseUp = useCallback(e => {\n        if (editing) {\n            setEditing(false);\n        }\n\n        setParametersToRecord([]);\n    }, [setEditing, editing]);\n\n    let className = \"track-parameter\";\n    if (isSelected) {\n        className += \" selected\";\n    }\n    return (\n        <div onMouseOver={() => setHover(true)} onMouseLeave={() => setHover(false)} className={className}>\n          {(hover || editing) && isRecording &&\n           <div className=\"recording-indicator\">\n             <div\n               style={{width: (110 * (trackStep % track.pattern.length()) / track.pattern.length()) + 'px'}}\n               className={editing ? \"recording-progress editing\" : \"recording-progress\"}>\n             </div>\n           </div>}\n        <div\n          ref={ref}\n            onMouseDown={(e) => {\n                setEditing({number: getParameterValue(parameters[0], track), y: e.pageY});\n                setStepParameterSelected(parameters[0].name);\n            }}\n          className=\"param-name\">\n          {parameters[0] ? parameters[0].name : ''}\n        </div>\n          <div\n            onMouseDown={(e) => {\n                setEditing({number: getParameterValue(parameters[0], track), y: e.pageY});\n                setStepParameterSelected(parameters[0].name);\n            }}\n            className=\"param-value\">\n            {hover && isRecording && !editing && lastPlayedStepData && parameters[0] ?\n             round(lastPlayedStepData[parameters[0].name.toLowerCase() + \"Parameter\"].get()\n                ) : round(value)}\n          </div>\n        </div>\n    );\n}\n\nconst round = (value) => {\n    return Math.round(value*100)/100;\n};\n\nconst mapStateToProps = (state, props) => {\n    let isRecording= props.track.sequencerEngine.isRecording;\n    return {\n        isRecording,\n        lastPlayedStepData: props.track.lastPlayedStepData,\n        trackStep: isRecording ? props.track.sequencerEngine.trackStep : 0\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setParametersToRecord: params => dispatch(setParametersToRecord(params)),\n\n      setStepParameterSelected: params => dispatch(setStepParameterSelected(params)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ParamValue);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport FreezeHistory from \"components/v2/FreezeHistory.js\";\nimport {SAMPLER, MULTI_FREEZE} from 'constants/track-types.js';\nimport StepGroupEditor from \"components/sidebar/StepGroupEditor.js\";\nimport {connect} from 'react-redux';\nimport ParamValue from './ParamValue.js';\nimport TrackFrozenComponent from \"components/v2/TrackFrozenComponent.js\";\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst PARAMS = [\"transpose\", \"duration\", \"velocity\", \"attack\", \"release\"];\n\nconst TrackParameters = ({track, isFrozen, selectedSteps, stepParameterSelected}) => { \n    if (track.isAudioTrack) {\n        return '';\n    }\n    if (isFrozen) {\n        return (<div>\n                  <TrackFrozenComponent\n                    track={track}\n                    trackColor={colors.getColorForTrack(track)}\n                    isTrackFrozen={true}/>\n                \n                  {track.getTrackType() === MULTI_FREEZE && <div className=\"freeze-history\">\n                                                              <FreezeHistory track={track}/>\n                                                            </div>}\n               </div>\n               );\n    }\n\n    \n    let groups = !selectedSteps ? [] :\n        Array.from(new Set(selectedSteps.map(s => s && s.group).filter(s => s)));\n    return (<div className=\"track-parameters\">\n              {PARAMS.map(\n                  param =>\n                      <ParamValue\n                        isSelected={stepParameterSelected && param === stepParameterSelected.toLowerCase()}\n                        rounded={param === \"transpose\"}\n                        track={track}\n                        parameters={selectedSteps && selectedSteps.length > 0\n                                    ?\n                                    selectedSteps.filter(x => x).map(x => x[param + \"Parameter\"]) :\n                                    track && track.trackData ? [track.trackData[param + \"Parameter\"]] : []}/>\n              )}\n            {selectedSteps && selectedSteps.length > 0 &&\n              <div className=\"steps-indicator\">\n               <div className=\"selected-type\">Steps</div>\n               <div className=\"selected-length\">{selectedSteps.length}</div>\n              </div>}\n              {groups.map(group => <StepGroupEditor\n                                     track={track}\n                                     key={group.id} sequencerEngine={track.sequencerEngine} group={group}/>)}\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isFrozen: props.track.isFrozen,\n      selectedSteps: state.keyboard.selectedPianoRollSteps,\n      stepParameterSelected: state.cirklon.stepParameterSelected\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackParameters);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {AUDIO} from 'constants/track-types.js';\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport SynthThumbnail from \"components/v3/sidebar/SynthThumbnail.js\";\nimport FavoriteButton from \"components/FavoriteButton.js\";\nimport {\n    setSelectedZObject,\n    setContextualHelp} from \"actions/index.js\";\nimport Documented from \"components/help/Documented.js\"\nimport {AUDITION_NEXT, AUDITION_PREVIOUS} from 'constants/contextual-help.js';\nimport {trim} from 'utils/trim.js';\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst TrackInformation = ({track, isFrozen, setContextualHelp, setSelectedZObject}) => { \n    let style = {\n    };\n    if (!isFrozen) {\n        style.backgroundColor = colors.getColorForTrack(track);\n    }\n    let className = \"track-information\";\n    if (!track.sample) {\n        className += \" no-sampler-track\";\n    }\n    if (track.getTrackType() === AUDIO) {\n        className += \" audio-track\";\n    }\n    return (\n        <div className={className}>\n          <div className=\"thumb-and-browse\">\n            <div\n              onMouseOver={() => setContextualHelp(AUDITION_PREVIOUS)}\n              onMouseLeave={() => setContextualHelp(undefined)}\n              onClick={() => track.auditionPrevious()} className=\"arrow-up\"/>\n            {track.instrument ? <SynthThumbnail track={track}/> :\n             <TrackThumbnail\n              onClickThumbnail={() => setSelectedZObject(track)}\n               hasInner={true} track={track}/>}\n            <div\n              onMouseOver={() => setContextualHelp(AUDITION_NEXT)}\n              onMouseLeave={() => setContextualHelp(undefined)}\n              onClick={() => track.auditionNext()} className=\"arrow-down\"/>\n          </div>\n          <div className=\"name-and-tags\">\n            <div className={!track.sample || !track.sample.tags ? \"track-name instrument-name\" : \"track-name\"}>{trim(track.name || track.presetName || track.getName())}</div>\n            <div className=\"track-tags\">\n              {track.sample && track.sample.tags && track.sample.tags.map(\n                  x => <div className=\"track-tag\">{x}</div>)}\n            </div>\n          </div>\n        {track.sample ? <FavoriteButton type={SOUND_RATED} contentHash={track.sample.getId()} /> : \n         track.preset && <FavoriteButton type={PRESET_RATED} contentHash={track.preset.contentHash}/>} \n       </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      id: props.track.id,\n      name: props.track.presetName || props.track.name,\n      isFrozen: props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setContextualHelp: (element, arg) => dispatch(setContextualHelp(element, arg)),\n      setSelectedZObject: (obj) => dispatch(setSelectedZObject(obj)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackInformation);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getInstrumentComponent} from \"components/effects/getInstrumentComponent.js\";\nimport {connect} from 'react-redux';\nimport DetailsView from \"components/DetailsView.js\"\n\nconst InstrumentViewer = ({track, containerRef}) => { \n    let wrapperRef = useRef();\n    /*\n    if (track.isFrozen) {\n        return '';\n    }\n    */\n    if (track.instrument && !track.isFrozen) {\n        return (\n            <div className=\"instrument-wrapper\">\n              {getInstrumentComponent(track, containerRef)}\n            </div>);\n    } else {\n        // its a sampler so show the sampler\n        return (<div  className=\"sampler-wrapper\">\n                  <div ref={wrapperRef} className=\"waveform-inner\">\n                    <DetailsView.DetailsView\n                      width={window.innerWidth - 240*2-60}\n                      backgroundColor=\"transparent\"\n                      div={wrapperRef}\n                      small={false}\n                      showParameters={false}\n                      hideKeyboard={true}\n                      alreadyLoaded={true}\n                      onGoBack={() => []}\n                      keyboardEngine={track.sequencerEngine.keyboardEngine}\n                      midiEngine={track.sequencerEngine.midi}\n                      trackNumber={track.trackNumber}\n                      resolution={track.sequencerEngine.resolution}\n                      height={180}\n                      sequencerEngine={track.sequencerEngine}\n                      bpm={track.sequencerEngine.bpm}\n                      track={track}/>\n                  </div>\n                </div>);\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InstrumentViewer);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nimport './zobject.scss';\nconst ZObjectInformation = ({zobject, coords}) => { \n    let src = zobject.name === 'comment' ? '/zcomment-light.svg': '/zobject-light.svg';\n    if (zobject.plugin) {\n        src = \"/plugin-icon.svg\";\n    }\n    return (<div className=\"zobject-information object-information\">\n              <img className=\"zobject-information-icon\" src={src}/>\n              <div className=\"object-name\">\n                {zobject.plugin ? zobject.plugin.name : zobject.name}\n                {coords && <div className=\"coords\">\n                             {coords.x}, {coords.y}\n                           </div>}\n              </div>\n            </div>\n           );\n}\n\nconst mapStateToProps = (state, props) => {\n  let presentationMode = state.spatial.presentationMode;\n  return {\n      name: props.zobject.name,\n      coords: presentationMode ?\n          state.windows.presentationWindowPositions[props.zobject.id] || state.windows.windowPositions[props.zobject.id] :\n          state.windows.windowPositions[props.zobject.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\n\nconst ZMessageInformation = ({zmessage, type, coords}) => { \n    let src = '';\n    let name = '';\n    switch (type) {\n    case BANG:\n        src = '/zbutton-light.svg';\n        name = 'Bang';\n        break;\n    case NUMBER:\n        src = '/znumber-light.svg';\n        name = 'Number';\n        break;\n    default:\n        src = '/zmessage-light.svg';\n        name = 'Message';\n        break;\n    }\n    return (\n        <div className=\"object-information zmessage-information\">\n          <img src={src}/>\n          <div className=\"object-name\">\n            {name}\n            {coords && <div className=\"coords\">\n                         {coords.x}, {coords.y}\n                       </div>}\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  let presentationMode = state.spatial.presentationMode;\n  return {\n      type: props.zmessage.type,\n      coords: presentationMode ?\n          state.windows.presentationWindowPositions[props.zmessage.id] || state.windows.windowPositions[props.zmessage.id] :\n          state.windows.windowPositions[props.zmessage.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZMessageInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst PadInformation = (props) => { \n    return (<div className=\"pad-information\">\n            <div className=\"pad-title\">\n              <img src=\"/zpad-light.svg\"/>Pad\n            </div>\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackThumbnail from \"components/TrackThumbnail.js\";\nimport {getEffectTrack} from \"utils/getEffectTrack.js\";\nimport {AUDIO_FX, MIDI_FX, LIVE_FX} from 'constants/effect-types.js';\nimport {connect} from 'react-redux';\n\nconst EffectInformation = ({effect, _locked}) => { \n    let track = getEffectTrack(effect);\n\n    let [locked, setLocked] = useState(_locked);\n\n    const toggleLock = useCallback(() => {\n        effect.lock = !locked;\n        setLocked(!locked);\n    }, [effect, locked, setLocked ]);\n\n    useEffect(() => {\n        setLocked(_locked);\n    }, [_locked, setLocked]);\n\n    return (\n        <div className=\"effect-information object-information\">\n          <div className=\"effect-thumbnail\">\n            {effect.getEffectType() === AUDIO_FX ? \"Audio FX\" :\n             effect.getEffectType() === MIDI_FX ? \"MIDI FX\" :\n             \"Live FX\"}\n          </div>\n          <div className=\"effect-name\">{effect.name}</div>\n          <img\n            onClick={toggleLock}\n            src={locked ? \"/closed-padlock.png\" :\"/opened-padlock.png\"} className=\"effect-lock\"/>\n          {track && <TrackThumbnail hasInner={true} track={track}/>}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      _locked: props.effect.locked\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackInformation from \"components/v3/sidebar/track/TrackInformation.js\";\nimport ZObjectInformation from \"components/v3/sidebar/zobject/ZObjectInformation.js\";\nimport ZMessageInformation from \"components/v3/sidebar/zobject/ZMessageInformation.js\";\nimport PadInformation from \"components/v3/sidebar/pad/PadInformation.js\";\nimport EffectInformation from \"components/v3/sidebar/effects/EffectInformation.js\";\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\n\nconst ObjectInformation = ({object}) => { \n    if (!object || !object.getObjectType) {\n        return '';\n    }\n\n    if (object.pluginViewerFor) {\n        object = object.pluginViewerFor;\n    }\n    if (object.getObjectType() === TRACK) {\n        return (<TrackInformation track={object}/>);\n    } else if (object.getObjectType() === PAD) {\n        return (<PadInformation pad={object}/>);\n    } else if (object.getObjectType() === ZOBJECT) {\n        return (<ZObjectInformation zobject={object}/>);\n    } else if (object.getObjectType() === ZMESSAGE) {\n        return (<ZMessageInformation zmessage={object}/>);\n    } else if (object.getObjectType() === EFFECT) {\n        return (<EffectInformation effect={object}/>);\n    }\n    return (<div></div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectInformation);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SendsTrackComponent from 'components/track/SendsTrackComponent.js';\nimport {connect} from 'react-redux';\n\nimport './sends.scss';\n\nconst Sends = (props) => { \n    return (\n        <div className=\"sidebar-sends\">\n          <div className=\"label\">\n            Sends\n          </div>\n          <SendsTrackComponent sequencerEngine={props.sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Sends);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport {doc} from 'zobject/definitions/docs.js';\nimport './operation.scss';\n\nconst OperationDocs = ({zobject}) => { \n    let _doc = doc(zobject.name);\n    if (!_doc.operationDocs) {\n        return '';\n    }\n    let operationNames = _doc.operationDocs();\n    return (<div className=\"zobject-operations\">\n              <div className=\"label\">\n                Operations\n              </div>\n            {operationNames.map(\n                name =>\n                <div className=\"operation-type\">\n                  <div className=\"name-and-description\">\n                    <div className=\"operation-name\">\n                      {name}\n                    </div>\n                    <div className=\"operation-description\">\n                      {_doc.operationDocs(name).description}\n                    </div>\n                  </div>\n                  <div className=\"operation-args\">\n                    {Object.keys(_doc.operationDocs(name).params).map(\n                        paramName => <div className=\"operation-param\">\n                                       <div className=\"dot\"/>\n                                       <div className=\"param-name\">\n                                         {paramName}\n                                       </div>\n                                       <div className=\"param-description\">\n                                         {_doc.operationDocs(name).params[paramName]}\n                                       </div>\n                         </div>)}\n                  </div>\n                </div>)}\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OperationDocs);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport './subpatch.scss';\n\nconst SubPatchTools = ({zobject}) => { \n    let [name, setName] = useState(zobject.args[0]);\n\n    const onChange = useCallback((e) => {\n        let val = e.target.value.replaceAll(\" \", \"-\");\n        zobject.text = \"subpatch \" + val;\n        setName(val);\n    }, [zobject, setName]);\n    return (\n        <div className=\"subpatch-tools\">\n          <div className=\"label\">Name</div>\n          <input value={name} onChange={onChange} type=\"text\" className=\"subpatch-name-input\"/>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SubPatchTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst ZObjectActions = ({actions, zobject}) => { \n    return (\n        <div className=\"zobject-actions\">\n          <div className=\"label\">Actions</div>\n        {actions.map(\n            x => <div\n                   onClick={e => zobject.executeAction(x)}\n                   className=\"action-option\">\n                   <div className=\"pushable dot\"/>\n                   {x}</div>)}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectActions);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {isNumber} from \"utils/IsNumber.js\"\nimport ZNumber from \"components/zobject/ZNumber.js\";\nimport {setObjectStyling} from 'actions/index.js';\nimport {ChromePicker} from 'react-color';\nimport {connect} from 'react-redux';\n\nconst AttributesInspector = ({zobject, setObjectStyling}) => { \n    let [style, setStyle] = useState(zobject.attributes || {'': ''});\n    let buttonRef = useRef(zobject);\n    let [focus, setFocus] = useState(undefined);\n\n    useEffect(() => {\n        buttonRef.current = zobject;\n    }, [zobject]);\n\n    useEffect(() => {\n        setStyle(zobject.attributes || {'': ''});\n    }, [zobject, setStyle]);\n    \n    useEffect(() => {\n        buttonRef.current.attributes = {... style};\n        if (!zobject.sequencerEngine.isLoading) {\n            setObjectStyling(buttonRef.current.id, {... style});\n        }\n    }, [style]);\n\n    let [showingColor, setShowingColor] = useState(undefined);\n\n    return (\n        <div className=\"attributes-inspector\">\n          <div className=\"label\">\n            Attributes\n          </div>\n          {Object.keys(style).filter(x=> x !== \"\").map(\n             (key, i) =>\n             <Styler\n               showingColor={showingColor === i}\n               key={i}\n               skey={key}\n               style={style}\n               zobject={zobject}\n               setShowingColor={(x) => setShowingColor(x === false ? undefined : i)}\n               setFocus={setFocus}\n               i={i}\n               focus={focus}\n               value={style[key]}\n               setStyle={setStyle}\n             />)}\n        </div>\n    );\n};\n\nconst Styler = ({zobject, setShowingColor, showingColor, i, focus, setFocus, skey, value, setStyle, style}) => {\n    let ref = useRef(undefined);\n    let [min, setMin] = useState(-2*Math.abs(parseFloat(value)));\n    let [max, setMax] = useState(2*Math.abs(parseFloat(value)));\n\n    useEffect(() => {\n        if (i === focus) {\n            setTimeout(() => {\n                ref.current.focus();\n            }, 10);\n        }\n    }, [i, focus]);\n\n    const onChangeKey = useCallback((e) => {\n        let text = e.target.value;\n        let _style = {... style};\n        delete _style[skey];\n        _style[text] = value;\n        _style[''] = '';\n        setStyle(_style);\n    }, [style, setStyle, skey, value]);\n\n    const onChangeValue= useCallback((e, isNum) => {\n        let text = e.target.value;\n        if (isNumber(text)) {\n            text = parseFloat(text);\n        }\n        let _style = {... style};\n        _style[skey] = text;\n        setStyle({... _style});\n        zobject.setAttribute(skey, text);\n        if (text === 0) {\n            text = 1;\n        }\n        if (isNum) {\n            setMin(-2*Math.abs(parseFloat(text)));\n            setMax(2*Math.abs(parseFloat(text)));\n        }\n    }, [style, setStyle, skey, setMax, setMin]);\n\n    if (skey === \"\") {\n        return '';\n    }\n\n    let inner = '';\n    if (typeof value === \"boolean\") {\n        // we need a checkbox here\n        inner = (\n            <input\n              className=\"boolean-checkbox\"\n              type=\"checkbox\"\n              onChange={(e) => onChangeValue({target: {value: !value}})}\n              checked={value}\n            ></input>\n        );\n    } else if (isNumber(value)) {\n        inner = (\n            <div className=\"number-and-input\">\n              <ZNumber\n                hideNumber={true}\n                znumber={{attributes: {}, max, min}} onChange={(x) => onChangeValue({target: {value: x}})} number={value} round={false}/>\n              <input\n                className=\"style-value-input\"\n                value={value}\n                type=\"text\"\n                onChange={(e) => onChangeValue(e, true)}/>\n            </div>\n        );\n    } else {\n        inner = (\n            <input\n              className=\"style-value-input\"\n              value={value}\n              type=\"text\"\n              onChange={onChangeValue}/>\n        );\n    }\n\n    return (\n        <div className=\"styler\">\n          {skey===\"Include in Presentation\" ?\n           <div className=\"icon-wrapper\">\n             Include in <img className=\"presentation-icon\" src=\"/presentation-mode.svg\"/></div> : <input\n            readOnly\n            onFocus={() => setFocus(i)}\n            ref={ref} value={skey} type=\"text\" onChange={onChangeKey}/>}\n          <div className=\"style-divider\">:</div>\n          {((skey && skey.includes(\"color\")) || (value && value.startsWith && value.startsWith(\"#\"))) ?\n           <div\n             onClick={() => setShowingColor(!showingColor)}\n             style={{backgroundColor: value}} className=\"zcolor-btn\">\n             {showingColor && <div style={{cursor: 'unset'}} onClick={e => e.stopPropagation()}>\n              <ChromePicker onChange={(x) => onChangeValue({\n                 target: {value: x.hex}})} color={{hex: value}}/>\n                              </div>}\n           </div> : \"\"}\n          {inner}\n        </div>\n    );\n};\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setObjectStyling: (id, styling) => dispatch(setObjectStyling(id, styling))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AttributesInspector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ConditionedCheckmark from \"components/ConditionedCheckmark.js\";\nimport {getAllNodesInSub} from \"utils/findNode.js\";\nimport {setSelectedZObject} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst ObjectConnector = ({zobject, connects, setSelectedZObject}) => { \n    let [value, setValue] = useState(undefined);\n\n    const connectObject = useCallback((object, inlet=\"Input\", outlet) => {\n        // first see if it exists\n        let found = zobject.subSequence.zObjects.find(x => x.name === object);\n        if (!found) {\n            if (object === \"pad\") {\n                if (zobject.subSequence.pads.length === 0) {\n                    found = zobject.subSequence.createPad();\n                } else {\n                    found = zobject.subSequence.pads[0];\n                }\n            } else {\n                found = zobject.subSequence.createZObject(\n                    undefined,\n                    undefined,\n                    object);\n            }\n        }\n\n        let fromObject = zobject;\n        if (outlet && outlet in zobject.outlets) {\n        } else if (outlet && zobject.effect && outlet in zobject.effect.outlets) {\n            fromObject = zobject.effect;\n        } else {\n            fromObject = zobject.effect && Object.keys(zobject.effect.outlets)[0] ?\n                zobject.effect :\n                zobject;\n        }\n\n        let obj = found;\n        if (found.effect && inlet in found.effect.inlets) {\n            found = found.effect;\n        }\n\n        found.connectInlet(\n            inlet,\n            fromObject,\n            outlet ||\n                Object.keys(zobject.outlets)[0] ||\n                (zobject.effect &&\n                 Object.keys(zobject.effect.outlets)[0]));\n\n        setValue(object);\n        setSelectedZObject(obj);\n    }, [zobject, connects, setValue]);\n\n    if (!Array.isArray(connects)) {\n        connects = [connects];\n    }\n\n    const isConnected = useCallback((object, inlet, outlet) => {\n        let outlets = {\n            ... zobject.outlets,\n            ... (zobject.effect ? zobject.effect.outlets : {})\n        };\n        let _outlet = outlet ? outlets[outlet] : outlets[Object.keys(outlets)[0]];\n        if (_outlet) {\n            return _outlet.connections.some(\n                x => x.destNode.name === object || (object === \"pad\" && x.destNode.isPad));\n        }\n    }, [zobject]);\n    \n    return (\n        <div className=\"object-connector\">\n          <div className=\"connect-help\">\n            Commonly connects with\n          </div>\n        {connects.map(\n            x =>\n                <div onClick={() => connectObject(x.object, x.inlet, x.outlet)}\n                     className={isConnected(x.object, x.inlet, x.outlet) ? \"connect-option connected \" : \"connect-option\"}>\n                  <img className=\"connects-with-icon\" src=\"/connects-with-icon.svg\"/>\n                  <div className=\"object-type\">\n                    {x.object}\n                  </div>\n                  <div className=\"inlet-type\">\n                    {x.inlet}\n                  </div>\n                  <ConditionedCheckmark\n                    className=\"guilds-checkmark\"\n                    condition={isConnected(x.object, x.inlet, x.outlet)}/>\n                </div>)}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedZObject: x => dispatch(setSelectedZObject(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectConnector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport OperationDocs from './OperationDocs.js';\nimport SubPatchTools from './SubPatchTools.js';\nimport ZObjectActions from './ZObjectActions.js';\nimport AttributesInspector from './AttributesInspector.js';\nimport ObjectConnector from './ObjectConnector.js';\nimport {doc} from 'zobject/definitions/docs.js';\nimport {connect} from 'react-redux';\n\nconst ZObjectTools = ({zobject, name, inputText}) => { \n    if (zobject.pluginViewerFor) {\n        zobject = zobject.pluginViewerFor;\n    }\n    let [value, setValue] = useState();\n    const onClick = useCallback((op) => {\n        zobject.text = op;\n        setValue(op);\n    }, [zobject, setValue]);\n\n    const sendBang = useCallback(() => {\n        zobject.bang();\n    }, [zobject]);\n\n    const onClickOperation = useCallback((operation, args) => {\n        // create a message\n        let zmessage = zobject.subSequence.createZMessage(\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            undefined,\n            operation + ' ' + args.map(x => 0).join(' ')\n            );\n        zobject.connectInlet(\"Input\", zmessage, Object.keys(zmessage.outlets)[0]);\n    }, [zobject]);\n\n    if (!zobject.name || zobject.name === \"\") {\n        let tags = doc(1);\n        let sorted = Object.keys(tags).sort();\n        return sorted.map(\n            tag =>\n                <div className=\"zobject-tag multi-object\">\n                  <div className=\"tag-name\">{tag}</div>\n                  <div className=\"tag-options\">\n                    {tags[tag].sort().map(\n                        option =>\n                            <div onClick={() => onClick(option)} className=\"tag-option\">\n                              <div className=\"operation\">{option}</div>\n                              <div className=\"description\">{doc(option).description}</div>\n                            </div>)}\n                  </div>\n                </div>);\n    }\n    let d = doc(zobject.name);\n    if (d) {\n        let tag = d.tags;\n        if (Array.isArray(tag)) {\n            tag = tag[0];\n        } else if (!tag) {\n            tag = \"Object\";\n        }\n\n        if (zobject.plugin) {\n            tag = \"Plugin\";\n        }\n\n        let params = {... d.params};\n        if (Array.isArray(d.inlets)) {\n            params = {};\n            d.inlets.forEach(\n                inlet => params[inlet] = d.params[inlet] || \"\");\n        }\n        let operations = {... d.operations};\n\n        let actions = Object.keys(zobject.actions);\n        return (\n            <div className=\"zobject-tag single-object\">\n              {/*<div onClick={sendBang} className=\"bang-btn\">send bang</div>*/}\n              <div className=\"tag-name\">{tag}</div>\n              <div className=\"tag-options\">\n                <div className=\"tag-option\">\n                  <div className=\"operation\">{zobject.plugin ? zobject.plugin.name : zobject.name}</div>\n                  <div className=\"description\">{zobject.plugin ? \"\" : d.description}</div>\n                  <div className=\"args\">\n                    {Object.keys(params).map(\n                        paramName =>\n                        <div className=\"param\">\n                          <img className=\"operation-icon\" src=\"/operation-icon.svg\"/>\n                          <div className=\"param-name\">\n                            {paramName}\n                          </div>\n                          <div className=\"param-description\">\n                            {params[paramName]}\n                          </div>\n                        </div>)}\n                  </div>\n                </div>\n              </div>\n              {!zobject.plugin && zobject.name === \"subpatch\" && <SubPatchTools zobject={zobject}/>}\n              {operations && Object.keys(operations).length > 0 &&\n              <div className=\"tag-name\">\n                Operations\n                <div className=\"operation-help-text\">\n                  (via left-inlet)\n                </div>\n              </div>}\n              {Object.keys(operations).length > 0 && <div className=\"tag-options\">\n                <div className=\"tag-option\">\n                  <div className=\"operations\">\n                    {Object.keys(operations).filter(\n                        operation => operation[operation] && operation[operation].parameters)\n                     .map(\n                          operation =>\n                        <div className=\"operation-option\">\n                          <img className=\"operation-icon\" src=\"/operation-icon.svg\"/>\n                          <div className=\"operation-and-description\">\n                            <div className=\"operation\">\n                              <div onClick={() => onClickOperation(operation, operations[operation].parameters)} className=\"operation-btn\">{operation}</div>{operations[operation].parameters.map(x => <span className=\"operation-arg\">{x}</span>)}\n                            </div>\n                            <div className=\"description\">\n                              {operations[operation].description}\n                            </div>\n                          </div>\n                        </div>)}\n                    </div>\n                  </div>\n                                                     </div>}\n              {d.connects && <ObjectConnector zobject={zobject} connects={d.connects}/>}\n              <AttributesInspector zobject={zobject}/>\n              {/* {actions.length > 0 && <ZObjectActions zobject={zobject} actions={actions}/>} */}\n              <OperationDocs zobject={zobject}/>\n            </div>);\n    }\n    return (<div></div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      name: props.zobject.name,\n      inputText: state.spatial.zobjectInputText\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\n\nconst PadQuickEffects = ({pad}) => { \n    return (\n        <TrackEffects hasMidi={false} needsLabel={true} showEffect={true} track={pad}/> );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadQuickEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PadQuickEffects from './PadQuickEffects.js';\nimport {connect} from 'react-redux';\nimport PadVisualizer from \"components/pads/PadVisualizer.js\";\nimport './pads.scss';\n\nconst PadToolsSidebar = ({pad}) => { \n    return (\n        <div className=\"tools-sidebar PAD\">\n          <PadVisualizer width={240} pad={pad}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PadToolsSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport ParameterKnob from \"components/knobs/ParameterKnob.js\";\n\n\nconst names = ['A', 'B', 'C', 'D'];\nconst TrackQuickSends = ({track}) => { \n    let sends = track.sequencerEngine.sends.sends;\n    return (\n       <div className=\"track-quick-sends\">\n         <div className=\"label\">\n           Sends\n         </div>\n        <div className=\"send-knobs\">\n          {track.sendNodeVolumeParameters.filter(\n              (x,i) => sends[i] && !sends[i].pad).map(\n            (send, i) =>\n                <div className=\"send-knob\">\n                  <ParameterKnob\n                    sequencerEngine={track.sequencerEngine}\n                    min={-40} parameter={send}/>\n                  <div className=\"send-name\">\n                    {names[i]}\n                  </div>\n                </div>)}\n        </div>\n       </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickSends);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EnvelopeOptions from \"components/track/EnvelopeOptions.js\";\nimport {connect} from 'react-redux';\n\nconst TrackQuickEnvelopes = ({track}) => { \n    return (\n        <div className=\"track-quick-envelopes\">\n          <div className=\"label\">\n            Envelopes\n          </div>\n          <EnvelopeOptions track={track}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickEnvelopes);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useWindowSlider} from \"components/hooks/useWindowSlider.js\";\nimport {connect} from 'react-redux';\n\nconst WarpKnob = ({track, warp, bpm, warpLength, warpFactor}) => { \n    let resolvedTempo = Math.round((bpm / warpLength)*10)/10.0;\n    \n    const setValue = useCallback((value) => {\n        let warpLength = bpm / value;\n        warp.warpLengthParameter.set(warpLength, false);\n    }, [warp, bpm]);\n\n    const down = useCallback(() => {\n        warp.warpFactorParameter.set(warpFactor * 2, false);\n    }, [warpFactor, warp]);\n\n    const up = useCallback(() => {\n        warp.warpFactorParameter.set(warpFactor / 2, false);\n    }, [warpFactor, warp]);\n\n    const {onMouseDown, editing} = useWindowSlider({min: 45, max: 200, setValue, value: resolvedTempo});\n\n    return [\n        <div onMouseDown={onMouseDown} className={editing ? \"warp-knob editing\" : \"warp-knob\"}>\n          <span className=\"warp-tempo\">{resolvedTempo}</span> bpm\n        </div>,\n        <div className={\"warp-factor\"}>\n          <div onClick={up} className=\"arrow-up\"/>\n          <div className=\"factor-value\">{2 / warpFactor}x</div>\n          <div onClick={down} className=\"arrow-down\"/>\n        </div>\n    ];\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      bpm: props.track.sequencerEngine.bpm,\n      warpLength: props.warp ? props.warp.warpLength : 1,\n      warpFactor: props.warp ? props.warp.warpFactor: 2\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(WarpKnob);\n","import React, {useState, useEffect, useCallback} from 'react';\n\nexport const useWindowSlider = ({min, max, setValue, value}) => {\n    let [editing, setEditing] = useState(false);\n\n    useEffect(() => {\n        window.addEventListener('mousemove', onMouseMove);\n        window.addEventListener('mouseup', onMouseUp);\n\n        return () => {\n            window.removeEventListener('mousemove', onMouseMove);\n            window.removeEventListener('mouseup', onMouseUp);\n        };\n    }, [editing, min, max, setValue, value]);\n\n    const onMouseMove = useCallback((e) => {\n        if (editing) {\n            console.log('editing');\n            let {y, number} = editing;\n            let {pageY} = e;\n            let distY = y - pageY;\n            let ratio = Math.pow(distY / y, 2);\n            if (distY < 0) {\n                ratio *= -1;\n            }\n            let _number = ratio*(max - (min+0.001)) + number;\n            console.log(\"Number = \", _number);\n            _number = Math.max(min, Math.min(max, _number));\n            if (_number !== value) {\n                setValue(_number);\n            }\n        }\n    }, [min, editing, max, value, setValue]);\n\n    const onMouseUp = useCallback(() => {\n        setEditing(false);\n    }, [setEditing]);\n\n    const onMouseDown = useCallback((e) => {\n        setEditing({number: value, y: e.pageY});\n    }, [setEditing, value]);\n\n    return {\n        editing,\n        onMouseDown\n    };\n    \n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport LockButton from \"components/LockButton.js\";\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport WarpKnob from './WarpKnob.js';\nimport WarpButton from \"components/WarpButton.js\";\nimport {setShowTrackInstrument} from 'actions/index.js';\nimport DetailsView from \"components/DetailsView.js\"\nimport {AUDIO_FX, MIDI_FX} from 'constants/effect-types.js';\nimport {\n    setPulledEffects,\n    setSelectedMixEffect,\n} from 'actions/index.js';\nimport {getInstrumentComponent} from \"components/effects/getInstrumentComponent.js\";\nimport {connect} from 'react-redux';\nimport './instrument.scss';\n\nconst TrackQuickInstrument = ({\n    isFrozen,\n    locked,\n    track,\n    isWarped,\n    show,\n    setShow,\n    clearSelectedEffect,\n    setPulledEffects,\n    planar\n}) => { \n    let ref = useRef();\n    let wrapperRef = useRef();\n\n    const flip = useCallback(() => {\n        setShow(!show);\n    }, [show, setShow]);\n\n    useEffect(() => {\n        if (show) {\n            clearSelectedEffect(AUDIO_FX);\n            clearSelectedEffect(MIDI_FX);\n        }\n    }, [show]);\n\n    const pullPlanar = useCallback(() => {\n        let pulledEffects = track.state.effects.pulledEffects || [];\n        setPulledEffects([... pulledEffects, planar]);\n    }, [track, planar]);\n\n    return (\n        <div ref={ref} className=\"quick-instrument\">\n          <div className=\"label\">\n            Instrument\n          </div>\n          <LockButton\n            patternLocked={locked}\n            toggleLock={() => track.togglePatternLock()}/>\n          {!isFrozen &&\n           <div\n             onClick={() => isFrozen ? track.unfreeze() : freezePatterns(track)}\n             className={isFrozen ? \"pushable freeze-btn frozen\" : \"pushable freeze-btn\"}>\n             <img className=\"freeze-icon\" src=\"/freeze-icon.svg\"/> {isFrozen ? \"Unfreeze\" : \"Freeze\"}\n           </div>}\n          <div className=\"instrument-items\">\n          <div onClick={flip} className={show ? \"pushable instrument-button show\" : \"pushable instrument-button\"}>\n            {track.instrument ? track.getName() :\"Sampler\"}\n          </div>\n            {track.sample && <WarpButton track={track}/>}\n            {isWarped && <WarpKnob warp={getWarp(track)} track={track}/>}\n          </div>\n        </div>\n    );\n};\n\nconst getWarp = (track) => {\n    return track.midiEffects.effects.find(x => x.name === \"Warp\");\n};\n\nconst mapStateToProps = (state, props) => {\n    let subSequenceId = props.track.subSequence.id;\n    let locked = false;\n    if (props.track !== undefined) {\n        let subSequenceLocks = state.tracks.trackPatternLocks[props.track.subSequence.id] || {};\n        let patterns = subSequenceLocks[props.track.trackNumber] || {};\n        locked = patterns[props.track.currentPattern] || false;\n    }\n \n    return {\n        locked,\n        isFrozen: props.track.isFrozen,\n        planar: state.effects.planar[props.track.id],\n        show: state.spatial.showTrackInstrument,\n        midiEffects: props.track.midiEffects.effects.length,\n        isWarped: state.tracks.trackWarps[subSequenceId] &&\n            state.tracks.trackWarps[subSequenceId][props.track.trackNumber]\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setPulledEffects: m => dispatch(setPulledEffects(m)),\n      setShow: x => dispatch(setShowTrackInstrument(x)),\n      clearSelectedEffect: (type) => \n            dispatch(\n                setSelectedMixEffect(\n                    props.track.subSequence.id, props.track.id, undefined, type, undefined)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickInstrument);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport MidiEffects from \"components/mix/mix2/MidiEffects.js\";\n\nconst TrackQuickEffects = ({track}) => { \n    return track && track.effects && (\n        <TrackEffects\n          hasMidi={true}\n          needsLabel={true}\n          showEffect={true}\n          track={track}/>);\n    \n    ;\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      effects: props.track && props.track.effects ? props.track.effects.length : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickEffects);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport EffectParameterSlider from \"components/effects/EffectParameterSlider.js\";\nimport {SAMPLER} from 'constants/track-types.js';\nimport CheckboxParameter from \"components/effects/CheckboxParameter.js\";\nimport {connect} from 'react-redux';\nimport ChokesAndMatches from 'components/sidebar/ChokesAndMatches.js';\nimport {makeInstrumentRack} from \"components/v2/trackRightClickActions.js\"\n\nconst TrackQuickAux = ({track}) => { \n    let [show, setShow] = useState(false);\n    return (\n        <div className=\"sidebar-section\">\n          <div onClick={() => setShow(true)} className={show ? \"label show-aux showing\" : \"label show-aux\"}>\n            Aux\n        <div className=\"plus-minus\">\n          {show && <div\n            onClick={(e) => {\n                e.stopPropagation();\n                setShow(false);\n            }}\n                     className=\"plus minus\">-</div>}\n          <div className=\"plus\">+</div>\n        </div>\n          </div>\n          {show && <div>\n          <div className=\"label\">\n            Chokes\n          </div>\n          <ChokesAndMatches sequencerEngine={track.sequencerEngine} track={track}/>\n          <CheckboxParameter name=\"Skip Module Midi\" parameter={track.skipMidiMasterParameter}/>\n          {track.getTrackType() === SAMPLER &&\n           <div onClick={() => makeInstrumentRack(track)} className=\"convert-to-rack pushable\">\n             Convert to Sampled Instrument\n           </div>}\n          {track.getTrackType() === SAMPLER &&\n           track.getSamplers()[0] &&\n           track.getSamplers()[0].detuneParameter &&\n           <EffectParameterSlider parameter={track.getSamplers()[0].detuneParameter}\n           name=\"Detune\"\n           min={-1000}\n           max={1000}\n                                  step={0.1}\n           sequencerEngine={track.sequencerEngine}\n           />}\n                   </div>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackQuickAux);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {freezePatterns} from 'components/v2/trackRightClickActions.js';\nimport TrackFrozenComponent from \"components/v2/TrackFrozenComponent.js\";\nimport Colors from 'components/Colors.js';\nimport CheckboxParameter from \"components/effects/CheckboxParameter.js\";\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst TrackFreezes = ({isFrozen, track}) => { \n    return (\n        <div className=\"sidebar-section\">\n          <div className=\"label\">\n            Freeze\n          </div>\n          {isFrozen ?\n           <TrackFrozenComponent\n             track={track}\n             trackColor={colors.getColorForTrack(track)}\n             isTrackFrozen={true}/> : \n           <div onClick={() => freezePatterns(track)} className=\"freeze-button\">\n             Freeze Track\n           </div>}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isFrozen: props.track.isFrozen\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackFreezes);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackQuickSends from './TrackQuickSends.js';\nimport TrackQuickEnvelopes from './TrackQuickEnvelopes.js';\nimport TrackQuickInstrument from './TrackQuickInstrument.js';\nimport TrackQuickEffects from './TrackQuickEffects.js';\nimport {connect} from 'react-redux';\nimport TrackInformation from './TrackInformation.js';\nimport './tracktools.scss';\nimport TrackParameters from './TrackParameters.js';\nimport TrackQuickAux  from './TrackQuickAux.js';\nimport TrackFreezes from './TrackFreezes.js';\nimport AuditionSidebar from \"components/v3/sidebar/audition/AuditionSidebar.js\";\n\nconst TrackToolsSidebar = ({track}) => { \n    return (\n        <div className=\"sidebar-tools TRACK\">\n          <TrackParameters track={track}/>\n          {/*<AuditionSidebar object={track} sequencerEngine={track.sequencerEngine}/>*/}\n          <TrackQuickInstrument track={track}/>\n\n          {/*<TrackQuickEffects track={track}/>*/}\n          <TrackQuickEnvelopes track={track}/>\n          {<TrackQuickSends track={track}/>}\n          {/*<TrackFreezes track={track}/>*/}\n          <TrackQuickAux track={track}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      id: props.track.id,\n      name: props.track.name,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackToolsSidebar);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport AttributesInspector from './AttributesInspector.js';\nimport {connect} from 'react-redux';\nimport ZNumberInspector from \"components/sidebar/ZNumberInspector.js\"\nimport {BANG, LIST, SYMBOL, NUMBER} from 'zobject/data-types.js';\nimport './zmessage.scss';\n\nconst ZMessageTools = ({zmessage}) => { \n    let tools = []\n    if (zmessage.type === NUMBER) {\n        tools.push(<ZNumberInspector key={1} znumber={zmessage}/>);\n    } \n\n    tools.push(<AttributesInspector zobject={zmessage}/>);\n\n    return tools;\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZMessageTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PlaneSidebar from \"components/effects/plane/PlaneSidebar.js\";\nimport {connect} from 'react-redux';\nimport {\n    setPlanarRegionMode,\n    setPlanarMacroToShow,\n    setFilteredPlanarParameters,\n    setSelectedPlanarParameters,\n    setEffectParameterValues} from 'actions/index.js';\n\nconst PlaneTools = ({\n    effect,\n    setIsRegionMode,\n    setMacroToShow,\n    setSelected,\n    setFilteredParameters,\n    selected=[],\n    filteredParameters,\n    macroToShow,\n    isRegionMode\n}) => { \n    return (\n        <div className=\"plane-parameters\">\n          <div className=\"plane-inner\">\n            <PlaneSidebar\n              setSelectedColor={() => 0}\n              macroToShow={macroToShow}\n              setMacroToShow={setMacroToShow}\n              isBoundsMode={isRegionMode}\n              setSelected={setSelected}\n              expanded={false}\n              filteredParameters={filteredParameters}\n              setFilteredParameters={setFilteredParameters}\n              selected={selected}\n              effect={effect}\n              setSelected={setSelected}\n            />\n          </div>\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        selected: state.plane.selectedParameters[props.effect.id],\n        filteredParameters: state.plane.filteredParameters[props.effect.id],\n        macroToShow: state.plane.macroToShow[props.effect.id],\n        isRegionMode: state.plane.regionMode[props.effect.id]\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n        setIsRegionMode: x => dispatch(setPlanarRegionMode(props.effect.id, x)),\n        setMacroToShow: x => dispatch(setPlanarMacroToShow(props.effect.id, x)),\n        setSelected: x => dispatch(setSelectedPlanarParameters(props.effect.id, x)),\n        setFilteredParameters: x => dispatch(setFilteredPlanarParameters(props.effect.id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PlaneTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PlaneTools from './PlaneTools.js';\nimport {connect} from 'react-redux';\nimport './effects.scss';\n\nconst EffectTools = ({effect}) => { \n    let context = '';\n    switch (effect.name) {\n    case \"Plane Parameters\":\n        context = (<PlaneTools effect={effect}/>);\n        break;\n    }\n    return (\n        <div className=\"effect-tools\">\n          {effect.documentation &&\n           <div className=\"effect-documentation\">\n             {effect.documentation}\n           </div>}\n          {context}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(EffectTools);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport ZObjectTools from './zobject/ZObjectTools.js';\nimport PadToolsSidebar from './pad/PadToolsSidebar.js';\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\nimport {connect} from 'react-redux';\nimport TrackToolsSidebar from './track/TrackToolsSidebar.js';\nimport ZMessageTools from './zobject/ZMessageTools.js';\nimport EffectTools from './effects/EffectTools.js';\n\nconst ToolsSidebar = ({object, sequencerEngine}) => { \n    let inner = '';\n    if (!object.getObjectType) {\n        return '';\n    }\n    switch (object.getObjectType()) {\n    case TRACK:\n        inner = <TrackToolsSidebar track={object}/>;\n        break;\n    case PAD:\n        inner = <PadToolsSidebar pad={object}/>;\n        break;\n    case ZMESSAGE:\n        inner = <ZMessageTools zmessage={object}/>;\n        break;\n    case ZOBJECT:\n        inner = <ZObjectTools zobject={object}/>;\n        break;\n    case EFFECT:\n        inner = <EffectTools effect={object}/>;\n        break;\n    }\n    return (\n        <div className=\"tools-sidebar\">\n          {inner}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolsSidebar);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport RecentlyAddedSounds from './recent/RecentlyAddedSounds.js';\nimport PluginsViewer from \"components/v3/sidebar/plugins/PluginsViewer.js\"\nimport TrackParameters from \"./track/TrackParameters.js\";\nimport TrackInformation from \"components/v3/sidebar/track/TrackInformation.js\";\nimport InstrumentViewer from './track/InstrumentViewer.js';\nimport {EFFECT, ZOBJECT, ZMESSAGE, PAD, TRACK} from 'constants/object-types.js';\nimport ObjectInformation from \"components/v3/sidebar/ObjectInformation.js\";\nimport Sends from './Sends.js';\nimport {\n    setShowTrackInstrument,\n    setSelectedZObject,\n    setRightSidebarOption} from 'actions/index.js';\nimport QuickSampleChooser from \"components/sidebar/QuickSampleChooser.js\";\nimport ToolsSidebar from './ToolsSidebar.js';\nimport AuditionSidebar from './audition/AuditionSidebar.js';\nimport Navigator from './Navigator.js';\nimport {connect} from 'react-redux';\nimport './sidebar.scss';\n\nconst RightSidebar = ({\n    setSelectedZObject,\n    setShowTrackInstrument,\n    secondaryZObject,\n    show,\n    sequencerEngine,\n    position,\n    selectedZObject,\n    selectedTrack,\n    selectedSteps,\n    setOption,\n    option,\n    showPlugins,\n    showTrackInstrument\n}) => { \n    let ref = useRef();\n\n    useEffect(() => {\n        if (selectedSteps && selectedSteps.length > 0) {\n            setOption(\"Tools\");\n        }\n    }, [setOption, selectedSteps]);\n\n    useEffect(() => {\n        if (selectedZObject && selectedZObject.isFrozen) {\n            setOption(\"Tools\");\n        }\n    }, [setOption, selectedZObject]);\n\n    useEffect(() => {\n        if (!selectedZObject) {\n            setShowTrackInstrument(undefined);\n        }\n    }, [selectedZObject]);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKey);\n        return () => window.removeEventListener(\"keydown\", onKey);\n    }, [setOption, option]);\n\n    const onKey = useCallback((e) => {\n        if (e.target.tagName === 'INPUT' ||\n            e.target.tagName === 'TEXTAREA') {\n            return;\n        }\n            \n        if (e.key === \"Tab\" && e.shiftKey) {\n            setOption(option === \"Tools\" ? \"Audition\" : \"Tools\");\n        }\n    }, [setOption, option]);\n\n    if (!show) {\n        return '';\n    }\n\n\n    let className = selectedZObject ? \"right sidebar \" + option : \"right sidebar\";\n    if (showPlugins) {\n        return (\n            <div ref={ref} className={className}>\n              <PluginsViewer sequencerEngine={sequencerEngine}/>\n            </div>\n        );\n    }\n    return [\n        showTrackInstrument && selectedZObject && selectedZObject.getObjectType() === TRACK &&\n            <InstrumentViewer track={selectedZObject}/>,\n        <div ref={ref} className={className}>\n          {selectedZObject && <Navigator\n                                zobject={selectedZObject}\n                                showSave={option === \"Audition\"}\n                                option={option} setOption={setOption}\n                                options={\n                                  selectedZObject && selectedZObject.isFrozen ? \n                                        [\"Tools\"] : \n                                    [\"Tools\", \"Audition\"]}/>}\n          {selectedZObject && <ObjectInformation object={selectedZObject}/>}\n          {sequencerEngine && !selectedZObject && <QuickSampleChooser sequencerEngine={sequencerEngine}/>}\n          {selectedZObject && option === \"Tools\" ? <ToolsSidebar object={selectedZObject} sequencerEngine={sequencerEngine}/>\n           : selectedZObject && <AuditionSidebar object={selectedZObject} sequencerEngine={sequencerEngine}/>}\n          <div\n            onClick={() => setSelectedZObject(selectedTrack)}\n            className=\"mini-track-information\">{sequencerEngine && !selectedZObject && selectedTrack &&\n           <TrackInformation track={selectedTrack}/>}\n          </div>\n          {sequencerEngine && !selectedZObject \n           && <RecentlyAddedSounds sequencerEngine={sequencerEngine}/>}\n          {sequencerEngine && !selectedZObject && sequencerEngine.tracks &&\n           sequencerEngine.tracks.length > 0 && <Sends sequencerEngine={sequencerEngine}/>}\n          {secondaryZObject && <ObjectInformation object={secondaryZObject}/>}\n        {secondaryZObject && option === \"Tools\" ? <ToolsSidebar object={secondaryZObject} sequencerEngine={sequencerEngine} /> : ''}\n        </div>\n    ];\n}\n\nconst mapStateToProps = (state, props) => {\n    let selected = state.zobject.selectedZObject;\n    return {\n        selectedZObject: selected,\n        show: state.spatial.sidebarsShowing,\n        selectedSteps: state.keyboard.selectedPianoRollSteps,\n        showTrackInstrument: state.spatial.showTrackInstrument,\n        secondaryZObject: state.zobject.secondaryZObject,\n        option: state.audition.rightSidebarOption,\n        showPlugins: state.plugins.showPlugins,\n        selectedTrack: props.sequencerEngine && props.sequencerEngine.getSelectedTrack(),\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setOption: x => dispatch(setRightSidebarOption(x)),\n      setSelectedZObject: x => dispatch(setSelectedZObject(x)),\n      setShowTrackInstrument: x => dispatch(setShowTrackInstrument(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(RightSidebar);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    setContextualHelp,\n    setSelectorMode,\n    setSidebarViewMode\n} from 'actions/index.js';\nimport {\n    ADD_SOUNDS_BUTTON,\n    ADD_INSTRUMENTS_BUTTON,\n    ADD_PRESETS_BUTTON,\n    ADD_SEQUENCES_BUTTON} from 'constants/contextual-help.js';\nimport {\n    SOUNDS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    PACKS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\n\nclass OptionTabs extends Component {\n    constructor(props) {\n        super(props);\n\n        this.onClickOption = this.onClickOption.bind(this);\n        this.clear = this.clear.bind(this);\n    }\n\n    clear() {\n        this.props.setSelectorMode(false);\n        this.props.setSidebarViewMode(SOUNDS);\n    }\n\n    onClickOption(option) {\n        this.clear();\n        if (option === SOUNDS) {\n            this.props.setSelectorMode(true);\n        } \n\n        this.props.setSidebarViewMode(option);\n    }\n\n    getSelectedOption() {\n        return this.props.sidebarViewMode;\n    }\n\n    render() {\n        let selectedOption = this.getSelectedOption();\n        return (\n            <div className=\"option-tabs\">\n              <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SOUNDS_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={SOUNDS}\n                selectedOption={selectedOption === SOUNDS && this.props.showSelectorMode ? SOUNDS : undefined}\n                name=\"SOUNDS\"/>\n              <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_INSTRUMENTS_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={INSTRUMENTS} selectedOption={selectedOption} name=\"INSTRUMENTS\"/>\n            <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SEQUENCES_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={SEQUENCES} selectedOption={selectedOption} name=\"PROJECTS\"/>\n            <OptionTab\n                onMouseOver={() => this.props.setContextualHelp(ADD_SEQUENCES_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClear={this.clear}\n                onClick={this.onClickOption}\n                hideUnderline={this.props.hideUnderline}\n                option={PACKS} selectedOption={selectedOption} name=\"PACKS\"/>\n            </div>\n        );\n    }\n}\n\nclass OptionTab extends Component {\n    isSelected() {\n        return this.props.selectedOption ===\n            this.props.option;\n    }\n\n    onClick() {\n        if (this.isSelected()) {\n            this.props.onClear();\n        } else {\n            this.props.onClick(this.props.option);\n        }\n    }\n    render() {\n        return (\n            <div\n              onMouseOver={this.props.onMouseOver}\n              onMouseLeave={this.props.onMouseLeave}\n              onClick={() => this.onClick()}\n              className={this.isSelected() ? \"option-tab selected\" : \"option-tab\"}>\n              {this.props.name}\n              {this.isSelected() && !this.props.hideUnderline ? <div className=\"option-tab-underline\"/> : ''}\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectorMode: m => dispatch(setSelectorMode(m)),\n        setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n        setContextualHelp: m => dispatch(setContextualHelp(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        showSelectorMode: state.sequencer.showSelectorMode,\n        sidebarViewMode: state.sequencer.sidebarViewMode,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(OptionTabs);\n","import Modal from 'react-bootstrap/Modal';\nimport { Button } from 'reactstrap';\nimport React, { Component } from 'react';\nimport { Badge} from 'reactstrap';\nimport Dropdown from 'react-dropdown'\n\nclass PresetModal extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            sharingMode: false,\n            usersInGuilds: [],\n            usersToShare: [],\n            shareToAll: false,\n        }\n    }\n\n    async onClickShare() {\n        this.setState({\n            sharingMode: true\n        });\n    }\n\n    executeShare() {\n        if (this.state.shareToAll) {\n            this.props.ethereum.guilds.sharePresetWithAllGuilds(\n                this.props.preset.id);\n        } else {\n           for (let i in this.state.usersToShare) {\n                let userId = this.state.usersToShare[i].userId;\n                let presetId = this.props.preset.id;\n                this.props.presets.sharePreset(\n                    presetId, userId);\n            }\n        }\n\n        this.clear();\n        this.props.onClose();\n    }\n\n    clear() {\n        this.setState({\n            sharingMode: false,\n            usersToShare: [],\n            usersInGuilds: [],\n            shareToAll: false,\n        });\n    }\n\n    onSelectUser(user) {\n        this.setState({usersToShare: this.state.usersToShare.concat([user])});\n    }\n\n    getUserOptions() {\n        let options = [];\n        for (let i in this.state.usersInGuilds) {\n            let user = this.state.usersInGuilds[i];\n            options.push({label: user.userName, value: user});\n        }\n\n        return options;\n    }\n\n    onClickNo() {\n        this.clear();\n        this.props.onClose();\n    }\n\n    onShareToAllCheckbox(val) {\n        this.setState({shareToAll: !this.state.shareToAll});\n    }\n\n    render() {\n        let name = this.props.preset !== undefined ? this.props.preset.name : '';\n        if (this.state.sharingMode) {\n            return (\n                <Modal dialogClassName=\"preset-modal\" show={this.props.show} onHide={this.props.onClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>{name}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>\n                <Dropdown\n                    className=''\n                    options={this.getUserOptions()}\n                    onChange={(o) => this.onSelectUser(o.value)}\n                    value={undefined}\n                    placeholder=\"Share with users\" />\n\n                  {this.state.usersToShare.map(user => <Badge>{user.userName}</Badge>)}\n                    <form>\n                    <div className=\"refined-checkbox-preferences\">\n                      <label>\n                        <input \n                               type=\"checkbox\"\n                               value=\"share\"\n                               checked={this.state.shareToAll}\n                               onChange={(e) => this.onShareToAllCheckbox(e.target.value)} />\n                    Share with all guild members\n                      </label>\n                    </div>\n              </form>\n              </Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"secondary\" onClick={() => this.executeShare()}>\n                  Yes\n                </Button>\n                    <Button variant=\"primary\" onClick={() => this.onClickNo()}>\n                  No\n                </Button>\n              </Modal.Footer>\n            </Modal>\n            );\n        }\n        return (\n            <Modal dialogClassName=\"preset-modal\" show={this.props.show} onHide={this.props.onClose}>\n              <Modal.Header closeButton>\n                <Modal.Title>{name}</Modal.Title>\n              </Modal.Header>\n              <Modal.Body>Do you want to replace this project's LFOs with this preset's LFOs?</Modal.Body>\n              <Modal.Footer>\n                <Button variant=\"secondary\" onClick={this.props.onClickYes}>\n                  Yes\n                </Button>\n                <Button variant=\"primary\" onClick={this.props.onClickNo}>\n                  No\n                </Button>\n                <Button variant=\"primary\" onClick={() => this.onClickShare()}>\n                  Share\n                </Button>\n              </Modal.Footer>\n            </Modal>\n        );\n    }\n}\n\nexport default PresetModal;\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {\n    SYNTH,\n    MULTI_SYNTH,\n    Z4,\n    SAMPLED_INSTRUMENT,\n    FM_SYNTH,\n    METAL_SYNTH} from 'constants/instrument-types.js';\nimport {\n    setContextualHelp,\n    setInstrumentTypeDragging\n} from 'actions/index.js';\nimport {ADD_SYNTH_BUTTON,\n        ADD_MULTI_SYNTH_BUTTON,\n        ADD_FM_SYNTH_BUTTON,\n       ADD_EXTERNAL_INSTRUMENT_BUTTON} from 'constants/contextual-help.js';\nimport '../../Instruments.scss';\n\nclass InstrumentsView extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    onClickSynth() {\n        this.props.sequencerEngine.addInstrumentTrack();\n    }\n\n    onClickMultiSynth() {\n        this.props.sequencerEngine.addMultiSynthTrack();\n    }\n\n    onClickMultiSampler() {\n        this.props.sequencerEngine.addSampledInstrumentTrack();\n    }\n\n    onClickMetalSynth() {\n        this.props.sequencerEngine.addMetalSynthTrack();\n    }\n\n    onClickFMSynth() {\n        this.props.sequencerEngine.addFMSynthTrack();\n    }\n\n    onClickZ4Track() {\n        this.props.sequencerEngine.addZ4Track();\n    }\n\n    onClickExternalInstrument() {\n        this.props.sequencerEngine.addMidiTrack();\n    }\n\n    onClickInstrumentRack() {\n        this.props.sequencerEngine.addInstrumentRackTrack();\n    }\n\n    onDragStart(type) {\n        if (type === undefined) {\n            return;\n        }\n        this.props.setInstrumentTypeDragging(type);\n    }\n\n    render() {\n        return (\n            <div className=\"instruments-view\">\n              <InstrumentOption\n                type={SAMPLED_INSTRUMENT}\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() => this.props.setContextualHelp(ADD_FM_SYNTH_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClick={() => this.onClickMultiSampler()}\n                name=\"Sampled Instrument\"\n                />\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                type={MULTI_SYNTH}\n                onMouseOver={() => this.props.setContextualHelp(ADD_MULTI_SYNTH_BUTTON)}\n                onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                onClick={() => this.onClickMultiSynth()}\n                name=\"Synth\"/>\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() =>\n                  this.props.setContextualHelp(ADD_EXTERNAL_INSTRUMENT_BUTTON)}\n                onClick={() => this.onClickExternalInstrument()}\n                onMouseLeave={() =>\n                  this.props.setContextualHelp(undefined)}\n                name=\"External Instrument\"/>\n             <InstrumentOption\n               onDragStart={(type) => this.onDragStart(type)}\n                onMouseOver={() =>\n                  this.props.setContextualHelp(ADD_EXTERNAL_INSTRUMENT_BUTTON)}\n                onClick={() => this.onClickInstrumentRack()}\n                onMouseLeave={() =>\n                  this.props.setContextualHelp(undefined)}\n                name=\"Instrument Rack\"/>\n            </div>);\n    }\n}\n\nclass InstrumentOption extends Component {\n    render() {\n        return (\n            <div\n              draggable\n              onDragOver={(e) => e.preventDefault()}\n              onDragStart={() => this.props.onDragStart(this.props.type)}\n              onMouseOver={this.props.onMouseOver}\n              onMouseLeave={this.props.onMouseLeave}\n              className=\"instrument-option\">\n              <span\n                onClick={this.props.onClick}\n                className=\"instrument-option-name\">\n                {this.props.name}\n              </span>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setContextualHelp: (help) => dispatch(setContextualHelp(help)),\n        setInstrumentTypeDragging: (type) => dispatch(setInstrumentTypeDragging(type))\n    }\n};\n \nexport default connect(null, mapDispatchToProps)(InstrumentsView);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PadPacks from './PadPacks.js';\nimport ZNumberInspector from './ZNumberInspector.js';\nimport {NUMBER} from \"zobject/data-types.js\";\nimport PresetsExplorer from \"components/installation/PresetsExplorer.js\";\nimport {connect} from 'react-redux';\nimport {\n    setTrackPresetSaving} from 'actions/index.js';\n\nconst ZObjectSidebar = ({zobject, setTrackPresetSaving, searchText}) => { \n    const savePreset = useCallback(() => {\n        setTrackPresetSaving(zobject);\n    }, [zobject]);\n\n    let {numInlets, numOutlets} = zobject;\n    if (zobject.effect) {\n        numInlets += zobject.effect.numInlets;\n        numOutlets += zobject.effect.numOutlets;\n    }\n    return (\n        <div className=\"zobject-sidebar\">\n          {zobject.type === NUMBER &&\n           <div className=\"z-object-inspector\">\n             <div className=\"z-object-name\">\n               <div className=\"z-object-thumb\"/><span className=\"z-name\">Number</span>\n             </div>\n             <ZNumberInspector znumber={zobject}/>\n           </div>}\n          \n          {zobject.function &&\n           <div className=\"z-object-inspector\">\n             <div className=\"z-object-name\">\n               <div className=\"z-object-thumb\"/><span className=\"z-name\">{zobject.name}</span>\n             </div>\n             <div className=\"z-object-info\">\n               Inlets: {numInlets}\n             </div>\n             <div className=\"z-object-info\">\n               Outlets: {numOutlets}\n             </div>\n             <img\n               onClick={savePreset}\n               src=\"/floppy-disk.svg\" className=\"save-preset-disk\"/>\n           </div>}\n\n        {zobject.isPad && <PadPacks pad={zobject}/>}\n          {!zobject.isPad && zobject.type !== NUMBER &&\n          <PresetsExplorer\n            initialSize={18}\n            zobject={zobject}\n            content={zobject.preset}\n            searchText={searchText}\n            type={zobject.getInstrumentType()}/>}\n        </div>\n    );\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      searchText: state.selector.quickAddSearchText,\n      preset: props.zobject && props.zobject.preset,\n      name: props.zobject && props.zobject.name\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setTrackPresetSaving: x => dispatch(setTrackPresetSaving(x))     \n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectSidebar);\n","import React, { Component } from 'react';\nimport CommentsComponent from 'components/user/CommentsComponent.js';\nimport ethereum from 'decentralized/ethereum.js';\n\nclass NotesComponent extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n        this.getUserId();\n    }\n\n    async getUserId() {\n        this.setState({\n            userId: await ethereum.getUser()\n        });\n    }\n\n    render() {\n        if (this.state.userId === undefined) {\n            return (<div></div>);\n        }\n\n        let sequenceId  = this.props.sequencerEngine.getSequenceId() \n        let sequence = {\n            id: sequenceId,\n        };\n\n        return (\n            <div>\n              <CommentsComponent\n                userId={this.state.userId}\n                sequence={sequence}/>\n            </div>\n        );\n    }\n}\n\nexport default NotesComponent;\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nlet counter=0;\nconst PackSearch = ({onChange}) => { \n    const [value, setValue] = useState('');\n\n    const _onChange = useCallback((e) => {\n        let _text = e.target.value;\n        setValue(_text);\n        let _counter = (++counter);\n        setTimeout(() => {\n            if (_counter !== counter) { return; }\n            onChange(_text);\n        }, 250);\n    }, [setValue, onChange]);\n\n    const clear = useCallback(() => {\n        setValue('');\n        onChange('');\n    }, [onChange, setValue]);\n\n    return (\n        <div className=\"pack-search-container\">\n          <input placeholder=\"Type to search\" onChange={_onChange} type=\"text\" className=\"pack-search\" value={value}/>\n          <div onClick={clear} className=\"clear-btn\">x</div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackSearch);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PAD} from 'packs/pack-types.js';\nimport {useScrollTo} from \"components/selector2/useScrollTo.js\"\nimport {getPresetsData} from \"decentralized/presets/PresetsSearcher.js\";\nimport PulseLoader from 'react-spinners/PulseLoader';\nimport PackContent from \"components/packs/PackContent.js\";\nimport {\n    setPackSelected,\n    setSamplesDragging,\n    setCurrentSoundInList,\n    setPackToEdit} from 'actions/index.js';\nimport Sample from \"repos/Sample.js\"\nimport {connect} from 'react-redux';\n\nconst PackDetails = ({\n    sequencerEngine,\n    pack,\n    setSamplesDragging,\n    setPackSelected,\n    json,\n    style,\n    setPackToEdit,\n    isEditing,\n    userName,\n    isSelected,\n    currentPreset,\n    currentSoundInList,\n    setCurrentSoundInList,\n    scrollRef,\n}) => { \n\n    let ref = useRef(undefined);\n    let [samples, setSamples] = useState(undefined);\n    let [presets, setPresets] = useState(undefined);\n\n    useScrollTo({ref, scrollRef, isCurrent: isSelected, topOffset: 120});\n\n    const loadAsPads = useCallback(() => {\n        sequencerEngine.currentSubSequence.loadPackAsPads(json.pad, json.fx);\n    }, [json]);\n\n    const onClickEdit = useCallback(() => {\n        setPackToEdit({\n            ... json,\n            ... pack,\n            samples,\n            presets\n        });\n    }, [json, presets, samples, pack]);\n\n    useEffect(() => {\n        if (!json) { return; }\n        let _samples = [];\n        let promises = [];\n        for (let id of json.samples) {\n            if (pack.matchingContent &&\n                pack.matchingContent.length > 0 && \n                !pack.matchingContent.includes(id)) {\n                continue;\n            }\n            let sample = new Sample(id);\n            promises.push(sample.load());\n            _samples.push(sample);\n        }\n        Promise.all(promises).then(\n            x => setSamples(_samples));\n\n        if (json.presets) {\n            let _presets = json.presets;\n            if (pack.matchingContent && pack.matchingContent.length > 0) {\n                _presets = _presets.filter(\n                    p => pack.matchingContent.includes(p));\n            }\n            getPresetsData(_presets)\n                .then(setPresets);\n        }\n    }, [json, pack]);\n\n    let className = \"showing pack-option \";\n    if (isEditing) {\n        className += \" editing\";\n    }\n    if (isSelected) {\n        className += \" selected\";\n    }\n\n    useEffect(() => {\n        setPackSelected(pack);\n    }, []);\n\n    let currentPresetHash = currentPreset && currentPreset.contentHash;\n    return (\n        <div\n          ref={ref}\n          onDragStart={\n              () =>\n                  setSamplesDragging(samples)\n          }\n          onMouseDown={() => setPackSelected(pack)}\n          draggable={true}\n          style={style}\n          className={className}>\n          <div className=\"floppy-top\">\n            <div style={style} className=\"floppy-title\">{pack.title}</div>\n          </div>\n          <div onClick={onClickEdit} className=\"pack-edit-btn\">\n            ...\n          </div>\n          <div className=\"floppy-sticker\">\n            {json.type === PAD ? <div\n                                   onClick={loadAsPads}\n                                   className=\"load-pack\">Load as Pads</div> : ''}\n            {!samples ? <PulseLoader\n                          sizeUnit={\"px\"}\n                          size={10}\n                          color={'#123abc'}\n                        /> :\n             samples.map(\n                 (x, i) => <PackContent\n                             setIsCurrent={() => setCurrentSoundInList(i)}\n                             isCurrent={currentSoundInList % samples.length === i }isEditing={false} sample={x}/>)}\n            {presets ?\n             presets.map(x => <PackContent\n                                isCurrent={x.contentHash === currentPresetHash} isEditing={false} preset={x}/>) : ''}\n          </div>\n          {json && json.description !== \"\" ?\n           <div className=\"floppy-sticker\">\n             {json.description}\n           </div> : \"\"}\n           <div className=\"pack-author\">\n             {userName}\n           </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let sequencerEngine = state.sequencer.sequencerEngine; \n    let track =  sequencerEngine.getSelectedTrack();\n    let isSelected = state.packs.packSelected === props.pack;\n    return {\n        isEditing: state.packs.packToEdit &&\n            state.packs.packToEdit.packHash === props.pack.packHash,\n        currentPreset: track && track.preset,\n        isSelected, \n        currentSoundInList: isSelected ? state.selector.currentSoundInList : undefined\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPackToEdit: x => dispatch(setPackToEdit(x)),\n      setPackSelected: x => dispatch(setPackSelected(x)),\n      setSamplesDragging: x => dispatch(setSamplesDragging(x)),\n      setCurrentSoundInList: x => dispatch(setCurrentSoundInList(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackDetails);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {PAD} from 'packs/pack-types.js';\nimport {useScrollTo} from \"components/selector2/useScrollTo.js\"\nimport NewPackWindow from \"components/packs/NewPackWindow.js\";\nimport Colors from 'components/Colors.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport ethereum from \"decentralized/ethereum.js\";\nimport PackDetails from \"components/packs/PackDetails.js\";\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst PackOption = ({pack, isSelected, scrollRef, sequencerEngine}) => { \n    let ref = useRef(undefined);\n    let [userName, setUserName] = useState('');\n    let [json, setJson] = useState(undefined);\n    let [showing, setShowing] = useState(false);\n\n    useScrollTo({scrollRef, ref, isCurrent: isSelected, topOffset: 100});\n\n    useEffect(() => {\n        ethereum.users.getUserName(pack.user).then(setUserName);\n        ipfs.getJson(pack.packHash).then(setJson);\n    }, []);\n\n    let style = {\n        backgroundColor: colors.getColorForHash(pack.title)\n    };\n\n    useEffect(() => {\n        if (isSelected) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        } else {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        }\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [setShowing, isSelected, showing]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === \"Enter\" && !showing && isSelected) {\n            setShowing(true);\n        }\n    }, [isSelected, showing, setShowing]);\n\n    useEffect(() => {\n        if (pack.matchingContent) {\n            setShowing(true);\n        } else {\n            setShowing(false);\n        }\n    }, [pack, setShowing]);\n\n    if (showing) {\n        return (\n            <PackDetails\n              sequencerEngine={sequencerEngine}\n              scrollRef={scrollRef} style={style} pack={pack} json={json} userName={userName}/>\n        );\n    }\n    return (\n        <div ref={ref} style={style} onClick={() => setShowing(true)}\n             className={isSelected ? \"pack-option selected\" : \"pack-option\"}>\n          <div className=\"floppy-top\">\n            <div style={style} className=\"pack-title\">{userName}</div>\n          </div>\n          <div className=\"floppy-sticker\">\n            <div className=\"pack-description\">{pack.title}</div>\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n    let isSelected = state.packs.packSelected === props.pack;\n    return {\n        isSelected\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackOption);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {searchPacks} from './searchPacks.js';\nimport PackSearch from './PackSearch.js';\nimport PackOption from \"components/packs/PackOption.js\";\nimport {getPacks} from 'packs/packs.js';\nimport {\n    setCurrentSoundInList,\n    setPackSelected\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst PacksSelector = ({\n    sequencerEngine,\n    setCurrentSoundInList,\n    setPackSelected,\n    packSelected,\n    showPianoRoll,\n    bottomHeight\n}) => { \n    const [searchTerm, setSearchTerm] = useState('');\n    const [packs, setPacks] = useState([]);\n    const [filteredPacks, setFilteredPacks] = useState(undefined);\n    let ref = useRef(undefined);\n\n    useEffect(() => {\n        if (searchTerm !== '') {\n            searchPacks(searchTerm).then(\n                (packs) => {\n                    setFilteredPacks(packs);\n                });\n        } else {\n            setFilteredPacks(undefined);\n        }\n    }, [searchTerm, setFilteredPacks, packs]);\n\n    useEffect(() => {\n        getPacks().then((packs) => {\n            setPacks(packs);\n        });\n    }, []);\n\n    useEffect(() => {\n        return () => setPackSelected(undefined);\n    }, []);\n\n    let style = {\n        maxHeight: window.innerHeight - 293\n    };\n    if (showPianoRoll) {\n        style.maxHeight -= bottomHeight - 130;\n    }\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [packSelected, packs]);\n\n    const onKeyDown = useCallback((e) => {\n        let _packs = filteredPacks || packs;\n        if (e.key === 'ArrowLeft') {\n            let index = _packs.indexOf(packSelected);\n            setPackSelected(_packs[Math.max(0,index - 1)]);\n            setCurrentSoundInList(0);\n        } else if (e.key === 'ArrowRight') {\n            let index = _packs.indexOf(packSelected);\n            setPackSelected(_packs[Math.min(_packs.length - 1, index + 1)]);\n            setCurrentSoundInList(0);\n        }\n    }, [packSelected, packs, filteredPacks]);\n\n    return (\n        <div\n          className=\"packs-selector no-select\">\n          <PackSearch onChange={setSearchTerm}/>\n          <div\n            style={style}\n            ref={ref}\n            className=\"packs-grid\">\n            {(filteredPacks || packs).map(\n                x =>\n                    <PackOption sequencerEngine={sequencerEngine} key={x.packHash} scrollRef={ref} pack={x}/>\n            )}\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      packSelected: state.packs.packSelected,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPackSelected: x => dispatch(setPackSelected(x)),\n      setCurrentSoundInList: x => dispatch(setCurrentSoundInList(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PacksSelector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setCreatingNewPack} from 'actions/index.js';\nimport PacksSelector from './PacksSelector.js';\nimport NewPackFlow from './NewPackFlow.js';\nimport {connect} from 'react-redux';\nimport '../../Packs.scss';\n\nconst PacksComponent = ({setCreatingNewPack, sequencerEngine}) => { \n   return (\n        <div className=\"packs-component\">\n          <div\n            onClick={() => setCreatingNewPack(true)}\n            className=\"new-pack-btn\">\n            Create a New Pack\n          </div>\n          <PacksSelector sequencerEngine={sequencerEngine}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setCreatingNewPack: (x) => dispatch(setCreatingNewPack(x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PacksComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {connect} from 'react-redux';\n\nconst NewPackFlow = ({setNewPack}) => { \n    let [value, setValue] = useState('');\n    const save = useCallback((e) => {\n        setNewPack(false);\n    }, [value, setNewPack]);\n    return (\n        <div className=\"new-pack-flow\">\n          <div className=\"name-container\">\n            <input value={value} onChange={e => setValue(e.target.value)} placeholder=\"Type name\"/>\n          </div>\n          <div className=\"drop-content-here\">\n            Drop samples and presets here\n          </div>\n          <div onClick={save} className=\"save-pack-btn\">\n            Save\n          </div>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewPackFlow);\n","import React, { Component } from 'react';\nimport {\n    dragEffect,\n    setMidiEffectDragging,\n    setPulledEffects,\n    setInstrumentTypeDragging,\n    setPresetDragging,\n    setSampleDragging,\n    setSampleTagDragging,\n} from 'actions/index.js';\nimport SidebarPresets from './SidebarPresets.js';\nimport TracksOverview from './TracksOverview.js';\nimport Sequences from 'components/sequences2/Sequences.js';\nimport TrackQuickView from './TrackQuickView.js';\nimport QuickSampleChooser from './QuickSampleChooser.js';\nimport OptionTabs from 'components/sounds/OptionTabs.js';\nimport Selector from 'components/selector2/Selector.js';\nimport PresetModal from 'components/presets/PresetModal.js';\nimport InstrumentsView from 'components/instruments/InstrumentsView.js';\nimport Presets from 'components/selector2/presets/Presets.js';\nimport { SEQUENCER_VIEW, MIX_VIEW } from \"constants/view-modes.js\";\nimport { connect } from \"react-redux\";\nimport ZObjectSidebar from './ZObjectSidebar.js';\nimport { Button,\n         ButtonDropdown,\n         DropdownToggle,\n         DropdownMenu,\n         DropdownItem } from 'reactstrap';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\nimport NotesComponent from 'components/notes/NotesComponent.js';\nimport Keyboard from 'components/midi/Keyboard.js';\nimport MidiPads from 'components/midi/MidiPads.js';\nimport ContextualHelpComponent from './ContextualHelpComponent.js';\nimport {setSampleAuditioning} from 'actions/index.js';\nimport {setContextualHelp} from 'actions/index.js';\nimport FoldersComponent from 'components/folders/FoldersComponent.js';\nimport {setSamplePack} from 'actions/index.js';\nimport {setSelectorMode} from 'actions/index.js';\nimport {addSamplePack} from 'actions/index.js';\nimport {\n    ADD_ALL_SOUNDS_BUTTON,\n    PRESET_FOLDERS} from 'constants/contextual-help';\nimport ethereum from 'decentralized/ethereum.js';\nimport {\n    setSidebarViewMode,\n    setSidebarCollapsed} from 'actions/index.js';\nimport PacksComponent from 'components/packs/PacksComponent.js';\nimport {\n    SOUNDS,\n    PACKS,\n    EXTERNAL,\n    SEQUENCES,\n    PRESETS,\n    INSTRUMENTS,\n    NOTES} from 'constants/sidebar-view-modes.js';\nimport '../../Sidebar.scss';\nconst presets = ethereum.presets;\n\nwindow.topOffset = 0;\nwindow.bottomOffset = -400;\n\nclass SidebarComponent extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dropdownOpen: false,\n            showPresetModal: false,\n        }\n\n        this.onClosePresetModal = this.onClosePresetModal.bind(this);\n        this.loadWithLFOs = this.loadWithLFOs.bind(this);\n        this.loadWithoutLFOs = this.loadWithoutLFOs.bind(this);\n    }\n\n    get showMidiPads() {\n        if (this.props.padMappings === undefined) {\n            return false;\n        }\n\n        let x = Object.keys(this.props.padMappings)\n            .length > 0;\n\n        return x;\n    }\n\n    onDrop() {\n        let state = this.props.sequencerEngine.state;\n        let effectDragging = state.sequencer.effectDragging ||\n            state.effects.midiEffectDragging;\n        if (effectDragging) {\n            let pulledEffects = [...state.effects.pulledEffects, effectDragging.effect];\n            this.props.setPulledEffects(pulledEffects);\n            // in this case we need to move the effect to the outside of the\n            // track so that it is seen always\n            this.props.setMidiEffectDragging(undefined);\n            this.props.setEffectDragging(undefined);\n        }\n        this.props.setPresetDragging(undefined);\n        this.props.setSampleDragging(undefined);\n        this.props.setInstrumentTypeDragging(undefined);\n        this.props.setSampleTagDragging(undefined);\n    }\n\n    toggleDropdown() {\n        this.setState({dropdownOpen: !this.state.dropdownOpen});\n    }\n\n    get sequencerEngine() {\n        return this.props.sequencerEngine;\n    }\n\n    // called when user chooses a sound they wish to add, this\n    // function adds the sound to the sequencer in a new track\n    async addSound(sample, layerMode, slice, chordSample, chord) {\n       let newCursor = this.sequencerEngine.tracks.length;\n       if (layerMode && this.sequencerEngine.tracks.length > 0) {\n            var selectedTrack = this.sequencerEngine.cursor.track == null ?\n                0 : this.sequencerEngine.cursor.track;\n            this.sequencerEngine.addSound(sample, selectedTrack, undefined, chord);\n        } else {\n            this.sequencerEngine.addSound(sample, undefined, slice, chord);\n        }\n    }\n\n    auditionSound(sample) {\n        var selectedTrack = this.sequencerEngine.cursor.track == null ?\n            0 : this.sequencerEngine.cursor.track;\n\n        this.sequencerEngine.auditionSound(sample, selectedTrack);\n        this.props.setSampleAuditioning(sample);\n    }\n\n    // triggered when user clicks \"Add some sounds\" button, which\n    // opens up the Sound Selector Mode\n    showSoundsSelectorView() {\n        this.props.setSelectorMode(true);\n        this.props.setSidebarViewMode(SOUNDS);\n    }\n\n    isShowingSoundsPane() {\n        if (this.props.sidebarCollapsed) {\n            return false;\n        }\n        return this.props.showSelectorMode ||\n            this.props.sidebarViewMode !== SOUNDS;\n    }\n\n    showSequences() {\n        this.props.setSidebarViewMode(SEQUENCES);\n    }\n\n    showExternal() {\n        this.props.setSidebarViewMode(EXTERNAL);\n    }\n\n    showPresets() {\n        this.props.setSidebarViewMode(PRESETS);\n    }\n\n    onClickInstrumentsButton() {\n        this.props.setSidebarViewMode(INSTRUMENTS);\n    }\n\n    onClickAddAudioTrackButton() {\n        // add a midi track to \n        this.sequencerEngine.addAudioTrack();\n        this.setState(this.state);\n    }\n\n    toggleCollapse() {\n        this.props.setSidebarCollapsed(!this.props.sidebarCollapsed);\n    }\n\n    onChooseItem(preset) {\n        this.setState({showPresetModal: true, presetToLoad: preset});\n    }\n\n    onChooseFolder(folder) {\n        this.setState({showPresetModal: true, folderToLoad: folder});\n    }\n\n    onClosePresetModal() {\n        this.setState({showPresetModal: false});\n    }\n\n    loadWithLFOs() {\n        this.setState({showPresetModal: false});\n        if (this.state.presetToLoad) {\n            this.props.sequencerEngine.loadPreset(\n                this.state.presetToLoad, true);\n        } else {\n            this.state.folderToLoad.getAllItems().forEach(\n                item =>\n                    this.props.sequencerEngine.loadPreset(\n                        item, true));\n        }\n    }\n\n    loadWithoutLFOs() {\n        this.setState({showPresetModal: false});\n        \n        if (this.state.presetToLoad) {\n            this.props.sequencerEngine.loadPreset(\n                this.state.presetToLoad, false);\n        } else {\n            this.state.folderToLoad.getAllItems().forEach(\n                item =>\n                    this.props.sequencerEngine.loadPreset(\n                        item, false));\n        }\n    }\n\n    get selectedEffect() {\n        let state = this.props.sequencerEngine.store.getState();\n        if (state.effects.selectedEffect === undefined) {\n            return undefined;\n        }\n\n        return this.props.sequencerEngine.selectedEffect;\n    }\n\n    get cursor() {\n        return this.props.sequencerEngine.cursor;\n    }\n\n    get selectedTrack() {\n        return this.props.sequencerEngine.tracks[this.cursor.track];\n    }\n\n    render() {\n        let hideSequencer = this.props.viewMode !== SEQUENCER_VIEW &&\n            this.props.viewMode !== MIX_VIEW;\n\n        let soundsSelectorComponent = '';\n        if (this.props.sidebarViewMode === SOUNDS && this.props.showSelectorMode) { \n            soundsSelectorComponent = (\n                <Selector\n                  ethereumSearcher={this.props.ethereumSearcher}\n                  sequencerEngine={this.sequencerEngine}\n                  onAudition={(sample) => this.auditionSound(sample)}\n                  onAddSound={(sample, layerMode, slice, chordSample, chord) => this.addSound(sample, layerMode, slice, chordSample, chord)}/>\n            );\n        }\n\n\n        if (this.props.sidebarViewMode === PACKS) {\n            soundsSelectorComponent = (\n                <PacksComponent sequencerEngine={this.sequencerEngine}/>\n            );\n        }\n\n        let instrumentsComponent = '';\n        if (this.props.sidebarViewMode === INSTRUMENTS) {\n            instrumentsComponent =\n                <InstrumentsView sequencerEngine={this.sequencerEngine}/>;\n        }\n\n        let sequencesComponent = '';\n        if (this.props.sidebarViewMode === SEQUENCES) {\n            sequencesComponent =\n                <Sequences sequencerEngine={this.sequencerEngine}/>;\n        }\n\n        let presetsComponent = '';\n        if (this.props.sidebarViewMode === PRESETS) {\n            presetsComponent =\n                <Presets sequencerEngine={this.sequencerEngine}/>\n        }\n\n        let notesComponent = '';\n        if (this.props.sidebarViewMode === NOTES) {\n            notesComponent =\n                <NotesComponent sequencerEngine={this.sequencerEngine}/>\n        }\n        let trackHeight = 400;\n        let remainingHeights = 300;\n        let trackNumberStickinessThreshold =\n            Math.ceil((window.innerHeight - remainingHeights) / trackHeight);\n        const WINDOW_HEIGHT_THRESHOLD = 1001;\n        let disableStickiness = \n            false;\n\n        let topOffset = this.isShowingSoundsPane() ? window.topOffset : -500;\n        let bottomOffset = this.isShowingSoundsPane() ? window.bottomOffset: -100;\n\n        if (this.props.hidePresets) {\n            topOffset = 300;\n            bottomOffset = -400;\n        }\n\n        let stickyKeyboardClass = this.props.zIndexHack ?\n            'z-index-hack' : ' inner-sidebar';\n\n        let sidebarClassName = this.props.sidebarCollapsed ?\n            \"sounds-pane collapsed\" :\n            this.isShowingSoundsPane() ? \"sounds-pane\" : \"hide sounds-pane\";\n\n        if (this.isShowingSoundsPane() && this.props.hidePresets && this.props.viewMode === SEQUENCER_VIEW) {\n            disableStickiness = true;\n        }\n        if (this.props.showPianoRoll) {\n            disableStickiness = true;\n        }\n        if (this.props.disableStickiness) {\n            disableStickiness = true;\n        }\n\n        let style = {\n            height: window.innerHeight - 147\n        };\n\n\n        if (this.props.showPianoRoll) {\n            style.height -= this.props.bottomHeight - 80;\n            bottomOffset = 230;\n        }\n\n        if (this.props.viewMode === MIX_VIEW) {\n            style.height = window.innerHeight - 65;\n        }\n\n        let selectedZObject = this.props.selectedZObject ||\n            (this.props.viewableSubPatches &&\n             this.props.viewableSubPatches[0] &&\n             this.props.viewableSubPatches[0].zObject\n            );\n        let defaultView = (\n            <div\n              style={{\n                  ... style,\n                  height: style.height - 20\n              }}\n              className=\"sidebar-content\">\n               {instrumentsComponent}\n               {presetsComponent}\n               {sequencesComponent}\n               {soundsSelectorComponent}\n               {notesComponent}\n              <ConditionedComponent condition={!this.isShowingSoundsPane()}>\n                <OptionTabs/>\n                <QuickSampleChooser selectedZObject={undefined} sequencerEngine={this.sequencerEngine}/>\n                {selectedZObject ?\n                 <ZObjectSidebar zobject={selectedZObject}/> :\n                <div className=\"overviews\">\n                  <div className=\"overview-left\">\n                    {!this.props.explorerMaximized && (!this.props.searchText || this.props.searchText === \"\") ? \n                     <TrackQuickView\n                       installation={this.props.hidePresets}\n                       sequencerEngine={this.sequencerEngine}\n                     />  : ''}\n                    <SidebarPresets sequencerEngine={this.sequencerEngine}/>\n                  </div>\n                  {!this.props.explorerMaximized && (!this.props.searchText || this.props.searchText === \"\") ? \n                   <TracksOverview sequencerEngine={this.sequencerEngine}/>\n                   : ''}\n                </div>\n                }\n                 <PresetModal\n                   ethereum={ethereum}\n                   presets={presets}\n                   preset={this.state.presetToLoad}\n                   show={this.state.showPresetModal}\n                   onClose={this.onClosePresetModal}\n                   onClickYes={this.loadWithLFOs}\n                   onClickNo={this.loadWithoutLFOs}/>\n              </ConditionedComponent>\n            </div>\n        );\n\n        /**\n                 <ConditionedComponent condition={!this.props.hidePresets}>\n                 <div\n                  onMouseOver={() => this.props.setContextualHelp(PRESET_FOLDERS)}\n                  onMouseLeave={() => this.props.setContextualHelp(undefined)}\n                   className=\"preset-folders\">\n                   <FoldersComponent\n                     sequencerEngine={this.props.sequencerEngine}\n                     onTestItem={(preset) => []}\n                     onChooseFolder={(folder) => this.onChooseFolder(folder)}\n                     onChooseItem={(item) => this.onChooseItem(item)}\n                     showItems={true}/>\n                 </div>\n                 </ConditionedComponent>\n*/\n\n        let soundPane = (\n            <div onDrop={() =>this.onDrop()} className=\"sidebar-container no-select\">\n              <div style={style} className={sidebarClassName}>\n              <div className=\"sidebar-header\">\n                <div\n                  onClick={() => this.toggleCollapse()}\n                  className=\"collapse-toggle\">\n                  {this.props.sidebarCollapsed ? \n                      <div className=\"arrow-down\"/> :\n                      <div className=\"arrow-right\"/>}\n                </div>\n             </div>\n             <ConditionedComponent condition={!this.props.sidebarCollapsed}>\n               <ConditionedComponent condition={this.isShowingSoundsPane()}>\n                 <div className=\"sound-toolbar\">\n                   <OptionTabs/>\n                 </div>\n               </ConditionedComponent>\n               {defaultView}\n             </ConditionedComponent>\n            </div>\n            </div>);\n\n        if (this.props.showingContextMenu) {\n            stickyKeyboardClass += \" showing-context-menu\";\n        }\n        if (hideSequencer) {\n            return '';\n        } else {\n            let holderId =\n                this.props.sidebarCollapsed ? 'sidebar-holder-collapsed' :\n                this.isShowingSoundsPane() ? 'sidebar-holder-selector' :\n                'sidebar-holder';\n            return (\n                <div\n                  >\n                  {soundPane}\n                </div>\n            );\n        }\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSamplePack : samplePack => dispatch(setSamplePack(samplePack)),\n        addSamplePack : samplePack => dispatch(addSamplePack(samplePack)),\n        setSelectorMode: m => dispatch(setSelectorMode(m)),\n        setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n        setSidebarCollapsed: m => dispatch(setSidebarCollapsed(m)),\n        setSampleAuditioning: s => dispatch(setSampleAuditioning(s)),\n        setContextualHelp: s => dispatch(setContextualHelp(s)),\n        setInstrumentTypeDragging: m => dispatch(setInstrumentTypeDragging(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n        setSampleDragging: m => dispatch(setSampleDragging(m)),\n        setSampleTagDragging: m => dispatch(setSampleTagDragging(m)),\n        setPulledEffects: e => dispatch(setPulledEffects(e)),\n        setEffectDragging: fx => dispatch(dragEffect(fx)),\n        setMidiEffectDragging: fx => dispatch(setMidiEffectDragging(fx))\n    };\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        viewMode: state.sequencer.viewMode,\n        showSelectorMode: state.sequencer.showSelectorMode,\n        sidebarCollapsed: state.selector.sidebarCollapsed,\n        sidebarViewMode: state.sequencer.sidebarViewMode,\n        isTrackFocused: state.sequencer.trackFocused !== undefined,\n        showPresets: state.sequencer.showPresets,\n        zIndexHack: state.sequencer.zIndexHack,\n        selectedTrack: state.mix.selectedTrack,\n        padMappings: state.keyboard.padMappings,\n        showPianoRoll: state.sequencer.showPianoRoll,\n        selectedEffect: state.effects.selectedEffect,\n        isShowingEffects: state.tracks.showTrackEffects[state.mix.selectedTrack],\n        isMacroMapping: state.effects.isMacroMapping,\n        bottomHeight: state.arrangement.bottomHeight,\n        searchText: state.selector.quickAddSearchText,\n        explorerMaximized: state.selector.explorerMaximized,\n        showingContextMenu: state.effects.showingContextMenu,\n        // selectedZObject: state.zobject.selectedZObject,\n        viewableSubPatches: state.zobject.viewableSubPatches\n    };\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SidebarComponent);\n","export const moveTrackToGroup = (track, destinationGroup) => {\n    if (track.group === destinationGroup) {\n        return;\n    }\n\n    let groups = track.sequencerEngine.groups;\n    groups.addToGroup(track, destinationGroup);\n};\n","import React, {useState, useCallback} from 'react';\nimport {setSelectedMixEffect} from 'actions/index.js';\n\nexport const useEffects = ({trackOrGroup}) => {\n    let [effects, setEffects] = useState(trackOrGroup.effects);\n\n    const onDeleteEffect = useCallback((effect) => {\n        setEffects([... trackOrGroup.effects]);\n\n        let sub = trackOrGroup.subSequence;\n        trackOrGroup.sequencerEngine.dispatch(\n            setSelectedMixEffect(sub.id, trackOrGroup.id, undefined, \"AUDIO_FX\", undefined));\n    }, [trackOrGroup, setEffects]);\n\n    return {onDeleteEffect, effects};\n};\n","import {chopByPatterns} from './chopByPatterns.js';\nimport {getTrackJson} from 'engine/json/getTrackJson.js';\nimport {sleep} from 'utils/sleep.js';\nimport {\n    setLoadingText\n} from 'actions/index.js';\nimport {bounceGroupPatterns} from 'engine/BouncingEngine.js';\n\nconst getPatternLengths = (sequencerEngine) => {\n    let numPatterns = sequencerEngine.tracks[0].patterns.length;\n    let patternLengths = [];\n    for (let i=0; i < numPatterns; i++) {\n        sequencerEngine.switchToPattern(i);\n        patternLengths.push(sequencerEngine.length);\n    }\n    return patternLengths;\n};\n\nexport const freezeGroupByPatterns = async (group) => {\n    let {sequencerEngine} = group;\n    sequencerEngine.store.dispatch(setLoadingText(\"Freezing track\\'s patterns\"));\n    await sleep(100);\n    group.sequencerEngine.stop();\n\n    let numPatterns = group.tracks[0].patterns.length;\n    let patternLengths = getPatternLengths(sequencerEngine);\n    sequencerEngine.switchToPattern(0);\n\n    let audioBuffer = await bounceGroupPatterns(group.sequencerEngine, group);\n    let bounces = await chopByPatterns(group.sequencerEngine, audioBuffer, numPatterns, group.tracks);\n\n    // get preset for group\n    let {frozenGroup, frozenTracks} = getGroupData(group);\n    // delete all the tracks\n    sequencerEngine.deleteGroup(group);\n\n    let track = sequencerEngine.addMultiFreezeTrack();\n    for (let i=track.patterns.length; i < numPatterns; i++) {\n        await track.newPattern(true);\n    }\n    \n    track.freeze(bounces, true);\n    track.frozenGroup = frozenGroup;\n    track.frozenTracks = frozenTracks;\n\n    for (let i=0; i < numPatterns; i++) {\n        sequencerEngine.switchToPattern(i);\n        track.currentPattern = i;\n        track.pattern.changeLength(patternLengths[i]);\n        track.frozenColumns[0].playing = i;\n    }\n\n    sequencerEngine.switchToPattern(0);\n    sequencerEngine.switchToPattern(sequencerEngine.currentPattern);\n    sequencerEngine.groups.groups.forEach(\n        group => group.updateRedux());\n\n    // update the pattern lengths for this new track to match\n    // the max patt. length (of the tracks)\n \n    sequencerEngine.store.dispatch(setLoadingText(undefined));\n};\n\nconst getGroupData = (group) => {\n    let frozenGroup = group.getJson();\n    let frozenTracks = [];\n    for (let track of group.tracks) {\n        frozenTracks.push(getTrackJson(track));\n    }\n    // need to get the steps for each pattern\n    return {frozenGroup, frozenTracks};\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {freezeGroupByPatterns} from 'track/freeze/freezeGroupByPatterns.js';\nimport {connect} from 'react-redux';\nimport { ButtonDropdown, DropdownToggle, DropdownMenu, DropdownItem } from 'reactstrap';\n\nconst GroupActions = ({group}) => { \n    let [toggled, setToggled] = useState(false);\n\n    const freezeGroup = useCallback(() => {\n        freezeGroupByPatterns(group);\n    }, [group]);\n\n    return (\n        <div className=\"group-actions\">\n            <ButtonDropdown\n              className=\"view-dropdown\"\n              show={toggled ? \"true\" : \"false\"}\n              isOpen={toggled}\n              toggle={() => setToggled(!toggled)}>\n              <DropdownToggle size=\"sm\" caret color=\"primary\">\n                <img className=\"group-actions-icon\" src=\"/automation-icon-disabled.png\"/>\n              </DropdownToggle>\n              <DropdownMenu>\n                <DropdownItem\n                  onClick={freezeGroup}\n                  key=\"\"\n                  size=\"sm\">\n                  Freeze Group\n                </DropdownItem>\n              </DropdownMenu>\n            </ButtonDropdown>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupActions);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {setParameterSliderDown} from \"actions/index.js\";\nimport TrackMeter from 'components/TrackMeter.js';\nimport ReactBootstrapSlider from 'react-bootstrap-slider';\nimport {connect} from 'react-redux';\n\nconst VolumeSlider = ({track, volume, setVolume, setParameterSliderDown}) => { \n    const onMouseUp = useCallback(() => {\n        setParameterSliderDown(undefined);\n        if (!track) {\n            return;\n        }\n        let parameter = track.volumeParameter;\n        if (parameter) {\n            parameter.automation.smoothen();\n            parameter.mixAutomation.smoothen();\n        }\n    }, [track]);\n\n    const onChangeVolume = useCallback((val) => {\n        let vol = getVolumeFromRatio(val);\n        setVolume(vol);\n    }, [setVolume, track]);\n\n    return (\n        <div\n          onMouseDown={() => setParameterSliderDown(track && track.volumeParameter)}\n          onMouseUp={onMouseUp} className=\"mix-volume-slider\">\n          <ReactBootstrapSlider\n            handle=\"square\"\n            value={Math.pow(getVolumeRatio(volume), 2)}\n            change={(e) => onChangeVolume(e.target.value)}\n            step={0.01}\n            max={1}\n            min={0}\n            orientation=\"vertical\"\n            reversed={true}\n          /> \n        {track ? <TrackMeter meter={track.trackMeter}/> : ''}\n        </div>);\n}\n\nfunction getVolumeFromRatio(ratio, min=-60, max=2, width) {\n    let fullRatio = Math.pow(ratio, 0.5);\n    return min + (max - min) * fullRatio;\n}\n\nfunction getVolumeRatio(volume, min=-60, max=2) {\n    return (volume - min) / (max - min);\n}\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setParameterSliderDown: parameter => dispatch(setParameterSliderDown(parameter)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(VolumeSlider);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useEffects} from './useEffects.js';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport OutputChannelChooser from '../OutputChannelChooser.js';\nimport GroupActions from './GroupActions.js';\nimport Colors from 'components/Colors.js';\nimport VolumeSlider from './VolumeSlider.js';\nimport {setGroupCollapsed} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nconst colors = new Colors();\n\nconst GroupVolumeControl = ({\n    group,\n    volume,\n    isCollapsed,\n    setGroupCollapsed,\n    selectedTrack,\n    selectedGroup,\n    selectedEffect\n}) => { \n    let {groupNumber} = group;\n\n    const {onDeleteEffect, effects} = useEffects({trackOrGroup: group});\n    const color = colors.getColorForTrack(group.tracks[0]);\n    const setVolume = useCallback(v => {\n        group.setVolume(v);\n    }, [group]);\n\n    let style = {\n    };\n    let infoStyle = {};\n    let nameStyle ={};\n\n    if (selectedGroup === group.groupNumber) {\n        infoStyle.backgroundColor = color;\n        infoStyle.color = 'black';\n        style.borderStyle = \"solid\";\n        style.borderColor = color;\n    } else {\n        style.borderColor = color;\n        style.backgroundColor = 'unset';\n        style.backgroundImage = 'unset';\n        style.borderStyle = \"solid\";\n        infoStyle.color = \"white\";\n    }\n\n    let className = \"group-volume-control\"\n    if (selectedEffect) {\n        className += \" showing\";\n    }\n\n    return (\n        <div\n          style={style}\n          className={className}>\n          <div style={infoStyle} className=\"group-info\">\n            <div className=\"group-name\">\n              Group {groupNumber + 1}\n            </div>\n            <div\n              onClick={() => setGroupCollapsed(!isCollapsed)}\n              className=\"collapse-toggle\">\n              {isCollapsed ? <div className=\"arrow-down\"/> : <div className=\"arrow-right\"/>}\n            </div>\n          </div>\n          {selectedEffect ?\n           <EffectComponent\n             onDeleteEffect={onDeleteEffect}\n             sequencerEngine={group.sequencerEngine}\n             group={group}\n             compact={true}\n             effect={selectedEffect}\n                              send={undefined}/>  : \n           <VolumeSlider volume={volume} setVolume={setVolume}/>}\n          <GroupActions group={group}/>\n          {!group.sequencerEngine.channelMixer.stereoConnected ? \n           <OutputChannelChooser channel={group}/>\n           : ''}\n          <TrackEffects effects={effects} track={group}/>\n\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      volume: state.tracks.groupVolumes[props.group.groupNumber],\n      isCollapsed: state.mix.groupCollapsed[props.group.subSequence.id] &&\n          state.mix.groupCollapsed[props.group.subSequence.id][props.group.groupNumber],\n      selectedTrack: state.mix.selectedTrack,\n      selectedGroup: state.mix.selectedGroup,\n      selectedEffect: props.group!== undefined && state.mix.selectedTrackEffects[props.group.subSequence.id] &&\n          state.mix.selectedTrackEffects[props.group.subSequence.id][props.group.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setGroupCollapsed: (collapsed) => dispatch(setGroupCollapsed(\n          props.group.subSequence.id,\n          props.group.groupNumber,\n          collapsed)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(GroupVolumeControl);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {Knob, Arc, Pointer, Value} from 'components/rc-knob/index.js';\nimport {connect} from 'react-redux';\n\nconst PanKnob = ({track, panning, scrollContainer}) => { \n    const onChange = useCallback((v) => {\n        document.activeElement.blur();\n        track.setPanning(v);\n    }, [track]);\n\n    return (\n        <div className=\"pan-knob\">\n          <Knob \n            scrollContainer={scrollContainer}\n            size={30}  \n            angleOffset={220} \n            angleRange={280}\n            value={panning}\n            initialValue={panning}\n            step={0.01}\n            min={-1}\n            max={1}\n            onChange={onChange}\n          >\n            <Arc \n              arcWidth={2}\n              color={\"#6c757a\"}\n              background=\"#6c757a\"\n            />\n            <Pointer \n              width={2} \n              height={10}\n              radius={4}\n              type=\"rect\"\n              color={\"white\"}\n            />\n          </Knob>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      panning: state.tracks.trackPannings[props.track.id] || 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PanKnob);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport PanKnob from './PanKnob.js';\nimport ParameterKnob from 'components/knobs/ParameterKnob.js';\nimport TrackOutputType from \"components/track/TrackOutputType.js\";\nimport {connect} from 'react-redux';\n\nconst names = ['A', 'B', 'C', 'D', 'E'];\n\nconst TrackControls = ({track, isSelected}) => { \n    const scrollContainer = useRef(undefined);\n    useEffect(() => {\n        let elem = document.getElementById(\"mix-scroll\");\n        scrollContainer.current = elem;\n    }, []);\n\n    const onClickNext = useCallback(() => {\n    }, []);\n\n    const onClickPrevious = useCallback(() => {\n    }, []);\n\n\n    return (\n        <div className=\"track-controls\">\n          {scrollContainer ? <PanKnob scrollContainer={scrollContainer} track={track}/> : ''}\n          <div className=\"sends-label\">\n            Sends\n          </div>\n          <div className=\"send-knobs\">\n            {track.sendNodeVolumeParameters.map(\n                (send, i) =>\n                    <div style={{marginTop: i % 2 === 1 ? 10 : 0}} className=\"send-knob\">\n                {scrollContainer ?\n                 <ParameterKnob\n                   sequencerEngine={track.sequencerEngine}\n                   scrollContainer={scrollContainer} min={-40} parameter={send}/>\n                 : ''}\n                      <div className=\"send-name\">\n                        {names[i]}\n                      </div>\n                    </div>)}\n          </div>\n          <TrackOutputType className=\"mix-output-type\" track={track}/>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackControls);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport MidiEffectComponent from 'components/effects/MidiEffectComponent.js';\nimport EffectComponent from 'components/effects/EffectComponent.js';\nimport {useEffects} from './useEffects.js';\nimport TrackEffects from \"components/mix/mix2/TrackEffects.js\";\nimport TriggerMeter from 'components/v2/TriggerMeter.js';\nimport GroupTracker from './GroupTracker.js';\nimport Tracker from './Tracker.js';\nimport {moveTrackToGroup} from './moveTrackToGroup.js';\nimport TrackControls from './TrackControls.js';\nimport Colors from 'components/Colors.js';\nimport VolumeSlider from './VolumeSlider.js';\nimport MultiFreezeThumbnails from 'components/freeze/MultiFreezeThumbnails.js';\nimport {connect} from 'react-redux';\nimport {\n    setSelectedGroup,\n    setMixTrackDragging,\n} from 'actions/index.js';\nimport {MULTI_FREEZE} from 'constants/track-types.js';\nimport {MULTI_SYNTH} from 'constants/instrument-types.js';\nimport {getTrackShortName} from 'utils/getTrackShortName.js';\n\nconst colors = new Colors();\n\nconst Track = ({\n    track,\n    group,\n    volume,\n    muted,\n    isAlone,\n    isSelected,\n    setSelectedGroup,\n    setMixTrackDragging,\n    trackDragging,\n    selectedEffect,\n    selectedMidiEffect\n}) => { \n    let thumbnail = track.sample && track.sample.getThumbnail();\n    let color = colors.getColorForTrack(track);\n    let style = {\n        backgroundColor: color\n    };\n\n    if (thumbnail) {\n        style.backgroundImage = 'url(' + thumbnail + ')';\n    }\n\n    const {onDeleteEffect, effects} = useEffects({trackOrGroup: track});\n\n    let className = isAlone ? \"group-track alone\" : \"group-track\";\n\n    let trackStyle = {};\n\n    if (isSelected) {\n        className += \" selected\";\n        trackStyle.boxShadow = \"0px 0px 2px 2px \" + color;\n    }\n\n    let thumbnailClass = \"track-thumbnail\";\n    if (muted) {\n        thumbnailClass += \" muted\";\n    }\n\n    const toggleMute = useCallback(() => {\n        track.mute(!muted);\n    }, [muted, track]);\n\n    const selectTrack = useCallback((e) => {\n        e.stopPropagation();\n        setSelectedGroup(undefined);\n        track.sequencerEngine.selectTrack(track.trackNumber);\n    }, [track]);\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation();\n        if (track !== trackDragging) {\n            moveTrackToGroup(trackDragging, track.group);\n        }\n    }, [track, trackDragging]);\n\n    let innerText = getTrackShortName(track);\n    if (selectedEffect || selectedMidiEffect) {\n        className += \" showing-effects\";\n    }\n    return (\n        <div\n          onDrop={onDrop}\n          draggable={true}\n          onDragStart={() => setMixTrackDragging(track)}\n          style={trackStyle}\n          onDragOver={(e) => e.preventDefault()}\n          onMouseDown={selectTrack}\n          className={className}>\n          <div\n            style={isSelected ? {backgroundColor: color} : {}}\n            className=\"track-info\">\n            {track.trackNumber + 1} {truncateName(track.presetName || track.getName() || \"Track\")}\n          </div>\n          {selectedEffect ?\n           <EffectComponent\n             sequencerEngine={track.sequencerEngine}\n             onDeleteEffect={onDeleteEffect}\n             track={track}\n             compact={true}\n             effect={selectedEffect}\n             send={undefined}/>  : \n           selectedMidiEffect ?\n           <MidiEffectComponent\n             sequencerEngine={track.sequencerEngine}\n             effect={selectedMidiEffect}\n             track={track}\n             compact={true}\n           /> :\n           <div>\n             <VolumeSlider track={track} volume={volume} setVolume={(v) => track.setVolume(v)}/>\n             <div\n               onClick={toggleMute}\n               style={style} className={thumbnailClass}>\n               {thumbnail === undefined ? innerText : \"\"}\n             </div>\n             <TriggerMeter color={color} track={track}/>\n             <TrackControls isSelected={isSelected} track={track}/>\n           </div>\n          }\n          <TrackEffects effects={effects} track={track}/>\n        </div>\n    );\n          /*{isAlone ? <GroupTracker group={group}/> : ''}*/\n}\n\nconst truncateName = name => {\n    if (name === undefined) {\n        return '';\n    }\n\n    if (name.length > 30) {\n        name = name.slice(0, 30) + '...';\n    }\n    return name;\n};\n\nconst mapStateToProps = (state, props) => {\n    let track = props.track;\n    if (track && track.tracks && track.tracks[0]) {\n        track = track.tracks[0].track;\n    }\n    \n    let subId = track && track.subSequence.id;\n    return {\n        id: track === undefined ? 0 :\n            track.sample !== undefined && track.sample.getId() !== undefined ?\n            track.sample.getId() : track.presetName || track.getName(),\n        volume: props.track.volumeParameter.get(),\n        muted: state.tracks.trackMutes[props.track.trackNumber],\n        isSelected: state.mix.selectedTrack === props.track.trackNumber &&\n            state.mix.selectedGroup === undefined,\n        trackDragging: state.mix.trackDragging,\n        selectedEffect: track !== undefined && state.mix.selectedTrackEffects[subId] &&\n            state.mix.selectedTrackEffects[subId][track.id],\n        selectedMidiEffect: track !== undefined && state.mix.selectedTrackMidiEffects[subId] &&\n            state.mix.selectedTrackMidiEffects[subId][track.id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedGroup: (g) => dispatch(setSelectedGroup(g)),\n      setMixTrackDragging: (t) => dispatch(setMixTrackDragging(t))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Track);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport GroupTracker from './GroupTracker.js';\nimport {moveTrackToGroup} from './moveTrackToGroup.js';\nimport GroupVolumeControl from './GroupVolumeControl.js';\nimport {connect} from 'react-redux';\nimport Colors from 'components/Colors.js';\nimport Track from './Track.js';\nimport {setSelectedGroup} from 'actions/index.js';\n\nconst colors = new Colors();\n\nconst Group = ({\n    group,\n    isCollapsed,\n    setSelectedGroup,\n    isSelectedGroup,\n    trackDragging,\n    groupTracks\n}) => {\n    let tracks = group.tracks;\n    let groupClassName = \"group-container\";\n    const color = colors.getColorForTrack(group.tracks[0]);\n    let style = {\n        backgroundColor: color,\n    };\n\n    let fullStyle = {};\n\n    if (isSelectedGroup) {\n        groupClassName += \" selected\";\n        fullStyle.boxShadow = \"0px 0px 2px 2px \" + color;\n    }\n\n    const onDrop = useCallback((e) => {\n        e.stopPropagation();\n        if (trackDragging) {\n            moveTrackToGroup(trackDragging, group);\n        }\n    }, [trackDragging, group]);\n\n    const onMouseDown = useCallback(() => {\n        setSelectedGroup(group.groupNumber);\n    }, [group, setSelectedGroup]);\n\n    return (\n        <div\n          onDrop={onDrop}\n          onMouseDown={onMouseDown}\n          style={fullStyle}\n          className={groupClassName}>\n          <div style={style} className=\"group-top\"></div>\n          <div className=\"group-inner\">\n            <GroupVolumeControl group={group}/>\n            <div className=\"tracks-and-tracker\">\n              <div className=\"group-tracks\">\n                {isCollapsed ?\n                \"\" : \n                 tracks.map(track => <Track track={track}/>)}\n              </div>\n            </div>\n          </div>\n        </div>);\n    // { isCollapsed ? \"\" : <GroupTracker group={group}/>}\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      isCollapsed: state.mix.groupCollapsed[props.group.subSequence.id] &&\n          state.mix.groupCollapsed[props.group.subSequence.id][props.group.groupNumber],\n      isSelectedGroup: state.mix.selectedGroup === props.group.groupNumber,\n      trackDragging: state.mix.trackDragging,\n      groupTracks: state.tracks.groupTracks[props.group.id],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSelectedGroup: (g) => dispatch(setSelectedGroup(g))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Group);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport Group from './Group.js';\nimport Track from './Track.js';\nimport {connect} from 'react-redux';\nimport '../../../Mix2.scss';\n\nconst NewGroupsComponent = ({sequencerEngine, currentSubSequence}) => { \n    let groups = sequencerEngine.groups.groups;\n    return (\n        <div className=\"groups-component\">\n          {groups.map(\n              x =>\n              <Group key={x.id} group={x}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      ... state.tracks.groupTracks,\n      currentSubSequence: state.sequencer.currentSubSequence[props.sequencerEngine.engineId],\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(NewGroupsComponent);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport RecordInfo from \"components/upload/RecordInfo.js\";\nimport {connect} from 'react-redux';\nimport Discogs from \"discogs/Discogs.js\";\nconst discogs = new Discogs();\n\nconst SourceFinder = ({sample, setIsSourcing, guildId}) => { \n    let [records, setRecords] = useState([]);\n    useEffect(() => {\n        discogs.searchRecords(sample.name.replace(\".wav\", \"\").replace(\".flac\", \"\"))\n            .then((r) => {\n                setRecords(r);\n            });\n    }, [sample, setRecords, setIsSourcing]);\n\n    const save = useCallback(() => {\n        sample.saveSample(guildId);\n        setIsSourcing(false);\n    }, [sample, setIsSourcing, guildId]);\n\n    return (\n        <div className=\"source-finder\">\n          {records.length > 0 ? \n           <RecordInfo showTags={false} sample={sample} discogs={discogs} records={records}/> :\n           \"No records found\"}\n          <div className=\"btns\">\n            {records.length > 0 ? \n            <div onClick={save} className=\"save-btn\">\n              Save Changes\n            </div> : ''}\n            <div className=\"cancel-btn\" onClick={() => setIsSourcing(false)}>\n              Cancel\n            </div>\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceFinder);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {SOUND_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {connect} from 'react-redux';\n\nconst Rating = ({content, color, loadedRating}) => { \n    const [rating, setRating] = useState(loadedRating);\n    let list = [0, 1, 2, 3, 4];\n\n    const onClick = useCallback((r) => {\n        setRating(r);\n        ethereum.xanadu.rateSound(content, r, SOUND_RATED);\n    }, [setRating, content]);\n\n    let style = {\n\n    };\n    if (rating === 0) {\n        style.opacity = 0.2;\n    }\n    return (\n        <div style={style} className=\"rating\">\n          {list.map(\n              x =>\n                  <Star\n                    color={color}\n                    onClick={onClick}\n                    number={x}\n                    rating={rating}/>)}\n       </div>\n    );\n}\n\nconst Star = ({number, rating, onClick, color}) => {\n\n    let className = \"star\";\n    if (number <= rating) {\n        className += \" starred\";\n    }\n\n    let style = {\n        color: color\n    };\n\n    return (\n        <div\n          style={style}\n          onClick={() => onClick(number)}\n          className={className}>\n          <span>&#9734;</span>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Rating);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport SourceFinder from './SourceFinder.js';\nimport {trim} from \"utils/trim.js\"\nimport ContentDropdown from \"components/dropdowns/ContentDropdown.js\"\nimport ConditionedCheckmark from \"components/ConditionedCheckmark.js\";\nimport {\n    SOUND_RATED,\n    PRESET_RATED} from 'decentralized/xanadu/LinkTypes.js';\nimport {useFavorites} from \"components/hooks/useFavorites.js\"\nimport TagsInfo from \"components/installation/TagsInfo.js\";\nimport {usePacks} from './usePacks.js';\nimport {\n    setCreatingNewPack\n} from 'actions/index.js';\nimport {getPacks} from 'packs/packs.js';\nimport {useScrollTo} from './useScrollTo.js';\nimport ethereum from 'decentralized/ethereum.js';\nimport {FILTER_BY_TAG, ADD_SOUND_BUTTON, SELECTOR_WAVEFORM} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {sleep} from 'utils/sleep.js';\nimport {getProjectsUsed} from 'utils/getProjectsUsed.js';\nimport Rating from './Rating.js';\nimport Tone from 'tone';\nimport AudioUnit from 'engine/audio.js';\nimport Waveform from 'components/Waveform.js';\nimport SampleUsed from 'components/installation/SampleUsed.js';\nimport Sample from 'repos/Sample.js';\nimport Colors from 'components/Colors.js';\nimport {connect} from 'react-redux';\nimport {\n    SEQUENCES\n    } from 'constants/sidebar-view-modes.js';\nimport {\n    setCurrentSoundInList,\n    setExpandedProject,\n    setSidebarViewMode,\n    setSampleDragging,\n    setQuickAddSearchText\n} from 'actions/index.js';\n\nconst colors = new Colors();\nconst HOVER_TO_LOAD_TIME = 750;\n\nconst SampleOption = ({\n    isCurrent,\n    isNext,\n    setCurrentSoundInList,\n    setPackToSearch,\n    number,\n    setExpandedProject,\n    setSidebarViewMode,\n    result,\n    scrollRef,\n    sequencerEngine,\n    setSampleDragging,\n    source,\n    setSearchText,\n    autoLoad=false,\n    setCreatingNewPack\n}) => { \n    let hovered = useRef(false);\n    let playOnLoad = useRef(false);\n    let added = useRef(false);\n    let loading = useRef(false);\n    let ref = useRef(undefined);\n    let [showProjects, setShowProjects] = useState(undefined);\n    let [loadedAudio, setLoadedAudio] = useState(undefined);\n    let stopped = useRef(false);\n    let disposed = useRef(false);\n    let [isSourcing, setIsSourcing] = useState(false);\n    let [dropdownPos, setDropdownPos] = useState(undefined);\n    let [isLoading, setIsLoading] = useState(false);\n    let [sample, setSample] = useState(undefined);\n    let [showSample, setShowSample] = useState(false);\n    let [projectsUsed, setProjectsUsed] = useState([]);\n    let [selectedSlice, setSelectedSlice] = useState(undefined);\n    let [isTagging, setIsTagging] = useState(undefined);\n    let {toggleFavorite, isFavorited} = useFavorites({type: SOUND_RATED, contentHash: sample && sample.getId()});\n    let [guildName, setGuildName] = useState(undefined);\n\n    useEffect(() => {\n        if (result.guildId) {\n            ethereum.guilds.getGuildName(result.guildId)\n                .then(\n                    setGuildName);\n        }\n    }, [result]);\n\n    let audioUnit = useRef(undefined);\n    const isResample = sample && sample.tags && sample.tags.indexOf(\"Resampled\") > -1;\n    let id =  isResample && projectsUsed.length > 0 ?\n        projectsUsed[projectsUsed.length - 1].newSequence :\n        source;\n    let color = id && colors.getColorForHash(id);\n    let style = {\n        borderColor: color,\n        backgroundColor: color,\n    };\n\n    useEffect(() => {\n        if (isNext) {\n            loadSample();\n        }\n    }, [isNext]);\n\n    useEffect(() => {\n        if (isCurrent) {\n            stopped.current = false;\n            if (loadedAudio) {\n                audioUnit.current.playSound(0);\n            } else {\n                setIsLoading(true);\n                if (loading.current) {\n                    playOnLoad.current = true;\n                } else {\n                    loadSample(true);\n                }\n            }\n        } else {\n            stopped.current = true;\n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            } \n            setIsTagging(false);\n        }\n    }, [isCurrent, setLoadedAudio, sample, setIsTagging]);\n\n    useScrollTo({ref, scrollRef, isCurrent});\n\n    useEffect(() => {\n        if (isCurrent) {\n            window.addEventListener(\"keydown\", onKeyDown);\n        } else {\n            window.removeEventListener(\"keydown\", onKeyDown);\n        }\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [isTagging, setIsTagging, isCurrent, sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key === 'Enter' && !added.current) {\n            if (isTagging) { return; }\n            added.current=true;\n            let selectedTrack = sequencerEngine.getSelectedTrack();\n            if (selectedTrack && (e.ctrlKey || e.metaKey)) {\n                selectedTrack.useNewSound(sample);\n            } else {\n                addSample(true);\n            }\n           \n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            }\n        } else if (e.key === 'Backspace') {\n            if (isTagging) { return; }\n            if (audioUnit.current) {\n                audioUnit.current.stopSound();\n            }\n        } else if (e.key === 't' && (e.ctrlKey || e.metaKey)) {\n            setIsTagging(!isTagging);\n        } else if (e.key === 'f' && (e.ctrlKey || e.metaKey)) {\n            toggleFavorite(e);\n        }\n    }, [isTagging, setIsTagging, isCurrent, sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    useEffect(() => {\n        if (autoLoad && sample) {\n            loadSample();\n            setShowSample(true);\n        }\n    }, [sample, autoLoad, setLoadedAudio, setShowSample]);\n\n    useEffect(() => {\n        let sample = new Sample(result.ipfsHash);\n        sample.load(false)\n            .then(() => setSample(sample));\n    }, [result, setSample, audioUnit]);\n\n    useEffect(() => {\n        getProjectsUsed(result.ipfsHash)\n            .then(setProjectsUsed);\n    }, [setProjectsUsed, result]);\n\n    useEffect(() => {\n        return () => {\n            if (audioUnit.current) {\n                audioUnit.current.dispose();\n            }\n            if (sample) {\n                sample.dispose();\n            }\n            disposed.current = true;\n        };\n    }, []);\n\n    const loadProject = (project) => {\n        setExpandedProject({... project, edits: []});\n        setSidebarViewMode(SEQUENCES);\n    };\n\n    const addSample = useCallback((force, e) => {\n        if (e && e.ctrlKey) {\n            return;\n        }\n        if (force) {\n            sequencerEngine.addSound(sample, undefined, selectedSlice && [selectedSlice]);\n        } else {\n            setShowSample(true);\n            if (!loading.current) {\n                loadSample(true);\n            } else if (audioUnit.current) {\n                audioUnit.current.playSound(0, 2);\n            }\n        }\n    }, [sample, showSample, sequencerEngine, selectedSlice, setShowSample]);\n\n    const loadSample = useCallback((play=false) => {\n        if (sample && !sample.audioBuffer && !loading.current) {\n            loading.current = true;\n            sample.fetchAudio()\n                .then(x => {\n                    if (disposed.current) { return; }\n                    let _audioUnit = new AudioUnit(Tone.context);\n                    loading.current = false;\n                    _audioUnit.setBuffer(x.audioBuffer);\n                    audioUnit.current = _audioUnit;\n                    if (play || playOnLoad.current) {\n                        if (!stopped.current) {\n                            _audioUnit.playSound(0);\n                        }\n                    }\n                    setLoadedAudio(true);\n                });\n        } \n   }, [setLoadedAudio, sample]);\n\n    const onHover = useCallback(async () => {\n        hovered.current = true;\n        await sleep(HOVER_TO_LOAD_TIME);\n        if (!hovered.current) {\n            return;\n        }\n        loadSample();\n    }, [sample, showSample, setLoadedAudio]);\n\n    const favoriteSample = useCallback(() => {\n    }, [sample]);\n\n    const onContextMenu = useCallback((e) => {\n        e.stopPropagation();\n        let x = e.clientX - ref.current.getBoundingClientRect().left;\n        let y = e.clientY - ref.current.getBoundingClientRect().top;\n        if (x > 160) {\n            x -= 200;\n        }\n        setDropdownPos({x,y});\n        e.preventDefault();\n    }, [setDropdownPos]);\n\n\n    const onMouseDown = useCallback((e) => {\n       setCurrentSoundInList(number);\n    }, [number]);\n\n    let className = \"sample-option\";\n    if (isCurrent) {\n        className += \" current\";\n    }\n\n    return (\n        <div\n          ref={ref}\n          onContextMenu={onContextMenu}\n          onMouseDown={onMouseDown}\n          onMouseOver={onHover}\n          draggable={true}\n          onDragOver={(e) => e.preventDefault()}\n          onDragStart={(e) => {\n              if (audioUnit.current) {\n                  audioUnit.current.stopSound();\n              }\n              stopped.current = true;\n              \n              setSampleDragging(sample);\n          }}\n          onMouseLeave={() => hovered.current = false}\n          className={className}>\n         <ContentDropdown\n            dropdownPos={dropdownPos}\n            setDropdownPos={setDropdownPos}\n            setIsTagging={setIsTagging}\n           setIsSourcing={setIsSourcing}\n            isUnsourced={true}\n            content={sample}\n            setPackToSearch={setPackToSearch}\n            contentHash={sample && sample.getId()}/>\n         <div className=\"sample-option-inner\">\n            <div\n              className=\"wave-and-name\">\n              <div className=\"name-and-tags\">\n                {isFavorited ? <div className=\"heart favorited\"/> : \"\"}\n                <div\n                  onClick={(e) => addSample(undefined, e)}\n                  className=\"sample-name\">{truncate(trim(result.title))}</div>\n                {guildName ? <div className=\"guild-name\">{guildName}</div> : ''}\n                 <PulseLoader\n                   sizeUnit={\"px\"}\n                   style={{margin: 0, lineHeight: '12px'}}\n                   size={6}\n                   color={'white'}\n                   loading={loading.current}\n                 />\n                <div className=\"pack-indicators\">\n                  {sample && sample.packs && sample.packs.map(\n                      pack => <div style={{backgroundColor: colors.getColorForHash(pack)}} className=\"pack-thumb\"/>)}\n                </div>\n                {projectsUsed[0] ?\n                 <div\n                   onClick={() => loadProject(projectsUsed[0])}\n                   className=\"projects-used\">\n                   <span>\n                     {projectsUsed.length} \n                   </span>\n                 </div> :\n                 \"\"}\n                <div style={!isResample || projectsUsed.length === 0 ? {maxWidth: 200} : {}} className=\"sample-tags\">\n                  {!isTagging && sample && sample.tags && sample.tags\n                   .map(\n                      tag =>\n                          <Documented key={tag} element={FILTER_BY_TAG} arg={tag}>\n                            <div\n                              style={{\n                                  borderColor: colors.getColorForHash(tag),\n                                  color: colors.getColorForHash(tag),\n                              }}\n                              onClick={(e) => {\n                                  e.stopPropagation();\n                                  setSearchText(tag);\n                              }}\n                              className=\"tag-option\">\n                              {truncate(tag, 20)}\n                            </div>\n                          </Documented>\n                  )}\n                  {sample && sample.year ? <div className=\"sample-year\">{sample.year}</div> : ''}\n                </div>\n              </div>\n              {showSample ?\n               <div className=\"waveform-and-rating\">\n                 {loadedAudio ?\n                  <Documented element={SELECTOR_WAVEFORM}>\n                    <Waveform\n                      selections={[]} \n                      onChooseSlice={setSelectedSlice}\n                      buffer={audioUnit.current.buffer}\n                      height={40}\n                      width={340}\n                      audioUnit={audioUnit.current}\n                      sample={sample}\n                      id={sample.ipfsHash}\n                      sequencerEngine={sequencerEngine}\n                    />\n                  </Documented>\n                  : ''}\n              </div> : ''}\n              {isTagging ? <TagsInfo  content={sample}/> : ''}\n              {isSourcing ? <SourceFinder setIsSourcing={setIsSourcing} sample={sample} guildId={result.guildId} /> : ''}\n            </div>\n          </div>\n        </div>\n    );\n};\n\nconst truncate = (name, len=30) => name.length > len ? name.slice(0, len - 8) + '...' + name.slice(name.length - 8) : name;\n\nconst mapDispatchToProps = (dispatch) => ({\n    setSampleDragging: sample => dispatch(setSampleDragging(sample)),\n    setSearchText: x => dispatch(setQuickAddSearchText(x)),\n    setSidebarViewMode: m => dispatch(setSidebarViewMode(m)),\n    setExpandedProject: m => dispatch(setExpandedProject(m)),\n    setCurrentSoundInList: m => dispatch(setCurrentSoundInList(m)),\n    setCreatingNewPack: m => dispatch(setCreatingNewPack(m)),\n});\n\nexport default connect(null, mapDispatchToProps)(SampleOption);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Sample from 'repos/Sample.js';\nimport ipfs from 'decentralized/Ipfs.js';\nimport Colors from 'components/Colors.js';\nimport {\n    setShowingSoundList,\n    setCurrentSoundInList} from 'actions/index.js';\nimport SampleOption from './SampleOption.js';\nimport {useScroll} from './useScroll.js';\nimport {connect} from 'react-redux';\nconst colors = new Colors();\n\nconst SourceResults = ({\n    setCurrentSoundInList,\n    setShowingSoundList,\n    source,\n    resultsCounter=0,\n    sequencerEngine,\n    odd,\n    alone,\n    resultsSize,\n    i,\n    showPianoRoll,\n    scrollRef,\n    bottomHeight,\n    isPack,\n    packToSearch,\n    isUnsourced,\n    setSearchTerm,\n    currentSoundInList,\n    sourceToSearch,\n    loadEverything,\n    setPackToSearch,\n}) => { \n    let {coverArtHash, results, videoId, tag} = source;\n    let [samples, setSamples] = useState([]);\n    let [autoLoad, setAutoLoad] = useState(alone || loadEverything)\n    let ref = useRef(undefined);\n    let {size} = useScroll(ref, 9, alone, undefined, undefined, undefined, sourceToSearch);\n\n    useEffect(() => {\n    }, [size]);\n\n    useEffect(() => {\n        setShowingSoundList(true);\n        return () => {\n            setCurrentSoundInList(undefined);\n            setShowingSoundList(false);\n        }\n    }, []);\n\n    let style = {\n    };\n    if (!sourceToSearch && coverArtHash) {\n        style.backgroundImage = 'url(' + ipfs.getHashUrl(coverArtHash) + \")\";\n    } else if (!sourceToSearch && videoId) {\n        style.backgroundImage = 'url(' + 'https://img.youtube.com/vi/' + videoId + '/1.jpg)';\n    } else if (tag) {\n        /*\n        style.borderColor = colors.getColorForHash(tag);\n        style.borderStyle = \"solid\";\n        style.borderWidth = 1;\n        style.color = style.borderColor;\n        */\n        style.backgroundColor = colors.getColorForHash(tag);\n    }\n\n    let thumbClassName = \"source-results-thumb\";\n    if (tag) {\n        thumbClassName += \" unsourced\";\n    }\n\n    let className = \"source-results\";\n    if (odd) {\n        className += \" odd\";\n    }\n    if (alone) {\n        className += \" alone\";\n    }\n    /*\n    if (!alone && resultsSize === 0)  {\n        return (<div></div>);\n    }\n    */\n\n    let fullStyle = {\n    };\n    if (alone) {\n        fullStyle.height= window.innerHeight - 233\n    }\n    if(showPianoRoll) {\n        fullStyle.height -= bottomHeight - 130;\n    }\n    let releaseName = results[0].releaseName;\n    let artistName = results[0].artistName;\n\n    return (\n        <div style={fullStyle}\n             ref={ref}\n             className={className}>\n          <div\n            onClick={() => setAutoLoad(true)}\n            className={thumbClassName} style={style}>\n            <span>{tag}</span>\n          </div>\n          <div className=\"sample-options\">\n            {!sourceToSearch && releaseName ? <div className=\"release-name\">{artistName} - {releaseName}</div> : ''}\n            {results.slice(0, resultsSize !== undefined ? resultsSize : size).map(\n                (x,i) =>\n                    <SampleOption\n                      isUnsourced={isUnsourced}\n                      setPackToSearch={setPackToSearch}\n                      scrollRef={scrollRef}\n                      isCurrent={(!packToSearch || isPack) && resultsCounter + i === currentSoundInList}\n                      isNext={resultsCounter + i === currentSoundInList + 1}\n                      number={resultsCounter + i}\n                      setSearchTerm={setSearchTerm}\n                      autoLoad={autoLoad}\n                      source={coverArtHash || videoId || tag}\n                      sequencerEngine={sequencerEngine}\n                      key={i}\n                      result={x}/>)}\n          </div>\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      currentSoundInList: state.selector.currentSoundInList //state.selector.currentSoundInList >= props.resultsCounter &&\n          //state.selector.currentSoundInList < props.resultsCounter + props.resultsSize ?\n          //state.selector.currentSoundInList : undefined,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setCurrentSoundInList: m => dispatch(setCurrentSoundInList(m)),\n      setShowingSoundList: m => dispatch(setShowingSoundList(m))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceResults);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SourceResults from './SourceResults.js';\nimport UnsourcedFlow from \"components/installation/UnsourcedFlow.js\";\nimport {connect} from 'react-redux';\n\nconst SourceEditor = ({source, sequencerEngine}) => { \n    return (\n        <div>\n          <div className=\"unsourced-header\">\n            Edit Source Information\n          </div>\n          <UnsourcedFlow show={true} samples={source.results}/>\n          <SourceResults alone={true} sequencerEngine={sequencerEngine} source={source}/> \n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceEditor);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport {useScroll} from './useScroll.js';\nimport SourceResults from './SourceResults.js';\nimport {connect} from 'react-redux';\nimport {formatDate} from './formatDate.js';\n\nconst DayResults = ({setPackToSearch, day, sequencerEngine, showPianoRoll, bottomHeight, currentSoundInList}) => { \n    let {discogs, blockNumber, youtube, unsourced} = day;\n    let [date, setDate] = useState(undefined);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n    \n    let ref = useRef(undefined);\n\n    let {size} = useScroll(ref, (window.innerHeight / 770.0) * 30, true, undefined, undefined, undefined, undefined, currentSoundInList);\n\n    let unsourcedResults = [];\n    for (let tag in unsourced) {\n        unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n    }\n    let i=0;\n    let resultsCount = 0;\n    let list = [];\n    for (let coverArtHash in discogs) {\n        let resultsSize = size - resultsCount;\n        if (coverArtHash === undefined || coverArtHash === '') {\n        }\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  resultsCounter={resultsCount}\n                  setPackToSearch={setPackToSearch}\n                  scrollRef={ref}\n                  resultsSize={resultsSize}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: discogs[coverArtHash], coverArtHash}}\n                />);\n            resultsCount += Math.min(resultsSize, discogs[coverArtHash].length);\n        }\n    }\n    for (let videoId in youtube) {\n        let resultsSize = size - resultsCount;\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  scrollRef={ref}\n                  setPackToSearch={setPackToSearch}\n                  resultsCounter={resultsCount}\n                  resultsSize={resultsSize}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: youtube[videoId], videoId}}\n                />);\n            resultsCount += Math.min(resultsSize, youtube[videoId].length);\n        }\n    }\n\n    let resultsSize = size - resultsCount;\n    for (let tag in unsourced) {\n        let resultsSize = size - resultsCount;\n        if (resultsSize > 0) {\n            list.push(\n                <SourceResults\n                  odd={++i % 2 === 0}\n                  key={i}\n                  setPackToSearch={setPackToSearch}\n                  scrollRef={ref}\n                  resultsSize={resultsSize}\n                  isUnsourced={true}\n                  resultsCounter={resultsCount}\n                  sequencerEngine={sequencerEngine}\n                  source={{results: unsourced[tag], tag: tag}}/>);\n            resultsCount += Math.min(resultsSize, unsourced[tag].length);\n        }\n    }\n\n    let style = {\n        height: window.innerHeight - 222\n    };\n    return (\n        <div style={style} ref={ref} className=\"day-results\">\n          <div className=\"date\">\n            {list}\n          </div>\n        </div>);\n}\n\nconst addToList = (map) => {\n    let list = [];\n    for (let key in map) {\n    }\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      currentSoundInList: state.selector.currentSoundInList\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Colors from \"components/Colors.js\"\nimport SourceResults from './SourceResults.js';\nimport {connect} from 'react-redux';\nimport {useScroll} from './useScroll.js';\n\nconst colors = new Colors();\n\nconst has = (r) => Object.keys(r) > 0;\n\nconst count = (day) => {\n    let c = 0;\n    for (let source in day.discogs) {\n        c+= day.discogs[source].length;\n    }\n    for (let source in day.youtube) {\n        c+= day.youtube[source].length;\n    }\n    c+= day.unsourced.length;\n    return c;\n}\n\nconst ListResults = ({\n    showPianoRoll,\n    bottomHeight,\n    results,\n    isPack,\n    sequencerEngine,\n    searchTerm,\n    setSearchTerm,\n    sourceToSearch,\n    packToSearch,\n    setPackToSearch,\n    loadEverything,\n    scrollRef\n}) => { \n    let ref = useRef(undefined);\n    let list = [];\n    let {size} = useScroll(scrollRef, 30, true);\n    let i=0;\n    let resultsCount = 0;\n    let _results = [];\n    for (let day of results) {\n        let {discogs, date, youtube, unsourced} = day;\n        let unsourcedResults = [];\n        for (let tag in unsourced) {\n            unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n        }\n        \n        for (let coverArtHash in discogs) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      resultsCounter={resultsCount}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      loadEverything={loadEverything}\n                      scrollRef={scrollRef}\n                      sourceToSearch={sourceToSearch}\n                      odd={++i % 2 === 0}\n                      setPackToSearch={setPackToSearch}\n                      setSearchTerm={setSearchTerm}\n                      key={i}\n                      resultsSize={resultsSize}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: discogs[coverArtHash], coverArtHash}}\n                    />);\n                resultsCount += Math.min(resultsSize, discogs[coverArtHash].length);\n            }\n            _results = [... _results, ...discogs[coverArtHash]];\n        }\n        for (let videoId in youtube) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      odd={++i % 2 === 0}\n                      scrollRef={scrollRef}\n                      resultsCounter={resultsCount}\n                      setPackToSearch={setPackToSearch}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      loadEverything={loadEverything}\n                      key={i}\n                      sourceToSearch={sourceToSearch}\n                      resultsSize={resultsSize}\n                      setSearchTerm={setSearchTerm}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: youtube[videoId], videoId}}\n                    />);\n                resultsCount += Math.min(resultsSize, youtube[videoId].length);\n            }\n            _results = [... _results, ...youtube[videoId]];\n        }\n\n        for (let tag in unsourced) {\n            let resultsSize = size - resultsCount;\n            if (resultsSize > 0) {\n                list.push(\n                    <SourceResults\n                      odd={++i % 2 === 0}\n                      scrollRef={scrollRef}\n                      setPackToSearch={setPackToSearch}\n                      loadEverything={loadEverything}\n                      key={i}\n                      packToSearch={packToSearch}\n                      isPack={isPack}\n                      resultsCounter={resultsCount}\n                      setSearchTerm={setSearchTerm}\n                      resultsSize={resultsSize}\n                      sourceToSearch={sourceToSearch}\n                      sequencerEngine={sequencerEngine}\n                      source={{results: unsourced[tag], tag: tag}}/>\n                );\n                resultsCount += Math.min(resultsSize, unsourced[tag].length);\n            }\n            _results = [... _results, ...unsourced[tag]];\n        }\n    }\n\n    let releaseName = _results[0] && _results[0].releaseName;\n    let artistName = _results[0] && _results[0].artistName;\n\n    let className = \"list-results\";\n    if (isPack || (sourceToSearch && releaseName)) {\n        className += \" showing-source\";\n    }\n    return (\n        <div  ref={ref} className={className}>\n            {sourceToSearch && releaseName ? <div className=\"source-release-name\">{artistName} - {releaseName}</div> : ''}\n          {isPack ? <div className=\"source-release-name\">\n                            <div style={{backgroundColor: colors.getColorForHash(packToSearch.title)}} className=\"pack-thumb\"></div>\n                            {packToSearch.title}</div> : ''}\n          {list}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ListResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {GRID, LIST} from './constants.js';\nimport ListResults from './ListResults.js';\nimport UnknownProgressBar from 'components/progressbar/UnknownProgressBar.js';\nimport {useScroll} from './useScroll.js';\nimport Day from './Day.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {TAG, DAY} from './constants.js';\nimport {connect} from 'react-redux';\nimport {\n    setCurrentTagInList} from 'actions/index.js';\n    \nimport {formatDate} from './formatDate.js';\nlet id = 0;\n\nconst SIZE=50;\n\nconst SoundGrid = ({\n    children,\n    sequencerEngine,\n    onClickSource,\n    onClickDay,\n    searchTerm,\n    displayOption,\n    showPianoRoll,\n    setPackToSearch,\n    packToSearch,\n    bottomHeight,\n    guildId,\n    groupBy,\n    resultsElement,\n    setCurrentTagInList,\n    currentTagInList,\n    filterFavorites,\n    setSourceToSearch\n}) => { \n    let [results, setResults] = useState([]);\n    let [start, setStart] = useState(0);\n    let lastQuery = useRef('');\n    let [isLoading, setIsLoading] = useState(false);\n    let ref = useRef(undefined);\n    let pageSize = groupBy ? (window.innerHeight / 500.0) * 50 : 15;\n    let {size, scrollPosition} = useScroll(\n        ref,\n        searchTerm !== \"\" ? Math.round((window.innerHeight / 500.0) * 10) : Math.round(pageSize),\n        true,\n        searchTerm,\n        groupBy,\n        undefined,\n        currentTagInList);\n\n    useEffect(() => {\n        if (!resultsElement && ref.current) {\n            ref.current.scrollTo(0, scrollPosition.current);\n        }\n    }, [resultsElement]);\n\n    useEffect(() => {\n        let query = searchTerm+guildId+groupBy+start+filterFavorites;\n        if (query === lastQuery.current) {\n            return;\n        } \n        if (start === 0) {\n            setIsLoading(true);\n        }\n        lastQuery.current = query;\n\n        let pageSize = groupBy ? (window.innerHeight / 500.0) * 50 : 15;\n        getSoundResultsServer(\n            pageSize,\n            searchTerm, guildId, groupBy, start, filterFavorites)\n            .then(r => {\n                if (Math.floor(start) == 0) {\n                    setResults(r);\n                    setCurrentTagInList(0);\n                } else if (Math.floor(start) > 0 && r.length > 0) {\n                    setResults([... results, ...r]);\n                } else {\n                }\n                setIsLoading(false);\n            });\n    }, [setResults, sequencerEngine, setIsLoading, start, results, filterFavorites, searchTerm]);\n\n    useEffect(() => {\n        setStart(0);\n        setResults([]);\n    }, [guildId, groupBy, searchTerm, setStart, setResults]);\n\n    useEffect(() => {\n        let _size = pageSize;\n        setStart(Math.max(0, size - _size))\n    }, [size, setStart]);\n\n    let style = {\n        height: window.innerHeight - 223\n    };\n        if (showPianoRoll) {\n            style.height -= bottomHeight - 150;\n        }\n\n    let listResults = undefined;\n    if (displayOption === LIST) {\n        if (isLoading) {\n            return (<UnknownProgressBar text=\"Searching sounds\"/>);\n        };\n        listResults = (\n            <ListResults\n              setPackToSearch={setPackToSearch}\n              packToSearch={packToSearch}\n              scrollRef={ref}\n              searchTerm={searchTerm}\n              results={results}\n              sequencerEngine={sequencerEngine}/>);\n    }\n\n    return (\n        <div>\n          {resultsElement ? <div>\n                              {children}\n                              {resultsElement}\n                            </div>: ''}\n          <div style={style} ref={ref} id=\"sound-grid\" className={resultsElement ? \"hide sound-grid no-select\" : \"no-select sound-grid\"}>\n            {children}\n            {!isLoading && results.length === 0 ? <div className=\"no-results\">No Results Found</div> : ''}\n            {isLoading ?\n             <UnknownProgressBar text=\"Searching sounds\"/> :\n             listResults ? listResults : \n             results.slice(0, size).map(\n                 (dayResults, i) =>\n                     <Day\n                       key={\"day-\" + i}\n                       filterFavorites={filterFavorites}\n                       setPackToSearch={setPackToSearch}\n                       scrollRef={ref}\n                       number={i}\n                       isCurrent={!packToSearch && currentTagInList === i}\n                       onClickSource={onClickSource}\n                       searchTerm={searchTerm}\n                       setSourceToSearch={setSourceToSearch}\n                       groupBy={groupBy}\n                       onClickDay={onClickDay}\n                       results={dayResults}/>)}\n          </div>\n        </div>\n    );\n}\n\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      currentTagInList: state.selector.currentTagInList,\n      bottomHeight: state.arrangement.bottomHeight,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n        setCurrentTagInList: (s) => dispatch(setCurrentTagInList(s))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SoundGrid);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {TAG} from './constants.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {connect} from 'react-redux';\nimport ListResults from \"components/selector2/ListResults.js\";\n\nconst SourceToSearch = ({\n    showPianoRoll,\n    bottomHeight,\n    sourceToSearch,\n    setPackToSearch,\n    sequencerEngine,\n    guildId\n}) => { \n    let ref = useRef(undefined);\n    let [results, setResults] = useState([]);\n    useEffect(() => {\n        getSoundResultsServer(\n            50, \"\", guildId, TAG, 0, false, sourceToSearch)\n            .then((r) => {\n                if (r.length > 0) {\n                    setResults(r);\n                } else {\n                    // THERES A BUG IN BACKEND WHERE IT SOMETIMES RETURNS 0\n                    // NON_DETERMINISTICALLY (I NO, BAD!). BUT SEARCHING AGAINN\n                    // USUALLY FIXES IT\n                    setTimeout(() => {\n                        getSoundResultsServer(\n                            50,\n                            \"\", guildId, TAG, 0, false, sourceToSearch)\n                            .then(setResults);\n                    }, 500);\n                }\n            });\n    }, [sourceToSearch, setResults]);\n\n    let style = {\n        height: window.innerHeight - 263\n    };\n\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"source-to-search-results\">\n          <ListResults\n            setPackToSearch={setPackToSearch}\n            scrollRef={ref}\n            sourceToSearch={sourceToSearch}\n            size={1000}\n            searchTerm={\"\"}\n            results={results}\n            sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceToSearch);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {TAG} from './constants.js';\nimport {getSoundResultsServer} from './getSoundResults.js';\nimport {connect} from 'react-redux';\nimport ListResults from \"components/selector2/ListResults.js\";\n\nconst PackToSearch = ({\n    showPianoRoll,\n    bottomHeight,\n    packToSearch,\n    sequencerEngine,\n    setPackToSearch,\n    guildId\n}) => { \n    let ref = useRef(undefined);\n    let [results, setResults] = useState([]);\n    useEffect(() => {\n        getSoundResultsServer(\n            50, \"\", guildId, TAG, 0, false, undefined, undefined, packToSearch)\n            .then((r) => {\n                if (r.length > 0) {\n                    setResults(r);\n                } else {\n                    // THERES A BUG IN BACKEND WHERE IT SOMETIMES RETURNS 0\n                    // NON_DETERMINISTICALLY (I NO, BAD!). BUT SEARCHING AGAINN\n                    // USUALLY FIXES IT\n                    setTimeout(() => {\n                        getSoundResultsServer(\n                            50,\n                            \"\", guildId, TAG, 0, false, undefined, undefined, packToSearch)\n                            .then(setResults);\n                    }, 500);\n                }\n            });\n    }, [packToSearch, setResults]);\n    let style = {\n        height: window.innerHeight - 263\n    };\n\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"source-to-search-results\">\n          <ListResults\n            setPackToSearch={setPackToSearch}\n            scrollRef={ref}\n            packToSearch={packToSearch}\n            isPack={true}\n            size={1000}\n            searchTerm={\"\"}\n            results={results}\n            sequencerEngine={sequencerEngine}/>\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PackToSearch);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setQuickAddSearchText,\n} from 'actions/index.js';\nimport SourceEditor from './SourceEditor.js';\nimport SampleSearch from './SampleSearch.js';\nimport SourceResults from './SourceResults.js';\nimport DayResults from './DayResults.js';\nimport SoundGrid from './SoundGrid.js';\nimport {getBlockMonths} from 'utils/getBlockMonths.js';\nimport Months from 'components/explore/work/Months.js';\nimport {connect} from 'react-redux';\nimport '../../NewSelector.scss';\nimport '../../Selector.scss';\nimport {GRID, LIST, DAY, TAG} from './constants.js';\nimport SourceToSearch from \"components/selector2/SourceToSearch.js\";\nimport PackToSearch from \"components/selector2/PackToSearch.js\";\n\nconst Selector = ({defaultGroupBy=TAG, sequencerEngine, guildId, quickAddSearchText, setSearchText}) => { \n    let [months, setMonths] = useState({});\n    let [currentMonth, setCurrentMonth] = useState(new Date().getMonth());\n    let [day, setDay] = useState(undefined);\n    let [displayOption, setDisplayOption] = useState(GRID);\n    let [groupBy, setGroupBy] = useState(defaultGroupBy);\n    let [source, setSource] = useState(undefined);\n    let [sourceToSearch, setSourceToSearch] = useState(undefined);\n    let [packToSearch, setPackToSearch] = useState(undefined);\n    let [searchTerm, setSearchTerm] = useState(quickAddSearchText);\n    let [filterFavorites, setFilterFavorites] = useState(false);\n    let [sourceToEdit, setSourceToEdit] = useState(undefined);\n\n    useEffect(() => {\n        window.addEventListener(\"keydown\", onKeyDown);\n        return () => window.removeEventListener(\"keydown\", onKeyDown);\n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setDisplayOption, displayOption]);\n\n    const onKeyDown = useCallback((e) => {\n        if (e.key==='ArrowLeft') {\n            goBack();\n        } else if (e.key === \"Tab\") {\n            /*\n            setDisplayOption(\n                displayOption === GRID ?\n                    LIST : GRID);\n                    */\n        }\n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setDisplayOption, displayOption]);\n   \n    useEffect(() => {\n        setSourceToSearch(undefined);\n        setPackToSearch(undefined);\n    }, [searchTerm, setGroupBy, setSourceToSearch, setPackToSearch]);\n\n    useEffect(() => {\n        if (searchTerm === \"\" && !filterFavorites) {\n            setDisplayOption(GRID);\n        }\n    }, [searchTerm, filterFavorites, setDisplayOption]);\n\n\n    const onClickSource = useCallback((e, source) => {\n        if (e.metaKey) {\n            setDay(undefined);\n            setSourceToEdit(source);\n            return;\n        }\n        setDay(undefined);\n        setSource(source);\n    }, [setDay, setSource]);\n\n    const onClickDay = useCallback((day, tag) => {\n        setSource(undefined);\n        setDay(day);\n    }, [setSearchTerm, setSource, setDay, groupBy]);\n\n    let results = undefined;\n    let backButton = '';\n    let hasBack = false;\n\n    const goBack = useCallback(() => {\n        setDay(undefined);\n        setSource(undefined);\n        setSourceToEdit(undefined);\n        setSourceToSearch(undefined); \n        setPackToSearch(undefined); \n    }, [setDay, setSource, setSourceToEdit, setSourceToSearch, setPackToSearch]);\n\n    if (day || source || sourceToEdit || sourceToSearch || packToSearch) {\n        hasBack = true;\n        backButton = \n            (<div\n               onClick={goBack}\n               className=\"selector-back-button\"/>);\n        if (sourceToEdit) {\n            results = (<SourceEditor sequencerEngine={sequencerEngine} source={sourceToEdit}/>);\n        } else if (sourceToSearch) {\n            results = <SourceToSearch\n                        setPackToSearch={setPackToSearch}\n                        sourceToSearch={sourceToSearch}\n                        sequencerEngine={sequencerEngine}/>;\n        } else if (packToSearch) {\n            results = <PackToSearch\n                        setPackToSearch={setPackToSearch}\n                        packToSearch={packToSearch} sequencerEngine={sequencerEngine}/>;\n        } else {\n            results = \n                source ? <SourceResults\n                           setPackToSearch={setPackToSearch}\n                           alone={true} sequencerEngine={sequencerEngine} source={source}/> :\n            <DayResults setPackToSearch={setPackToSearch} sequencerEngine={sequencerEngine} day={day}/>;\n        }\n    }\n\n    useEffect(() => {\n        //if (quickAddSearchText !== '') {\n            setSearchTerm(quickAddSearchText);\n            setSource(undefined);\n            setDay(undefined);\n            // setDisplayOption(LIST);\n        //}\n    }, [quickAddSearchText, setSearchTerm, setDisplayOption, setSource, setDay]);\n\n    useEffect(() => {\n        setDay(undefined);\n        setSource(undefined);\n    }, [displayOption]);\n\n    const onChange = useCallback((s) => {\n        setDay(undefined);\n        setSource(undefined);\n        setSourceToSearch(undefined);\n        setSearchTerm(s);\n        setSearchText(s);\n    }, [setSearchTerm, setDay, setSource, setSourceToSearch]);\n\n    useEffect(() => {\n        onChange(quickAddSearchText);\n    }, [guildId, setSearchTerm, setDay, setSource, setSourceToSearch]);\n\n    return (\n        <div className={hasBack ? \"new-selector has-back\" : \"new-selector\"}>\n           <div className=\"selector-inner\">\n             <SoundGrid\n               groupBy={groupBy}\n               setPackToSearch={setPackToSearch}\n               packToSearch={packToSearch}\n               displayOption={displayOption} \n               searchTerm={searchTerm}\n               filterFavorites={filterFavorites}\n               setSourceToSearch={setSourceToSearch}\n               onClickSource={onClickSource}\n               onClickDay={onClickDay}\n               guildId={guildId}\n               resultsElement={results}\n               sequencerEngine={sequencerEngine}>\n               <SampleSearch\n                 sourceToSearch={sourceToSearch}\n                 setDisplayOption={setDisplayOption}\n                 displayOption={displayOption}\n                 groupBy={groupBy}\n                 setGroupBy={setGroupBy}\n                 onChange={onChange}\n                 setFilterFavorites={setFilterFavorites}\n                 filterFavorites={filterFavorites}>\n                 <div className=\"search-and-back\">{backButton}</div>\n               </SampleSearch>\n             </SoundGrid>\n           </div>\n        </div>);\n    /* <Months onClickMonth={onClickMonth} currentMonth={currentMonth} months={months}/> */\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      //quickAddSearchText: state.selector.quickAddSearchText,\n      guildId: state.guilds.selectedGuild ? state.guilds.selectedGuild.guildId : 0\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setSearchText: x => dispatch(setQuickAddSearchText(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Selector);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {\n    setPresetDragging,\n    setLoadingText\n} from 'actions/index.js';\nimport {connect} from 'react-redux';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport Colors from 'components/Colors.js';\nconst colors = new Colors();\n\nconst PresetOption = ({sequencerEngine, preset, setPresetDragging, setLoadingText}) => { \n    let dotStyle = {\n        backgroundColor: colors.getColorForHash(INSTRUMENT_TYPE_TO_NAME[preset.instrumentType])\n    };\n\n    const onClick = () => {\n        setLoadingText(\"Loading Preset (\" + preset.title + \")\");\n        sequencerEngine.loadPreset(\n            preset, true)\n            .then(s => setLoadingText(undefined));\n    };\n    return (\n        <div\n          draggable={true}\n          onDragOver={(e) => e.preventDefault()}\n          onDragStart={() => setPresetDragging(preset)}\n          className=\"sample-option\">\n          <div onClick={onClick} className=\"dot\" style={dotStyle}/>\n          <div\n            className=\"wave-and-name\">\n            <div className=\"name-and-tags\">\n              <div className=\"sample-name\">{preset.title}</div>\n              <div style={dotStyle} className=\"instrument-type\">\n                {INSTRUMENT_TYPE_TO_NAME[preset.instrumentType]}\n              </div>\n              {preset.tags.map(tag => <div className=\"tag-option\">{tag}</div>)}\n            </div>\n            <div className=\"waveform-and-rating\">\n            </div>\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setPresetDragging: (x) => dispatch(setPresetDragging(x)),\n      setLoadingText: (x) => dispatch(setLoadingText(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(PresetOption);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport PresetOption from './PresetOption.js';\nimport {connect} from 'react-redux';\n\nconst SourceResults = ({\n    source,\n    sequencerEngine,\n    odd,\n    alone,\n    resultsSize,\n    i,\n    showPianoRoll,\n    bottomHeight}\n    ) => { \n        return (\n            <div className=\"source-results\">\n             <div className=\"sample-options preset-options\">\n                {source.results.map(\n                    (x) => <PresetOption sequencerEngine={sequencerEngine} preset={x}/>)}\n              </div>\n            </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SourceResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {getBlockDate} from 'utils/getBlockDate.js';\nimport SourceResults from './SourceResults.js';\nimport {formatDate} from '../formatDate.js';\nimport {connect} from 'react-redux';\nimport {useScroll} from '../useScroll.js';\n\nconst DayResults = ({day, sequencerEngine, showPianoRoll, bottomHeight}) => { \n    let ref = useRef(undefined);\n\n    let {unsourced, blockNumber} = day;\n    let {size} = useScroll(ref, 24, true);\n    let [date, setDate] = useState(undefined);\n\n    useEffect(() => {\n        getBlockDate(blockNumber).then(\n            setDate);\n    }, [blockNumber]);\n \n    let unsourcedResults = [];\n    for (let tag in unsourced) {\n        unsourcedResults = [... unsourcedResults, ... unsourced[tag]];\n    }\n    let style = {\n        height: window.innerHeight - 212\n    };\n\n    let i=0;\n    let resultsCount = 0;\n    let list = [];\n    let resultsSize = size - resultsCount;\n\n    if (resultsSize > 0 && unsourcedResults.length > 0) {\n        list.push(\n            <SourceResults\n              odd={++i % 2 === 0}\n              key={i}\n              resultsSize={resultsSize}\n              sequencerEngine={sequencerEngine}\n              source={{results: unsourcedResults, tag: \"Unsourced\"}}/>\n        );\n    }\n\n    return (\n        <div style={style} ref={ref} className=\"day-results\">\n          <div className=\"date\">\n            <div className=\"day-date\">{date ? formatDate(date) : ''}</div>\n            {list}\n          </div>\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(DayResults);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport Day from '../Day.js';\nimport UnknownProgressBar from 'components/progressbar/UnknownProgressBar.js';\nimport {useScroll} from '../useScroll.js';\nimport {connect} from 'react-redux';\n\nlet id = 0;\n\nconst ContentGrid = ({\n    onClickSource,\n    searchTerm,\n    onClickDay,\n    getContent,\n    searchTerms,\n    showPianoRoll,\n    bottomHeight\n}) => { \n    let [results, setResults] = useState([]);\n    let [isLoading, setIsLoading] = useState(false);\n    let ref = useRef(undefined);\n    let {size} = useScroll(ref, 30, true);\n\n    useEffect(() => {\n        let _id = ++id;\n        setIsLoading(true);\n        getContent(searchTerm)\n            .then(r => {\n                if (_id === id) {\n                    setResults(r);\n                    setIsLoading(false);\n                }\n            });\n    }, [searchTerm, setResults, setIsLoading]);\n\n\n    let style = {\n        height: window.innerHeight - 233\n    };\n    if (showPianoRoll) {\n        style.height -= bottomHeight - 150;\n    }\n\n    return (\n        <div ref={ref} style={style} className=\"sound-grid\">\n          {isLoading ?\n           <UnknownProgressBar text=\"Searching\"/> : \n           results.slice(0, size).map(\n               (dayResults, i) =>\n                   <Day\n                     key={\"day-\" + i}\n                     onClickSource={onClickSource}\n                     onClickDay={onClickDay}\n                     results={dayResults}/>)}\n        </div>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n      showPianoRoll: state.sequencer.showPianoRoll,\n      bottomHeight: state.arrangement.bottomHeight\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ContentGrid);\n","import GuildPresetsContract from 'decentralized/contracts/GuildPresetsContract.js';\nimport {getByDay, partitionBySource, fetchDaysForBlocks} from '../getSoundResults.js';\nimport {decryptResults} from 'decentralized/guilds/queryDecryptor.js';\nimport {INSTRUMENT_TYPE_TO_NAME} from 'constants/instrument-types.js';\nimport BackendQuery from 'decentralized/BackendQuery.js';\nimport {\n    NewPreset2,\n    PresetTag,\n    PresetSample,\n    PresetInstrumentType\n} from 'decentralized/EthereumEvents.js';\nimport {web3} from 'decentralized/web3.js';\n\n\nconst contract = new GuildPresetsContract();\n\nexport const getPresets = async (searchTerm) => {\n     let query = new BackendQuery(contract.contractAddress)\n        .from(NewPreset2)\n        .select('user')\n        .select('encryptedName')\n        .select('contentHash')\n        .select('encryptedContentKey')\n        .select('publicKey')\n        .select('guildId')\n        .where('guildId', 0);\n\n    let results = await decryptResults(await query.executeQuery(), 0);\n    let ids = results.map(x => x.contentHash);\n    let taggedResults = await getTagPresets(ids);\n    let instrumentTypes = await getInstrumentTypePresets(ids);\n    let combined = combineAll(results, taggedResults, instrumentTypes);\n    let byDay = getByDay(filterBySearchTerms(searchTerm, combined));\n    let byDayAndSource = partitionBySource(byDay, searchTerm);\n    return await fetchDaysForBlocks(byDayAndSource);\n};\n\nconst getTagPresets = async (hashes) => {\n    let query = new BackendQuery(contract.contractAddress)\n        .from(PresetTag)\n        .select('contentHash')\n        .select('tag')\n        .whereIn('contentHash', hashes);\n\n    let results = await query.executeQuery();\n    let tags = {};\n    for (let result of results) {\n        if (!(result.contentHash in tags)) {\n            tags[result.contentHash] = [];\n        }\n        tags[result.contentHash].push(result.tag);\n    }\n\n    for (let key in tags) {\n        tags[key] = Array.from(new Set(tags[key]));\n    }\n    return tags;\n};\n\nconst getInstrumentTypePresets = async (hashes) => {\n    let query = new BackendQuery(contract.contractAddress)\n        .from(PresetInstrumentType)\n        .select('contentHash')\n        .select('instrumentType')\n        .whereIn('contentHash', hashes);\n\n    return  await query.executeQuery();\n};\n\nconst combineAll = (results, tags, instrumentTypes) => {\n    let combined = {};\n    for (let result of results) {\n        combined[result.contentHash] = {\n            ... result,\n            tags: tags[result.contentHash] || []\n        };\n    }\n\n    for (let result of instrumentTypes) {\n        combined[result.contentHash] = {\n            ... combined[result.contentHash],\n            ... result\n        };\n    }\n\n    let r = [];\n    for (let result of results) {\n        r.push(combined[result.contentHash]);\n    }\n    return r;\n};\n\nconst filterBySearchTerms = (searchTerms, results) => {\n    if (searchTerms === '') {\n        return results;\n    }\n\n    searchTerms = searchTerms.toLowerCase();\n    // see if this is an instrument type\n    return results.filter(\n        r => r.tags.some(tag => tag.toLowerCase().includes(searchTerms)) ||\n            r.title.toLowerCase().includes(searchTerms));\n};\n\n\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SourceResults from './SourceResults.js';\nimport DayResults from './DayResults.js';\nimport ContentGrid from './ContentGrid.js';\nimport SampleSearch from '../SampleSearch.js';\nimport {getPresets} from './getPresets.js';\nimport {connect} from 'react-redux';\n\nconst Presets = ({sequencerEngine}) => { \n    let [day, setDay] = useState(undefined);\n    let [source, setSource] = useState(undefined);\n    let [searchTerm, setSearchTerm] = useState('');\n    let [loadEffects, setLoadEffects] = useState(true);\n    let [loadMods, setLoadMods] = useState(true);\n\n    let backButton = '';\n    let results = '';\n    if (day || source) {\n        backButton = \n            (<div\n              onClick={() => {setDay(undefined);  setSource(undefined);}}\n               className=\"selector-back-button\"/>);\n        results = \n            source ? <SourceResults alone={true} sequencerEngine={sequencerEngine} source={source}/> :\n        <DayResults sequencerEngine={sequencerEngine} day={day}/>;\n        results =\n            [(<div className=\"results-toolbar\">\n                <div className=\"settings-info\">\n                  Load preset with \n                </div>\n                <div\n                  onClick={() => setLoadEffects(!loadEffects)}\n                  className={loadEffects ? \"preset-setting selected\" : \"preset-setting\"}>FX</div>\n                <div\n                  onClick={() => setLoadMods(!loadMods)}\n                  className={loadMods ? \"preset-setting selected\" : \"preset-setting\"}>Mods</div>\n              </div>),\n             results];\n         \n    }\n\n    const onChange = useCallback((s) => {\n        setDay(undefined);\n        setSource(undefined);\n        setSearchTerm(s);\n    }, [setSearchTerm]);\n\n    const onClickSource = useCallback((source) => {\n        setDay(undefined);\n        setSource(source);\n    }, [setDay, setSource]);\n\n    const onClickDay = useCallback((day) => {\n        setSource(undefined);\n        setDay(day);\n    }, [setSource, setDay]);\n\n    return (\n        <div className=\"new-selector presets\">\n          <div className=\"search-and-back\">{backButton} <SampleSearch onChange={onChange}/></div>\n        {results ? results : \n         <div className=\"selector-inner\">\n           <ContentGrid\n             onClickSource={onClickSource}\n             onClickDay={onClickDay}\n             getContent={getPresets}\n             searchTerm={searchTerm}\n             sequencerEngine={sequencerEngine}/>\n         </div>}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Presets);\n","import React, {useCallback, useEffect} from 'react';\nimport {\n    setEdgesPadding,\n    setEdgesSize,\n    setEditorPadding,\n    setZObjectSize,\n    setSelectedPulledElements,\n    setBulkWindowPositions,\n    setWindowPosition} from 'actions/index.js';\nimport {\n    getPositions,\n    doesElementIntersect,\n    getMinLeftAndTop,\n    getMaxLeftAndTop} from './utils.js';\n\nexport const useEdgeAdjuster = (elements, subSequence, sequencerEngine, sizeRef, setSize) => {\n    const adjust = () => {\n        let size = sizeRef.current;\n        let {minTop, minLeft} = getMinLeftAndTop(elements);\n        let {maxTop, maxLeft} = getMaxLeftAndTop(elements);\n        \n        minTop -= 100;\n        minLeft -= 100;\n        \n        if (sequencerEngine) {\n            let {edgesSize, edgesPadding} = sequencerEngine.state.spatial;\n            \n            let newSize = {\n                width: maxLeft - minLeft,\n                height: maxTop  - minTop\n            };\n            \n            if (newSize.width !== edgesSize.width ||\n                newSize.height !== edgesSize.height) {\n                sequencerEngine.dispatch(\n                    setEdgesSize(newSize.width + 300, newSize.height + 300));\n            }\n            \n            if ((edgesPadding.x !== minLeft || edgesPadding.y !== minTop)) {\n                sequencerEngine.dispatch(\n                    setEdgesPadding(minLeft,\n                                    minTop));\n            }\n        }\n        \n        if (maxLeft < size.width ||\n            maxTop < size.height) {\n            if (!(maxLeft > size.width || maxTop > size.height)) {\n                return;\n            }\n            let _size = {\n                width: Math.max(size.width, maxLeft),\n                height: Math.max(size.height, maxTop),\n            };\n            sizeRef.current = _size;\n            setSize(_size);\n        } \n    };\n\n    useEffect(() => {\n        setTimeout(() => {\n            adjust();\n        }, 300);\n    }, []);\n};\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setEditorPadding,\n    setSelectedZObject,\n    setModuleSize,\n    setSelectedPulledElements} from 'actions/index.js';\nimport {connect} from 'react-redux';\n\nwindow.scr = 45;\nconst MIN_SCALE = 0.30;\n\nconst StyleSetter = ({\n    editorRef,\n    setEditorPadding,\n    uxLocked,\n    edgesPadding,\n    editorPadding,\n    showingSubpatch,\n    sidebarsShowing,\n    mainScrollRef,\n    size,\n    setSize,\n    sizeRef,\n    containerRef,\n    isExplore,\n    collapsed,\n    showPadSequencer,\n    edgesRef,\n    edgesSize,\n}) => { \n    let [styleSize, setStyleSize] = useState(size);\n    let lastZoom = useRef(undefined);\n    let startZoomPosition = useRef(undefined);\n    let startZoomScroll = useRef(undefined);\n    let mouseRef = useRef(undefined);\n\n    useEffect(() => {\n        if (editorRef.current) {\n            if (showPadSequencer) {\n                editorRef.current.style.paddingTop = '0px';\n                editorRef.current.style.paddingLeft = '0px';\n            } else {\n                editorRef.current.style.paddingTop= editorPadding.y + 'px';\n                editorRef.current.style.paddingLeft= editorPadding.x + 'px';\n            }\n        }\n    }, [showPadSequencer, editorPadding]);\n\n    useEffect(() => {\n        if (edgesRef.current) {\n            edgesRef.current.style.width = edgesSize.width +'px';\n            edgesRef.current.style.height = edgesSize.height + 'px';\n            edgesRef.current.style.minWidth = edgesSize.width +'px';\n            edgesRef.current.style.minHeight = edgesSize.height + 'px';\n            edgesRef.current.style.left = edgesPadding.x;\n            edgesRef.current.style.top = edgesPadding.y;\n        }\n    }, [edgesPadding, edgesSize]);\n\n    useEffect(() => {\n        setStyleSize(size);\n    }, [size, setStyleSize]);\n\n    useEffect(() => {\n        if (!mainScrollRef || !mainScrollRef.current) {\n            return () => 0;\n        }\n        mainScrollRef.current.addEventListener(\"mousewheel\", onWheel, {passive: false});\n        mainScrollRef.current.addEventListener(\"mousemove\", onMouseMove);;\n        return () => {\n            if (mainScrollRef && mainScrollRef.current) {\n                mainScrollRef.current.removeEventListener(\"mousewheel\", onWheel, {passive: false});\n                mainScrollRef.current.removeEventListener(\"mousemove\", onMouseMove);;\n            }\n        };\n    }, [setSize,\n        uxLocked,\n        editorPadding,\n        showingSubpatch, mainScrollRef, sidebarsShowing, styleSize, setStyleSize]);\n\n    const onMouseMove = (e) => {\n        if (mouseRef.current) {\n            mouseRef.current.x = e.clientX;\n            mouseRef.current.y = e.clientY;\n        } else {\n            mouseRef.current = {\n                x: e.clientX,\n                y: e.clientY,\n            };\n        }\n    };\n\n    const onWheel = useCallback((e) => {\n        if (window.killScrolling || uxLocked) {\n            e.preventDefault();\n            return;\n        }\n\n        if (!mainScrollRef || !mainScrollRef.current) {\n            return false;\n        }\n\n        e.preventDefault();\n\n        if (!handleScale(e)) {\n            return;\n        }\n\n        let {scrollTop, scrollLeft} = mainScrollRef.current;\n\n        let {deltaX, deltaY} = e;\n\n        /*\n        if (Math.abs(deltaX) < 2) {\n            deltaX *= 0.5;\n        }\n        if (Math.abs(deltaY) < 2) {\n            deltaY *= 0.5;\n        }\n        */\n\n        let x = scrollLeft + deltaX;\n        let y = scrollTop + deltaY;\n\n\n        if (!size) {\n            // return false;\n        }\n\n        let sx = sidebarsShowing ? 2*240 : 0;\n        let sy = sidebarsShowing ? 45 : 0;\n\n        let _width = styleSize ? styleSize.width : 400;\n        let _height = styleSize ? styleSize.height : 400;\n\n        size = {\n            width: Math.max(_width, window.innerWidth - sx),\n            height: Math.max(_height, window.innerHeight - sy)\n        };\n                \n        if (size.width < 200 || size.height < 200) {\n            return;\n        }\n        let _size = {width: deltaX + size.width, height: deltaY + size.height};\n\n        if (x < 0 || y < 0) {\n            let _x= editorPadding.x - deltaX;\n            let _y= editorPadding.y - deltaY;\n            setEditorPadding(_x, _y);\n        }\n\n        containerRef.current.style.width = _size.width+window.scr+'px';\n        containerRef.current.style.height = _size.height+window.scr+'px';\n        setStyleSize(_size);\n        sizeRef.current = _size;\n        mainScrollRef.current.scrollTo(x,y);\n        window.lastScrollTime = new Date().getTime();\n        return false;\n    },[\n        editorPadding,\n        uxLocked,\n        styleSize,\n        setStyleSize,\n        showingSubpatch,\n        sidebarsShowing,\n        mainScrollRef\n      ]);\n\n    const handleScale = useCallback((e) => {\n       let {deltaX, deltaY, wheelDeltaX, wheelDeltaY} = e;\n        if (Math.max(Math.abs(deltaX), Math.abs(deltaY)) < 20 && Math.abs(wheelDeltaY) > 110)  {\n            let scale = window._scale || 1;\n            let _scale=1;\n            if (wheelDeltaY > 0) {\n                _scale =  scale * wheelDeltaY / 117.0;\n            } else {\n                _scale = Math.abs(scale / (wheelDeltaY / 117.0));\n            }\n            window._scale = Math.max(MIN_SCALE, Math.min(1, _scale));\n            if (!lastZoom.current || new Date().getTime() - lastZoom.current > 500) {\n                let rect = containerRef.current.getBoundingClientRect();\n                let {scrollLeft, scrollTop} = mainScrollRef.current;\n                startZoomPosition.current = {\n                    x: ((mouseRef.current.x - rect.left)) / scale,\n                    y: ((mouseRef.current.y - rect.top)) / scale,\n                };\n                startZoomScroll.current = {\n                    x: scrollLeft / scale,\n                    y: scrollTop / scale\n                };\n            }\n\n            // ensure that the scroll position matches that x and y\n            let x = startZoomPosition.current.x;\n            let y = startZoomPosition.current.y;\n            let sx = startZoomScroll.current.x;\n            let sy = startZoomScroll.current.y;\n\n            // the global (including scroll) position of (goal) cursor\n            // i.e. where we want the cursor to be after scrolling\n            let X = (x + sx) / window._scale;\n            let Y = (y + sy) / window._scale;\n\n            lastZoom.current = new Date().getTime();\n\n            if (window._scale === 1) {\n                containerRef.current.style.transform = \"none\";\n            } else {\n                containerRef.current.style.transform = \"scale(\" + window._scale + \")\";\n            }\n\n            let {scrollLeft, scrollTop}  = mainScrollRef.current;\n            /*\n            setTimeout(() => {\n                mainScrollRef.current.scrollTo(X+X/window._scale,Y+Y/window._scale);\n            }, 5);\n            */\n            return false;\n        } else {\n            return true;\n        }\n    }, [mainScrollRef]);\n\n    useEffect(() => {\n        if (isExplore || collapsed) {\n            containerRef.current.style = {};\n        } else if (styleSize) {\n            containerRef.current.style.width = styleSize.width+window.scr+'px';\n            containerRef.current.style.height = styleSize.height+window.scr+'px';\n        }\n    }, [collapsed, isExplore, styleSize]);\n\n\n    return '';\n};\n\nconst mapStateToProps = (state, props) => {\n    return {\n        size: state.windows.moduleSizes[props.subSequence.id],\n        mainScrollRef: state.spatial.mainScrollRef,\n        sidebarsShowing: state.spatial.sidebarsShowing,\n        showingSubpatch: state.zobject.viewableSubPatches.length > 0,\n        editorPadding: state.spatial.editorPadding,\n        edgesPadding: state.spatial.edgesPadding,\n        edgesSize: state.spatial.edgesSize,\n        showPadSequencer: state.spatial.showPadSequencer,\n        uxLocked: state.zobject.uxLocked\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setEditorPadding: (x,y)=> dispatch(\n          setEditorPadding(x,y)),\n        setSize: x => dispatch(\n            setModuleSize(props.subSequence.id, x))\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(StyleSetter);\n","import React, { memo, useRef, useEffect, useCallback, useState} from 'react';\nimport ZObjectContextMenus from \"components/zobject/ZObjectContextMenus.js\";\nimport ZObjectTooltip from \"components/zobject/ZObjectTooltip.js\";\nimport {useEdgeAdjuster} from \"components/windows/adjustEdgeSize.js\";\nimport {segmentAllCables} from \"messaging/cables/segmentCables.js\"\nimport {useDoubleClick} from \"components/hooks/useDoubleClick.js\";\nimport SubPatches from 'components/subpatch/SubPatches.js';\nimport {BANG, NUMBER} from 'zobject/data-types.js';\nimport ZObjectComponent from \"components/zobject/ZObjectComponent.js\";\nimport ZMessageComponent from \"components/zobject/ZMessageComponent.js\";\nimport StyleSetter from './StyleSetter.js';\nimport {useModuleDrop} from './useModuleDrop.js';\nimport PulledOverview from 'components/pulled/PulledOverview.js';\nimport ModuleSys5 from \"components/system5/ModuleSys5.js\";\nimport TrackMidiEffects from 'components/pulled/TrackMidiEffects.js';\nimport GridTab from 'components/pulled/GridTab.js';\nimport {useContainerCoords} from 'components/hooks/useContainerCoords.js';\nimport {useSelection} from \"components/windows/useSelection.js\";\nimport {\n    setSelectedZObject, setModuleSize, setSelectedPulledElements} from 'actions/index.js';\nimport PulledBackground from './PulledBackground.js';\nimport PadEffects from 'components/pulled/PadEffects.js';\nimport GlobalEdges from 'components/pulled/GlobalEdges.js';\nimport PulledSequencer from 'components/pulled/PulledSequencer.js';\nimport PulledPad from 'components/pulled/PulledPad.js';\nimport PadsContainer from \"components/pads/PadsContainer.js\";\nimport {useWindows} from \"components/windows/useWindows.js\";\nimport {useArrangeWindows} from \"components/windows/useArrangeWindows.js\";\nimport {midiEffectOptions, initializeMidiEffect}  from 'components/effects/constants.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\";\nimport {setPulledEffects} from 'actions/index.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport PulledEffects from \"components/pulled/PulledEffects.js\";\nimport {connect} from 'react-redux';\nimport '../../ExploreGrid.scss';\n\nconst ModuleSpatialView = memo(({\n    dropdownPosRef,\n    isExplore,\n    isLoading,\n    presentationMode,\n    doneLoading,\n    innerRef,\n    children,\n    edgesRef,\n    setSelection,\n    setScale,\n    setSize,\n    showEffects,\n    pulledEffects,\n    setPulledEffects,\n    setSelectedPulledElements,\n    toggled,\n    setSelectedTrack,\n    subSequence,\n    collapsed,\n    zobjects,\n    setSelectedZObject,\n    selection,\n    scale,\n    elements,\n    editorRef,\n}) => {\n    // const {onContextMenu, dropdownPos, setDropdowPos} = useContextMenu({ref: innerRef});\n    const {sizeRef, ordering, setOrdering} = useWindows({ref: innerRef});\n\n    useEdgeAdjuster(elements, subSequence, subSequence.sequencerEngine, sizeRef, setSize);\n\n    //const {arrangeWindows} = useArrangeWindows({ref, elements, subSequence});\n\n    let {getXY} = useContainerCoords({containerRef: innerRef, scale});\n    let {getSelection} = useSelection({elements});\n\n    const _onDoubleClick = useCallback((e) => {\n        let {x,y} = getXY(e);\n        e.stopPropagation();\n        e.preventDefault();\n        subSequence.createZObject(x,y);\n    }, [subSequence]);\n\n    let onDoubleClick = useDoubleClick(_onDoubleClick);\n\n  \n    let rows = [0,1,2,3,4];\n    let cols = [0,1,2];\n    let {tracks=[]} = subSequence;\n    tracks = tracks.filter(x => isExplore || x.pad === undefined);\n\n    const createZObject= useCallback((x,y,type) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZObject(x,y, type);\n    }, [subSequence]);\n\n    const createZMessage = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y);\n    }, [subSequence]);\n\n    const createZNumber = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y, NUMBER);\n    }, [subSequence]);\n\n    const createButton = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZMessage(x,y, BANG);\n    }, [subSequence]);\n\n    const createToggle = useCallback((x,y) => {\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        subSequence.createZObject(x,y, \"toggle\");\n    }, [subSequence]);\n\n    const createPad = useCallback((x,y) => {\n        let pad = subSequence.createPad();\n        if (!x && !y) {\n            x = dropdownPosRef.current.x;\n            y = dropdownPosRef.current.y;\n        }\n        pad.x = x;\n        pad.y = y;\n    }, [subSequence]);\n\n    const onDrop = useModuleDrop({subSequence, createToggle, createPad, createZObject, createZMessage, createButton, createZNumber, getXY, setSelection});\n\n    useEffect(() => {\n        if (editorRef.current) {\n            editorRef.current.addEventListener(\"drop\", onDrop);\n        } else {\n            innerRef.current.addEventListener(\"drop\", onDrop);\n        }\n\n        return () => {\n            if (editorRef.current) {\n                editorRef.current.removeEventListener(\"drop\", onDrop);\n            } else if (innerRef.current) {\n                innerRef.current.removeEventListener(\"drop\", onDrop);\n            };\n        }\n    }, []);\n\n    if (!subSequence || !subSequence.tracks || !doneLoading) {\n        return [];\n    }\n\n\n    if (!zobjects) {\n        zobjects = subSequence.zObjects;\n    }\n\n    let inner = (\n        <div>\n         <PulledEffects\n            scale={scale}\n            sizeRef={sizeRef}\n            setSize={setSize}\n            ordering={ordering}\n            setOrdering={setOrdering}\n            playhead={true}\n            elements={elements}\n            containerRef={innerRef}\n            noWrapper={true}\n            sequencerEngine={subSequence.sequencerEngine}\n            subSequence={subSequence}/>\n          <ZObjectTooltip subSequence={subSequence}/>\n          <ZObjectContextMenus subSequence={subSequence}/>\n          {!isExplore && zobjects.map(\n              obj => <ZObjectComponent\n                       key={obj.id}\n                       scale={scale}\n                       sequencerEngine={subSequence.sequencerEngine}\n                       ordering={ordering}\n                       setOrdering={setOrdering}\n                       setSize={setSize}\n                       sizeRef={sizeRef}\n                       elements={elements}\n                       containerRef={innerRef}\n                       zobject={obj}/>)}\n\n{!isExplore && subSequence.zMessages.map(\n              obj => <ZMessageComponent\n                       key={obj.id}\n                       scale={scale}\n                       sequencerEngine={subSequence.sequencerEngine}\n                       ordering={ordering}\n                       setOrdering={setOrdering}\n                       setSize={setSize}\n                       sizeRef={sizeRef}\n                       elements={elements}\n                       containerRef={innerRef}\n                       zmessage={obj}/>)}\n\n        {!isExplore && subSequence.tracks.map(\n              track => \n                  <TrackMidiEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={innerRef}\n                    track={track}/>)}\n          {!isExplore && subSequence.zObjects.filter(x => x.name === 'pad')\n           .filter(x => x.effect.pad)\n           .map(x => x.effect.pad)\n           .filter(pad => pad.effectRack)\n           .map(\n              pad => \n                  <PadEffects\n                    scale={scale}\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    containerRef={innerRef}\n                    pad={pad}/>)}\n          {!isExplore && subSequence.sequencers.map(\n              sequencer =>\n                  <PulledSequencer\n                    ordering={ordering}\n                    setOrdering={setOrdering}\n                    scrollContainer={innerRef}\n                    scale={scale}\n                    setSize={setSize}\n                    sizeRef={sizeRef}\n                    elements={elements}\n                    sequencer={sequencer}/>)}\n        </div>);\n    \n    let className = collapsed ? \"grids collapsed\" : \"grids not-collapsed\";\n    if (presentationMode) {\n        className += \" presentation-mode\";\n    }\n    return (\n        <div\n          onClick={edgesRef && edgesRef.current ? () => 0 : onDoubleClick}\n          className={className}>\n          <GridTab subSequence={subSequence}/>\n          <StyleSetter\n            scale={scale}\n            setScale={setScale}\n            edgesRef={edgesRef}\n            subSequence={subSequence}\n            editorRef={editorRef}\n            setSize={setSize}\n            sizeRef={sizeRef}\n            isExplore={isExplore}\n            collapsed={collapsed}\n            containerRef={innerRef}\n            subSequence={subSequence}/>\n          <div\n            ref={innerRef} \n            className=\"grids-inner\">\n            {children}\n            {collapsed ? <ModuleSys5 subSequence={subSequence} /> : inner}\n          </div>\n        </div>\n    );\n});\n\nconst mapStateToProps = (state, props) => {\n    return {\n        presentationMode: state.spatial.presentationMode,\n        doneLoading: state.sequencer.completelyDoneLoading,\n        pulledEffects: state.effects.pulledEffects,\n        pulledSequencers: state.pads.sequencers,\n        numTracks: props.subSequence.tracks && props.subSequence.tracks.length,\n        collapsed: state.pads.modulesCollapsed[props.subSequence.id],\n        zobjects: state.zobject.zobjects[props.subSequence.id],\n        zmessages: state.zobject.zmessages[props.subSequence.id],\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n    return {\n        setPulledEffects: x => dispatch(setPulledEffects(x)),\n        setSelectedPulledElements: x => dispatch(\n            setSelectedPulledElements(x)),\n        setSelectedZObject: x => dispatch(\n            setSelectedZObject(x)),\n        setSize: x => dispatch(\n            setModuleSize(props.subSequence.id, x)),\n    };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ModuleSpatialView);\n","import {useCallback} from 'react';\nimport {setTrackDragging} from 'actions/index.js';\nimport {\n    setWindowPosition,\n    setPulledEffects,\n    setZObjectTypeDragging} from 'actions/index.js';\n\nexport const useModuleDrop = ({subSequence, setSelection, getXY, createToggle, createSequencer, createPad, createZObject, createZMessage, createZNumber, createButton}) => {\n    const onDrop = useCallback((e) => {\n        let {x,y} = getXY(e);\n        let {sequencerEngine} = subSequence;\n        let {state} = sequencerEngine;\n        let {trackDragging} = state.tracks;\n        let {zobjectTypeDragging} = state.zobject;\n        if (zobjectTypeDragging) {\n            switch(zobjectTypeDragging) {\n            case \"zobject\":\n                createZObject(x,y);\n                break;\n            case \"zmessage\":\n                createZMessage(x,y);\n                break;\n            case \"zpad\":\n                createPad(x,y);\n                break;\n            case \"zbutton\":\n                createButton(x,y);\n                break;\n            case \"ztoggle\":\n                createToggle(x,y);\n                break;\n            case \"znumber\":\n                createZNumber(x,y);\n                break;\n            case \"sequencer\":\n                createSequencer(x,y);\n                break;\n            case \"zcomment\":\n                createZObject(x,y, \"comment\");\n                break;\n            default:\n                let tokens = zobjectTypeDragging.split(\" \");\n                let number = parseInt(tokens[1]);\n                let pulledEffects = sequencerEngine.state.effects.pulledEffects;\n                let type = undefined;\n                if (tokens[0] === \"MODULE_ENVELOPE\") {\n                    // drag envelope\n                    let envelope = subSequence.envelopes.find(x => x.number === number);\n                    console.log(\"envelope =\", envelope);\n                    type = {\n                        type: \"MODULE_ENVELOPE\",\n                        id: envelope.id,\n                        subType: envelope.number,\n                        instrument: envelope\n                    };\n                } else {\n                    // drag lfo\n                    let lfo = subSequence.lfos.find(\n                        ({lfo}) => lfo.number === number);\n                    type = {\n                        type: \"LFO\",\n                        id: lfo.id,\n                        effect: lfo,\n                        instrument: lfo\n                    };\n                }\n                sequencerEngine.dispatch(setWindowPosition(\n                    type.id, {x,y}));\n                sequencerEngine.dispatch(\n                    setPulledEffects([... pulledEffects, type]));\n            }\n            \n            sequencerEngine.dispatch(setZObjectTypeDragging(undefined));\n            if (setSelection) {\n                setSelection(undefined);\n            }\n        }\n\n        /*\n        if (trackDragging) {\n            // need to switch the track over\n            if (trackDragging.subSequence !== subSequence) {\n                trackDragging.subSequence.deleteTrackFromPads(trackDragging);\n                trackDragging.subSequence.groups.deleteTrack(trackDragging);\n                trackDragging.subSequence.tracks = trackDragging.subSequence.tracks.filter(\n                    t => t !== trackDragging);\n                subSequence.tracks.push(trackDragging);\n                subSequence.groups.addTrack(trackDragging);\n                trackDragging.subSequence = subSequence;\n            }\n            sequencerEngine.dispatch(setTrackDragging(undefined));\n        }\n        */\n    }, [subSequence]);\n\n    return onDrop;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport SubMenu from \"components/dropdowns/SubMenu.js\";\nimport {useMintToHic} from 'components/hooks/useMintToHic.js';\nimport {useMintToZora} from 'components/hooks/useMintToZora.js';\nimport ContextMenu from \"components/dropdowns/ContextMenu.js\";\nimport MenuItem from \"components/dropdowns/MenuItem.js\";\nimport {\n    setWindowPosition,\n    setViewableZObjects,\n    setFullScreenZObject} from 'actions/index.js';\n\nimport {connect} from 'react-redux';\n\nconst ZObjectContextMenu = ({\n    setViewableZObjects,\n    dropdownPos,\n    zobject,\n    setDropdownPos,\n    setFullScreenZObject,\n    setWindowPosition,\n}) => { \n    const {mintToHic} = useMintToHic({zobject, setDropdownPos});\n    const {mintToZora} = useMintToZora({zobject, setDropdownPos});\n\n    const duplicate = useCallback(() => {\n        zobject.duplicate();\n        setDropdownPos(undefined);\n    }, [setDropdownPos]);\n\n    const fullScreen = useCallback(() => {\n        setFullScreenZObject(zobject);\n        setDropdownPos(undefined);\n    }, [setDropdownPos]);\n\n    const openAsWindow = useCallback(() => {\n        let {viewableZObjects} = zobject.state.zobject;\n        setWindowPosition({x: 100, y: 100});\n        setViewableZObjects([... viewableZObjects, zobject]);\n    }, [zobject, setViewableZObjects]);\n\n    const deleteZObject = useCallback(() => {\n        zobject.delete();\n    }, [zobject]);\n\n    return (\n        <ContextMenu dropdownPos={dropdownPos} setDropdownPos={setDropdownPos}>\n          <MenuItem onMouseDown={fullScreen}>\n            Fullscreen \n          </MenuItem>\n          <MenuItem onMouseDown={openAsWindow}>\n            Open as Window\n          </MenuItem>\n          <MenuItem onMouseDown={duplicate}>\n            Duplicate <div className=\"key-shortcut\">⌘D</div>\n          </MenuItem>\n          <div className=\"divider\"/>\n          <SubMenu name=\"Mint On...\">\n            <MenuItem onMouseDown={mintToZora}>\n              Zora\n            </MenuItem>\n            <MenuItem onMouseDown={mintToHic}>\n              Hicetnunc/Objkt\n            </MenuItem>\n          </SubMenu>\n          <MenuItem onMouseDown={deleteZObject}>\n            Delete\n          </MenuItem>\n        </ContextMenu>);\n};\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setFullScreenZObject: x => dispatch(setFullScreenZObject(x)),\n      setWindowPosition: x => dispatch(setWindowPosition(props.zobject.window.id, x)),\n      setViewableZObjects: x => dispatch(setViewableZObjects(x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ZObjectContextMenu);\n","import React, { useRef, useEffect, useCallback, useState} from 'react';\nimport {\n    setUXLockObject,\n    setUXHideObject\n} from 'actions/index.js';\nimport {useContextMenu} from \"components/dropdowns/useContextMenu.js\"\nimport ZObjectContextMenu from \"components/zobject/ZObjectContextMenu.js\";\nimport {connect} from 'react-redux';\n\nconst ObjectOption = ({\n    setObjectDragging,\n    hidden,\n    locked,\n    setUXLockObject,\n    setUXHideObject,\n    className,\n    setShow,\n    setSelectedZObject,\n    show,\n    zobject\n}) => { \n\n    let ref = useRef();\n    const {onContextMenu, dropdownPos, setDropdownPos} = useContextMenu({ref, useTop: false});\n\n    useEffect(() => {\n        if (dropdownPos) {\n            setSelectedZObject(zobject);\n        }\n    }, [dropdownPos, zobject]);\n\n    if (dropdownPos) {\n        className += \" showing-context-menu\";\n    }\n    return (\n      <div\n        ref={ref}\n        onDragLeave={e => e.preventDefault()}\n        draggable={true}\n        onDragStart={(e) => {\n            e.dataTransfer.effectAllowed = \"copy\";\n            e.dataTransfer.setData('text/html', zobject.id); //cannot be empty string\n            setObjectDragging(zobject);\n        }}\n        onDragOver={e => e.preventDefault()}\n        onContextMenu={onContextMenu}\n        className={className}>\n        {dropdownPos &&\n         <ZObjectContextMenu\n           dropdownPos={dropdownPos}\n           setDropdownPos={setDropdownPos}\n           zobject={zobject}/>\n        }\n        <div onClick={() => setShow(!show)} className=\"arrow-container\">\n          <div className={show ? \"arrow-down\" : \"arrow-right\"}/>\n        </div>\n        <img className=\"object-icon\" src=\"/zobject-light.svg\"/>\n        <div\n          onClick={() => setSelectedZObject(zobject)}\n          className=\"zobject-name\">\n          <span className=\"object-name\">{zobject.name}</span>\n          <span className=\"object-arg\">{typeof zobject.args[0] === \"string\" && zobject.args[0]}</span>\n       </div>\n        <img\n          onClick={() => setUXHideObject(zobject.id, !hidden)}\n          className={hidden ? \"hidden eye\" : \"eye\"}\n          src={hidden ? \"/eyeball-hidden.svg\" : \"/eyeball.svg\"}\n        />\n        <img\n          onClick={() => setUXLockObject(zobject.id, !locked)}\n          className=\"lock-ux-btn\"\n          src={locked ? \"/zlock-locked-light.svg\" : \"/zlock-unlocked-light.svg\"}\n        />\n      </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let id = props.zobject.id;\n    return {\n        hidden: state.spatial.hiddenObjects[id],\n        locked: state.spatial.lockedObjects[id]\n    };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      setUXLockObject: (id, x) => dispatch(setUXLockObject(id, x)),\n      setUXHideObject: (id, x) => dispatch(setUXHideObject(id, x)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ObjectOption);\n","import React, {useRef, useEffect, useCallback, useState} from 'react';\nimport {getAllNodesInSub} from 'utils/findNode.js';\nimport ObjectOption from './ObjectOption.js';\nimport {connect} from 'react-redux';\n\nconst NestedZObject = ({\n    setObjectDragging,\n    setSelectedZObject, selectedZObject, zobject, searchTerm\n}) => { \n    let ref=useRef();\n    let [dropActive, setDropActive] = useState(false);\n    let [show, setShow] = useState(false);\n    let className=\"zobject-option\";\n    if (zobject === selectedZObject) {\n        className += \" selected\";\n    }\n\n    let isNested = zobject.effect && zobject.effect.zObjects;\n    if (isNested) {\n        className += \" nested\";\n    }\n\n    useEffect(() => {\n        setShow(searchTerm !== \"\");\n    }, [searchTerm, setShow]);\n\n    if (searchTerm !== \"\") {\n        searchTerm = searchTerm.toLowerCase();\n        if (zobject.effect && zobject.effect.zObjects) {\n            if (zobject._text.toLowerCase().includes(searchTerm)) {\n                searchTerm = \"\";\n            } else {\n                let objects= getAllNodesInSub(zobject.effect);\n                if (!objects.some(\n                    o => typeof o._text === \"string\" &&\n                        o._text.toLowerCase().includes(searchTerm))) {\n                    return '';\n                }\n            }\n        } else {\n            if (typeof zobject._text !== \"string\" || !zobject._text.toLowerCase().includes(searchTerm)) {\n                return '';\n            }\n        }\n    }\n\n    const onDrop = useCallback(() => {\n        ref.current.setAttribute(\"drop-active\", 0);\n        if (zobject.effect && zobject.effect.zObjects) {\n            let objectDragging = zobject.state.zobject.objectDragging;\n            // we want to move this object from its old to this new one\n            zobject.effect.moveObjectInto(objectDragging);\n        }\n    }, [zobject]);\n\n    let _className =\"zobject\";\n    if (dropActive) {\n        _className += \" drop-active\";\n    }\n    return (\n        <div\n          ref={ref}\n          onDragEnter={e => {\n              e.preventDefault();\n              if (zobject.effect && zobject.effect.zObjects) {\n                  ref.current.setAttribute(\"drop-active\", 1);\n              }\n          }}\n          onDragOver={e => () => {\n              e.preventDefault();\n          }}\n          onDrop={onDrop}\n          onDragLeave={e => {\n              console.log(\"on drag leave\");\n              ref.current.setAttribute(\"drop-active\", 0);\n          }}\n          className={_className}>\n          <ObjectOption\n            setObjectDragging={setObjectDragging}\n            className={className}\n            setShow={setShow}\n            show={show}\n            zobject={zobject}\n            setSelectedZObject={setSelectedZObject}\n          />\n          {show && zobject.effect && zobject.effect.zObjects &&\n           <div\n             onDragLeave={e => e.preventDefault()}\n             className=\"nested-inner\">\n             {zobject.effect.zObjects.map(\n                 obj => <NestedZObject\n                          setObjectDragging={setObjectDragging}\n                          key={obj.id}\n                          zobject={obj}\n                          searchTerm={searchTerm}\n                          setSelectedZObject={setSelectedZObject}\n                          selectedZObject={selectedZObject}/>)}\n           </div>}\n        </div>);\n};\n\nexport default NestedZObject;\n","export const TWITTER = 'TWITTER';\nexport const STORE = 'STORE';\nexport const BANDCAMP = 'BANDCAMP';\nexport const FREE_SOUND = 'FREE_SOUND';\nexport const WEBSITE = 'WEBSITE';\n\nexport const LINK_TYPES = [\n    {value: TWITTER, label: 'Twitter'},\n    {value: STORE, label: 'Store'},\n    {value: WEBSITE, label: 'Website'},\n    {value: BANDCAMP, label: 'Bandcamp'},\n    {value: FREE_SOUND, label: 'Freesound.org'},\n];\n    \n","import React, { useEffect, useCallback, useState} from 'react';\nimport {STORE, LINK_TYPES} from 'decentralized/artists/constants.js';\nimport {connect} from 'react-redux';\nimport {newSampleByArtist, getArtistInfo, newArtistInfo, getArtistForSample} from 'decentralized/artists/Artists.js';\nimport Dropdown from 'react-dropdown';\n\nlet counter=0;\nconst UnsourcedFlow = ({sample, samples=[sample], show=false}) => { \n    sample = samples[0];\n    let [artistName, setArtistName] = useState(undefined);\n    let [alreadyMatched, setAlreadyMatched] = useState(false);\n    let [artistInfo, setArtistInfo] = useState(undefined);\n    let [showFlow, setShowFlow] = useState(show);\n    let [linkType, setLinkType] = useState(STORE);\n    let [artistValue, setArtistValue] = useState('');\n    let [websiteValue, setWebsiteValue] = useState('');\n\n    useEffect(() => {\n        setAlreadyMatched(true);\n        getArtistForSample(sample.ipfsHash).then(\n            ret => {\n                setArtistName(ret);\n                if (ret) {\n                    getArtistInfo(ret).then(\n                        info => setArtistInfo(info));\n                } else {\n                    setArtistInfo(undefined);\n                }\n            });\n    }, [sample, setArtistName, setArtistInfo, setAlreadyMatched]);\n\n    const saveArtistInfo = useCallback(() => {\n        samples.forEach(\n            s => \n                newSampleByArtist(artistValue, s.ipfsHash));\n        if (!alreadyMatched) {\n            newArtistInfo(artistValue, linkType, websiteValue);\n        }\n        setArtistInfo({\n            artistName: artistValue,\n            link: websiteValue,\n            linkType\n        });\n        setArtistName(artistValue);\n        setShowFlow(false);\n        setAlreadyMatched(true);\n    }, [\n        artistValue,\n        setAlreadyMatched,\n        websiteValue,\n        linkType,\n        setArtistInfo,\n        setShowFlow,\n        samples,\n        alreadyMatched]);\n\n    const onChangeArtistName = useCallback((e) => {\n        setAlreadyMatched(false);\n        let v = e.target.value;\n        let id= ++counter;\n        setTimeout(() => {\n            if (id === counter) {\n                getArtistInfo(v).then(\n                    ret => {\n                        setArtistInfo(ret);\n                        if (ret) {\n                            setLinkType(ret.linkType);\n                            setWebsiteValue(ret.link);\n                            setAlreadyMatched(true);\n                        }\n                    });\n            }\n        }, 150);\n        setArtistValue(v);\n    }, [setArtistValue, setWebsiteValue, setAlreadyMatched, setLinkType]);\n\n    if (showFlow) {\n        return (\n            <div className=\"artist-flow show\">\n              <input\n                className=\"artist-flow-input\"\n                placeholder=\"Artist Name\" value={artistValue} type=\"text\" onChange={onChangeArtistName}/>\n              <Dropdown\n                options={LINK_TYPES}\n                onChange={(o) => setLinkType(o.value)}\n                value={LINK_TYPES.find(x => x.value === linkType)}\n                placeholder=\"Website Type\" />\n \n              <input\n                className=\"artist-flow-input\"\n                placeholder=\"Website\" value={websiteValue} type=\"text\" onChange={(e) => setWebsiteValue(e.target.value)}/>\n              <div\n                onClick={saveArtistInfo}\n                className=\"artist-save-button\">\n                Save\n              </div>\n            </div>\n        );\n    }\n\n    if (!artistName) {\n        return (\n            <div></div>\n        );\n    }\n\n    return (\n        <div className=\"artist-flow\">\n          {artistName ?\n           <div className=\"artist-name\">{artistName}</div> :\n           <div\n             onClick={() => setShowFlow(true)}\n             className=\"match-artist-button\">\n             Match Sample To Artist\n           </div>\n          }\n          {artistInfo ? <a target=\"_blank\" href={artistInfo.link}>{artistInfo.link}</a> : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(UnsourcedFlow);\n","import ipfs from 'decentralized/Ipfs.js';\nimport StepData from 'pattern/StepData.js';\n\nexport const loadSampleFromProject = async (sequencerEngine, sample, project, patternNumber) => {\n    let json = await ipfs.getJson(project.newSequence);\n\n    // first find the project's subSequence id and trackNumber\n    let {subSequence, trackNumber} = getTrackNumber(json, sample.ipfsHash);\n\n    console.log(\"loadSampleFromProject got sub=%s track=%s\", subSequence, trackNumber);\n    if (subSequence === -1 || trackNumber === -1) {\n        // we couldnt find it\n        return;\n    }\n\n    return loadPattern(sequencerEngine, json, subSequence, trackNumber, patternNumber);\n};\n\nconst getTrackNumber = (data, sampleId) => {\n\n    for (let subSequence of data.subSequences) {\n        for (let trackNumber in subSequence.tracksData) {\n            let track = subSequence.tracksData[trackNumber]\n            if (track.type === \"SAMPLER\") {\n                let sampleIds = Object.keys(track.samplers);\n                if (sampleIds.indexOf(sampleId) > -1) {\n                    // then its this one\n                    return {\n                        subSequence: subSequence.id,\n                        trackNumber\n                    };\n                }\n            } else if (track.type === \"INSTRUMENT_RACK\") {\n                let tracks = subSequence.tracksData[trackNumber].tracks;\n                for (let _track of tracks) {\n                    let samplers = _track.track.instrument.samplers;\n                    if (Object.keys(samplers).find(x => samplers[x].sampleId === sampleId)) {\n                        return {\n                            subSequence: subSequence.id,\n                            trackNumber\n                        };\n                    }\n                }\n            }\n        }\n    }\n    return {\n        subSequenceId: -1,\n        trackNumber: -1,\n    };\n};\n\n\nconst loadPattern = (sequencerEngine, data, subSequence, trackNumber, patternNumber) => {\n    subSequence = data.subSequences.find(x => x.id === subSequence);\n    let _track = subSequence.tracks[trackNumber];\n    if (patternNumber === undefined) {\n        patternNumber = 0;\n        for (let p in _track) {\n            // see if any of the steps are on\n            let _pattern = _track[p];\n            let size = _pattern.size;\n            for (let i=0; i < size; i++) {\n                var jsonStepBucket = _pattern[i];\n                for (let pos in jsonStepBucket) {\n                    if (jsonStepBucket[pos].on) {\n                        patternNumber = parseInt(p);\n                        break;\n                    }\n                }\n            }\n        }\n    }\n    let _pattern = _track[patternNumber];\n    let track = sequencerEngine.getSelectedTrack();\n    let pattern = track.patterns[track.currentPattern];\n\n    let size = _pattern.size;\n    pattern.changeLength(size, false);\n    pattern.clear();\n\n    for (var j=0; j < size; j++) {\n        if (!(j in _pattern)) {\n            continue;\n        }\n        \n        var stepBucket = pattern.stepBuckets[j];\n        var jsonStepBucket = _pattern[j];\n        \n        // fill the steps for this buckets using the json's data\n        // Each step has several parameters, that need to be loaded\n        // into a StepData object\n        \n        for (var key in jsonStepBucket) {\n            var stepData = stepBucket.steps[key] || new StepData();\n            stepData.track = track;\n            stepData.stepNumber = j;\n            stepData.simpleLoad(\n                jsonStepBucket[key], track.effects, track, track.midiEffects.effects);\n            stepBucket.steps[key] = stepData;\n        }\n    }\n    \n    pattern.loadStepBuckets(undefined, true);\n    track.updateSteps();\n\n    let _trackData = subSequence.tracksData[trackNumber];\n    track.fromJson(_trackData);\n\n    if (_trackData.type === \"SAMPLER\" &&\n        track.getTrackType() === \"SAMPLER\") {\n        let sampler = track.getSamplers()[0];\n        for (let id in _trackData.samplers) {\n            let _sampler = _trackData.samplers[id];\n            let slices = _sampler.slices;\n            sampler.slice(0, slices[0].startTime, slices[0].endTime);\n            slices = slices.slice(1);\n            for (let slice of slices) {\n                sampler.newSlice(slice.startTime, slice.endTime);\n            }\n        }\n    } else if (_trackData.type === \"INSTRUMENT_RACK\" &&\n               track.getTrackType() === \"SAMPLER\") {\n        // then we need to convert this track to a thing\n    }\n\n    // MIDI EFFECTS!! and EFFECTS\n    let _midiEffects = subSequence.tracksMidiEffects[trackNumber];\n    track.midiEffects.effects = [];\n    track.midiEffects.fromJson(_midiEffects);\n\n    return _track.length;\n};\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {loadSampleFromProject} from 'utils/loadSampleFromProject.js';\nimport {getProjectsUsed} from 'utils/getProjectsUsed.js';\nimport {connect} from 'react-redux';\n\nconst SampleUsed = ({sample, sequencerEngine, initialShow=false}) => { \n    let [projects, setProjects] = useState([]);\n    let [show, setShow] = useState(initialShow);\n    let [selectedProject, setSelectedProject] = useState(undefined);\n    let [numPatterns, setNumPatterns] = useState(0);\n    let [selectedPattern, setSelectedPattern] = useState(0);\n\n    useEffect(() => {\n        getProjectsUsed(sample.ipfsHash).then(setProjects);\n    }, [setProjects, sample]);\n\n    const onClickProject = useCallback((e, project, patternNumber) => {\n        e.stopPropagation();\n        setSelectedProject(project);\n        loadSampleFromProject(sequencerEngine, sample, project, patternNumber)\n            .then(setNumPatterns);\n        setSelectedPattern(patternNumber || 0);\n    }, [setSelectedProject, sample, setNumPatterns, setSelectedPattern]);\n\n    return (\n        <div className=\"projects-used-in\">\n          {!initialShow ?\n           <div className=\"info\">\n             Used in {projects.length} <span onClick={() => setShow(!show)} className={show ? \"projects-btn showing\" : \"projects-btn\"}>projects</span>\n           </div> : ''}\n          {show ?\n           <div className=\"project-list\">\n             {projects.map(\n                 project =>\n                     <div\n                       onClick={(e) => onClickProject(e, project)} \n                       className={project === selectedProject ? \"selected project-option\" : \"project-option\"}>\n                       {project.title}\n                       {selectedProject === project ?\n                        <div className=\"patterns-chooser\">\n                          <div className=\"pattern-label\">\n                            Pattern: \n                          </div>\n                          {Array(numPatterns).fill(0).map(\n                              (x, i) =>\n                                  <div\n                                    onClick={(e) => onClickProject(e, project, i)}\n                                    className={selectedPattern === i ? \"pattern-btn selected\" : \"pattern-btn\"}>\n                                    {i+1}\n                                  </div>)}\n                        </div>: ''}\n                     </div>)}\n          </div>\n         : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SampleUsed);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport {useToggledWaveform} from 'components/v2/toggleWaveform.js';\nimport {TRACK_RECORD_ARM_BUTTON} from 'constants/contextual-help.js';\nimport Documented from 'components/help/Documented.js';\nimport TrackThumbnail from '../TrackThumbnail.js';\nimport {connect} from 'react-redux';\nimport {\n    setCirklonParameterSelected,\n    setShowTrackEffects,\n    setShowPianoRoll,\n    setArrangementBottomMode,\n} from 'actions/index.js';\n\nconst TrackOverview = ({\n    track,\n    isEnabled,\n    isFrozen,\n    isSelectedTrack,\n    setArrangementBottomMode,\n    setShowPianoRoll,\n    setShowEffects,\n    showName,\n    setShowParams,\n    mode,\n}) => { \n    let className = \"track-overview\";\n    if (isSelectedTrack) {\n        className += \" selected\";\n    }\n\n    const {toggleWaveform} = useToggledWaveform({\n        track,\n        isSelectedTrack,\n        sequencerEngine: track.sequencerEngine,\n        setArrangementBottomMode,\n        setShowPianoRoll,\n        mode\n    });\n\n    const onMouseOver = useCallback(() => {\n        if (track.sequencerEngine.state.keyboard.isMouseDown) {\n            track.toggleEnabled();\n        }\n    }, [track]);\n\n    return (\n        <div className={className}>\n          <div className=\"track-number\">\n            {track.trackNumber + 1}\n          </div>\n          <TrackThumbnail\n            showPresetName={showName}\n            onClickThumbnail={() => {\n                setShowEffects(false);\n                setShowParams(false);\n                track.sequencerEngine.selectTrack(track.trackNumber);\n                toggleWaveform();\n            }}\n            track={track}/>\n        {!isFrozen ? \n         <Documented element={TRACK_RECORD_ARM_BUTTON}>\n           <div\n             onMouseOver={onMouseOver}\n             onMouseDown={() => track.toggleEnabled()}\n             className={isEnabled ? \"dot enabled\" : \"dot\"}/>\n         </Documented>\n         : ''}\n        </div>);\n}\n\nconst mapStateToProps = (state, props) => {\n    let enabledMap = state.tracks.trackIsEnabled[props.track.subSequence.id] || {};\n    let isEnabled = enabledMap[props.track.id]; \n    let isSelectedTrack = state.mix.selectedTrack === props.track.trackNumber; \n    return {\n        isEnabled:  isEnabled === undefined ? false : isEnabled,\n        isSelectedTrack,\n        isFrozen: props.track.isFrozen\n    };\n};\n\nconst mapDispatchToProps = (dispatch, props) => {\n  return {\n      setShowEffects: (show) => dispatch(setShowTrackEffects(props.track.trackNumber, show)),\n      setShowPianoRoll: (show) => dispatch(setShowPianoRoll(show)),\n      setShowParams: param => dispatch(setCirklonParameterSelected(props.track.id, param)),\n      setArrangementBottomMode: mode => dispatch(setArrangementBottomMode(mode)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TrackOverview);\n","import React, { useEffect, useCallback, useState} from 'react';\nimport TrackOverview from './TrackOverview.js';\nimport {\n    connect} from 'react-redux';\nimport {\n    mouseDown\n} from 'actions/index.js';\n\n\nconst TracksOverview = ({sequencerEngine, mouseDown, mode, showName}) => { \n    let {tracks} = sequencerEngine;\n    if (!tracks || tracks.length === 0) {\n        return (<div></div>);\n    }\n    return (\n        <div\n          onClick={(e) => e.stopPropagation()}\n          onMouseDown={() => mouseDown(true)}\n          onMouseUp={() => mouseDown(false)}\n          onMouseLeave={() => mouseDown(false)}\n          className=\"tracks-overview\">\n          {tracks.map(\n              track =>\n                  <TrackOverview\n                    showName={showName}\n                    key={track.id}\n                    mode={mode}\n                    track={track}/>)}\n        </div>\n    );\n}\n\nconst mapStateToProps = (state, props) => {\n  return {\n      tracks: props.sequencerEngine.tracks,\n      numTracks: props.sequencerEngine.tracks && props.sequencerEngine.tracks.length,\n  };\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n      mouseDown: (m) =>\n          dispatch(mouseDown(m)),\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(TracksOverview);\n","import React, { Component } from 'react';\nimport { connect } from \"react-redux\";\nimport {setSelectedPreset, setPresetDragging} from 'actions/index.js';\nimport ethereum from 'decentralized/ethereum.js';\n\nconst MAX_LENGTH = 40;\n\nclass ItemComponent extends Component {\n    constructor(props) {\n        super(props);\n\n    }\n\n    onClick() {\n        let now = new Date().getTime();\n        if (this.lastDate !== undefined && now - this.lastDate < 500) {\n            // i.e. double click chooses the item\n            this.props.onChooseItem(this.props.item);\n        }\n        this.lastDate = now;\n        this.props.setSelectedPreset(this.props.item);\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n    }\n\n    onDragStart(e) {\n        this.props.setPresetDragging(this.props.item);\n    }\n\n    get name() {\n        if (this.props.item.name.length > MAX_LENGTH) {\n            return this.props.item.name.slice(0, MAX_LENGTH) + '...';\n        }\n        return this.props.item.name;\n    }\n\n    render() {\n        let style = {\n            paddingLeft: this.props.depth*17,\n        };\n\n        let className = this.props.selectedPreset === this.props.item ?\n            \"folder-item selected\" : \"folder-item\";\n        return (\n            <div\n              draggable={true}\n              onDragStart={(e) => this.onDragStart()}\n              onDragOver={(e) => this.onDragOver(e)}\n              onClick={() => this.onClick()}\n              className={className} style={style}>\n              <div\n                onClick={() => this.props.onTestItem(this.props.item)}\n                className=\"item-icon\"></div>\n              {this.name}\n            </div>    \n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedPreset: m => dispatch(setSelectedPreset(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        selectedPreset: state.presets.selectedPreset,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ItemComponent);\n\n","import React, { Component } from 'react';\nimport ethereum from 'decentralized/ethereum.js';\nimport { connect } from \"react-redux\";\nimport PulseLoader from 'react-spinners/PulseLoader'\nimport {\n    setSelectedFolder,\n    setFolderDragging,\n    setPresetDragging,\n    setHasChangesToFolders} from 'actions/index.js';\nimport ItemComponent from './ItemComponent.js';\nimport {  InputGroup, InputGroupAddon, InputGroupText, Input } from 'reactstrap';\nimport ConditionedComponent from 'components/ConditionedComponent.js';\n\nclass FolderComponent extends Component {\n    constructor(props) {\n        super(props);\n        \n        this.state = {\n            collapsed: true,\n            nameValue: '',\n            hovering: false,\n            loading: false,\n        };\n    }\n\n    async onClickCollapsed(e, collapsed) {\n        e.stopPropagation();\n\n        if (!collapsed) {\n            // check if its dynamic and unloaded first\n            if (this.props.folder.isDynamic() && !this.props.folder.isLoaded) {\n                this.setState({loading: true});\n                await this.props.folder.load();\n                this.setState({loading: false});\n            }\n        }\n\n        this.setState({\n            collapsed: collapsed\n        });\n\n        this.onClickName();\n    }\n\n    getArrow() {\n        if (this.state.collapsed) {\n            return (\n                <div\n                  onClick={(e) => this.onClickCollapsed(e, false)}\n                  className=\"collapse-button\">\n                  <div className=\"arrow-right\">\n                  </div>\n                </div>);\n        } else {\n            return (\n                <div\n                  onClick={(e) => this.onClickCollapsed(e, true)}\n                  className=\"collapse-button\">\n                  <div className=\"arrow-down\"\n                       onClick={(e) => this.onClickCollapsed(e, true)}>\n                  </div>\n                </div>);\n        }\n    }\n\n    onDrop(e) {\n        e.stopPropagation();\n        this.setState({hovering: false});\n        let folder = this.props.folderDragging;\n        let preset = this.props.presetDragging;\n        if (folder !== undefined) {\n            this.props.setFolderDragging(undefined);\n            if (this.props.folder === folder) {\n                return;\n            }\n            folder.delete();\n            this.props.folder.addFolder(folder);\n        } else if (preset !== undefined) {\n            preset.parent.deleteItem(preset);\n            this.props.setPresetDragging(undefined);\n            this.props.folder.addItem(preset);\n        }\n        this.props.onFoldersUpdated();\n        this.props.setHasChangesToFolders(true);\n    }\n\n    onClickName() {\n        let now = new Date().getTime();\n        if (this.lastDate !== undefined && now - this.lastDate < 200) {\n            // i.e. double click chooses the item\n            this.props.onChooseFolder(this.props.folder);\n        }\n        this.lastDate = now;\n\n        if (this.props.selectedFolder === this.props.folder) {\n            this.props.setSelectedFolder(undefined);\n        } else {\n            this.props.setSelectedFolder(this.props.folder);\n        }\n    }\n\n    onInputType(name) {\n        this.setState({\n            nameValue: name\n        });\n    }\n\n    onKeyDown(e) {\n        if (e.key === 'Enter') {\n            this.props.folder.name = this.state.nameValue;\n            this.setState(this.state);\n        }\n    }\n\n    getNameComponent() {\n        let folderNameClass =\n            this.props.selectedFolder === this.props.folder && this.props.folder.name ?\n            \"folder-name selected\" : \"folder-name\";\n\n        if (this.state.hovering) {\n            folderNameClass += ' hover';\n        }\n\n        return (\n            <div\n              draggable={true}\n              onDragOver={(e) => this.onDragOver(e)}\n              onDragStart={(e) => this.onDragStart(e)}\n              onDragLeave={(e) => this.onDragLeave(e)}\n              className={folderNameClass}>\n                {this.getArrow()}\n                <ConditionedComponent condition={this.props.folder.name}>\n                  <div\n                    className=\"name-label\"\n                    onClick={() => this.onClickName()}\n                    >\n                    {this.props.folder.name}\n                  </div>\n                </ConditionedComponent>\n                <ConditionedComponent condition={this.props.folder.name === undefined}>\n                 <input\n                  value={this.state.nameValue}\n                  onChange={(event) => this.onInputType(event.target.value)}\n                   onKeyDown={(event) => this.onKeyDown(event)}\n                  ref={(input) => { this.input = input; }} \n                  placeholder=\"Type name of folder\"\n                  className=\"tag-input\"/>\n                </ConditionedComponent>\n              </div>\n        );\n    }\n\n    onDragOver(e) {\n        e.preventDefault();\n        this.setState({\n            hovering: true});\n    }\n\n    onDragLeave(e) {\n        this.setState({\n            hovering: false\n        });\n    }\n\n    onDragStart(e) {\n        this.props.setFolderDragging(this.props.folder);\n    }\n\n    render() {\n        let subFolders = [... this.props.folder.subFolders];\n        subFolders.sort((a, b) => {\n            if (a.name === undefined || b.name === undefined) {\n                return 0;\n            }\n            return a.name.localeCompare(b.name);\n        });\n        let items = [...this.props.folder.items]\n            .filter(i => i.name !== undefined);\n        items.sort((a, b) => a.name.localeCompare(b.name));\n        let depth = this.props.folder.depth <= 1 ? 0 : 1;\n        let style = {\n            paddingLeft: depth*17,\n        };\n        if (depth === 0) {\n            depth = 1;\n        }\n\n        return (\n            <div\n              onDrop={(e) => this.onDrop(e)}\n              className=\"folder\" style={style}>\n              {this.getNameComponent()}\n             <ConditionedComponent condition={!this.state.collapsed}>\n                {subFolders.map(\n                    subFolder =>\n                        <FolderComponent\n                              key={subFolder.name}\n                              {... this.props}\n                              folder={subFolder}\n                          />)}\n              </ConditionedComponent>\n              <PulseLoader\n                loading={this.state.loading} \n                sizeUnit={\"px\"}\n                size={10}\n                color={'#123abc'}/>\n              <ConditionedComponent condition={this.props.showItems && !this.state.collapsed}>\n                {items.map(\n                    item =>\n                        <ItemComponent\n                           key={item.name}\n                           onChooseItem={this.props.onChooseItem}\n                           onTestItem={this.props.onTestItem}\n                           depth={depth}\n                           item={item}\n                        />)}\n              </ConditionedComponent>\n            </div>\n        );\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        setSelectedFolder: m => dispatch(setSelectedFolder(m)),\n        setFolderDragging: m => dispatch(setFolderDragging(m)),\n        setPresetDragging: m => dispatch(setPresetDragging(m)),\n        setHasChangesToFolders: m => dispatch(setHasChangesToFolders(m)),\n    };\n};\n\nconst mapStateToProps = state => {\n    return {\n        selectedFolder: state.presets.selectedFolder,\n        folderDragging: state.presets.folderDragging,\n        presetDragging: state.presets.presetDragging,\n        name: state.presets.selectedFolder !== undefined ? state.presets.selectedFolder.name : undefined,\n    }\n};\n\n\nexport default connect(mapStateToProps, mapDispatchToProps)(FolderComponent);\n\n"],"sourceRoot":""}